var content=function(e){"use strict";function t(e){return new Promise(((t,n)=>{chrome.runtime.sendMessage(e,(function(e){e&&e.error&&n(e),t(e)}))}))}function n(e,n){return t({action:"dlSendNotification",payload:{type:e,options:n}})}async function o(e){if(!chrome.tabs)return;const t=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.tabs.sendMessage(t[0].id,e)}const i=[{langCode:"AR",langCodeForSpeech:"ar-AR",langCodeForIta:"ar"},{langCode:"BG",langCodeForSpeech:"bg-BG",langCodeForIta:"bg"},{langCode:"CS",langCodeForSpeech:"cs-CZ",langCodeForIta:"cs"},{langCode:"DA",langCodeForSpeech:"da-DK",langCodeForIta:"da"},{langCode:"DE",langCodeForSpeech:"de-DE",supportsFormality:!0,langCodeForIta:"de"},{langCode:"EL",langCodeForSpeech:"el-GR",langCodeForIta:"el"},{langCode:"EN-GB",langCodeForSpeech:"en",voice:"Google UK English Male",langCodeForIta:"en-GB"},{langCode:"EN-US",langCodeForSpeech:"en",voice:"Google UK English Male",langCodeForIta:"en-US"},{langCode:"ES",langCodeForSpeech:"es-ES",voice:"Google espaÃ±ol",label:"ES",supportsFormality:!0,langCodeForIta:"es"},{langCode:"ET",langCodeForSpeech:"et",langCodeForIta:"et"},{langCode:"FI",langCodeForSpeech:"fi-FI",voice:"Satu",langCodeForIta:"fi"},{langCode:"FR",langCodeForSpeech:"fr-FR",voice:"Thomas",supportsFormality:!0,langCodeForIta:"fr"},{langCode:"HU",langCodeForSpeech:"hu-HU",langCodeForIta:"hu"},{langCode:"ID",langCodeForSpeech:"id-ID",langCodeForIta:"id"},{langCode:"IT",langCodeForSpeech:"it-IT",supportsFormality:!0,langCodeForIta:"it"},{langCode:"JA",langCodeForSpeech:"ja-JP",supportsFormality:!0,langCodeForIta:"ja"},{langCode:"KO",langCodeForSpeech:"ko-KR",langCodeForIta:"ko"},{langCode:"LT",langCodeForSpeech:"lt",langCodeForIta:"lt"},{langCode:"LV",langCodeForSpeech:"lv",langCodeForIta:"lv"},{langCode:"NB",langCodeForSpeech:"nb-NO",langCodeForIta:"nb"},{langCode:"NL",langCodeForSpeech:"nl-NL",voice:"Google Nederlands",label:"NL",supportsFormality:!0,langCodeForIta:"nl"},{langCode:"PL",langCodeForSpeech:"pl-PL",supportsFormality:!0,langCodeForIta:"pl"},{langCode:"PT-BR",langCodeForSpeech:"pt-PT",supportsFormality:!0,langCodeForIta:"pt-BR"},{langCode:"PT-PT",langCodeForSpeech:"pt-PT",supportsFormality:!0,langCodeForIta:"pt-PT"},{langCode:"RO",langCodeForSpeech:"ro-RO",langCodeForIta:"ro"},{langCode:"RU",langCodeForSpeech:"ru-RU",supportsFormality:!0,langCodeForIta:"ru"},{langCode:"SK",langCodeForSpeech:"sk-SK",langCodeForIta:"sk"},{langCode:"SL",langCodeForSpeech:"sl",langCodeForIta:"sl"},{langCode:"SV",langCodeForSpeech:"sv-SE",langCodeForIta:"sv"},{langCode:"TR",langCodeForSpeech:"tr-TR",langCodeForIta:"tr"},{langCode:"UK",langCodeForSpeech:"uk-UA",langCodeForIta:"uk"},{langCode:"ZH",langCodeForSpeech:"zh-CN",langCodeForIta:"zh-Hans"},{langCode:"ZH-HANT",langCodeForSpeech:"zh-HANT",langCodeForIta:"zh-Hant"}],r=["EN-GB","EN-US","EN","DE","FR","ES","PT-PT","PT-BR","PT","IT"],s=["EN-GB","EN-US","EN","DE"],a=["ES","FR","IT","PT","PT-BR","PT-PT"],l=1,c=2,d={none:"",ongoingTranslation:"ONGOING_TRANSLATION",isTranslationComplete:"IS_TRANLSATION_COMPLETE",showOriginal:"SHOW_ORIGINAL",ongoingAutoDetection:"ON_GOING_AUTODETECTION",anonymousUserMaxCharExceeded:"ANONYMOUS_USER_MAX_CHAR_EXCEEDED"},u="",p="ONGOING_WRITE",m=1,g=2,h="inline",f="automatic",_="manual",v="input",y={notLoggedIn:1,loggedInPro:2,loggedInFree:3},w=1500,b=5e3,E=2e3,S=2e3,T=1,x=3,$=4,C=1,k=2,L=3,I=1,A=2,M={enabled:1,disabled:2},R=[/[^.]+\.deepl\.com/g,/[^.]+\.figma\.com/g],O=[/docs.google\.com\/spreadsheets/g],N=[/[^.]+\.deepl\.com/g],D={deepl_inline_ui:{z_index:2147483650}},P={hintKeyboardShortcut:"HINT_KEYBOARD_SHORTCUT",inputTranslation:"INPUT_TRANSLATION",inlineTranslation:"INLINE_TRANSLATION",fullPageTranslation:"FULL_PAGE_TRANSLATION",accountSuccessfullyCreated:"ACCOUNT_SUCCESSFULLY_CREATED",successfullyLoggedIn:"SUCCESSFULLY_LOGGED_IN",glidesPreventAssetLoss:"GSLIDES_WARNING_TO_AVOID_ASSET_LOSS",showAdsForMSAddins:"SHOW_ADS_FOR_MS_ADDINS"},B={green_theme:"green_theme",warning_theme:"warning_theme",ads_theme:"ads_theme"},U={inlineTranslationTriggerIcon:"INLINE_TRANSLATION_TRIGGER_ICON",inlineTranslationSettingsIcon:"INLINE_TRANSLATION_SETTINGS_ICON",inlineTranslationSettingPopup:"INLINE_TRANSLATION_SETTING_POPUP",inputTranslationTriggerIcon:"INPUT_TRANSLATION_TRIGGER_ICON",inputImproveTriggerIcon:"INPUT_IMPROVE_TRIGGER_ICON",inputTranslationSettingsIcon:"INPUT_TRANSLATION_SETTINGS_ICON",inputTranslationSettingPopup:"INPUT_TRANSLATION_SETTING_POPUP",settingsPageFPT:"SETTINGS_PAGE_FPT",settingsPageReading:"SETTINGS_PAGE_READING",settingsPageWriting:"SETTINGS_PAGE_WRITING",settingsPageIntegrations:"SETTINGS_PAGE_INTEGRATIONS",fptHideModal:"FPT_HIDE_MODAL",inputTranslationReadMoreLink:"INPUT_TRANSLATION_READ_MORE_LINK",inlineTranslationReadMoreLink:"INLINE_TRANSLATION_READ_MORE_LINK",fptTranslationReadMoreLink:"FPT_TRANSLATION_READ_MORE_LINK",extensionHubToggleSwitch:"EXTENSION_HUB_TOGGLE_SWITCH",hubCustomizeShortcut:"HUB_CUSTOMIZE_SHORTCUT",hubLoginButton:"HUB_LOGIN_BUTTON",hubUpgradeToProLink:"HUB_UPGRADE_TO_PRO_LINK",hubTryProLink:"HUB_TRY_PRO_LINK",hubTryWriteProLink:"HUB_TRY_WRITE_PRO_LINK",settingsPageCustomizeShortcutButton:"SETTINGS_PAGE_CUSTOMIZE_SHORTCUT_BUTTON",hubFPTEnableCheckbox:"HUB_FPT_ENABLE_CHECKBOX",hubFPTDisableCheckbox:"HUB_FPT_DISABLE_CHECKBOX",deeplWriteIcon:"DEEPL_WRITE_ICON",gmailOnboardingPopup:"gmailOnboardingPopup",gmailOnboardingIcon:"gmailOnboardingIcon",gmailCharLimitLogin:"gmailCharLimitLogin",gmailFeedbackSurvey:"gmailFeedbackSurvey",hubViewIntegrations:"HUB_VIEW_INTEGRATIONS",hubCloseCustomizationsWidget:"HUB_CLOSE_CUSTOMIZATIONS_WIDGET",gslidesFeedbackSurvey:"GSLIDES_FEEDBACK_SURVEY",gslidesCharLimitLogin:"GSLIDES_CHAR_LIMIT_LOGIN",zendeskTryProLink:"ZENDESK_TRY_PRO_LINK",onboardingSignUp:"ONBOARDING_SIGN_UP",onboardingSkipSignUp:"ONBOARDING_SKIP_SIGN_UP",onboardingLoginLink:"ONBOARDING_LOGIN_LINK",onboardingSeeAllIntegrations:"ONBOARDING_SEE_ALL_INTEGRATIONS",iconToggleInHubTranslator:"ICON_TOGGLE_IN_HUB_TRANSLATOR",iconToggleInHubWrite:"ICON_TOGGLE_IN_HUB_WRITE",manageIconSettings:"MANAGE_ICON_SETTINGS",writeLanguageSwitchedInHub:"WRITE_LANGUAGE_SWITCHED_IN_HUB",writeLanguageSwitchedInSettings:"WRITE_LANGUAGE_SWITCHED_IN_SETTINGS"},z="trigger-translation",H="CLICK_ON_SHORTCUT_NOTIFICATION",F="CLICK_ON_INLINE_TRANSLATION_SHOW_ALTERNATIVES",W="CLICK_ON_INLINE_TRANSLATION_CLOSE_ICON",j="CLICK_ON_LOGOUT_MENU_ENTRY",q="CLICK_ON_REVIEW_WINDOW_CLOSE_ACTION",G={disablePerSite:"DISABLE_PER_SITE",disableEverywhere:"DISABLE_EVERYWHERE",enableEverywhere:"ENABLE_EVERYWHERE",enablePerSite:"ENABLE_PER_SITE"},V="INPUT_TRANSLATION",Y="INLINE_TRANSLATION",Z=1,K=2,X={unspecified:0,chrome:1,edge:2,local:3,firefox:4},J={chrome:"cofdbpoegempjloogbagkncekinflcnj",edge:"fancfknaplihpclbhbpclnmmjcjanbaf",local:"ocpdpnakdghopjcifldjidbdmfobmmoi",firefox:"firefox-extension@deepl.com"},Q={deepl:/^(.*\.)?deepl\.com$/gm,linguee:/^(.*\.)?linguee\.[a-z]{2,3}$/gm,google_translate:/^translate\.google\.com$/gm,gmail:/^mail\.google\.com$/gm},ee={word_365:"euc-word-edit.officeapps.live.com",power_point_365:"euc-powerpoint.officeapps.live.com"},te={word_365:"WacFrame_Word_0",power_point_365:"WacFrame_PowerPoint_0"},ne={initial:"INITIAL",feedback:"FEEDBACK",review:"REVIEW",gmail:"GMAIL",gslides:"GSLIDES",customer_segmentation:"CUSTOMER_SEGMENTATION",arabic_survey:"ARABIC_SURVEY"},oe={close_icon:1,deepl_icon:2,outside_click:3},ie={default:"DEFAULT",gdocs:"GDOCS",zendesk:"ZENDESK",whatsappWeb:"WHATSAPP_WEB",twitter:"TWITTER",gmail:"GMAIL",gslides:"GSLIDES",linkedIn:"LINKEDIN",youtube:"YOUTUBE"},re={translate:"translate",write:"write"},se=["script","style"],ae=["a","abbr","acronym","b","bdo","big","br","button","cite","code","dfn","em","i","img","input","kbd","label","map","object","q","samp","script","select","small","span","strong","sub","sup","textarea","time","tt","var","font"],le="OPEN_TICKET",ce="DETECT_TICKET_LANGUAGE",de="SWITCH_TICKET_LANGUAGE",ue="ENABLE_AUTOTRANSLATE",pe="DISABLE_AUTOTRANSLATE",me="TRANSLATE_MESSAGE",ge="TRANSLATE_INPUT",he="ERROR",fe="TICKET",_e="LIVE_CHAT",ve=50,ye={TRANSLATOR:"TRANSLATOR",WRITE:"WRITE",API:"API",DOC_TRANSLATOR:"DOC_TRANSLATOR"},we={free:"free",pro:"pro",none:"none"},be="TEXT_REFINEMENT_REQUEST",Ee="GDOCS_INSERT_COPY",Se="GDOCS_DISCARD_COPY",Te="GDOCS_CHAR_LIMIT_REACHED",xe="RESULT_ACCEPTED",$e="RESULT_REVERTED",Ce="ERROR",ke="RESULT_ACCEPTED",Le="RESULT_REVERTED",Ie="ALTERNATIVES_OPENED",Ae="SEGMENTATION_SELECTED",Me="ALTERNATIVE_SELECTED",Re="SHOWN",Oe="CLICKED",Ne={READING_VIEW_TRANSLATE:"READING_VIEW_TRANSLATE",COMPOSE_VIEW_TRANSLATE:"COMPOSE_VIEW_TRANSLATE",COMPOSE_VIEW_IMPROVE:"COMPOSE_VIEW_IMPROVE"},De="ANONYMOUS_USER_LIMIT_EXCEEDED",Pe="FREE_ACCOUNT_LIMIT_EXCEEDED",Be="WRITE_ANONYMOUS_USER_LIMIT_EXCEEDED",Ue="WRITE_FREE_ACCOUNT_LIMIT_EXCEEDED",ze="PRO_TRIAL",He="LOGIN",Fe="SIGNUP",We={ANONYMOUS:"ANONYMOUS",FREE:"FREE"},je={WORD:"word",SENTENCE:"sentence"},qe=["JA","ZH"],Ge={none:"None",pro:"Pro",free:"Free"},Ve=["simple","business","academic","casual"],Ye=["enthusiastic","friendly","confident","diplomatic"],Ze=(e,t)=>{if(!e)throw new Error("No settings supplied to getServiceType");if(!Object.keys(ye).includes(t))throw new Error("Unidentified service name supplied to getServiceType");if(!e.isLoggedIn)return we.free;switch(t){case ye.TRANSLATOR:return e.translatorServiceType;case ye.WRITE:return e.writeServiceType;case ye.API:return e.apiServiceType;case ye.DOC_TRANSLATOR:return e.docTranslatorServiceType}},Ke=(e,t)=>Ze(e,t)===we.pro,Xe=(e,t)=>Ze(e,t)===we.free,Je=(e,t)=>Ze(e,t)===we.none,Qe=e=>!!e.isLoggedIn&&Xe(e,ye.WRITE),et=(e,t)=>e.isLoggedIn&&Xe(e,t),tt={chrome:"Chrome",edge:"Edge",brave:"Brave",firefox:"Firefox",opera:"Opera",safari:"Safari"};function nt(){return!!window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches}function ot(e,t){let n;try{switch(e){case tt.chrome:case tt.brave:n=t.split("Chrome/")[1].split(" ")[0];break;case tt.edge:n=t.split("Edg/")[1].split(" ")[0];break;case tt.firefox:n=t.split("Firefox/")[1].split(" ")[0];break;case tt.opera:n=t.split("OPR/")[1].split(" ")[0];break;case tt.safari:n=t.split("Version/")[1].split(" ")[0]}}catch(t){console.error(`Could not get the browsers (${e}) version from user agent`,t)}try{!n&&navigator?.userAgentData&&function(e){return e===tt.chrome||e===tt.edge||e===tt.brave||e===tt.opera}(e)&&(n=it(e).version)}catch(t){console.error(`Could not get the chromium browsers (${e}) version`,t)}return n&&"string"==typeof n?n:"unknown_browser_version"}function it(e){if(!navigator.userAgentData||!e)return;const t=new RegExp(`${e}`,"i");return navigator.userAgentData.brands.filter((e=>t.test(e.brand)))[0]}function rt(){const e=navigator?.userAgent||"unknown_user_agent",t=navigator?.userAgentData?.platform||navigator?.platform||"unknown_platform";let n="unknown_browser",o="unknown_browser_version";const i=navigator?.language||"unknown_browser_language";try{const t=e.match(/chrome|chromium|crios/i),i=e.match(/edg/i)||it(tt.edge),r=e.match(/firefox|fxios/i),s=e.match(/opr\//i)||it(tt.opera),a=e.match(/safari/i),l=it(tt.brave);t?(n=tt.chrome,i&&(n=tt.edge),s&&(n=tt.opera),l&&(n=tt.brave)):i?n=tt.edge:r?n=tt.firefox:s?n=tt.opera:a&&(n=tt.safari),o=ot(n,e)}catch(e){console.error("Could not get the name of the brower",e)}return{userAgent:e,platform:t,browser:n,browserVersion:o,browserLang:i}}function st(){if({IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.28.2",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.28.2",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.28.2",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.28.2",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.28.2",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.28.2",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.28.2",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.28.2",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.28.2",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365"},APP_VERSION:"1.28.2",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0,REVIEW_UI_WITH_ITA:!1,BATCH_TRANSLATE_HTML_REQUEST:!1}}.browserBuild)return{IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.28.2",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.28.2",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.28.2",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.28.2",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.28.2",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.28.2",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.28.2",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.28.2",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.28.2",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365"},APP_VERSION:"1.28.2",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0,REVIEW_UI_WITH_ITA:!1,BATCH_TRANSLATE_HTML_REQUEST:!1}}.browserBuild.toLowerCase()===tt.firefox.toLowerCase();const e=chrome.runtime.getURL("");return rt().browser===tt.firefox||/moz-extension:\/\//gm.test(e)}const at=()=>{const e=/(outlook\.office\.com|sharepoint\.com|microsoft|office)/,t=new URL(window.location.href);if(!e.test(t.origin))return!1;const n=t.origin.match(e);return!!n&&n[0]};var lt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ct={exports:{}};
/*! @license DOMPurify 3.1.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.6/LICENSE */
!function(e,t){e.exports=function(){const{entries:e,setPrototypeOf:t,isFrozen:n,getPrototypeOf:o,getOwnPropertyDescriptor:i}=Object;let{freeze:r,seal:s,create:a}=Object,{apply:l,construct:c}="undefined"!=typeof Reflect&&Reflect;r||(r=function(e){return e}),s||(s=function(e){return e}),l||(l=function(e,t,n){return e.apply(t,n)}),c||(c=function(e,t){return new e(...t)});const d=E(Array.prototype.forEach),u=E(Array.prototype.pop),p=E(Array.prototype.push),m=E(String.prototype.toLowerCase),g=E(String.prototype.toString),h=E(String.prototype.match),f=E(String.prototype.replace),_=E(String.prototype.indexOf),v=E(String.prototype.trim),y=E(Object.prototype.hasOwnProperty),w=E(RegExp.prototype.test),b=S(TypeError);function E(e){return function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return l(e,t,o)}}function S(e){return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return c(e,n)}}function T(e,o){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;t&&t(e,null);let r=o.length;for(;r--;){let t=o[r];if("string"==typeof t){const e=i(t);e!==t&&(n(o)||(o[r]=e),t=e)}e[t]=!0}return e}function x(e){for(let t=0;t<e.length;t++)y(e,t)||(e[t]=null);return e}function $(t){const n=a(null);for(const[o,i]of e(t))y(t,o)&&(Array.isArray(i)?n[o]=x(i):i&&"object"==typeof i&&i.constructor===Object?n[o]=$(i):n[o]=i);return n}function C(e,t){for(;null!==e;){const n=i(e,t);if(n){if(n.get)return E(n.get);if("function"==typeof n.value)return E(n.value)}e=o(e)}function n(){return null}return n}const k=r(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),L=r(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),I=r(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),A=r(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),M=r(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),R=r(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),O=r(["#text"]),N=r(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),D=r(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),P=r(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),B=r(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),U=s(/\{\{[\w\W]*|[\w\W]*\}\}/gm),z=s(/<%[\w\W]*|[\w\W]*%>/gm),H=s(/\${[\w\W]*}/gm),F=s(/^data-[\-\w.\u00B7-\uFFFF]/),W=s(/^aria-[\-\w]+$/),j=s(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),q=s(/^(?:\w+script|data):/i),G=s(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),V=s(/^html$/i),Y=s(/^[a-z][.\w]*(-[.\w]+)+$/i);var Z=Object.freeze({__proto__:null,MUSTACHE_EXPR:U,ERB_EXPR:z,TMPLIT_EXPR:H,DATA_ATTR:F,ARIA_ATTR:W,IS_ALLOWED_URI:j,IS_SCRIPT_OR_DATA:q,ATTR_WHITESPACE:G,DOCTYPE_NAME:V,CUSTOM_ELEMENT:Y});const K={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},X=function(){return"undefined"==typeof window?null:window},J=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const o="data-tt-policy-suffix";t&&t.hasAttribute(o)&&(n=t.getAttribute(o));const i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+i+" could not be created."),null}};function Q(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X();const n=e=>Q(e);if(n.version="3.1.6",n.removed=[],!t||!t.document||t.document.nodeType!==K.document)return n.isSupported=!1,n;let{document:o}=t;const i=o,s=i.currentScript,{DocumentFragment:l,HTMLTemplateElement:c,Node:E,Element:S,NodeFilter:x,NamedNodeMap:U=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:z,DOMParser:H,trustedTypes:F}=t,W=S.prototype,q=C(W,"cloneNode"),G=C(W,"remove"),Y=C(W,"nextSibling"),ee=C(W,"childNodes"),te=C(W,"parentNode");if("function"==typeof c){const e=o.createElement("template");e.content&&e.content.ownerDocument&&(o=e.content.ownerDocument)}let ne,oe="";const{implementation:ie,createNodeIterator:re,createDocumentFragment:se,getElementsByTagName:ae}=o,{importNode:le}=i;let ce={};n.isSupported="function"==typeof e&&"function"==typeof te&&ie&&void 0!==ie.createHTMLDocument;const{MUSTACHE_EXPR:de,ERB_EXPR:ue,TMPLIT_EXPR:pe,DATA_ATTR:me,ARIA_ATTR:ge,IS_SCRIPT_OR_DATA:he,ATTR_WHITESPACE:fe,CUSTOM_ELEMENT:_e}=Z;let{IS_ALLOWED_URI:ve}=Z,ye=null;const we=T({},[...k,...L,...I,...M,...O]);let be=null;const Ee=T({},[...N,...D,...P,...B]);let Se=Object.seal(a(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Te=null,xe=null,$e=!0,Ce=!0,ke=!1,Le=!0,Ie=!1,Ae=!0,Me=!1,Re=!1,Oe=!1,Ne=!1,De=!1,Pe=!1,Be=!0,Ue=!1;const ze="user-content-";let He=!0,Fe=!1,We={},je=null;const qe=T({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ge=null;const Ve=T({},["audio","video","img","source","image","track"]);let Ye=null;const Ze=T({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ke="http://www.w3.org/1998/Math/MathML",Xe="http://www.w3.org/2000/svg",Je="http://www.w3.org/1999/xhtml";let Qe=Je,et=!1,tt=null;const nt=T({},[Ke,Xe,Je],g);let ot=null;const it=["application/xhtml+xml","text/html"],rt="text/html";let st=null,at=null;const lt=o.createElement("form"),ct=function(e){return e instanceof RegExp||e instanceof Function},dt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!at||at!==e){if(e&&"object"==typeof e||(e={}),e=$(e),ot=-1===it.indexOf(e.PARSER_MEDIA_TYPE)?rt:e.PARSER_MEDIA_TYPE,st="application/xhtml+xml"===ot?g:m,ye=y(e,"ALLOWED_TAGS")?T({},e.ALLOWED_TAGS,st):we,be=y(e,"ALLOWED_ATTR")?T({},e.ALLOWED_ATTR,st):Ee,tt=y(e,"ALLOWED_NAMESPACES")?T({},e.ALLOWED_NAMESPACES,g):nt,Ye=y(e,"ADD_URI_SAFE_ATTR")?T($(Ze),e.ADD_URI_SAFE_ATTR,st):Ze,Ge=y(e,"ADD_DATA_URI_TAGS")?T($(Ve),e.ADD_DATA_URI_TAGS,st):Ve,je=y(e,"FORBID_CONTENTS")?T({},e.FORBID_CONTENTS,st):qe,Te=y(e,"FORBID_TAGS")?T({},e.FORBID_TAGS,st):{},xe=y(e,"FORBID_ATTR")?T({},e.FORBID_ATTR,st):{},We=!!y(e,"USE_PROFILES")&&e.USE_PROFILES,$e=!1!==e.ALLOW_ARIA_ATTR,Ce=!1!==e.ALLOW_DATA_ATTR,ke=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Le=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Ie=e.SAFE_FOR_TEMPLATES||!1,Ae=!1!==e.SAFE_FOR_XML,Me=e.WHOLE_DOCUMENT||!1,Ne=e.RETURN_DOM||!1,De=e.RETURN_DOM_FRAGMENT||!1,Pe=e.RETURN_TRUSTED_TYPE||!1,Oe=e.FORCE_BODY||!1,Be=!1!==e.SANITIZE_DOM,Ue=e.SANITIZE_NAMED_PROPS||!1,He=!1!==e.KEEP_CONTENT,Fe=e.IN_PLACE||!1,ve=e.ALLOWED_URI_REGEXP||j,Qe=e.NAMESPACE||Je,Se=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&ct(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Se.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&ct(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Se.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Se.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ie&&(Ce=!1),De&&(Ne=!0),We&&(ye=T({},O),be=[],!0===We.html&&(T(ye,k),T(be,N)),!0===We.svg&&(T(ye,L),T(be,D),T(be,B)),!0===We.svgFilters&&(T(ye,I),T(be,D),T(be,B)),!0===We.mathMl&&(T(ye,M),T(be,P),T(be,B))),e.ADD_TAGS&&(ye===we&&(ye=$(ye)),T(ye,e.ADD_TAGS,st)),e.ADD_ATTR&&(be===Ee&&(be=$(be)),T(be,e.ADD_ATTR,st)),e.ADD_URI_SAFE_ATTR&&T(Ye,e.ADD_URI_SAFE_ATTR,st),e.FORBID_CONTENTS&&(je===qe&&(je=$(je)),T(je,e.FORBID_CONTENTS,st)),He&&(ye["#text"]=!0),Me&&T(ye,["html","head","body"]),ye.table&&(T(ye,["tbody"]),delete Te.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw b('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw b('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ne=e.TRUSTED_TYPES_POLICY,oe=ne.createHTML("")}else void 0===ne&&(ne=J(F,s)),null!==ne&&"string"==typeof oe&&(oe=ne.createHTML(""));r&&r(e),at=e}},ut=T({},["mi","mo","mn","ms","mtext"]),pt=T({},["foreignobject","annotation-xml"]),mt=T({},["title","style","font","a","script"]),gt=T({},[...L,...I,...A]),ht=T({},[...M,...R]),ft=function(e){let t=te(e);t&&t.tagName||(t={namespaceURI:Qe,tagName:"template"});const n=m(e.tagName),o=m(t.tagName);return!!tt[e.namespaceURI]&&(e.namespaceURI===Xe?t.namespaceURI===Je?"svg"===n:t.namespaceURI===Ke?"svg"===n&&("annotation-xml"===o||ut[o]):Boolean(gt[n]):e.namespaceURI===Ke?t.namespaceURI===Je?"math"===n:t.namespaceURI===Xe?"math"===n&&pt[o]:Boolean(ht[n]):e.namespaceURI===Je?!(t.namespaceURI===Xe&&!pt[o])&&!(t.namespaceURI===Ke&&!ut[o])&&!ht[n]&&(mt[n]||!gt[n]):!("application/xhtml+xml"!==ot||!tt[e.namespaceURI]))},_t=function(e){p(n.removed,{element:e});try{te(e).removeChild(e)}catch(t){G(e)}},vt=function(e,t){try{p(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){p(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!be[e])if(Ne||De)try{_t(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},yt=function(e){let t=null,n=null;if(Oe)e="<remove></remove>"+e;else{const t=h(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===ot&&Qe===Je&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const i=ne?ne.createHTML(e):e;if(Qe===Je)try{t=(new H).parseFromString(i,ot)}catch(e){}if(!t||!t.documentElement){t=ie.createDocument(Qe,"template",null);try{t.documentElement.innerHTML=et?oe:i}catch(e){}}const r=t.body||t.documentElement;return e&&n&&r.insertBefore(o.createTextNode(n),r.childNodes[0]||null),Qe===Je?ae.call(t,Me?"html":"body")[0]:Me?t.documentElement:r},wt=function(e){return re.call(e.ownerDocument||e,e,x.SHOW_ELEMENT|x.SHOW_COMMENT|x.SHOW_TEXT|x.SHOW_PROCESSING_INSTRUCTION|x.SHOW_CDATA_SECTION,null)},bt=function(e){return e instanceof z&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof U)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},Et=function(e){return"function"==typeof E&&e instanceof E},St=function(e,t,o){ce[e]&&d(ce[e],(e=>{e.call(n,t,o,at)}))},Tt=function(e){let t=null;if(St("beforeSanitizeElements",e,null),bt(e))return _t(e),!0;const o=st(e.nodeName);if(St("uponSanitizeElement",e,{tagName:o,allowedTags:ye}),e.hasChildNodes()&&!Et(e.firstElementChild)&&w(/<[/\w]/g,e.innerHTML)&&w(/<[/\w]/g,e.textContent))return _t(e),!0;if(e.nodeType===K.progressingInstruction)return _t(e),!0;if(Ae&&e.nodeType===K.comment&&w(/<[/\w]/g,e.data))return _t(e),!0;if(!ye[o]||Te[o]){if(!Te[o]&&$t(o)){if(Se.tagNameCheck instanceof RegExp&&w(Se.tagNameCheck,o))return!1;if(Se.tagNameCheck instanceof Function&&Se.tagNameCheck(o))return!1}if(He&&!je[o]){const t=te(e)||e.parentNode,n=ee(e)||e.childNodes;if(n&&t)for(let o=n.length-1;o>=0;--o){const i=q(n[o],!0);i.__removalCount=(e.__removalCount||0)+1,t.insertBefore(i,Y(e))}}return _t(e),!0}return e instanceof S&&!ft(e)?(_t(e),!0):"noscript"!==o&&"noembed"!==o&&"noframes"!==o||!w(/<\/no(script|embed|frames)/i,e.innerHTML)?(Ie&&e.nodeType===K.text&&(t=e.textContent,d([de,ue,pe],(e=>{t=f(t,e," ")})),e.textContent!==t&&(p(n.removed,{element:e.cloneNode()}),e.textContent=t)),St("afterSanitizeElements",e,null),!1):(_t(e),!0)},xt=function(e,t,n){if(Be&&("id"===t||"name"===t)&&(n in o||n in lt))return!1;if(Ce&&!xe[t]&&w(me,t));else if($e&&w(ge,t));else if(!be[t]||xe[t]){if(!($t(e)&&(Se.tagNameCheck instanceof RegExp&&w(Se.tagNameCheck,e)||Se.tagNameCheck instanceof Function&&Se.tagNameCheck(e))&&(Se.attributeNameCheck instanceof RegExp&&w(Se.attributeNameCheck,t)||Se.attributeNameCheck instanceof Function&&Se.attributeNameCheck(t))||"is"===t&&Se.allowCustomizedBuiltInElements&&(Se.tagNameCheck instanceof RegExp&&w(Se.tagNameCheck,n)||Se.tagNameCheck instanceof Function&&Se.tagNameCheck(n))))return!1}else if(Ye[t]);else if(w(ve,f(n,fe,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==_(n,"data:")||!Ge[e])if(ke&&!w(he,f(n,fe,"")));else if(n)return!1;return!0},$t=function(e){return"annotation-xml"!==e&&h(e,_e)},Ct=function(e){St("beforeSanitizeAttributes",e,null);const{attributes:t}=e;if(!t)return;const o={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:be};let i=t.length;for(;i--;){const r=t[i],{name:s,namespaceURI:a,value:l}=r,c=st(s);let p="value"===s?l:v(l);if(o.attrName=c,o.attrValue=p,o.keepAttr=!0,o.forceKeepAttr=void 0,St("uponSanitizeAttribute",e,o),p=o.attrValue,Ae&&w(/((--!?|])>)|<\/(style|title)/i,p)){vt(s,e);continue}if(o.forceKeepAttr)continue;if(vt(s,e),!o.keepAttr)continue;if(!Le&&w(/\/>/i,p)){vt(s,e);continue}Ie&&d([de,ue,pe],(e=>{p=f(p,e," ")}));const m=st(e.nodeName);if(xt(m,c,p)){if(!Ue||"id"!==c&&"name"!==c||(vt(s,e),p=ze+p),ne&&"object"==typeof F&&"function"==typeof F.getAttributeType)if(a);else switch(F.getAttributeType(m,c)){case"TrustedHTML":p=ne.createHTML(p);break;case"TrustedScriptURL":p=ne.createScriptURL(p)}try{a?e.setAttributeNS(a,s,p):e.setAttribute(s,p),bt(e)?_t(e):u(n.removed)}catch(e){}}}St("afterSanitizeAttributes",e,null)},kt=function e(t){let n=null;const o=wt(t);for(St("beforeSanitizeShadowDOM",t,null);n=o.nextNode();)St("uponSanitizeShadowNode",n,null),Tt(n)||(n.content instanceof l&&e(n.content),Ct(n));St("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=null,r=null,s=null,a=null;if(et=!e,et&&(e="\x3c!--\x3e"),"string"!=typeof e&&!Et(e)){if("function"!=typeof e.toString)throw b("toString is not a function");if("string"!=typeof(e=e.toString()))throw b("dirty is not a string, aborting")}if(!n.isSupported)return e;if(Re||dt(t),n.removed=[],"string"==typeof e&&(Fe=!1),Fe){if(e.nodeName){const t=st(e.nodeName);if(!ye[t]||Te[t])throw b("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof E)o=yt("\x3c!----\x3e"),r=o.ownerDocument.importNode(e,!0),r.nodeType===K.element&&"BODY"===r.nodeName||"HTML"===r.nodeName?o=r:o.appendChild(r);else{if(!Ne&&!Ie&&!Me&&-1===e.indexOf("<"))return ne&&Pe?ne.createHTML(e):e;if(o=yt(e),!o)return Ne?null:Pe?oe:""}o&&Oe&&_t(o.firstChild);const c=wt(Fe?e:o);for(;s=c.nextNode();)Tt(s)||(s.content instanceof l&&kt(s.content),Ct(s));if(Fe)return e;if(Ne){if(De)for(a=se.call(o.ownerDocument);o.firstChild;)a.appendChild(o.firstChild);else a=o;return(be.shadowroot||be.shadowrootmode)&&(a=le.call(i,a,!0)),a}let u=Me?o.outerHTML:o.innerHTML;return Me&&ye["!doctype"]&&o.ownerDocument&&o.ownerDocument.doctype&&o.ownerDocument.doctype.name&&w(V,o.ownerDocument.doctype.name)&&(u="<!DOCTYPE "+o.ownerDocument.doctype.name+">\n"+u),Ie&&d([de,ue,pe],(e=>{u=f(u,e," ")})),ne&&Pe?ne.createHTML(u):u},n.setConfig=function(){dt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Re=!0},n.clearConfig=function(){at=null,Re=!1},n.isValidAttribute=function(e,t,n){at||dt({});const o=st(e),i=st(t);return xt(o,i,n)},n.addHook=function(e,t){"function"==typeof t&&(ce[e]=ce[e]||[],p(ce[e],t))},n.removeHook=function(e){if(ce[e])return u(ce[e])},n.removeHooks=function(e){ce[e]&&(ce[e]=[])},n.removeAllHooks=function(){ce={}},n}var ee=Q();return ee}()}(ct);const dt=(e,t={})=>ct.exports.sanitize(e,{USE_PROFILES:{html:!0},...t}),ut=()=>{const e=new URL(window.location.href);return"https:"===e.protocol&&"docs.google.com"===e.hostname&&"/document/"===e.pathname.slice(0,10)},pt=()=>{const e=document.querySelector(".docs-texteventtarget-iframe")?.contentWindow;return{iFrame:e,editable:e&&e.document.querySelector("[contenteditable=true]")}},mt=()=>{const{iFrame:e,editable:t}=pt();if(!e||!t)return;const n=new e.ClipboardEvent("copy",{bubbles:!0,clipboardData:new e.DataTransfer});t.dispatchEvent(n)},gt=()=>{const{iFrame:e,editable:t}=pt();if(!e||!t)return;const n=new e.CustomEvent("copy",{bubbles:!0});t.dispatchEvent(n);const o=(e=>{if(0===e.length)return!0;for(let t=0;t<e.length;t++)if(8203!==e.charCodeAt(t))return!1;return!0})(t.innerText.trim());return{html:o?"":dt(t.innerHTML),text:o?"":t.innerText}},ht=()=>{const e=document.querySelector("deepl-gdocs-icon")?.shadowRoot.querySelector(".dl-gdocs-icon");if(!e)return void console.error("GDocs Icon was not present while trying to get the coordinates");const t=e.getBoundingClientRect(),n=document.body.parentNode.getBoundingClientRect(),{top:o,left:i,right:r,bottom:s,height:a,width:l}=t;return{x:i-n.left,y:s-n.top,selectedTop:o,selectedBottom:s,selectedRight:n.width-r,selectedLeft:i+window.scrollX,selectedWidth:l,height:a}},ft=()=>{const e=document.querySelector("#docs-instant-bubble"),t=document.querySelector(".kix-appview-editor"),n=document.querySelector(".kix-page-paginated"),o=120,i=40,r=t.getBoundingClientRect();let s=!1;const a={top:0,left:0};try{if(!e)throw new Error;const t=e.getBoundingClientRect();if(t.left<=0)throw new Error;const n=Math.round(t.top+134||0);a.left=t.left,a.top=n?n+20:0,a.top+o/2<r.top+10&&(a.top=r.top+10),a.top-o/2>r.bottom&&(s=!0)}catch(e){if(n){const e=n.getBoundingClientRect();a.left=e.right-i/2,a.top=r.top+30}}return a.left+i/2>r.right&&(s=!0),{shouldBeOutOfViewport:s,newPosition:a}},_t=()=>!!document.querySelector("#docs-toolbar-wrapper"),vt=e=>{const t=e.clipboardData.getData("application/x-vnd.google-docs-document-slice-clip+wrapped"),n=JSON.parse(t),o=JSON.parse(n.data).resolved,i=[];let r="";for(let e=0;e<o.dsl_spacers.length;e++){const t=o.dsl_spacers[e];o.dsl_styleslices.forEach((t=>{if(t.stsl_styles.length>0&&t.stsl_styles[e]){const n=`a${i.length+1}`;i.push({entity_type:t.stsl_type,entity_abbreviation:n,entity:t.stsl_styles[e]}),r+=`<${n}>`}})),r+=t}const s=[],a=r.split("\n").map((e=>{const t=e.replace(/<a\d+>/g,"").trim().length>0;if(t){const{leading:n,trailing:o,processedLine:i}=yt(e);return s.push(i),{isTranslatable:t,index:s.length-1,leading:n,trailing:o}}return{isTranslatable:t,line:e}}));return{textLines:s,entities:i,contentReference:a,originalObject:n,originalText:o.dsl_spacers}},yt=e=>{const{leadingEntities:t,processedLine:n}=wt(e),{trailingEntities:o,processedLine:i}=bt(n);return{leading:t,trailing:o,processedLine:i}},wt=e=>{let t="",n="",o="",i=!0;for(const r of e){if(i){const e=o[o.length-1];if("<"===r&&0===o.length){o="<";continue}if(">"===r&&o.length>0&&e.match(/\d/)){t=t+o+">",o="";continue}if("a"===r&&o.length>0&&"<"===e){o+="a";continue}if(r.match(/\d/)&&o.length>0&&("a"===e||e.match(/\d/))){o+=r;continue}if(Et(r)&&0===o.length){t+=r;continue}i=!1,o=""}n+=r}return{processedLine:n,leadingEntities:t}},bt=e=>{let t="",n="",o="",i=!0;for(const r of e.split("").reverse()){if(i){if(">"===r&&0===o.length){o=">";continue}if("<"===r&&o.length>0&&"a"===o[0]){t="<"+o+t,o="";continue}if("a"===r&&o.length>0&&o[0].match(/\d/)){o="a"+o;continue}if(r.match(/\d/)&&o.length>0&&(">"===o[0]||o[0].match(/\d/))){o=r+o;continue}if(Et(r)&&0===o.length){t=r+t;continue}i=!1,o=""}n=r+n}return{processedLine:n,trailingEntities:t}},Et=e=>[16,17,18,28].includes(e.charCodeAt(0)),St=({textLines:e,entities:t,contentReference:n})=>{let o=n.map((t=>t.isTranslatable?`${t.leading}${Array.isArray(e[t.index])?e[t.index].join(""):e[t.index]}${t.trailing}`:t.line)).join("\n");o=o.replace(/<\/a(\d+)>/g,"<a$1>");let i="",r=[],s=0,a=0;for(;s+a<o.length;){const e=s+a;if("<"===o[e]&&"a"===o[e+1]){let n="<a",i=!0,l=!1,c=!0;for(;c;){const t=o[e+n.length];">"===t?(n+=t,l||(i=!1),c=!1):t.match(/\d/)?(n+=t,l=!0):(i=!1,c=!1)}if(i){a+=n.length;const e=t.find((e=>`<${e.entity_abbreviation}>`===n));r.push({...e,new_position:s});continue}}i+=o[e],s++}return{processedText:i,processedEntities:r}},Tt=e=>e.replace(/<(\/)?a(\d+)>/g,""),xt=e=>{const{characterMappings:t,cleanSentence:n}=Ct(e),o=/[^\s.,:;!?"()*ï½ï½ ï½¡ï½¢ï½£ï½¤ï½¥ããããããããããããããããããããããã ãª ã« ã¬ ã­]/,i=[];let r="",s=0,a=!1;for(let e=0;e<n.length;e++){const l=n[e],c=o.test(l);c!==a&&r.length>0&&(i.push({text:r,isWord:a,offsetStart:s,offsetLength:r.length,offsetStartRaw:t[s],offsetLengthRaw:t[s+r.length]}),r=""),a=c,r+=l,1===r.length&&(s=e)}return r&&i.push({text:r,isWord:a,offsetStart:s,offsetLength:r.length,offsetStartRaw:t[s],offsetLengthRaw:t[s+r.length]}),i},$t=({entities:e,text:t,originalObject:n})=>{const o=kt({entities:e,text:t,originalObject:n});Lt(o)},Ct=e=>{const t=[];let n="";const o=e.split(/(<a\d+>)/g);let i=0;for(let e=0;e<o.length;e++){const r=o[e];if(!/^<a\d+>$/.test(r)){n+=r;for(let e=0;e<r.length;e++)t.push(i+e)}i+=r.length}return{characterMappings:t,cleanSentence:n}},kt=({entities:e,text:t,originalObject:n})=>{const o=JSON.parse(n.data),i=o.resolved.dsl_styleslices.map((t=>{const n=e.filter((e=>e.entity_type===t.stsl_type));if(0===n.length)return t;const o={};let i=0;n.forEach((e=>{i=e.new_position>i?e.new_position:i,o[`${e.new_position}`]=e.entity}));const r=[];for(let e=0;e<=i;e++)r.push(o[`${e}`]||null);return{...t,stsl_styles:r}})),r={...o.resolved,dsl_spacers:t,dsl_styleslices:i},s={...n,data:JSON.stringify({...o,resolved:r})};return JSON.stringify(s)},Lt=e=>{const{editable:t}=pt();let n;const o="application/x-vnd.google-docs-document-slice-clip+wrapped";if(st())n=new ClipboardEvent("paste",{dataType:o,data:e});else{const t=new DataTransfer;t.setData(o,e),n=new ClipboardEvent("paste",{bubbles:!0,clipboardData:t})}t.dispatchEvent(n)};function It(e){return!!e&&(["EN"].includes(e)?e="EN-GB":["PT"].includes(e)&&(e="PT-PT"),i.map((e=>e.langCode)).includes(e))}const At=e=>e.substring(0,2).toUpperCase();async function Mt(e,t=!1){let n="";const o=await chrome.i18n.detectLanguage(e);return o&&o.languages?.length>0&&(n=o.languages.sort(((e,t)=>t.percentage-e.percentage))[0].language.substr(0,2).toUpperCase()),t?{langCode:n,isReliable:o.isReliable,detectedLanguages:o.languages.sort(((e,t)=>t.percentage-e.percentage)).map((e=>({langCode:e.language.substr(0,2).toUpperCase(),percentage:e.percentage})))}:n}const Rt=()=>{let e,t,n=!1;return i.map((o=>{let i;return n=["EN-US","EN-GB","PT-PT","PT-BR","ZH-HANT"].includes(o.langCode),n&&(({optionLabel:e,selectedLabel:t}=function(e){switch(e.langCode){case"EN-US":return{optionLabel:chrome.i18n.getMessage("supported_languages_EN_US"),selectedLabel:chrome.i18n.getMessage("selected_languages_EN_US")};case"EN-GB":return{optionLabel:chrome.i18n.getMessage("supported_languages_EN_UK"),selectedLabel:chrome.i18n.getMessage("selected_languages_EN_UK")};case"PT-PT":return{optionLabel:chrome.i18n.getMessage("supported_languages_PT_PT"),selectedLabel:chrome.i18n.getMessage("selected_languages_PT_PT")};case"PT-BR":return{optionLabel:chrome.i18n.getMessage("supported_languages_PT_BR"),selectedLabel:chrome.i18n.getMessage("selected_languages_PT_BR")};case"ZH-HANT":return{optionLabel:chrome.i18n.getMessage("supported_languages_ZH_HANT"),selectedLabel:chrome.i18n.getMessage("supported_languages_ZH_HANT")};default:return{optionLabel:chrome.i18n.getMessage("supported_languages_undefined"),selectedLabel:chrome.i18n.getMessage("supported_languages_undefined")}}}(o)),i=o.langCode.slice(0,2).toLowerCase()+o.langCode.slice(2)),{value:o.langCode,label:n?e:chrome.i18n.getMessage(`supported_languages_${o.langCode}`),selectedOptionLabel:n?t:chrome.i18n.getMessage(`supported_languages_${o.langCode}`),regionalVariant:i}})).sort(((e,t)=>e.label.localeCompare(t.label,chrome.i18n.getUILanguage())))};function Ot(e){return"EN"===e?"EN-GB":"PT"===e?"PT-PT":e}function Nt(e,t,n){return"EN"===e?t["EN-GB"]===n||t["EN-US"]===n:"PT"===e?t["PT-PT"]===n||t["PT-BR"]===n:t[e]===n}const Dt=e=>r.includes(e?.substr(0,2).toUpperCase()),Pt=e=>{const t=i.find((t=>t.langCode===e));return t&&t.supportsFormality},Bt=e=>{const t=e||chrome.i18n.getUILanguage();return["ar","he","fa","ur"].includes(t.toLowerCase().substr(0,2))?"rtl":"ltr"};function Ut(e){if("rtl"===e.dir)return!0;return"rtl"===window.getComputedStyle(e).direction}const zt=()=>{const e="https://docs.google.com";return window.location.href.substr(0,23)===e&&!!document.querySelector("#sketchy-hidden-iframe")},Ht=async()=>{const e=[],t=n=>{const o=[],i=[];for(let e=0;e<n.children.length;e++){const t=n.children[e];"text"===t.tagName.toLowerCase()?o.push(t):"g"===t.tagName.toLowerCase()&&i.push(t)}o.length>0&&e.push(o.map((e=>e.textContent)).join(" "));for(const e of i)t(e)},n=qt();if(n){t(n);const o=e.join("\n");return await Mt(o)}},Ft=async()=>{const e=qt(),t=document.querySelector("#canvas-container").getBoundingClientRect();if(e){const n=t.left-2,o=t.top-2,i=t.right+2,r=t.bottom+2,s=new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,view:window,clientX:n,clientY:o});e.dispatchEvent(s);for(let t=1;t<=10;t++){const s=new MouseEvent("mousemove",{bubbles:!0,cancelable:!0,view:window,clientX:n+t/10*(i-n),clientY:o+t/10*(r-o)});e.dispatchEvent(s),await new Promise((e=>setTimeout(e,25)))}const a=new MouseEvent("mouseup",{bubbles:!0,cancelable:!0,view:window,clientX:i,clientY:r});e.dispatchEvent(a)}},Wt=e=>{const t=[],n=[];for(const n of e){const e=n[0],o=n[1];if(15===e){const e=n[4];if(""===e.trim())continue;const i=t.find((e=>e.id===o));if(i)continue;const r={id:o,originalContent:e,translatedContent:"",sentencesIndexes:[],originalSentences:[],translatedSentences:[],modifiers:[],secondaryModifiers:[],entity:n,orphanModifiers:[],orphanModifiersIntegrityCheck:[]};t.push(r)}else if(17===e){const e=t.find((e=>e.id===o));if(!e)continue;e.modifiers.push(n)}else if(41===e){const e=t.find((e=>e.id===o));if(!e)continue;e.secondaryModifiers.push(n)}}for(let e=0;e<t.length;e++){const o=t[e];o.orphanModifiers=Gt(o);const{originalSentences:i,orphanModifiersIntegrityCheck:r}=Zt(o);o.originalSentences=i,o.orphanModifiersIntegrityCheck=r;for(const e of o.originalSentences)o.sentencesIndexes.push(n.length),n.push(e)}return{entities:t,sentencesToTranslate:n}},jt=({entity:e,translatedSentences:t,modifiersToDelete:n})=>{e.translatedSentences=e.sentencesIndexes.map((e=>t[e]));const{translatedContent:o,orphanModifiersMappingEquivalences:i}=Kt(e);if(e.translatedContent=o,!e.translatedContent||e.translatedContent===e.originalContent)return;e.entity[4]=e.translatedContent;const r=Xt(i,e);for(let t=0;t<e.modifiers.length;t++){const o=e.modifiers[t];let i=!1;if(Jt(o,r)){const{start:e,end:t}=Qt(o,r);t<=e?i=!0:(o[3]=e,o[4]=t)}else i=!0;i&&n.push(o)}},qt=()=>Array.from(document.querySelectorAll("#pages svg")).find((e=>"none"!==getComputedStyle(e).display)),Gt=({originalContent:e,modifiers:t})=>{const n=Yt(e);return Vt(t).filter((e=>!n.includes(e)))},Vt=e=>{const t=[];for(const n of e)t.includes(n[3])||t.push(n[3]),t.includes(n[4])||t.push(n[4]);return t},Yt=e=>{const t=e.split("\n"),n=[0];let o=0;for(const e of t){const t=o+e.length;n.includes(t)||n.push(t),n.includes(t+1)||n.push(t+1),o=t+1}return n},Zt=({originalContent:e,orphanModifiers:t})=>{let n=0;const o={},i=e.split("\n").map((e=>{let i="";for(let r=0;r<e.length;r++){const s=n+r;if(t.includes(s)){const n=t.indexOf(s);/\s/.test(e[r])&&(o[`${n}`]=e[r]),i+=`<a${n}>`}i+=e[r]}return n+=e.length+1,i}));return{orphanModifiersIntegrityCheck:o,originalSentences:i}},Kt=e=>{let t={},n=0;return{translatedContent:e.translatedSentences.map((o=>{const i={};let r=0;const s=o.replace(/<a\d+>/g,((t,s)=>{const a=t.match(/<a(\d+)>/);if(a){const l=a[1],c=t.length,d=e.orphanModifiers[Number(l)];void 0!==d&&(i[`${d}`]=r+n+s-c*Object.keys(i).length);const u=o.charAt(s+c);if(u&&void 0!==e.orphanModifiersIntegrityCheck[`${l}`]&&e.orphanModifiersIntegrityCheck[`${l}`]!==u)return r++,e.orphanModifiersIntegrityCheck[`${l}`]}return""}));return t={...t,...i},n+=s.length+1,s})).join("\n"),orphanModifiersMappingEquivalences:t}},Xt=(e={},{originalContent:t,translatedContent:n})=>{const o=Yt(t),i=Yt(n),r={};for(let e=0;e<o.length;e++)r[`${o[e]}`]=i[e];return{...e,...r}},Jt=(e,t)=>{const n=e[3],o=e[4];return void 0!==t[`${n}`]&&void 0!==t[`${o}`]},Qt=(e,t)=>{const n=e[3],o=e[4];return{start:t[`${n}`],end:t[`${o}`]}},en=(e=25,t=null)=>new Promise((n=>setTimeout((()=>n(t)),e)));function tn(){return crypto.randomUUID()}const nn={prod:"production",dev:"development",test:"testing"};function on(){return nn.prod}function rn(){return on()===nn.dev}function sn(){return on()===nn.prod}const an=Object.prototype.toString;function ln(e){switch(an.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return yn(e,Error)}}function cn(e,t){return an.call(e)===`[object ${t}]`}function dn(e){return cn(e,"ErrorEvent")}function un(e){return cn(e,"DOMError")}function pn(e){return cn(e,"String")}function mn(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function gn(e){return null===e||mn(e)||"object"!=typeof e&&"function"!=typeof e}function hn(e){return cn(e,"Object")}function fn(e){return"undefined"!=typeof Event&&yn(e,Event)}function _n(e){return cn(e,"RegExp")}function vn(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function yn(e,t){try{return e instanceof t}catch(e){return!1}}function wn(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}function bn(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function En(e,t){let n=e;const o=n.length;if(o<=150)return n;t>o&&(t=o);let i=Math.max(t-60,0);i<5&&(i=0);let r=Math.min(i+140,o);return r>o-5&&(r=o),r===o&&(i=Math.max(r-140,0)),n=n.slice(i,r),i>0&&(n=`'{snip} ${n}`),r<o&&(n+=" {snip}"),n}function Sn(e,t){if(!Array.isArray(e))return"";const n=[];for(let t=0;t<e.length;t++){const o=e[t];try{wn(o)?n.push("[VueViewModel]"):n.push(String(o))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function Tn(e,t=[],n=!1){return t.some((t=>function(e,t,n=!1){return!!pn(e)&&(_n(t)?t.test(e):!!pn(t)&&(n?e===t:e.includes(t)))}(e,t,n)))}function xn(e,t,n=250,o,i,r,s){if(!(r.exception&&r.exception.values&&s&&yn(s.originalException,Error)))return;const a=r.exception.values.length>0?r.exception.values[r.exception.values.length-1]:void 0;var l,c;a&&(r.exception.values=(l=$n(e,t,i,s.originalException,o,r.exception.values,a,0),c=n,l.map((e=>(e.value&&(e.value=bn(e.value,c)),e)))))}function $n(e,t,n,o,i,r,s,a){if(r.length>=n+1)return r;let l=[...r];if(yn(o[i],Error)){Cn(s,a);const r=e(t,o[i]),c=l.length;kn(r,i,c,a),l=$n(e,t,n,o[i],i,[r,...l],r,c)}return Array.isArray(o.errors)&&o.errors.forEach(((o,r)=>{if(yn(o,Error)){Cn(s,a);const c=e(t,o),d=l.length;kn(c,`errors[${r}]`,d,a),l=$n(e,t,n,o,i,[c,...l],c,d)}})),l}function Cn(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function kn(e,t,n,o){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:o}}function Ln(e){return e&&e.Math==Math?e:void 0}const In="object"==typeof globalThis&&Ln(globalThis)||"object"==typeof window&&Ln(window)||"object"==typeof self&&Ln(self)||"object"==typeof global&&Ln(global)||function(){return this}()||{};function An(){return In}function Mn(e,t,n){const o=n||In,i=o.__SENTRY__=o.__SENTRY__||{};return i[e]||(i[e]=t())}const Rn=An(),On=80;function Nn(e,t={}){if(!e)return"<unknown>";try{let n=e;const o=5,i=[];let r=0,s=0;const a=" > ",l=a.length;let c;const d=Array.isArray(t)?t:t.keyAttrs,u=!Array.isArray(t)&&t.maxStringLength||On;for(;n&&r++<o&&(c=Dn(n,d),!("html"===c||r>1&&s+i.length*l+c.length>=u));)i.push(c),s+=c.length,n=n.parentNode;return i.reverse().join(a)}catch(e){return"<unknown>"}}function Dn(e,t){const n=e,o=[];let i,r,s,a,l;if(!n||!n.tagName)return"";if(Rn.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;o.push(n.tagName.toLowerCase());const c=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(c&&c.length)c.forEach((e=>{o.push(`[${e[0]}="${e[1]}"]`)}));else if(n.id&&o.push(`#${n.id}`),i=n.className,i&&pn(i))for(r=i.split(/\s+/),l=0;l<r.length;l++)o.push(`.${r[l]}`);const d=["aria-label","type","name","title","alt"];for(l=0;l<d.length;l++)s=d[l],a=n.getAttribute(s),a&&o.push(`[${s}="${a}"]`);return o.join("")}function Pn(){try{return Rn.document.location.href}catch(e){return""}}const Bn="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Un=["debug","info","warn","error","log","assert","trace"],zn={};function Hn(e){if(!("console"in In))return e();const t=In.console,n={},o=Object.keys(zn);o.forEach((e=>{const o=zn[e];n[e]=t[e],t[e]=o}));try{return e()}finally{o.forEach((e=>{t[e]=n[e]}))}}const Fn=function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return Bn?Un.forEach((n=>{t[n]=(...t)=>{e&&Hn((()=>{In.console[n](`Sentry Logger [${n}]:`,...t)}))}})):Un.forEach((e=>{t[e]=()=>{}})),t}(),Wn=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function jn(e,t=!1){const{host:n,path:o,pass:i,port:r,projectId:s,protocol:a,publicKey:l}=e;return`${a}://${l}${t&&i?`:${i}`:""}@${n}${r?`:${r}`:""}/${o?`${o}/`:o}${s}`}function qn(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Gn(e){const t="string"==typeof e?function(e){const t=Wn.exec(e);if(!t)return void Hn((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[n,o,i="",r,s="",a]=t.slice(1);let l="",c=a;const d=c.split("/");if(d.length>1&&(l=d.slice(0,-1).join("/"),c=d.pop()),c){const e=c.match(/^\d+/);e&&(c=e[0])}return qn({host:r,pass:i,path:l,projectId:c,port:s,protocol:n,publicKey:o})}(e):qn(e);if(t&&function(e){if(!Bn)return!0;const{port:t,projectId:n,protocol:o}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(Fn.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(o)?t&&isNaN(parseInt(t,10))&&(Fn.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(Fn.error(`Invalid Sentry Dsn: Invalid protocol ${o}`),1):(Fn.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}class Vn extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}function Yn(e,t,n){if(!(t in e))return;const o=e[t],i=n(o);"function"==typeof i&&Kn(i,o),e[t]=i}function Zn(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(n){Bn&&Fn.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function Kn(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,Zn(e,"__sentry_original__",t)}catch(e){}}function Xn(e){return e.__sentry_original__}function Jn(e){if(ln(e))return{message:e.message,name:e.name,stack:e.stack,...eo(e)};if(fn(e)){const t={type:e.type,target:Qn(e.target),currentTarget:Qn(e.currentTarget),...eo(e)};return"undefined"!=typeof CustomEvent&&yn(e,CustomEvent)&&(t.detail=e.detail),t}return e}function Qn(e){try{return t=e,"undefined"!=typeof Element&&yn(t,Element)?Nn(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}var t}function eo(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function to(e){return no(e,new Map)}function no(e,t){if(function(e){if(!hn(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(e){return!0}}(e)){const n=t.get(e);if(void 0!==n)return n;const o={};t.set(e,o);for(const n of Object.keys(e))void 0!==e[n]&&(o[n]=no(e[n],t));return o}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const o=[];return t.set(e,o),e.forEach((e=>{o.push(no(e,t))})),o}return e}const oo=50,io=/\(error: (.*)\)/,ro=/captureMessage|captureException/;const so="<anonymous>";function ao(e){try{return e&&"function"==typeof e&&e.name||so}catch(e){return so}}const lo={},co={};function uo(e,t){lo[e]=lo[e]||[],lo[e].push(t)}function po(e,t){co[e]||(t(),co[e]=!0)}function mo(e,t){const n=e&&lo[e];if(n)for(const o of n)try{o(t)}catch(t){Bn&&Fn.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${ao(o)}\nError:`,t)}}function go(e){const t="console";uo(t,e),po(t,ho)}function ho(){"console"in In&&Un.forEach((function(e){e in In.console&&Yn(In.console,e,(function(t){return zn[e]=t,function(...t){mo("console",{args:t,level:e});const n=zn[e];n&&n.apply(In.console,t)}}))}))}function fo(){const e=In,t=e.crypto||e.msCrypto;let n=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}function _o(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function vo(e){const{message:t,event_id:n}=e;if(t)return t;const o=_o(e);return o?o.type&&o.value?`${o.type}: ${o.value}`:o.type||o.value||n||"<unknown>":n||"<unknown>"}function yo(e,t,n){const o=e.exception=e.exception||{},i=o.values=o.values||[],r=i[0]=i[0]||{};r.value||(r.value=t||""),r.type||(r.type=n||"Error")}function wo(e,t){const n=_o(e);if(!n)return;const o=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...o,...t},t&&"data"in t){const e={...o&&o.data,...t.data};n.mechanism.data=e}}function bo(e){if(e&&e.__sentry_captured__)return!0;try{Zn(e,"__sentry_captured__",!0)}catch(e){}return!1}function Eo(e){return Array.isArray(e)?e:[e]}const So=In,To=1e3;let xo,$o,Co;function ko(e){uo("dom",e),po("dom",Lo)}function Lo(){if(!So.document)return;const e=mo.bind(null,"dom"),t=Io(e,!0);So.document.addEventListener("click",t,!1),So.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=So[t]&&So[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(Yn(n,"addEventListener",(function(t){return function(n,o,i){if("click"===n||"keypress"==n)try{const o=this,r=o.__sentry_instrumentation_handlers__=o.__sentry_instrumentation_handlers__||{},s=r[n]=r[n]||{refCount:0};if(!s.handler){const o=Io(e);s.handler=o,t.call(this,n,o,i)}s.refCount++}catch(e){}return t.call(this,n,o,i)}})),Yn(n,"removeEventListener",(function(e){return function(t,n,o){if("click"===t||"keypress"==t)try{const n=this,i=n.__sentry_instrumentation_handlers__||{},r=i[t];r&&(r.refCount--,r.refCount<=0&&(e.call(this,t,r.handler,o),r.handler=void 0,delete i[t]),0===Object.keys(i).length&&delete n.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,o)}})))}))}function Io(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const o=function(e){try{return e.target}catch(e){return null}}(n);if(function(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(n.type,o))return;Zn(n,"_sentryCaptured",!0),o&&!o._sentryId&&Zn(o,"_sentryId",fo());const i="keypress"===n.type?"input":n.type;if(!function(e){if(e.type!==$o)return!1;try{if(!e.target||e.target._sentryId!==Co)return!1}catch(e){}return!0}(n)){e({event:n,name:i,global:t}),$o=n.type,Co=o?o._sentryId:void 0}clearTimeout(xo),xo=So.setTimeout((()=>{Co=void 0,$o=void 0}),To)}}const Ao=An();function Mo(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Ro(){if("string"==typeof EdgeRuntime)return!0;if(!function(){if(!("fetch"in Ao))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}())return!1;if(Mo(Ao.fetch))return!0;let e=!1;const t=Ao.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=Mo(n.contentWindow.fetch)),t.head.removeChild(n)}catch(e){Bn&&Fn.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e}function Oo(e){const t="fetch";uo(t,e),po(t,No)}function No(){Ro()&&Yn(In,"fetch",(function(e){return function(...t){const{method:n,url:o}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:Po(t),method:Do(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:Po(t),method:Do(t,"method")?String(t.method).toUpperCase():"GET"}}(t),i={args:t,fetchData:{method:n,url:o},startTimestamp:Date.now()};return mo("fetch",{...i}),e.apply(In,t).then((e=>(mo("fetch",{...i,endTimestamp:Date.now(),response:e}),e)),(e=>{throw mo("fetch",{...i,endTimestamp:Date.now(),error:e}),e}))}}))}function Do(e,t){return!!e&&"object"==typeof e&&!!e[t]}function Po(e){return"string"==typeof e?e:e?Do(e,"url")?e.url:e.toString?e.toString():"":""}let Bo=null;function Uo(){Bo=In.onerror,In.onerror=function(e,t,n,o,i){return mo("error",{column:o,error:i,line:n,msg:e,url:t}),!(!Bo||Bo.__SENTRY_LOADER__)&&Bo.apply(this,arguments)},In.onerror.__SENTRY_INSTRUMENTED__=!0}let zo=null;function Ho(){zo=In.onunhandledrejection,In.onunhandledrejection=function(e){return mo("unhandledrejection",e),!(zo&&!zo.__SENTRY_LOADER__)||zo.apply(this,arguments)},In.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const Fo=An();const Wo=In;let jo;function qo(e){const t="history";uo(t,e),po(t,Go)}function Go(){if(!function(){const e=Fo.chrome,t=e&&e.app&&e.app.runtime,n="history"in Fo&&!!Fo.history.pushState&&!!Fo.history.replaceState;return!t&&n}())return;const e=Wo.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=jo,t=String(n);jo=t;mo("history",{from:e,to:t})}return e.apply(this,t)}}Wo.onpopstate=function(...t){const n=Wo.location.href,o=jo;jo=n;if(mo("history",{from:o,to:n}),e)try{return e.apply(this,t)}catch(e){}},Yn(Wo.history,"pushState",t),Yn(Wo.history,"replaceState",t)}const Vo=In,Yo="__sentry_xhr_v3__";function Zo(e){uo("xhr",e),po("xhr",Ko)}function Ko(){if(!Vo.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;Yn(e,"open",(function(e){return function(...t){const n=Date.now(),o=pn(t[0])?t[0].toUpperCase():void 0,i=function(e){if(pn(e))return e;try{return e.toString()}catch(e){}return}(t[1]);if(!o||!i)return e.apply(this,t);this[Yo]={method:o,url:i,request_headers:{}},"POST"===o&&i.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const r=()=>{const e=this[Yo];if(e&&4===this.readyState){try{e.status_code=this.status}catch(e){}mo("xhr",{args:[o,i],endTimestamp:Date.now(),startTimestamp:n,xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?Yn(this,"onreadystatechange",(function(e){return function(...t){return r(),e.apply(this,t)}})):this.addEventListener("readystatechange",r),Yn(this,"setRequestHeader",(function(e){return function(...t){const[n,o]=t,i=this[Yo];return i&&pn(n)&&pn(o)&&(i.request_headers[n.toLowerCase()]=o),e.apply(this,t)}})),e.apply(this,t)}})),Yn(e,"send",(function(e){return function(...t){const n=this[Yo];if(!n)return e.apply(this,t);void 0!==t[0]&&(n.body=t[0]);return mo("xhr",{args:[n.method,n.url],startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}function Xo(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function Jo(e,t){return e.require(t)}function Qo(e){let t;try{t=Jo(module,e)}catch(e){}try{const{cwd:n}=Jo(module,"process");t=Jo(module,`${n()}/node_modules/${e}`)}catch(e){}return t}function ei(){return"undefined"!=typeof window&&(!Xo()||void 0!==In.process&&"renderer"===In.process.type)}function ti(e,t=100,n=1/0){try{return oi("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function ni(e,t=3,n=102400){const o=ti(e,t);return i=o,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(i))>n?ni(e,t-1,n):o;var i}function oi(e,t,n=1/0,o=1/0,i=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++)if(t[e]===n)return!0;return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}()){const[r,s]=i;if(null==t||["number","boolean","string"].includes(typeof t)&&("number"!=typeof(a=t)||a==a))return t;var a;const l=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(wn(t))return"[VueViewModel]";if(function(e){return hn(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}(t))return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${ao(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const n=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(e){return`**non-serializable** (${e})`}}(e,t);if(!l.startsWith("[object "))return l;if(t.__sentry_skip_normalization__)return t;const c="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===c)return l.replace("object ","");if(r(t))return"[Circular ~]";const d=t;if(d&&"function"==typeof d.toJSON)try{return oi("",d.toJSON(),c-1,o,i)}catch(e){}const u=Array.isArray(t)?[]:{};let p=0;const m=Jn(t);for(const e in m){if(!Object.prototype.hasOwnProperty.call(m,e))continue;if(p>=o){u[e]="[MaxProperties ~]";break}const t=m[e];u[e]=oi(e,t,c-1,o,i),p++}return s(t),u}const ii=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function ri(...e){let t="",n=!1;for(let o=e.length-1;o>=-1&&!n;o--){const i=o>=0?e[o]:"/";i&&(t=`${i}/${t}`,n="/"===i.charAt(0))}return t=function(e,t){let n=0;for(let t=e.length-1;t>=0;t--){const o=e[t];"."===o?e.splice(t,1):".."===o?(e.splice(t,1),n++):n&&(e.splice(t,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}(t.split("/").filter((e=>!!e)),!n).join("/"),(n?"/":"")+t||"."}function si(e){let t=0;for(;t<e.length&&""===e[t];t++);let n=e.length-1;for(;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}function ai(e,t){let n=function(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=ii.exec(t);return n?n.slice(1):[]}(e)[2];return t&&n.slice(-1*t.length)===t&&(n=n.slice(0,n.length-t.length)),n}var li;function ci(e){return new ui((t=>{t(e)}))}function di(e){return new ui(((t,n)=>{n(e)}))}!function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(li||(li={}));class ui{constructor(e){ui.prototype.__init.call(this),ui.prototype.__init2.call(this),ui.prototype.__init3.call(this),ui.prototype.__init4.call(this),this._state=li.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new ui(((n,o)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){o(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){o(e)}else o(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new ui(((t,n)=>{let o,i;return this.then((t=>{i=!1,o=t,e&&e()}),(t=>{i=!0,o=t,e&&e()})).then((()=>{i?n(o):t(o)}))}))}__init(){this._resolve=e=>{this._setResult(li.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(li.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===li.PENDING&&(vn(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===li.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===li.RESOLVED&&e[1](this._value),this._state===li.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function pi(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(o){if(!(void 0===e||t.length<e))return di(new Vn("Not adding Promise because buffer limit was reached."));const i=o();return-1===t.indexOf(i)&&t.push(i),i.then((()=>n(i))).then(null,(()=>n(i).then(null,(()=>{})))),i},drain:function(e){return new ui(((n,o)=>{let i=t.length;if(!i)return n(!0);const r=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{ci(e).then((()=>{--i||(clearTimeout(r),n(!0))}),o)}))}))}}}function mi(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",o=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:o,relative:t[5]+n+o}}function gi(e){return e.split(/[\?#]/,1)[0]}function hi(e){return e.split(/\\?\//).filter((e=>e.length>0&&","!==e)).length}const fi={ip:!1,request:!0,transaction:!0,user:!0},_i=["cookies","data","headers","method","query_string","url"],vi=["id","username","email"];function yi(e,t={}){const n=e.method&&e.method.toUpperCase();let o="",i="url";t.customRoute||e.route?(o=t.customRoute||`${e.baseUrl||""}${e.route&&e.route.path}`,i="route"):(e.originalUrl||e.url)&&(o=gi(e.originalUrl||e.url||""));let r="";return t.method&&n&&(r+=n),t.method&&t.path&&(r+=" "),t.path&&o&&(r+=o),[r,i]}function wi(e,t){const{include:n=_i,deps:o}=t||{},i={},r=e.headers||{},s=e.method,a=r.host||e.hostname||e.host||"<no host>",l="https"===e.protocol||e.socket&&e.socket.encrypted?"https":"http",c=e.originalUrl||e.url||"",d=c.startsWith(l)?c:`${l}://${a}${c}`;return n.forEach((t=>{switch(t){case"headers":i.headers=r,n.includes("cookies")||delete i.headers.cookie;break;case"method":i.method=s;break;case"url":i.url=d;break;case"cookies":i.cookies=e.cookies||r.cookie&&function(e){const t={};let n=0;for(;n<e.length;){const o=e.indexOf("=",n);if(-1===o)break;let i=e.indexOf(";",n);if(-1===i)i=e.length;else if(i<o){n=e.lastIndexOf(";",o-1)+1;continue}const r=e.slice(n,o).trim();if(void 0===t[r]){let n=e.slice(o+1,i).trim();34===n.charCodeAt(0)&&(n=n.slice(1,-1));try{t[r]=-1!==n.indexOf("%")?decodeURIComponent(n):n}catch(e){t[r]=n}}n=i+1}return t}(r.cookie)||{};break;case"query_string":i.query_string=function(e,t){let n=e.originalUrl||e.url||"";if(!n)return;n.startsWith("/")&&(n=`http://dogs.are.great${n}`);try{return e.query||"undefined"!=typeof URL&&new URL(n).search.slice(1)||t&&t.url&&t.url.parse(n).query||void 0}catch(e){return}}(e,o);break;case"data":if("GET"===s||"HEAD"===s)break;void 0!==e.body&&(i.data=pn(e.body)?e.body:JSON.stringify(ti(e.body)));break;default:({}).hasOwnProperty.call(e,t)&&(i[t]=e[t])}})),i}function bi(e,t,n){const o={...fi,...n&&n.include};if(o.request){const i=Array.isArray(o.request)?wi(t,{include:o.request,deps:n&&n.deps}):wi(t,{deps:n&&n.deps});e.request={...e.request,...i}}if(o.user){const n=t.user&&hn(t.user)?function(e,t){const n={};return(Array.isArray(t)?t:vi).forEach((t=>{e&&t in e&&(n[t]=e[t])})),n}(t.user,o.user):{};Object.keys(n).length&&(e.user={...e.user,...n})}if(o.ip){const n=t.ip||t.socket&&t.socket.remoteAddress;n&&(e.user={...e.user,ip_address:n})}return o.transaction&&!e.transaction&&(e.transaction=function(e,t){switch(t){case"path":return yi(e,{path:!0})[0];case"handler":return e.route&&e.route.stack&&e.route.stack[0]&&e.route.stack[0].name||"<anonymous>";default:return yi(e,{path:!0,method:!0,customRoute:e._reconstructedRoute?e._reconstructedRoute:void 0})[0]}}(t,o.transaction)),e}const Ei=["fatal","error","warning","log","info","debug"];function Si(e){return"warn"===e?"warning":Ei.includes(e)?e:"log"}const Ti=1e3;function xi(){return Date.now()/Ti}const $i=function(){const{performance:e}=In;if(!e||!e.now)return xi;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/Ti}(),Ci=(()=>{const{performance:e}=In;if(!e||!e.now)return;const t=36e5,n=e.now(),o=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+n-o):t,r=i<t,s=e.timing&&e.timing.navigationStart,a="number"==typeof s?Math.abs(s+n-o):t;return r||a<t?i<=a?e.timeOrigin:s:o})();function ki(e,t=[]){return[e,t]}function Li(e,t){const[n,o]=e;return[n,[...o,t]]}function Ii(e,t){const n=e[1];for(const e of n){if(t(e,e[0].type))return!0}return!1}function Ai(e,t){return(t||new TextEncoder).encode(e)}function Mi(e,t){const[n,o]=e;let i=JSON.stringify(n);function r(e){"string"==typeof i?i="string"==typeof e?i+e:[Ai(i,t),e]:i.push("string"==typeof e?Ai(e,t):e)}for(const e of o){const[t,n]=e;if(r(`\n${JSON.stringify(t)}\n`),"string"==typeof n||n instanceof Uint8Array)r(n);else{let e;try{e=JSON.stringify(n)}catch(t){e=JSON.stringify(ti(n))}r(e)}}return"string"==typeof i?i:function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let o=0;for(const t of e)n.set(t,o),o+=t.length;return n}(i)}function Ri(e,t){const n="string"==typeof e.data?Ai(e.data,t):e.data;return[to({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const Oi={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function Ni(e){return Oi[e]}function Di(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function Pi(e,t,n,o){const i=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&o&&{dsn:jn(o)},...i&&{trace:to({...i})}}}const Bi=6e4;function Ui(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}function zi(e,{statusCode:t,headers:n},o=Date.now()){const i={...e},r=n&&n["x-sentry-rate-limits"],s=n&&n["retry-after"];if(r)for(const e of r.trim().split(",")){const[t,n,,,r]=e.split(":",5),s=parseInt(t,10),a=1e3*(isNaN(s)?60:s);if(n)for(const e of n.split(";"))"metric_bucket"===e&&r&&!r.split(";").includes("custom")||(i[e]=o+a);else i.all=o+a}else s?i.all=o+function(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const o=Date.parse(`${e}`);return isNaN(o)?Bi:o-t}(s,o):429===t&&(i.all=o+6e4);return i}function Hi(e,t){const n={type:t.name||t.constructor.name,value:t.message},o=function(e,t){return e(t.stack||"",1)}(e,t);return o.length&&(n.stacktrace={frames:o}),n}function Fi(e){let t,n=e[0],o=1;for(;o<e.length;){const i=e[o],r=e[o+1];if(o+=2,("optionalAccess"===i||"optionalCall"===i)&&null==n)return;"access"===i||"optionalAccess"===i?(t=n,n=r(n)):"call"!==i&&"optionalCall"!==i||(n=r(((...e)=>n.call(t,...e))),t=void 0)}return n}const Wi="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,ji="production";function qi(){return Mn("globalEventProcessors",(()=>[]))}function Gi(e){qi().push(e)}function Vi(e,t,n,o=0){return new ui(((i,r)=>{const s=e[o];if(null===t||"function"!=typeof s)i(t);else{const a=s({...t},n);Wi&&s.id&&null===a&&Fn.log(`Event processor "${s.id}" dropped event`),vn(a)?a.then((t=>Vi(e,t,n,o+1).then(i))).then(null,r):Vi(e,a,n,o+1).then(i).then(null,r)}}))}function Yi(e){const t=$i(),n={sid:fo(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return to({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&Zi(n,e),n}function Zi(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||$i(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:fo()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}const Ki=1;function Xi(e){const{spanId:t,traceId:n}=e.spanContext(),{data:o,op:i,parent_span_id:r,status:s,tags:a,origin:l}=Qi(e);return to({data:o,op:i,parent_span_id:r,span_id:t,status:s,tags:a,trace_id:n,origin:l})}function Ji(e){return e>9999999999?e/1e3:e}function Qi(e){return function(e){return"function"==typeof e.getSpanJSON}(e)?e.getSpanJSON():"function"==typeof e.toJSON?e.toJSON():{}}function er(e){const{traceFlags:t}=e.spanContext();return Boolean(t&Ki)}function tr(e,t,n,o,i,r){const{normalizeDepth:s=3,normalizeMaxBreadth:a=1e3}=e,l={...t,event_id:t.event_id||n.event_id||fo(),timestamp:t.timestamp||xi()},c=n.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:n,release:o,dist:i,maxValueLength:r=250}=t;"environment"in e||(e.environment="environment"in t?n:ji);void 0===e.release&&void 0!==o&&(e.release=o);void 0===e.dist&&void 0!==i&&(e.dist=i);e.message&&(e.message=bn(e.message,r));const s=e.exception&&e.exception.values&&e.exception.values[0];s&&s.value&&(s.value=bn(s.value,r));const a=e.request;a&&a.url&&(a.url=bn(a.url,r))}(l,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(l,c),void 0===t.type&&function(e,t){const n=In._sentryDebugIds;if(!n)return;let o;const i=nr.get(t);i?o=i:(o=new Map,nr.set(t,o));const r=Object.keys(n).reduce(((e,i)=>{let r;const s=o.get(i);s?r=s:(r=t(i),o.set(i,r));for(let t=r.length-1;t>=0;t--){const o=r[t];if(o.filename){e[o.filename]=n[i];break}}return e}),{});try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=r[e.filename])}))}))}catch(e){}}(l,e.stackParser);const d=function(e,t){if(!t)return e;const n=e?e.clone():new yr;return n.update(t),n}(o,n.captureContext);n.mechanism&&wo(l,n.mechanism);const u=i&&i.getEventProcessors?i.getEventProcessors():[],p=function(){vr||(vr=new yr);return vr}().getScopeData();if(r){fr(p,r.getScopeData())}if(d){fr(p,d.getScopeData())}const m=[...n.attachments||[],...p.attachments];m.length&&(n.attachments=m),hr(l,p);return Vi([...u,...qi(),...p.eventProcessors],l,n).then((e=>(e&&function(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach((e=>{n.push({type:"sourcemap",code_file:e,debug_id:t[e]})}))}(e),"number"==typeof s&&s>0?function(e,t,n){if(!e)return null;const o={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:ti(e.data,t,n)}})))},...e.user&&{user:ti(e.user,t,n)},...e.contexts&&{contexts:ti(e.contexts,t,n)},...e.extra&&{extra:ti(e.extra,t,n)}};e.contexts&&e.contexts.trace&&o.contexts&&(o.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(o.contexts.trace.data=ti(e.contexts.trace.data,t,n)));e.spans&&(o.spans=e.spans.map((e=>{const o=Qi(e).data;return o&&(e.data=ti(o,t,n)),e})));return o}(e,s,a):e)))}const nr=new WeakMap;function or(e){if(e)return function(e){return e instanceof yr||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>ir.includes(e)))}(e)?{captureContext:e}:e}const ir=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function rr(e,t){return Cr().captureException(e,or(t))}function sr(e,t){const n="string"==typeof t?t:void 0,o="string"!=typeof t?{captureContext:t}:void 0;return Cr().captureMessage(e,n,o)}function ar(e,t){return Cr().captureEvent(e,t)}function lr(e,t){Cr().addBreadcrumb(e,t)}function cr(...e){const t=Cr();if(2===e.length){const[n,o]=e;return n?t.withScope((()=>(t.getStackTop().scope=n,o(n)))):t.withScope(o)}return t.withScope(e[0])}function dr(){return Cr().getClient()}function ur(){return Cr().getScope()}function pr(e){return e.transaction}function mr(e,t,n){const o=t.getOptions(),{publicKey:i}=t.getDsn()||{},{segment:r}=n&&n.getUser()||{},s=to({environment:o.environment||ji,release:o.release,user_segment:r,public_key:i,trace_id:e});return t.emit&&t.emit("createDsc",s),s}function gr(e){const t=dr();if(!t)return{};const n=mr(Qi(e).trace_id||"",t,ur()),o=pr(e);if(!o)return n;const i=o&&o._frozenDynamicSamplingContext;if(i)return i;const{sampleRate:r,source:s}=o.metadata;null!=r&&(n.sample_rate=`${r}`);const a=Qi(o);return s&&"url"!==s&&(n.transaction=a.description),n.sampled=String(er(o)),t.emit&&t.emit("createDsc",n),n}function hr(e,t){const{fingerprint:n,span:o,breadcrumbs:i,sdkProcessingMetadata:r}=t;!function(e,t){const{extra:n,tags:o,user:i,contexts:r,level:s,transactionName:a}=t,l=to(n);l&&Object.keys(l).length&&(e.extra={...l,...e.extra});const c=to(o);c&&Object.keys(c).length&&(e.tags={...c,...e.tags});const d=to(i);d&&Object.keys(d).length&&(e.user={...d,...e.user});const u=to(r);u&&Object.keys(u).length&&(e.contexts={...u,...e.contexts});s&&(e.level=s);a&&(e.transaction=a)}(e,t),o&&function(e,t){e.contexts={trace:Xi(t),...e.contexts};const n=pr(t);if(n){e.sdkProcessingMetadata={dynamicSamplingContext:gr(t),...e.sdkProcessingMetadata};const o=Qi(n).description;o&&(e.tags={transaction:o,...e.tags})}}(e,o),function(e,t){e.fingerprint=e.fingerprint?Eo(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,i),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,r)}function fr(e,t){const{extra:n,tags:o,user:i,contexts:r,level:s,sdkProcessingMetadata:a,breadcrumbs:l,fingerprint:c,eventProcessors:d,attachments:u,propagationContext:p,transactionName:m,span:g}=t;_r(e,"extra",n),_r(e,"tags",o),_r(e,"user",i),_r(e,"contexts",r),_r(e,"sdkProcessingMetadata",a),s&&(e.level=s),m&&(e.transactionName=m),g&&(e.span=g),l.length&&(e.breadcrumbs=[...e.breadcrumbs,...l]),c.length&&(e.fingerprint=[...e.fingerprint,...c]),d.length&&(e.eventProcessors=[...e.eventProcessors,...d]),u.length&&(e.attachments=[...e.attachments,...u]),e.propagationContext={...e.propagationContext,...p}}function _r(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(const o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[t][o]=n[o])}}let vr;class yr{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=wr()}static clone(e){return e?e.clone():new yr}clone(){const e=new yr;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&Zi(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e;if(t instanceof yr){const e=t.getScopeData();this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&Object.keys(e.user).length&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint.length&&(this._fingerprint=e.fingerprint),t.getRequestSession()&&(this._requestSession=t.getRequestSession()),e.propagationContext&&(this._propagationContext=e.propagationContext)}else if(hn(t)){const t=e;this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=wr(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const o={timestamp:xi(),...e},i=this._breadcrumbs;return i.push(o),this._breadcrumbs=i.length>n?i.slice(-n):i,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:t,_contexts:n,_tags:o,_extra:i,_user:r,_level:s,_fingerprint:a,_eventProcessors:l,_propagationContext:c,_sdkProcessingMetadata:d,_transactionName:u,_span:p}=this;return{breadcrumbs:e,attachments:t,contexts:n,tags:o,extra:i,user:r,level:s,fingerprint:a||[],eventProcessors:l,propagationContext:c,sdkProcessingMetadata:d,transactionName:u,span:p}}applyToEvent(e,t={},n=[]){hr(e,this.getScopeData());return Vi([...n,...qi(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t&&t.event_id?t.event_id:fo();if(!this._client)return Fn.warn("No client configured on scope - will not capture exception!"),n;const o=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:o,...t,event_id:n},this),n}captureMessage(e,t,n){const o=n&&n.event_id?n.event_id:fo();if(!this._client)return Fn.warn("No client configured on scope - will not capture message!"),o;const i=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:i,...n,event_id:o},this),o}captureEvent(e,t){const n=t&&t.event_id?t.event_id:fo();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(Fn.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}function wr(){return{traceId:fo(),spanId:fo().substring(16)}}const br="7.116.0",Er=parseFloat(br),Sr=100;class Tr{constructor(e,t,n,o=Er){let i,r;this._version=o,t?i=t:(i=new yr,i.setClient(e)),n?r=n:(r=new yr,r.setClient(e)),this._stack=[{scope:i}],e&&this.bindClient(e),this._isolationScope=r}isOlderThan(e){return this._version<e}bindClient(e){const t=this.getStackTop();t.client=e,t.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(e){const t=this.pushScope();let n;try{n=e(t)}catch(e){throw this.popScope(),e}return vn(n)?n.then((e=>(this.popScope(),e)),(e=>{throw this.popScope(),e})):(this.popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const n=this._lastEventId=t&&t.event_id?t.event_id:fo(),o=new Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:o,...t,event_id:n}),n}captureMessage(e,t,n){const o=this._lastEventId=n&&n.event_id?n.event_id:fo(),i=new Error(e);return this.getScope().captureMessage(e,t,{originalException:e,syntheticException:i,...n,event_id:o}),o}captureEvent(e,t){const n=t&&t.event_id?t.event_id:fo();return e.type||(this._lastEventId=n),this.getScope().captureEvent(e,{...t,event_id:n}),n}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:n,client:o}=this.getStackTop();if(!o)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:r=Sr}=o.getOptions&&o.getOptions()||{};if(r<=0)return;const s={timestamp:xi(),...e},a=i?Hn((()=>i(s,t))):s;null!==a&&(o.emit&&o.emit("beforeAddBreadcrumb",a,t),n.addBreadcrumb(a,r))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t),this.getIsolationScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t),this.getIsolationScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t),this.getIsolationScope().setContext(e,t)}configureScope(e){const{scope:t,client:n}=this.getStackTop();n&&e(t)}run(e){const t=$r(this);try{e(this)}finally{$r(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return Wi&&Fn.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const n=this._callExtensionMethod("startTransaction",e,t);if(Wi&&!n){this.getClient()?Fn.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):Fn.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")}return n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&function(e,t){let n={};t?n={status:t}:"ok"===e.status&&(n={status:"exited"}),Zi(e,n)}(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:n}=this.getStackTop(),{release:o,environment:i=ji}=n&&n.getOptions()||{},{userAgent:r}=In.navigator||{},s=Yi({release:o,environment:i,user:t.getUser(),...r&&{userAgent:r},...e}),a=t.getSession&&t.getSession();return a&&"ok"===a.status&&Zi(a,{status:"exited"}),this.endSession(),t.setSession(s),s}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),n=e.getSession();n&&t&&t.captureSession&&t.captureSession(n)}_callExtensionMethod(e,...t){const n=xr().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[e])return n.extensions[e].apply(this,t);Wi&&Fn.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function xr(){return In.__SENTRY__=In.__SENTRY__||{extensions:{},hub:void 0},In}function $r(e){const t=xr(),n=Lr(t);return Ir(t,e),n}function Cr(){const e=xr();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return function(e=xr()){t=e,t&&t.__SENTRY__&&t.__SENTRY__.hub&&!Lr(e).isOlderThan(Er)||Ir(e,new Tr);var t;return Lr(e)}(e)}function kr(){return Cr().getIsolationScope()}function Lr(e){return Mn("hub",(()=>new Tr),e)}function Ir(e,t){if(!e)return!1;return(e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0}var Ar;function Mr(e,t,n=(()=>{})){let o;try{o=e()}catch(e){throw t(e),n(),e}return function(e,t,n){if(vn(e))return e.then((e=>(n(),e)),(e=>{throw t(e),n(),e}));return n(),e}(o,t,n)}function Rr(e,t){const n=function(e){if(e.startTime){const n={...e};return n.startTimestamp="number"==typeof(t=e.startTime)?Ji(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?Ji(t.getTime()):$i(),delete n.startTime,n}var t;return e}(e);return function(e,t={}){const n=xr();return n.__SENTRY__&&n.__SENTRY__.acs?n.__SENTRY__.acs.runWithAsyncContext(e,t):e()}((()=>cr(e.scope,(o=>{const i=Cr(),r=o.getSpan(),s=e.onlyIfParent&&!r?void 0:function(e,{parentSpan:t,spanContext:n,forceTransaction:o,scope:i}){if(!function(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=dr(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}())return;const r=kr();let s;if(t&&!o)s=t.startChild(n);else if(t){const o=gr(t),{traceId:i,spanId:r}=t.spanContext(),a=er(t);s=e.startTransaction({traceId:i,parentSpanId:r,parentSampled:a,...n,metadata:{dynamicSamplingContext:o,...n.metadata}})}else{const{traceId:t,dsc:o,parentSpanId:a,sampled:l}={...r.getPropagationContext(),...i.getPropagationContext()};s=e.startTransaction({traceId:t,parentSpanId:a,parentSampled:l,...n,metadata:{dynamicSamplingContext:o,...n.metadata}})}return i.setSpan(s),function(e,t,n){e&&(Zn(e,Nr,n),Zn(e,Or,t))}(s,i,r),s}(i,{parentSpan:r,spanContext:n,forceTransaction:e.forceTransaction,scope:o});return Mr((()=>t(s)),(()=>{if(s){const{status:e}=Qi(s);e&&"ok"!==e||s.setStatus("internal_error")}}),(()=>s&&s.end()))}))))}!function(e){e.Ok="ok";e.DeadlineExceeded="deadline_exceeded";e.Unauthenticated="unauthenticated";e.PermissionDenied="permission_denied";e.NotFound="not_found";e.ResourceExhausted="resource_exhausted";e.InvalidArgument="invalid_argument";e.Unimplemented="unimplemented";e.Unavailable="unavailable";e.InternalError="internal_error";e.UnknownError="unknown_error";e.Cancelled="cancelled";e.AlreadyExists="already_exists";e.FailedPrecondition="failed_precondition";e.Aborted="aborted";e.OutOfRange="out_of_range";e.DataLoss="data_loss"}(Ar||(Ar={}));const Or="_sentryScope",Nr="_sentryIsolationScope";let Dr;function Pr(e,t,n,o,i,r){const s=ur().getSpan();if(s){const a=function(e){return Dr?Dr.get(e):void 0}(s)||new Map,l=`${e}:${t}@${o}`,c=a.get(r);if(c){const[,e]=c;a.set(r,[l,{min:Math.min(e.min,n),max:Math.max(e.max,n),count:e.count+=1,sum:e.sum+=n,tags:e.tags}])}else a.set(r,[l,{min:n,max:n,count:1,sum:n,tags:i}]);Dr||(Dr=new WeakMap),Dr.set(s,a)}}const Br="sentry.source";function Ur(e,t,n,o){const i=Di(n),r=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n&&n.sdk);const s=Pi(e,i,o,t);delete e.sdkProcessingMetadata;return ki(s,[[{type:r},e]])}const zr="7";function Hr(e,t){return n={sentry_key:e.publicKey,sentry_version:zr,...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(n).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(n[e])}`)).join("&");var n}const Fr=[];function Wr(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function jr(e,t,n){if(n[t.name])Wi&&Fn.log(`Integration skipped because it was already installed: ${t.name}`);else{if(n[t.name]=t,-1===Fr.indexOf(t.name)&&(t.setupOnce(Gi,Cr),Fr.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),e.on&&"function"==typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,o)=>n(t,o,e)))}if(e.addEventProcessor&&"function"==typeof t.processEvent){const n=t.processEvent.bind(t),o=Object.assign(((t,o)=>n(t,o,e)),{id:t.name});e.addEventProcessor(o)}Wi&&Fn.log(`Integration installed: ${t.name}`)}}function qr(e,t){return Object.assign((function(...e){return t(...e)}),{id:e})}function Gr(e){return e.replace(/[^\w\-./]+/gi,"")}const Vr=[["\n","\\n"],["\r","\\r"],["\t","\\t"],["\\","\\\\"],["|","\\u{7c}"],[",","\\u{2c}"]];function Yr(e){return[...e].reduce(((e,t)=>e+function(e){for(const[t,n]of Vr)if(e===t)return n;return e}(t)),"")}function Zr(e,t,n,o){const i={sent_at:(new Date).toISOString()};n&&n.sdk&&(i.sdk={name:n.sdk.name,version:n.sdk.version}),o&&t&&(i.dsn=jn(t));const r=function(e){const t=function(e){let t="";for(const n of e){const e=Object.entries(n.tags),o=e.length>0?`|#${e.map((([e,t])=>`${e}:${t}`)).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${o}|T${n.timestamp}\n`}return t}(e);return[{type:"statsd",length:t.length},t]}(e);return ki(i,[r])}const Kr="Not capturing exception because it's already been captured.";class Xr{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=Gn(e.dsn):Wi&&Fn.warn("No DSN provided, client will not send events."),this._dsn){const t=function(e,t={}){const n="string"==typeof t?t:t.tunnel,o="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return n||`${function(e){return`${function(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}(e)}${e.projectId}/envelope/`}(e)}?${Hr(e,o)}`}(this._dsn,e);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,n){if(bo(e))return void(Wi&&Fn.log(Kr));let o=t&&t.event_id;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,n))).then((e=>{o=e}))),o}captureMessage(e,t,n,o){let i=n&&n.event_id;const r=mn(e)?e:String(e),s=gn(e)?this.eventFromMessage(r,t,n):this.eventFromException(e,n);return this._process(s.then((e=>this._captureEvent(e,n,o))).then((e=>{i=e}))),i}captureEvent(e,t,n){if(t&&t.originalException&&bo(t.originalException))return void(Wi&&Fn.log(Kr));let o=t&&t.event_id;const i=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,t,i||n).then((e=>{o=e}))),o}captureSession(e){"string"!=typeof e.release?Wi&&Fn.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),Zi(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e))))):ci(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}setupIntegrations(e){(e&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(e){return this.getIntegrationByName(e)}getIntegrationByName(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return Wi&&Fn.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){const t=this._integrations[e.name];jr(this,e,this._integrations),t||Wr(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let n=Ur(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=Li(n,Ri(e,this._options.transportOptions&&this._options.transportOptions.textEncoder));const o=this._sendEnvelope(n);o&&o.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const t=function(e,t,n,o){const i=Di(n);return ki({sent_at:(new Date).toISOString(),...i&&{sdk:i},...!!o&&t&&{dsn:jn(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){const n=`${e}:${t}`;Wi&&Fn.log(`Adding outcome: "${n}"`),this._outcomes[n]=this._outcomes[n]+1||1}}captureAggregateMetrics(e){Wi&&Fn.log(`Flushing aggregated metrics, number of metrics: ${e.length}`);const t=Zr(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach((e=>e(...t)))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const n={};return t.forEach((t=>{t&&jr(e,t,n)})),n}(this,e),Wr(this,e),this._integrationsInitialized=!0}_updateSessionFromEvent(e,t){let n=!1,o=!1;const i=t.exception&&t.exception.values;if(i){o=!0;for(const e of i){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const r="ok"===e.status;(r&&0===e.errors||r&&n)&&(Zi(e,{...n&&{status:"crashed"},errors:e.errors||Number(o||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new ui((t=>{let n=0;const o=setInterval((()=>{0==this._numProcessing?(clearInterval(o),t(!0)):(n+=1,e&&n>=e&&(clearInterval(o),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n,o=kr()){const i=this.getOptions(),r=Object.keys(this._integrations);return!t.integrations&&r.length>0&&(t.integrations=r),this.emit("preprocessEvent",e,t),tr(i,e,t,n,this,o).then((e=>{if(null===e)return e;const t={...o.getPropagationContext(),...n?n.getPropagationContext():void 0};if(!(e.contexts&&e.contexts.trace)&&t){const{traceId:o,spanId:i,parentSpanId:r,dsc:s}=t;e.contexts={trace:{trace_id:o,span_id:i,parent_span_id:r},...e.contexts};const a=s||mr(o,this,n);e.sdkProcessingMetadata={dynamicSamplingContext:a,...e.sdkProcessingMetadata}}return e}))}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then((e=>e.event_id),(e=>{if(Wi){const t=e;"log"===t.logLevel?Fn.log(t.message):Fn.warn(t)}}))}_processEvent(e,t,n){const o=this.getOptions(),{sampleRate:i}=o,r=Qr(e),s=Jr(e),a=e.type||"error",l=`before send for type \`${a}\``;if(s&&"number"==typeof i&&Math.random()>i)return this.recordDroppedEvent("sample_rate","error",e),di(new Vn(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"));const c="replay_event"===a?"replay":a,d=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,n,d).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",c,e),new Vn("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return n;const i=function(e,t,n){const{beforeSend:o,beforeSendTransaction:i}=e;if(Jr(t)&&o)return o(t,n);if(Qr(t)&&i)return i(t,n);return t}(o,n,t);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if(vn(e))return e.then((e=>{if(!hn(e)&&null!==e)throw new Vn(n);return e}),(e=>{throw new Vn(`${t} rejected with ${e}`)}));if(!hn(e)&&null!==e)throw new Vn(n);return e}(i,l)})).then((o=>{if(null===o)throw this.recordDroppedEvent("before_send",c,e),new Vn(`${l} returned \`null\`, will not send event.`,"log");const i=n&&n.getSession();!r&&i&&this._updateSessionFromEvent(i,o);const s=o.transaction_info;if(r&&s&&o.transaction!==e.transaction){const e="custom";o.transaction_info={...s,source:e}}return this.sendEvent(o,t),o})).then(null,(e=>{if(e instanceof Vn)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new Vn(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)return this._transport.send(e).then(null,(e=>{Wi&&Fn.error("Error while sending event:",e)}));Wi&&Fn.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[n,o]=t.split(":");return{reason:n,category:o,quantity:e[t]}}))}}function Jr(e){return void 0===e.type}function Qr(e){return"transaction"===e.type}const es={c:class{constructor(e){this._value=e}get weight(){return 1}add(e){this._value+=e}toString(){return`${this._value}`}},g:class{constructor(e){this._last=e,this._min=e,this._max=e,this._sum=e,this._count=1}get weight(){return 5}add(e){this._last=e,e<this._min&&(this._min=e),e>this._max&&(this._max=e),this._sum+=e,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}},d:class{constructor(e){this._value=[e]}get weight(){return this._value.length}add(e){this._value.push(e)}toString(){return this._value.join(":")}},s:class{constructor(e){this.first=e,this._value=new Set([e])}get weight(){return this._value.size}add(e){this._value.add(e)}toString(){return Array.from(this._value).map((e=>"string"==typeof e?function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t>>>0}(e):e)).join(":")}}},ts=30;function ns(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}function os(e,t){const n=t&&function(e){return void 0!==e.getClient}(t)?t.getClient():t,o=n&&n.getDsn(),i=n&&n.getOptions().tunnel;return function(e,t){return!!t&&e.includes(t.host)}(e,o)||function(e,t){if(!t)return!1;return is(e)===is(t)}(e,i)}function is(e){return"/"===e[e.length-1]?e.slice(0,-1):e}const rs=new Map,ss=new Set;function as(e,t){return function(e){if(In._sentryModuleMetadata)for(const t of Object.keys(In._sentryModuleMetadata)){const n=In._sentryModuleMetadata[t];if(ss.has(t))continue;ss.add(t);const o=e(t);for(const e of o.reverse())if(e.filename){rs.set(e.filename,n);break}}}(e),rs.get(t)}const ls="ModuleMetadata",cs=()=>({name:ls,setupOnce(){},setup(e){"function"==typeof e.on&&e.on("beforeEnvelope",(e=>{Ii(e,((e,t)=>{if("event"===t){const t=Array.isArray(e)?e[1]:void 0;t&&(!function(e){try{e.exception.values.forEach((e=>{if(e.stacktrace)for(const t of e.stacktrace.frames||[])delete t.module_metadata}))}catch(e){}}(t),e[1]=t)}}))}))},processEvent:(e,t,n)=>(function(e,t){try{t.exception.values.forEach((t=>{if(t.stacktrace)for(const n of t.stacktrace.frames||[]){if(!n.filename)continue;const t=as(e,n.filename);t&&(n.module_metadata=t)}}))}catch(e){}}(n.getOptions().stackParser,e),e)});qr(ls,cs);const ds={include:{cookies:!0,data:!0,headers:!0,ip:!1,query_string:!0,url:!0,user:{id:!0,username:!0,email:!0}},transactionNamingScheme:"methodPath"},us="RequestData",ps=(e={})=>{const t=bi,n={...ds,...e,include:{method:!0,...ds.include,...e.include,user:e.include&&"boolean"==typeof e.include.user?e.include.user:{...ds.include.user,...(e.include||{}).user}}};return{name:us,setupOnce(){},processEvent(e,o,i){const{transactionNamingScheme:r}=n,{sdkProcessingMetadata:s={}}=e,a=s.request;if(!a)return e;const l=s.requestDataOptionsFromExpressHandler||s.requestDataOptionsFromGCPWrapper||function(e){const{transactionNamingScheme:t,include:{ip:n,user:o,...i}}=e,r=[];for(const[e,t]of Object.entries(i))t&&r.push(e);let s;if(void 0===o)s=!0;else if("boolean"==typeof o)s=o;else{const e=[];for(const[t,n]of Object.entries(o))n&&e.push(t);s=e}return{include:{ip:n,user:s,request:0!==r.length?r:void 0,transaction:t}}}(n),c=t(e,a,l);if("transaction"===e.type||"handler"===r)return c;const d=a._sentryTransaction;if(d){const e=Qi(d).description||"",t="sentry.javascript.nextjs"===function(e){try{return e.getOptions()._metadata.sdk.name}catch(e){return}}(i)?e.startsWith("/api"):"path"!==r,[n]=yi(a,{path:!0,method:t,customRoute:e});c.transaction=n}return c}}};qr(us,ps);const ms=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],gs=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],hs="InboundFilters",fs=(e={})=>({name:hs,setupOnce(){},processEvent(t,n,o){const i=o.getOptions(),r=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:ms],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:gs],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,i);return function(e,t){if(t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e))return Wi&&Fn.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${vo(e)}`),!0;if(function(e,t){if(e.type||!t||!t.length)return!1;return function(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch(e){}n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`));Wi&&0===t.length&&Fn.error(`Could not extract message for event ${vo(e)}`);return t}(e).some((e=>Tn(e,t)))}(e,t.ignoreErrors))return Wi&&Fn.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${vo(e)}`),!0;if(function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const n=e.transaction;return!!n&&Tn(n,t)}(e,t.ignoreTransactions))return Wi&&Fn.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${vo(e)}`),!0;if(function(e,t){if(!t||!t.length)return!1;const n=_s(e);return!!n&&Tn(n,t)}(e,t.denyUrls))return Wi&&Fn.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${vo(e)}.\nUrl: ${_s(e)}`),!0;if(!function(e,t){if(!t||!t.length)return!0;const n=_s(e);return!n||Tn(n,t)}(e,t.allowUrls))return Wi&&Fn.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${vo(e)}.\nUrl: ${_s(e)}`),!0;return!1}(t,r)?null:t}});qr(hs,fs);function _s(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(t):null}catch(t){return Wi&&Fn.error(`Cannot extract url for event ${vo(e)}`),null}}let vs;const ys="FunctionToString",ws=new WeakMap,bs=()=>({name:ys,setupOnce(){vs=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=Xn(this),n=ws.has(dr())&&void 0!==t?t:this;return vs.apply(n,e)}}catch(e){}},setup(e){ws.set(e,!0)}}),Es=(qr(ys,bs),"LinkedErrors"),Ss=(e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:Es,setupOnce(){},preprocessEvent(e,o,i){const r=i.getOptions();xn(Hi,r.stackParser,r.maxValueLength,n,t,e,o)}}};qr(Es,Ss);class Ts{constructor(e){this._client=e,this._buckets=new Map,this._interval=setInterval((()=>this.flush()),5e3)}add(e,t,n,o="none",i={},r=$i()){const s=Math.floor(r),a=t.replace(/[^\w\-.]+/gi,"_");const l=function(e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[Gr(n)]=Yr(String(e[n])));return t}(i),c=function(e){return e.replace(/[^\w]+/gi,"_")}(o),d=function(e,t,n,o){return`${e}${t}${n}${Object.entries(to(o)).sort(((e,t)=>e[0].localeCompare(t[0])))}`}(e,a,c,l);let u=this._buckets.get(d);const p=u&&"s"===e?u.metric.weight:0;u?(u.metric.add(n),u.timestamp<s&&(u.timestamp=s)):(u={metric:new es[e](n),timestamp:s,metricType:e,name:a,unit:c,tags:l},this._buckets.set(d,u));Pr(e,a,"string"==typeof n?u.metric.weight-p:n,c,i,d)}flush(){if(0!==this._buckets.size){if(this._client.captureAggregateMetrics){const e=Array.from(this._buckets).map((([,e])=>e));this._client.captureAggregateMetrics(e)}this._buckets.clear()}}close(){clearInterval(this._interval),this.flush()}}const xs="MetricsAggregator",$s=()=>({name:xs,setupOnce(){},setup(e){e.metricsAggregator=new Ts(e)}});qr(xs,$s);const Cs="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function ks(e){const t=Fi([e,"call",e=>e(),"access",e=>e.getClient,"call",e=>e(),"optionalAccess",e=>e.getOptions,"call",e=>e()]);return"sentry"!==(Fi([t,"optionalAccess",e=>e.instrumenter])||"sentry")}class Ls{static __initStatic(){this.id="Express"}constructor(e={}){this.name=Ls.id,this._router=e.router||e.app,this._methods=(Array.isArray(e.methods)?e.methods:[]).concat("use")}setupOnce(e,t){this._router?ks(t)?Cs&&Fn.log("Express Integration is skipped because of instrumenter configuration."):(function(e,t=[]){t.forEach((t=>function(e,t){const n=e[t];return e[t]=function(...e){return n.call(this,...function(e,t){return e.map((e=>"function"==typeof e?Is(e,t):Array.isArray(e)?e.map((e=>"function"==typeof e?Is(e,t):e)):e))}(e,t))},e}(e,t)))}(this._router,this._methods),function(e){const t="settings"in e;t&&void 0===e._router&&e.lazyrouter&&e.lazyrouter();const n=t?e._router:e;if(!n)return Cs&&Fn.debug("Cannot instrument router for URL Parameterization (did not find a valid router)."),void(Cs&&Fn.debug("Routing instrumentation is currently only supported in Express 4."));const o=Object.getPrototypeOf(n),i=o.process_params;o.process_params=function(e,t,n,o,r){n._reconstructedRoute||(n._reconstructedRoute="");const{layerRoutePath:s,isRegex:a,isArray:l,numExtraSegments:c}=function(e){let t=Fi([e,"access",e=>e.route,"optionalAccess",e=>e.path]);const n=_n(t),o=Array.isArray(t);if(!t){const[n]=In.process.versions.node.split(".").map(Number);n>=16&&(t=As(e.path,e.regexp,e.keys))}if(!t)return{isRegex:n,isArray:o,numExtraSegments:0};const i=o?Math.max((s=t,s.reduce(((e,t)=>e+hi(t.toString())),0)-hi(e.path||"")),0):0,r=function(e,t){if(e)return t.map((e=>e.toString())).join(",");return t&&t.toString()}(o,t);var s;return{layerRoutePath:r,isRegex:n,isArray:o,numExtraSegments:i}}(e);let d;(s||a||l)&&(n._hasParameters=!0),d=s||(function(e,t,n){const o=Fi([gi(e||""),"optionalAccess",e=>e.split,"call",e=>e("/"),"access",e=>e.filter,"call",e=>e((e=>!!e))]);let i=0;const r=Fi([t,"optionalAccess",e=>e.split,"call",e=>e("/"),"access",e=>e.filter,"call",e=>e((e=>!!e)),"access",e=>e.length])||0;return Fi([n,"optionalAccess",e=>e.split,"call",e=>e("/"),"access",e=>e.filter,"call",e=>e((e=>Fi([o,"optionalAccess",e=>e[r+i]])===e&&(i+=1,!0))),"access",e=>e.join,"call",e=>e("/")])}(n.originalUrl,n._reconstructedRoute,e.path)||"");const u=d.split("/").filter((e=>e.length>0&&(a||l||!e.includes("*")))).join("/");u&&u.length>0&&(n._reconstructedRoute+=`/${u}${a?"/":""}`);if(hi(gi(n.originalUrl||""))+c===hi(n._reconstructedRoute)){n._hasParameters||n._reconstructedRoute!==n.originalUrl&&(n._reconstructedRoute=n.originalUrl?gi(n.originalUrl):n.originalUrl);const e=o.__sentry_transaction,t=e&&Qi(e).data||{};if(e&&"custom"!==t[Br]){const t=n._reconstructedRoute||"/",[o,i]=yi(n,{path:!0,method:!0,customRoute:t});e.updateName(o),e.setAttribute(Br,i)}}return i.call(this,e,t,n,o,r)}}(this._router)):Cs&&Fn.error("ExpressIntegration is missing an Express instance")}}function Is(e,t){const n=e.length;switch(n){case 2:return function(n,o){const i=o.__sentry_transaction;if(i){const n=i.startChild({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"});o.once("finish",(()=>{n.end()}))}return e.call(this,n,o)};case 3:return function(n,o,i){const r=Fi([o.__sentry_transaction,"optionalAccess",e=>e.startChild,"call",n=>n({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"})]);e.call(this,n,o,(function(...e){Fi([r,"optionalAccess",e=>e.end,"call",e=>e()]),i.call(this,...e)}))};case 4:return function(n,o,i,r){const s=Fi([i.__sentry_transaction,"optionalAccess",e=>e.startChild,"call",n=>n({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"})]);e.call(this,n,o,i,(function(...e){Fi([s,"optionalAccess",e=>e.end,"call",e=>e()]),r.call(this,...e)}))};default:throw new Error(`Express middleware takes 2-4 arguments. Got: ${n}`)}}Ls.__initStatic();const As=(e,t,n)=>{if(!(e&&t&&n&&0!==Object.keys(n).length&&Fi([n,"access",e=>e[0],"optionalAccess",e=>e.offset])))return;const o=n.sort(((e,t)=>e.offset-t.offset)),i=new RegExp(t,`${t.flags}d`).exec(e);if(!i||!i.indices)return;const[,...r]=i.indices;if(r.length!==o.length)return;let s=e,a=0;return r.forEach(((e,t)=>{if(e){const[n,i]=e,r=s.substring(0,n-a),l=`:${o[t].name}`,c=s.substring(i-a);s=r+l+c,a+=i-n-l.length}})),s};class Ms{static __initStatic(){this.id="Postgres"}constructor(e={}){this.name=Ms.id,this._usePgNative=!!e.usePgNative,this._module=e.module}loadDependency(){return this._module=this._module||Qo("pg")}setupOnce(e,t){if(ks(t))return void(Cs&&Fn.log("Postgres Integration is skipped because of instrumenter configuration."));const n=this.loadDependency();if(!n)return void(Cs&&Fn.error("Postgres Integration was unable to require `pg` package."));const o=this._usePgNative?Fi([n,"access",e=>e.native,"optionalAccess",e=>e.Client]):n.Client;o?Yn(o.prototype,"query",(function(e){return function(n,o,i){const r=t().getScope().getSpan(),s={"db.system":"postgresql"};try{this.database&&(s["db.name"]=this.database),this.host&&(s["server.address"]=this.host),this.port&&(s["server.port"]=this.port),this.user&&(s["db.user"]=this.user)}catch(e){}const a=Fi([r,"optionalAccess",e=>e.startChild,"call",e=>e({description:"string"==typeof n?n:n.text,op:"db",origin:"auto.db.postgres",data:s})]);if("function"==typeof i)return e.call(this,n,o,(function(e,t){Fi([a,"optionalAccess",e=>e.end,"call",e=>e()]),i(e,t)}));if("function"==typeof o)return e.call(this,n,(function(e,t){Fi([a,"optionalAccess",e=>e.end,"call",e=>e()]),o(e,t)}));const l=void 0!==o?e.call(this,n,o):e.call(this,n);return vn(l)?l.then((e=>(Fi([a,"optionalAccess",e=>e.end,"call",e=>e()]),e))):(Fi([a,"optionalAccess",e=>e.end,"call",e=>e()]),l)}})):Cs&&Fn.error("Postgres Integration was unable to access 'pg-native' bindings.")}}Ms.__initStatic();class Rs{static __initStatic(){this.id="Mysql"}constructor(){this.name=Rs.id}loadDependency(){return this._module=this._module||Qo("mysql/lib/Connection.js")}setupOnce(e,t){if(ks(t))return void(Cs&&Fn.log("Mysql Integration is skipped because of instrumenter configuration."));const n=this.loadDependency();if(!n)return void(Cs&&Fn.error("Mysql Integration was unable to require `mysql` package."));let o;try{n.prototype.connect=new Proxy(n.prototype.connect,{apply:(e,t,n)=>(o||(o=t.config),e.apply(t,n))})}catch(e){Cs&&Fn.error("Mysql Integration was unable to instrument `mysql` config.")}function i(e){if(!e)return;const t=o?{"server.address":o.host,"server.port":o.port,"db.user":o.user}:{};Object.keys(t).forEach((n=>{e.setAttribute(n,t[n])})),e.end()}Yn(n,"createQuery",(function(e){return function(n,o,r){const s=Fi([t().getScope().getSpan(),"optionalAccess",e=>e.startChild,"call",e=>e({description:"string"==typeof n?n:n.sql,op:"db",origin:"auto.db.mysql",data:{"db.system":"mysql"}})]);if("function"==typeof r)return e.call(this,n,o,(function(e,t,n){i(s),r(e,t,n)}));if("function"==typeof o)return e.call(this,n,(function(e,t,n){i(s),o(e,t,n)}));const a=e.call(this,n,o);return a.on("end",(()=>{i(s)})),a}}))}}Rs.__initStatic();const Os=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],Ns={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]};class Ds{static __initStatic(){this.id="Mongo"}constructor(e={}){this.name=Ds.id,this._operations=Array.isArray(e.operations)?e.operations:Os,this._describeOperations=!("describeOperations"in e)||e.describeOperations,this._useMongoose=!!e.useMongoose}loadDependency(){const e=this._useMongoose?"mongoose":"mongodb";return this._module=this._module||Qo(e)}setupOnce(e,t){if(ks(t))return void(Cs&&Fn.log("Mongo Integration is skipped because of instrumenter configuration."));const n=this.loadDependency();if(n)this._instrumentOperations(n.Collection,this._operations,t);else{const e=this._useMongoose?"mongoose":"mongodb";Cs&&Fn.error(`Mongo Integration was unable to require \`${e}\` package.`)}}_instrumentOperations(e,t,n){t.forEach((t=>this._patchOperation(e,t,n)))}_patchOperation(e,t,n){if(!(t in e.prototype))return;const o=this._getSpanContextFromOperationArguments.bind(this);Yn(e.prototype,t,(function(e){return function(...i){const r=i[i.length-1],s=n(),a=s.getScope(),l=s.getClient(),c=a.getSpan(),d=Fi([l,"optionalAccess",e=>e.getOptions,"call",e=>e(),"access",e=>e.sendDefaultPii]);if("function"!=typeof r||"mapReduce"===t&&2===i.length){const n=Fi([c,"optionalAccess",e=>e.startChild,"call",e=>e(o(this,t,i,d))]),r=e.call(this,...i);if(vn(r))return r.then((e=>(Fi([n,"optionalAccess",e=>e.end,"call",e=>e()]),e)));if((u=r)&&"object"==typeof u&&u.once&&"function"==typeof u.once){const e=r;try{e.once("close",(()=>{Fi([n,"optionalAccess",e=>e.end,"call",e=>e()])}))}catch(e){Fi([n,"optionalAccess",e=>e.end,"call",e=>e()])}return e}return Fi([n,"optionalAccess",e=>e.end,"call",e=>e()]),r}var u;const p=Fi([c,"optionalAccess",e=>e.startChild,"call",e=>e(o(this,t,i.slice(0,-1)))]);return e.call(this,...i.slice(0,-1),(function(e,t){Fi([p,"optionalAccess",e=>e.end,"call",e=>e()]),r(e,t)}))}}))}_getSpanContextFromOperationArguments(e,t,n,o=!1){const i={"db.system":"mongodb","db.name":e.dbName,"db.operation":t,"db.mongodb.collection":e.collectionName},r={op:"db",origin:"auto.db.mongo",description:t,data:i},s=Ns[t],a=Array.isArray(this._describeOperations)?this._describeOperations.includes(t):this._describeOperations;if(!s||!a||!o)return r;try{if("mapReduce"===t){const[e,t]=n;i[s[0]]="string"==typeof e?e:e.name||"<anonymous>",i[s[1]]="string"==typeof t?t:t.name||"<anonymous>"}else for(let e=0;e<s.length;e++)i[`db.mongodb.${s[e]}`]=JSON.stringify(n[e])}catch(e){}return r}}Ds.__initStatic();class Ps{static __initStatic(){this.id="Prisma"}constructor(e={}){if(this.name=Ps.id,(t=e.client)&&t.$use&&!e.client._sentryInstrumented){Zn(e.client,"_sentryInstrumented",!0);const t={};try{const n=e.client._engineConfig;if(n){const{activeProvider:e,clientVersion:o}=n;e&&(t["db.system"]=e),o&&(t["db.prisma.version"]=o)}}catch(e){}e.client.$use(((e,n)=>{if(ks(Cr))return n(e);const o=e.action,i=e.model;return Rr({name:i?`${i} ${o}`:o,onlyIfParent:!0,op:"db.prisma",attributes:{"sentry.origin":"auto.db.prisma"},data:{...t,"db.operation":o}},(()=>n(e)))}))}else Cs&&Fn.warn("Unsupported Prisma client provided to PrismaIntegration. Provided client:",e.client);var t}setupOnce(){}}Ps.__initStatic();class Bs{static __initStatic(){this.id="GraphQL"}constructor(){this.name=Bs.id}loadDependency(){return this._module=this._module||Qo("graphql/execution/execute.js")}setupOnce(e,t){if(ks(t))return void(Cs&&Fn.log("GraphQL Integration is skipped because of instrumenter configuration."));const n=this.loadDependency();n?Yn(n,"execute",(function(e){return function(...n){const o=t().getScope(),i=o.getSpan(),r=Fi([i,"optionalAccess",e=>e.startChild,"call",e=>e({description:"execute",op:"graphql.execute",origin:"auto.graphql.graphql"})]);Fi([o,"optionalAccess",e=>e.setSpan,"call",e=>e(r)]);const s=e.call(this,...n);return vn(s)?s.then((e=>(Fi([r,"optionalAccess",e=>e.end,"call",e=>e()]),Fi([o,"optionalAccess",e=>e.setSpan,"call",e=>e(i)]),e))):(Fi([r,"optionalAccess",e=>e.end,"call",e=>e()]),Fi([o,"optionalAccess",e=>e.setSpan,"call",e=>e(i)]),s)}})):Cs&&Fn.error("GraphQL Integration was unable to require graphql/execution package.")}}Bs.__initStatic();class Us{static __initStatic(){this.id="Apollo"}constructor(e={useNestjs:!1}){this.name=Us.id,this._useNest=!!e.useNestjs}loadDependency(){return this._useNest?this._module=this._module||Qo("@nestjs/graphql"):this._module=this._module||Qo("apollo-server-core"),this._module}setupOnce(e,t){if(ks(t))Cs&&Fn.log("Apollo Integration is skipped because of instrumenter configuration.");else if(this._useNest){const e=this.loadDependency();if(!e)return void(Cs&&Fn.error("Apollo-NestJS Integration was unable to require @nestjs/graphql package."));Yn(e.GraphQLFactory.prototype,"mergeWithSchema",(function(e){return function(...n){return Yn(this.resolversExplorerService,"explore",(function(e){return function(){return zs(Eo(e.call(this)),t)}})),e.call(this,...n)}}))}else{const e=this.loadDependency();if(!e)return void(Cs&&Fn.error("Apollo Integration was unable to require apollo-server-core package."));Yn(e.ApolloServerBase.prototype,"constructSchema",(function(e){return function(){if(!this.config.resolvers)return Cs&&(this.config.schema?(Fn.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `schema` property.If you are using NestJS with Apollo, please use `Sentry.Integrations.Apollo({ useNestjs: true })` instead."),Fn.warn()):this.config.modules&&Fn.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `modules` property."),Fn.error("Skipping tracing as no resolvers found on the `ApolloServer` instance.")),e.call(this);const n=Eo(this.config.resolvers);return this.config.resolvers=zs(n,t),e.call(this)}}))}}}function zs(e,t){return e.map((e=>(Object.keys(e).forEach((n=>{Object.keys(e[n]).forEach((o=>{"function"==typeof e[n][o]&&function(e,t,n,o){Yn(e[t],n,(function(e){return function(...i){const r=Fi([o().getScope().getSpan(),"optionalAccess",e=>e.startChild,"call",e=>e({description:`${t}.${n}`,op:"graphql.resolve",origin:"auto.graphql.apollo"})]),s=e.call(this,...i);return vn(s)?s.then((e=>(Fi([r,"optionalAccess",e=>e.end,"call",e=>e()]),e))):(Fi([r,"optionalAccess",e=>e.end,"call",e=>e()]),s)}}))}(e,n,o,t)}))})),e)))}Us.__initStatic();const Hs=In,Fs=()=>Hs.__WEB_VITALS_POLYFILL__?Hs.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||(()=>{const e=Hs.performance.timing,t=Hs.performance.navigation.type,n={entryType:"navigation",startTime:0,type:2==t?"back_forward":1===t?"reload":"navigate"};for(const t in e)"navigationStart"!==t&&"toJSON"!==t&&(n[t]=Math.max(e[t]-e.navigationStart,0));return n})()):Hs.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],Ws=()=>{const e=Fs();return e&&e.activationStart||0},js=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const o=new PerformanceObserver((e=>{t(e.getEntries())}));return o.observe(Object.assign({type:e,buffered:!0},n||{})),o}}catch(e){}},qs=(e,t)=>{const n=o=>{"pagehide"!==o.type&&"hidden"!==Hs.document.visibilityState||(e(o),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};Hs.document&&(addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0))};let Gs=-1;const Vs=()=>(Gs<0&&(Hs.document&&Hs.document.visibilityState&&(Gs="hidden"!==Hs.document.visibilityState||Hs.document.prerendering?1/0:0),qs((({timeStamp:e})=>{Gs=e}),!0)),{get firstHiddenTime(){return Gs}}),Ys={},Zs=e=>{const t=Vs(),n=((e,t)=>{const n=Fs();let o="navigate";return n&&(o=Hs.document&&Hs.document.prerendering||Ws()>0?"prerender":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:o}})("LCP");let o;const i=e=>{const i=e[e.length-1];if(i){const e=Math.max(i.startTime-Ws(),0);e<t.firstHiddenTime&&(n.value=e,n.entries=[i],o())}},r=js("largest-contentful-paint",i);if(r){o=((e,t,n)=>{let o,i;return r=>{t.value>=0&&(r||n)&&(i=t.value-(o||0),(i||void 0===o)&&(o=t.value,t.delta=i,e(t)))}})(e,n);const t=()=>{Ys[n.id]||(i(r.takeRecords()),r.disconnect(),Ys[n.id]=!0,o(!0))};return["keydown","click"].forEach((e=>{Hs.document&&addEventListener(e,t,{once:!0,capture:!0})})),qs(t,!0),t}},Ks={},Xs={};let Js;function Qs(e,t=!1){return function(e,t,n,o,i=!1){let r;oa(e,t),Xs[e]||(r=n(),Xs[e]=!0);o&&t({metric:o});return ia(e,t,i?r:void 0)}("lcp",e,na,Js,t)}function ea(e,t){return oa(e,t),Xs[e]||(!function(e){const t={};"event"===e&&(t.durationThreshold=0);js(e,(t=>{ta(e,{entries:t})}),t)}(e),Xs[e]=!0),ia(e,t)}function ta(e,t){const n=Ks[e];if(n&&n.length)for(const o of n)try{o(t)}catch(t){Cs&&Fn.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${ao(o)}\nError:`,t)}}function na(){return Zs((e=>{ta("lcp",{metric:e}),Js=e}))}function oa(e,t){Ks[e]=Ks[e]||[],Ks[e].push(t)}function ia(e,t,n){return()=>{n&&n();const o=Ks[e];if(!o)return;const i=o.indexOf(t);-1!==i&&o.splice(i,1)}}const ra=In;let sa=0;function aa(){return sa>0}function la(e,t={},n){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return t;if(Xn(e))return e}catch(t){return e}const o=function(){const o=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);const i=o.map((e=>la(e,t)));return e.apply(this,i)}catch(e){throw sa++,setTimeout((()=>{sa--})),cr((n=>{n.addEventProcessor((e=>(t.mechanism&&(yo(e,void 0,void 0),wo(e,t.mechanism)),e.extra={...e.extra,arguments:o},e))),rr(e)})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(o[t]=e[t])}catch(e){}Kn(o,e),Zn(e,"__sentry_wrapped__",o);try{Object.getOwnPropertyDescriptor(o,"name").configurable&&Object.defineProperty(o,"name",{get:()=>e.name})}catch(e){}return o}const ca="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function da(e,t){const n=pa(e,t),o={type:t&&t.name,value:ga(t)};return n.length&&(o.stacktrace={frames:n}),void 0===o.type&&""===o.value&&(o.value="Unrecoverable error caught"),o}function ua(e,t){return{exception:{values:[da(e,t)]}}}function pa(e,t){const n=t.stacktrace||t.stack||"",o=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(ma.test(e.message))return 1}return 0}(t);try{return e(n,o)}catch(e){}return[]}const ma=/Minified React error #\d+;/i;function ga(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function ha(e,t,n,o,i){let r;if(dn(t)&&t.error){return ua(e,t.error)}if(un(t)||cn(t,"DOMException")){const i=t;if("stack"in t)r=ua(e,t);else{const t=i.name||(un(i)?"DOMError":"DOMException"),s=i.message?`${t}: ${i.message}`:t;r=fa(e,s,n,o),yo(r,s)}return"code"in i&&(r.tags={...r.tags,"DOMException.code":`${i.code}`}),r}if(ln(t))return ua(e,t);if(hn(t)||fn(t)){return r=function(e,t,n,o){const i=dr(),r=i&&i.getOptions().normalizeDepth,s={exception:{values:[{type:fn(t)?t.constructor.name:o?"UnhandledRejection":"Error",value:_a(t,{isUnhandledRejection:o})}]},extra:{__serialized__:ni(t,r)}};if(n){const t=pa(e,n);t.length&&(s.exception.values[0].stacktrace={frames:t})}return s}(e,t,n,i),wo(r,{synthetic:!0}),r}return r=fa(e,t,n,o),yo(r,`${t}`,void 0),wo(r,{synthetic:!0}),r}function fa(e,t,n,o){const i={};if(o&&n){const o=pa(e,n);o.length&&(i.exception={values:[{value:t,stacktrace:{frames:o}}]})}if(mn(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return i.logentry={message:e,params:n},i}return i.message=t,i}function _a(e,{isUnhandledRejection:t}){const n=function(e,t=40){const n=Object.keys(Jn(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return bn(n[0],t);for(let e=n.length;e>0;e--){const o=n.slice(0,e).join(", ");if(!(o.length>t))return e===n.length?o:bn(o,t)}return""}(e),o=t?"promise rejection":"exception";if(dn(e))return`Event \`ErrorEvent\` captured as ${o} with message \`${e.message}\``;if(fn(e)){return`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${o}`}return`Object captured as ${o} with keys: ${n}`}class va extends Xr{constructor(e){!function(e,t,n=[t],o="npm"){const i=e._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${t}`,packages:n.map((e=>({name:`${o}:@sentry/${e}`,version:br}))),version:br}),e._metadata=i}(e,"browser",["browser"],ra.SENTRY_SDK_SOURCE||"npm"),super(e),e.sendClientReports&&ra.document&&ra.document.addEventListener("visibilitychange",(()=>{"hidden"===ra.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return function(e,t,n,o){const i=ha(e,t,n&&n.syntheticException||void 0,o);return wo(i),i.level="error",n&&n.event_id&&(i.event_id=n.event_id),ci(i)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return function(e,t,n="info",o,i){const r=fa(e,t,o&&o.syntheticException||void 0,i);return r.level=n,o&&o.event_id&&(r.event_id=o.event_id),ci(r)}(this._options.stackParser,e,t,n,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(ca&&Fn.warn("SDK not enabled, will not capture user feedback."));const t=function(e,{metadata:t,tunnel:n,dsn:o}){const i={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!o&&{dsn:jn(o)}},r=function(e){return[{type:"user_report"},e]}(e);return ki(i,[r])}(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}_flushOutcomes(){const e=this._clearOutcomes();if(0===e.length)return void(ca&&Fn.log("No outcomes to send"));if(!this._dsn)return void(ca&&Fn.log("No dsn provided, will not send outcomes"));ca&&Fn.log("Sending outcomes:",e);const t=(n=e,ki((o=this._options.tunnel&&jn(this._dsn))?{dsn:o}:{},[[{type:"client_report"},{timestamp:i||xi(),discarded_events:n}]]));var n,o,i;this._sendEnvelope(t)}}let ya;function wa(e,t=function(){if(ya)return ya;if(Mo(ra.fetch))return ya=ra.fetch.bind(ra);const e=ra.document;let t=ra.fetch;if(e&&"function"==typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const o=n.contentWindow;o&&o.fetch&&(t=o.fetch),e.head.removeChild(n)}catch(e){ca&&Fn.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return ya=t.bind(ra)}()){let n=0,o=0;return function(e,t,n=pi(e.bufferSize||ts)){let o={};function i(i){const r=[];if(Ii(i,((t,n)=>{const i=Ni(n);if(Ui(o,i)){const o=ns(t,n);e.recordDroppedEvent("ratelimit_backoff",i,o)}else r.push(t)})),0===r.length)return ci();const s=ki(i[0],r),a=t=>{Ii(s,((n,o)=>{const i=ns(n,o);e.recordDroppedEvent(t,Ni(o),i)}))};return n.add((()=>t({body:Mi(s,e.textEncoder)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&Wi&&Fn.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),o=zi(o,e),e)),(e=>{throw a("network_error"),e})))).then((e=>e),(e=>{if(e instanceof Vn)return Wi&&Fn.error("Skipped sending event because buffer is full."),a("queue_overflow"),ci();throw e}))}return i.__sentry__baseTransport__=!0,{send:i,flush:e=>n.drain(e)}}(e,(function(i){const r=i.body.length;n+=r,o++;const s={body:i.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&o<15,...e.fetchOptions};try{return t(e.url,s).then((e=>(n-=r,o--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return ya=void 0,n-=r,o--,di(e)}}))}const ba="?";function Ea(e,t,n,o){const i={filename:e,function:t,in_app:!0};return void 0!==n&&(i.lineno=n),void 0!==o&&(i.colno=o),i}const Sa=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Ta=/\((\S*)(?::(\d+))(?::(\d+))\)/,xa=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,$a=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Ca=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,ka=function(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,n=0)=>{const o=[],i=e.split("\n");for(let e=n;e<i.length;e++){const n=i[e];if(n.length>1024)continue;const r=io.test(n)?n.replace(io,"$1"):n;if(!r.match(/\S*Error: /)){for(const e of t){const t=e(r);if(t){o.push(t);break}}if(o.length>=oo)break}}return function(e){if(!e.length)return[];const t=Array.from(e);/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop();t.reverse(),ro.test(t[t.length-1].function||"")&&(t.pop(),ro.test(t[t.length-1].function||"")&&t.pop());return t.slice(0,oo).map((e=>({...e,filename:e.filename||t[t.length-1].filename,function:e.function||"?"})))}(o)}}(...[[30,e=>{const t=Sa.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){const e=Ta.exec(t[2]);e&&(t[2]=e[1],t[3]=e[2],t[4]=e[3])}const[e,n]=La(t[1]||ba,t[2]);return Ea(n,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],[50,e=>{const t=xa.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=$a.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||ba;return[n,e]=La(n,e),Ea(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],[40,e=>{const t=Ca.exec(e);return t?Ea(t[2],t[1]||ba,+t[3],t[4]?+t[4]:void 0):void 0}]]),La=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),o=-1!==e.indexOf("safari-web-extension");return n||o?[-1!==e.indexOf("@")?e.split("@")[0]:ba,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},Ia=1024,Aa="Breadcrumbs",Ma=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:Aa,setupOnce(){},setup(e){t.console&&go(function(e){return function(t){if(dr()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:Si(t.level),message:Sn(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${Sn(t.args.slice(1)," ")||"console.assert"}`,n.data.arguments=t.args.slice(1)}lr(n,{input:t.args,level:t.level})}}(e)),t.dom&&ko(function(e,t){return function(n){if(dr()!==e)return;let o,i,r="object"==typeof t?t.serializeAttribute:void 0,s="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;s&&s>Ia&&(ca&&Fn.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${s} was configured. Sentry will use 1024 instead.`),s=Ia),"string"==typeof r&&(r=[r]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;o=Nn(t,{keyAttrs:r,maxStringLength:s}),i=function(e){if(!Rn.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}(t)}catch(e){o="<unknown>"}if(0===o.length)return;const a={category:`ui.${n.name}`,message:o};i&&(a.data={"ui.component_name":i}),lr(a,{event:n.event,name:n.name,global:n.global})}}(e,t.dom)),t.xhr&&Zo(function(e){return function(t){if(dr()!==e)return;const{startTimestamp:n,endTimestamp:o}=t,i=t.xhr[Yo];if(!n||!o||!i)return;const{method:r,url:s,status_code:a,body:l}=i;lr({category:"xhr",data:{method:r,url:s,status_code:a},type:"http"},{xhr:t.xhr,input:l,startTimestamp:n,endTimestamp:o})}}(e)),t.fetch&&Oo(function(e){return function(t){if(dr()!==e)return;const{startTimestamp:n,endTimestamp:o}=t;if(o&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error){lr({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args,startTimestamp:n,endTimestamp:o})}else{const e=t.response;lr({category:"fetch",data:{...t.fetchData,status_code:e&&e.status},type:"http"},{input:t.args,response:e,startTimestamp:n,endTimestamp:o})}}}(e)),t.history&&qo(function(e){return function(t){if(dr()!==e)return;let n=t.from,o=t.to;const i=mi(ra.location.href);let r=n?mi(n):void 0;const s=mi(o);r&&r.path||(r=i),i.protocol===s.protocol&&i.host===s.host&&(o=s.relative),i.protocol===r.protocol&&i.host===r.host&&(n=r.relative),lr({category:"navigation",data:{from:n,to:o}})}}(e)),t.sentry&&e.on&&e.on("beforeSendEvent",function(e){return function(t){dr()===e&&lr({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:vo(t)},{event:t})}}(e))}}};qr(Aa,Ma);const Ra="Dedupe",Oa=()=>{let e;return{name:Ra,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,o=t.message;if(!n&&!o)return!1;if(n&&!o||!n&&o)return!1;if(n!==o)return!1;if(!Da(e,t))return!1;if(!Na(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=Pa(t),o=Pa(e);if(!n||!o)return!1;if(n.type!==o.type||n.value!==o.value)return!1;if(!Da(e,t))return!1;if(!Na(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return ca&&Fn.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}};qr(Ra,Oa);function Na(e,t){let n=Ba(e),o=Ba(t);if(!n&&!o)return!0;if(n&&!o||!n&&o)return!1;if(o.length!==n.length)return!1;for(let e=0;e<o.length;e++){const t=o[e],i=n[e];if(t.filename!==i.filename||t.lineno!==i.lineno||t.colno!==i.colno||t.function!==i.function)return!1}return!0}function Da(e,t){let n=e.fingerprint,o=t.fingerprint;if(!n&&!o)return!0;if(n&&!o||!n&&o)return!1;try{return!(n.join("")!==o.join(""))}catch(e){return!1}}function Pa(e){return e.exception&&e.exception.values&&e.exception.values[0]}function Ba(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}const Ua="GlobalHandlers",za=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:Ua,setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(!function(e){!function(e){const t="error";uo(t,e),po(t,Uo)}((t=>{const{stackParser:n,attachStacktrace:o}=Wa();if(dr()!==e||aa())return;const{msg:i,url:r,line:s,column:a,error:l}=t,c=void 0===l&&pn(i)?function(e,t,n,o){const i=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let r=dn(e)?e.message:e,s="Error";const a=r.match(i);a&&(s=a[1],r=a[2]);const l={exception:{values:[{type:s,value:r}]}};return Ha(l,t,n,o)}(i,r,s,a):Ha(ha(n,l||i,void 0,o,!1),r,s,a);c.level="error",ar(c,{originalException:l,mechanism:{handled:!1,type:"onerror"}})}))}(e),Fa("onerror")),t.onunhandledrejection&&(!function(e){!function(e){const t="unhandledrejection";uo(t,e),po(t,Ho)}((t=>{const{stackParser:n,attachStacktrace:o}=Wa();if(dr()!==e||aa())return;const i=function(e){if(gn(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch(e){}return e}(t),r=gn(i)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(i)}`}]}}:ha(n,i,void 0,o,!0);r.level="error",ar(r,{originalException:i,mechanism:{handled:!1,type:"onunhandledrejection"}})}))}(e),Fa("onunhandledrejection"))}}};qr(Ua,za);function Ha(e,t,n,o){const i=e.exception=e.exception||{},r=i.values=i.values||[],s=r[0]=r[0]||{},a=s.stacktrace=s.stacktrace||{},l=a.frames=a.frames||[],c=isNaN(parseInt(o,10))?void 0:o,d=isNaN(parseInt(n,10))?void 0:n,u=pn(t)&&t.length>0?t:Pn();return 0===l.length&&l.push({colno:c,filename:u,function:"?",in_app:!0,lineno:d}),e}function Fa(e){ca&&Fn.log(`Global Handler attached: ${e}`)}function Wa(){const e=dr();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const ja="HttpContext",qa=()=>({name:ja,setupOnce(){},preprocessEvent(e){if(!ra.navigator&&!ra.location&&!ra.document)return;const t=e.request&&e.request.url||ra.location&&ra.location.href,{referrer:n}=ra.document||{},{userAgent:o}=ra.navigator||{},i={...e.request&&e.request.headers,...n&&{Referer:n},...o&&{"User-Agent":o}},r={...e.request,...t&&{url:t},headers:i};e.request=r}}),Ga=(qr(ja,qa),"LinkedErrors"),Va=(e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:Ga,setupOnce(){},preprocessEvent(e,o,i){const r=i.getOptions();xn(da,r.stackParser,r.maxValueLength,n,t,e,o)}}},Ya=(qr(Ga,Va),["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"]),Za="TryCatch",Ka=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:Za,setupOnce(){t.setTimeout&&Yn(ra,"setTimeout",Xa),t.setInterval&&Yn(ra,"setInterval",Xa),t.requestAnimationFrame&&Yn(ra,"requestAnimationFrame",Ja),t.XMLHttpRequest&&"XMLHttpRequest"in ra&&Yn(XMLHttpRequest.prototype,"send",Qa);const e=t.eventTarget;if(e){(Array.isArray(e)?e:Ya).forEach(el)}}}};qr(Za,Ka);function Xa(e){return function(...t){const n=t[0];return t[0]=la(n,{mechanism:{data:{function:ao(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function Ja(e){return function(t){return e.apply(this,[la(t,{mechanism:{data:{function:"requestAnimationFrame",handler:ao(e)},handled:!1,type:"instrument"}})])}}function Qa(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in n&&"function"==typeof n[e]&&Yn(n,e,(function(t){const n={mechanism:{data:{function:e,handler:ao(t)},handled:!1,type:"instrument"}},o=Xn(t);return o&&(n.mechanism.data.handler=ao(o)),la(t,n)}))})),e.apply(this,t)}}function el(e){const t=ra,n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(Yn(n,"addEventListener",(function(t){return function(n,o,i){try{"function"==typeof o.handleEvent&&(o.handleEvent=la(o.handleEvent,{mechanism:{data:{function:"handleEvent",handler:ao(o),target:e},handled:!1,type:"instrument"}}))}catch(e){}return t.apply(this,[n,la(o,{mechanism:{data:{function:"addEventListener",handler:ao(o),target:e},handled:!1,type:"instrument"}}),i])}})),Yn(n,"removeEventListener",(function(e){return function(t,n,o){const i=n;try{const n=i&&i.__sentry_wrapped__;n&&e.call(this,t,n,o)}catch(e){}return e.call(this,t,i,o)}})))}const tl=[fs(),bs(),Ka(),Ma(),za(),Va(),Oa(),qa()];const nl=In,ol="sentryReplaySession",il="replay_event",rl="Unable to send Replay",sl=15e4,al=5e3,ll=2e7,cl=36e5;function dl(e){let t,n=e[0],o=1;for(;o<e.length;){const i=e[o],r=e[o+1];if(o+=2,("optionalAccess"===i||"optionalCall"===i)&&null==n)return;"access"===i||"optionalAccess"===i?(t=n,n=r(n)):"call"!==i&&"optionalCall"!==i||(n=r(((...e)=>n.call(t,...e))),t=void 0)}return n}var ul;function pl(e){const t=dl([e,"optionalAccess",e=>e.host]);return Boolean(dl([t,"optionalAccess",e=>e.shadowRoot])===e)}function ml(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function gl(e){try{const n=e.rules||e.cssRules;return n?((t=Array.from(n,hl).join("")).includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),t):null}catch(e){return null}var t}function hl(e){let t;if(function(e){return"styleSheet"in e}(e))try{t=gl(e.styleSheet)||function(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return""===e.layerName?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(e){}else if(function(e){return"selectorText"in e}(e)&&e.selectorText.includes(":"))return function(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}(e.cssText);return t||e.cssText}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(ul||(ul={}));class fl{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){if(!e)return-1;const t=dl([this,"access",e=>e.getMeta,"call",t=>t(e),"optionalAccess",e=>e.id]);return o=()=>-1,null!=(n=t)?n:o();var n,o}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function _l({maskInputOptions:e,tagName:t,type:n}){return"OPTION"===t&&(t="SELECT"),Boolean(e[t.toLowerCase()]||n&&e[n]||"password"===n||"INPUT"===t&&!n&&e.text)}function vl({isMasked:e,element:t,value:n,maskInputFn:o}){let i=n||"";return e?(o&&(i=o(i,t)),"*".repeat(i.length)):i}function yl(e){return e.toLowerCase()}function wl(e){return e.toUpperCase()}const bl="__rrweb_original__";function El(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?yl(t):null}function Sl(e,t,n){return"INPUT"!==t||"radio"!==n&&"checkbox"!==n?e.value:e.getAttribute("value")||""}let Tl=1;const xl=new RegExp("[^a-z0-9-_:]"),$l=-2;function Cl(){return Tl++}let kl,Ll;const Il=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Al=/^(?:[a-z+]+:)?\/\//i,Ml=/^www\..*/i,Rl=/^(data:)([^,]*),(.*)/i;function Ol(e,t){return(e||"").replace(Il,((e,n,o,i,r,s)=>{const a=o||r||s,l=n||i||"";if(!a)return e;if(Al.test(a)||Ml.test(a))return`url(${l}${a}${l})`;if(Rl.test(a))return`url(${l}${a}${l})`;if("/"===a[0])return`url(${l}${function(e){let t="";return t=e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0],t=t.split("?")[0],t}(t)+a}${l})`;const c=t.split("/"),d=a.split("/");c.pop();for(const e of d)"."!==e&&(".."===e?c.pop():c.push(e));return`url(${l}${c.join("/")}${l})`}))}const Nl=/^[^ \t\n\r\u000c]+/,Dl=/^[, \t\n\r\u000c]+/;function Pl(e,t){if(!t||""===t.trim())return t;const n=e.createElement("a");return n.href=t,n.href}function Bl(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function Ul(){const e=document.createElement("a");return e.href="",e.href}function zl(e,t,n,o,i,r){return o?"src"===n||"href"===n&&("use"!==t||"#"!==o[0])||"xlink:href"===n&&"#"!==o[0]?Pl(e,o):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;let n=0;function o(e){let o;const i=e.exec(t.substring(n));return i?(o=i[0],n+=o.length,o):""}const i=[];for(;o(Dl),!(n>=t.length);){let r=o(Nl);if(","===r.slice(-1))r=Pl(e,r.substring(0,r.length-1)),i.push(r);else{let o="";r=Pl(e,r);let s=!1;for(;;){const e=t.charAt(n);if(""===e){i.push((r+o).trim());break}if(s)")"===e&&(s=!1);else{if(","===e){n+=1,i.push((r+o).trim());break}"("===e&&(s=!0)}o+=e,n+=1}}}return i.join(", ")}(e,o):"style"===n?Ol(o,Ul()):"object"===t&&"data"===n?Pl(e,o):"function"==typeof r?r(n,o,i):o:Pl(e,o):o}function Hl(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function Fl(e,t,n=1/0,o=0){return e?e.nodeType!==e.ELEMENT_NODE||o>n?-1:t(e)?o:Fl(e.parentNode,t,n,o+1):-1}function Wl(e,t){return n=>{const o=n;if(null===o)return!1;try{if(e)if("string"==typeof e){if(o.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const o=e.classList[n];if(t.test(o))return!0}return!1}(o,e))return!0;return!(!t||!o.matches(t))}catch(e){return!1}}}function jl(e,t,n,o,i,r){try{const s=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===s)return!1;if("INPUT"===s.tagName){const e=s.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(e))return!0}let a=-1,l=-1;if(r){if(l=Fl(s,Wl(o,i)),l<0)return!0;a=Fl(s,Wl(t,n),l>=0?l:1/0)}else{if(a=Fl(s,Wl(t,n)),a<0)return!1;l=Fl(s,Wl(o,i),a>=0?a:1/0)}return a>=0?!(l>=0)||a<=l:!(l>=0)&&!!r}catch(e){}return!!r}function ql(e,t){const{doc:n,mirror:o,blockClass:i,blockSelector:r,unblockSelector:s,maskAllText:a,maskAttributeFn:l,maskTextClass:c,unmaskTextClass:d,maskTextSelector:u,unmaskTextSelector:p,inlineStylesheet:m,maskInputOptions:g={},maskTextFn:h,maskInputFn:f,dataURLOptions:_={},inlineImages:v,recordCanvas:y,keepIframeSrcFn:w,newlyAddedElement:b=!1}=t,E=function(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return 1===n?void 0:n}(n,o);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:ul.Document,childNodes:[],compatMode:e.compatMode}:{type:ul.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:ul.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:E};case e.ELEMENT_NODE:return function(e,t){const{doc:n,blockClass:o,blockSelector:i,unblockSelector:r,inlineStylesheet:s,maskInputOptions:a={},maskAttributeFn:l,maskInputFn:c,dataURLOptions:d={},inlineImages:u,recordCanvas:p,keepIframeSrcFn:m,newlyAddedElement:g=!1,rootId:h,maskAllText:f,maskTextClass:_,unmaskTextClass:v,maskTextSelector:y,unmaskTextSelector:w}=t,b=function(e,t,n,o){try{if(o&&e.matches(o))return!1;if("string"==typeof t){if(e.classList.contains(t))return!0}else for(let n=e.classList.length;n--;){const o=e.classList[n];if(t.test(o))return!0}if(n)return e.matches(n)}catch(e){}return!1}(e,o,i,r),E=function(e){if(e instanceof HTMLFormElement)return"form";const t=yl(e.tagName);return xl.test(t)?"div":t}(e);let S={};const T=e.attributes.length;for(let t=0;t<T;t++){const o=e.attributes[t];o.name&&!Hl(E,o.name,o.value)&&(S[o.name]=zl(n,E,yl(o.name),o.value,e,l))}if("link"===E&&s){const t=Array.from(n.styleSheets).find((t=>t.href===e.href));let o=null;t&&(o=gl(t)),o&&(delete S.rel,delete S.href,S._cssText=Ol(o,t.href))}if("style"===E&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const t=gl(e.sheet);t&&(S._cssText=Ol(t,Ul()))}if("input"===E||"textarea"===E||"select"===E||"option"===E){const t=e,n=El(t),o=Sl(t,wl(E),n),i=t.checked;if("submit"!==n&&"button"!==n&&o){const e=jl(t,_,y,v,w,_l({type:n,tagName:wl(E),maskInputOptions:a}));S.value=vl({isMasked:e,element:t,value:o,maskInputFn:c})}i&&(S.checked=i)}"option"===E&&(e.selected&&!a.select?S.selected=!0:delete S.selected);if("canvas"===E&&p)if("2d"===e.__context)(function(e){const t=e.getContext("2d");if(!t)return!0;for(let n=0;n<e.width;n+=50)for(let o=0;o<e.height;o+=50){const i=t.getImageData,r=bl in i?i[bl]:i;if(new Uint32Array(r.call(t,n,o,Math.min(50,e.width-n),Math.min(50,e.height-o)).data.buffer).some((e=>0!==e)))return!1}return!0})(e)||(S.rr_dataURL=e.toDataURL(d.type,d.quality));else if(!("__context"in e)){const t=e.toDataURL(d.type,d.quality),n=document.createElement("canvas");n.width=e.width,n.height=e.height;t!==n.toDataURL(d.type,d.quality)&&(S.rr_dataURL=t)}if("img"===E&&u){kl||(kl=n.createElement("canvas"),Ll=kl.getContext("2d"));const t=e,o=t.crossOrigin;t.crossOrigin="anonymous";const i=()=>{t.removeEventListener("load",i);try{kl.width=t.naturalWidth,kl.height=t.naturalHeight,Ll.drawImage(t,0,0),S.rr_dataURL=kl.toDataURL(d.type,d.quality)}catch(e){console.warn(`Cannot inline img src=${t.currentSrc}! Error: ${e}`)}o?S.crossOrigin=o:t.removeAttribute("crossorigin")};t.complete&&0!==t.naturalWidth?i():t.addEventListener("load",i)}"audio"!==E&&"video"!==E||(S.rr_mediaState=e.paused?"paused":"played",S.rr_mediaCurrentTime=e.currentTime);g||(e.scrollLeft&&(S.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(S.rr_scrollTop=e.scrollTop));if(b){const{width:t,height:n}=e.getBoundingClientRect();S={class:S.class,rr_width:`${t}px`,rr_height:`${n}px`}}"iframe"!==E||m(S.src)||(e.contentDocument||(S.rr_src=S.src),delete S.src);let x;try{customElements.get(E)&&(x=!0)}catch(e){}return{type:ul.Element,tagName:E,attributes:S,childNodes:[],isSVG:Bl(e)||void 0,needBlock:b,rootId:h,isCustom:x}}(e,{doc:n,blockClass:i,blockSelector:r,unblockSelector:s,inlineStylesheet:m,maskAttributeFn:l,maskInputOptions:g,maskInputFn:f,dataURLOptions:_,inlineImages:v,recordCanvas:y,keepIframeSrcFn:w,newlyAddedElement:b,rootId:E,maskAllText:a,maskTextClass:c,unmaskTextClass:d,maskTextSelector:u,unmaskTextSelector:p});case e.TEXT_NODE:return function(e,t){const{maskAllText:n,maskTextClass:o,unmaskTextClass:i,maskTextSelector:r,unmaskTextSelector:s,maskTextFn:a,maskInputOptions:l,maskInputFn:c,rootId:d}=t,u=e.parentNode&&e.parentNode.tagName;let p=e.textContent;const m="STYLE"===u||void 0,g="SCRIPT"===u||void 0,h="TEXTAREA"===u||void 0;if(m&&p){try{e.nextSibling||e.previousSibling||dl([e,"access",e=>e.parentNode,"access",e=>e.sheet,"optionalAccess",e=>e.cssRules])&&(p=gl(e.parentNode.sheet))}catch(t){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${t}`,e)}p=Ol(p,Ul())}g&&(p="SCRIPT_PLACEHOLDER");const f=jl(e,o,r,i,s,n);m||g||h||!p||!f||(p=a?a(p,e.parentElement):p.replace(/[\S]/g,"*"));h&&p&&(l.textarea||f)&&(p=c?c(p,e.parentNode):p.replace(/[\S]/g,"*"));if("OPTION"===u&&p){p=vl({isMasked:jl(e,o,r,i,s,_l({type:null,tagName:u,maskInputOptions:l})),element:e,value:p,maskInputFn:c})}return{type:ul.Text,textContent:p||"",isStyle:m,rootId:d}}(e,{maskAllText:a,maskTextClass:c,unmaskTextClass:d,maskTextSelector:u,unmaskTextSelector:p,maskTextFn:h,maskInputOptions:g,maskInputFn:f,rootId:E});case e.CDATA_SECTION_NODE:return{type:ul.CDATA,textContent:"",rootId:E};case e.COMMENT_NODE:return{type:ul.Comment,textContent:e.textContent||"",rootId:E};default:return!1}}function Gl(e){return null==e?"":e.toLowerCase()}function Vl(e,t){const{doc:n,mirror:o,blockClass:i,blockSelector:r,unblockSelector:s,maskAllText:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:d,unmaskTextSelector:u,skipChild:p=!1,inlineStylesheet:m=!0,maskInputOptions:g={},maskAttributeFn:h,maskTextFn:f,maskInputFn:_,slimDOMOptions:v,dataURLOptions:y={},inlineImages:w=!1,recordCanvas:b=!1,onSerialize:E,onIframeLoad:S,iframeLoadTimeout:T=5e3,onStylesheetLoad:x,stylesheetLoadTimeout:$=5e3,keepIframeSrcFn:C=(()=>!1),newlyAddedElement:k=!1}=t;let{preserveWhiteSpace:L=!0}=t;const I=ql(e,{doc:n,mirror:o,blockClass:i,blockSelector:r,maskAllText:a,unblockSelector:s,maskTextClass:l,unmaskTextClass:c,maskTextSelector:d,unmaskTextSelector:u,inlineStylesheet:m,maskInputOptions:g,maskAttributeFn:h,maskTextFn:f,maskInputFn:_,dataURLOptions:y,inlineImages:w,recordCanvas:b,keepIframeSrcFn:C,newlyAddedElement:k});if(!I)return console.warn(e,"not serialized"),null;let A;A=o.hasNode(e)?o.getId(e):!function(e,t){if(t.comment&&e.type===ul.Comment)return!0;if(e.type===ul.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(Gl(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===Gl(e.attributes.name)||"icon"===Gl(e.attributes.rel)||"apple-touch-icon"===Gl(e.attributes.rel)||"shortcut icon"===Gl(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&Gl(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(Gl(e.attributes.property).match(/^(og|twitter|fb):/)||Gl(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===Gl(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===Gl(e.attributes.name)||"googlebot"===Gl(e.attributes.name)||"bingbot"===Gl(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===Gl(e.attributes.name)||"generator"===Gl(e.attributes.name)||"framework"===Gl(e.attributes.name)||"publisher"===Gl(e.attributes.name)||"progid"===Gl(e.attributes.name)||Gl(e.attributes.property).match(/^article:/)||Gl(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===Gl(e.attributes.name)||"yandex-verification"===Gl(e.attributes.name)||"csrf-token"===Gl(e.attributes.name)||"p:domain_verify"===Gl(e.attributes.name)||"verify-v1"===Gl(e.attributes.name)||"verification"===Gl(e.attributes.name)||"shopify-checkout-api-token"===Gl(e.attributes.name)))return!0}}return!1}(I,v)&&(L||I.type!==ul.Text||I.isStyle||I.textContent.replace(/^\s+|\s+$/gm,"").length)?Cl():$l;const M=Object.assign(I,{id:A});if(o.add(e,M),A===$l)return null;E&&E(e);let R=!p;if(M.type===ul.Element){R=R&&!M.needBlock,delete M.needBlock;const t=e.shadowRoot;t&&ml(t)&&(M.isShadowHost=!0)}if((M.type===ul.Document||M.type===ul.Element)&&R){v.headWhitespace&&M.type===ul.Element&&"head"===M.tagName&&(L=!1);const t={doc:n,mirror:o,blockClass:i,blockSelector:r,maskAllText:a,unblockSelector:s,maskTextClass:l,unmaskTextClass:c,maskTextSelector:d,unmaskTextSelector:u,skipChild:p,inlineStylesheet:m,maskInputOptions:g,maskAttributeFn:h,maskTextFn:f,maskInputFn:_,slimDOMOptions:v,dataURLOptions:y,inlineImages:w,recordCanvas:b,preserveWhiteSpace:L,onSerialize:E,onIframeLoad:S,iframeLoadTimeout:T,onStylesheetLoad:x,stylesheetLoadTimeout:$,keepIframeSrcFn:C};for(const n of Array.from(e.childNodes)){const e=Vl(n,t);e&&M.childNodes.push(e)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(const n of Array.from(e.shadowRoot.childNodes)){const o=Vl(n,t);o&&(ml(e.shadowRoot)&&(o.isShadow=!0),M.childNodes.push(o))}}return e.parentNode&&pl(e.parentNode)&&ml(e.parentNode)&&(M.isShadow=!0),M.type===ul.Element&&"iframe"===M.tagName&&function(e,t,n){const o=e.contentWindow;if(!o)return;let i,r=!1;try{i=o.document.readyState}catch(e){return}if("complete"!==i){const o=setTimeout((()=>{r||(t(),r=!0)}),n);return void e.addEventListener("load",(()=>{clearTimeout(o),r=!0,t()}))}const s="about:blank";if(o.location.href!==s||e.src===s||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}(e,(()=>{const t=e.contentDocument;if(t&&S){const n=Vl(t,{doc:t,mirror:o,blockClass:i,blockSelector:r,unblockSelector:s,maskAllText:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:d,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:m,maskInputOptions:g,maskAttributeFn:h,maskTextFn:f,maskInputFn:_,slimDOMOptions:v,dataURLOptions:y,inlineImages:w,recordCanvas:b,preserveWhiteSpace:L,onSerialize:E,onIframeLoad:S,iframeLoadTimeout:T,onStylesheetLoad:x,stylesheetLoadTimeout:$,keepIframeSrcFn:C});n&&S(e,n)}}),T),M.type===ul.Element&&"link"===M.tagName&&"stylesheet"===M.attributes.rel&&function(e,t,n){let o,i=!1;try{o=e.sheet}catch(e){return}if(o)return;const r=setTimeout((()=>{i||(t(),i=!0)}),n);e.addEventListener("load",(()=>{clearTimeout(r),i=!0,t()}))}(e,(()=>{if(x){const t=Vl(e,{doc:n,mirror:o,blockClass:i,blockSelector:r,unblockSelector:s,maskAllText:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:d,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:m,maskInputOptions:g,maskAttributeFn:h,maskTextFn:f,maskInputFn:_,slimDOMOptions:v,dataURLOptions:y,inlineImages:w,recordCanvas:b,preserveWhiteSpace:L,onSerialize:E,onIframeLoad:S,iframeLoadTimeout:T,onStylesheetLoad:x,stylesheetLoadTimeout:$,keepIframeSrcFn:C});t&&x(e,t)}}),$),M}function Yl(e){let t,n=e[0],o=1;for(;o<e.length;){const i=e[o],r=e[o+1];if(o+=2,("optionalAccess"===i||"optionalCall"===i)&&null==n)return;"access"===i||"optionalAccess"===i?(t=n,n=r(n)):"call"!==i&&"optionalCall"!==i||(n=r(((...e)=>n.call(t,...e))),t=void 0)}return n}function Zl(e,t,n=document){const o={capture:!0,passive:!0};return n.addEventListener(e,t,o),()=>n.removeEventListener(e,t,o)}const Kl="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let Xl={map:{},getId:()=>(console.error(Kl),-1),getNode:()=>(console.error(Kl),null),removeNodeFromMap(){console.error(Kl)},has:()=>(console.error(Kl),!1),reset(){console.error(Kl)}};function Jl(e,t,n={}){let o=null,i=0;return function(...r){const s=Date.now();i||!1!==n.leading||(i=s);const a=t-(s-i),l=this;a<=0||a>t?(o&&(!function(...e){vc("clearTimeout")(...e)}(o),o=null),i=s,e.apply(l,r)):o||!1===n.trailing||(o=yc((()=>{i=!1===n.leading?0:Date.now(),o=null,e.apply(l,r)}),a))}}function Ql(e,t,n,o,i=window){const r=i.Object.getOwnPropertyDescriptor(e,t);return i.Object.defineProperty(e,t,o?n:{set(e){yc((()=>{n.set.call(this,e)}),0),r&&r.set&&r.set.call(this,e)}}),()=>Ql(e,t,r||{},!0)}function ec(e,t,n){try{if(!(t in e))return()=>{};const o=e[t],i=n(o);return"function"==typeof i&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:o}})),e[t]=i,()=>{e[t]=o}}catch(e){return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(Xl=new Proxy(Xl,{get:(e,t,n)=>("map"===t&&console.error(Kl),Reflect.get(e,t,n))}));let tc=Date.now;function nc(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:Yl([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollLeft])||Yl([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollLeft])||Yl([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollLeft])||0,top:t.scrollingElement?t.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:Yl([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollTop])||Yl([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollTop])||Yl([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollTop])||0}}function oc(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function ic(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function rc(e){if(!e)return null;return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}function sc(e,t,n,o,i){if(!e)return!1;const r=rc(e);if(!r)return!1;const s=Wl(t,n);if(!i){const e=o&&r.matches(o);return s(r)&&!e}const a=Fl(r,s);let l=-1;return!(a<0)&&(o&&(l=Fl(r,Wl(null,o))),a>-1&&l<0||a<l)}function ac(e,t){return t.getId(e)===$l}function lc(e,t){if(pl(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||lc(e.parentNode,t))}function cc(e){return Boolean(e.changedTouches)}function dc(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function uc(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function pc(e){return Boolean(Yl([e,"optionalAccess",e=>e.shadowRoot]))}/[1-9][0-9]{12}/.test(Date.now().toString())||(tc=()=>(new Date).getTime());class mc{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){return t=this.styleIDMap.get(e),n=()=>-1,null!=t?t:n();var t,n}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function gc(e){let t=null;return Yl([e,"access",e=>e.getRootNode,"optionalCall",e=>e(),"optionalAccess",e=>e.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function hc(e){const t=e.ownerDocument;if(!t)return!1;const n=function(e){let t,n=e;for(;t=gc(n);)n=t;return n}(e);return t.contains(n)}function fc(e){const t=e.ownerDocument;return!!t&&(t.contains(e)||hc(e))}const _c={};function vc(e){const t=_c[e];if(t)return t;const n=window.document;let o=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const i=t.contentWindow;i&&i[e]&&(o=i[e]),n.head.removeChild(t)}catch(e){}return _c[e]=o.bind(window)}function yc(...e){return vc("setTimeout")(...e)}var wc=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(wc||{}),bc=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(bc||{}),Ec=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(Ec||{}),Sc=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(Sc||{});function Tc(e){let t,n=e[0],o=1;for(;o<e.length;){const i=e[o],r=e[o+1];if(o+=2,("optionalAccess"===i||"optionalCall"===i)&&null==n)return;"access"===i||"optionalAccess"===i?(t=n,n=r(n)):"call"!==i&&"optionalCall"!==i||(n=r(((...e)=>n.call(t,...e))),t=void 0)}return n}function xc(e){return"__ln"in e}class $c{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=Tc([t,"optionalAccess",e=>e.next])||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&xc(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&xc(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const Cc=(e,t)=>`${e}@${t}`;class kc{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,n=new $c,o=e=>{let t=e,n=$l;for(;n===$l;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},i=i=>{if(!i.parentNode||!fc(i))return;const r=pl(i.parentNode)?this.mirror.getId(gc(i)):this.mirror.getId(i.parentNode),s=o(i);if(-1===r||-1===s)return n.addNode(i);const a=Vl(i,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{dc(e,this.mirror)&&this.iframeManager.addIframe(e),uc(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),pc(i)&&this.shadowDomManager.addShadowRoot(i.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});a&&(e.push({parentId:r,nextId:s,node:a}),t.add(a.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const e of this.movedSet)Ic(this.removes,e,this.mirror)&&!this.movedSet.has(e.parentNode)||i(e);for(const e of this.addedSet)Mc(this.droppedSet,e)||Ic(this.removes,e,this.mirror)?Mc(this.movedSet,e)?i(e):this.droppedSet.add(e):i(e);let r=null;for(;n.length;){let e=null;if(r){const t=this.mirror.getId(r.value.parentNode),n=o(r.value);-1!==t&&-1!==n&&(e=r)}if(!e){let t=n.tail;for(;t;){const n=t;if(t=t.previous,n){const t=this.mirror.getId(n.value.parentNode);if(-1===o(n.value))continue;if(-1!==t){e=n;break}{const t=n.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const o=t.parentNode.host;if(-1!==this.mirror.getId(o)){e=n;break}}}}}}if(!e){for(;n.head;)n.removeNode(n.head.value);break}r=e.previous,n.removeNode(e.value),i(e.value)}const s={texts:this.texts.map((e=>({id:this.mirror.getId(e.node),value:e.value}))).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),attributes:this.attributes.map((e=>{const{attributes:t}=e;if("string"==typeof t.style){const n=JSON.stringify(e.styleDiff),o=JSON.stringify(e._unchangedStyles);n.length<t.style.length&&(n+o).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}})).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),removes:this.removes,adds:e};(s.texts.length||s.attributes.length||s.removes.length||s.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(s))},this.processMutation=e=>{if(!ac(e.target,this.mirror))switch(e.type){case"characterData":{const t=e.target.textContent;sc(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||t===e.oldValue||this.texts.push({value:jl(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&t?this.maskTextFn?this.maskTextFn(t,rc(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const t=e.target;let n=e.attributeName,o=e.target.getAttribute(n);if("value"===n){const n=El(t),i=t.tagName;o=Sl(t,i,n);const r=_l({maskInputOptions:this.maskInputOptions,tagName:i,type:n});o=vl({isMasked:jl(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,r),element:t,value:o,maskInputFn:this.maskInputFn})}if(sc(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||o===e.oldValue)return;let i=this.attributeMap.get(e.target);if("IFRAME"===t.tagName&&"src"===n&&!this.keepIframeSrcFn(o)){if(t.contentDocument)return;n="rr_src"}if(i||(i={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i),this.attributeMap.set(e.target,i)),"type"===n&&"INPUT"===t.tagName&&"password"===(e.oldValue||"").toLowerCase()&&t.setAttribute("data-rr-is-password","true"),!Hl(t.tagName,n)&&(i.attributes[n]=zl(this.doc,yl(t.tagName),yl(n),o,t,this.maskAttributeFn),"style"===n)){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(e){this.unattachedDoc=this.doc}const n=this.unattachedDoc.createElement("span");e.oldValue&&n.setAttribute("style",e.oldValue);for(const e of Array.from(t.style)){const o=t.style.getPropertyValue(e),r=t.style.getPropertyPriority(e);o!==n.style.getPropertyValue(e)||r!==n.style.getPropertyPriority(e)?i.styleDiff[e]=""===r?o:[o,r]:i._unchangedStyles[e]=[o,r]}for(const e of Array.from(n.style))""===t.style.getPropertyValue(e)&&(i.styleDiff[e]=!1)}break}case"childList":if(sc(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach((t=>this.genAdds(t,e.target))),e.removedNodes.forEach((t=>{const n=this.mirror.getId(t),o=pl(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);sc(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||ac(t,this.mirror)||!function(e,t){return-1!==t.getId(e)}(t,this.mirror)||(this.addedSet.has(t)?(Lc(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||lc(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[Cc(n,o)]?Lc(this.movedSet,t):this.removes.push({parentId:o,id:n,isShadow:!(!pl(e.target)||!ml(e.target))||void 0})),this.mapRemoves.push(t))}))}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(ac(e,this.mirror))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[Cc(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);sc(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes.forEach((e=>this.genAdds(e))),pc(e)&&e.shadowRoot.childNodes.forEach((t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)})))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((t=>{this[t]=e[t]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Lc(e,t){e.delete(t),t.childNodes.forEach((t=>Lc(e,t)))}function Ic(e,t,n){return 0!==e.length&&Ac(e,t,n)}function Ac(e,t,n){const{parentNode:o}=t;if(!o)return!1;const i=n.getId(o);return!!e.some((e=>e.id===i))||Ac(e,o,n)}function Mc(e,t){return 0!==e.size&&Rc(e,t)}function Rc(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||Rc(e,n))}let Oc;const Nc=e=>{if(!Oc)return e;return(...t)=>{try{return e(...t)}catch(e){if(Oc&&!0===Oc(e))return()=>{};throw e}}};function Dc(e){let t,n=e[0],o=1;for(;o<e.length;){const i=e[o],r=e[o+1];if(o+=2,("optionalAccess"===i||"optionalCall"===i)&&null==n)return;"access"===i||"optionalAccess"===i?(t=n,n=r(n)):"call"!==i&&"optionalCall"!==i||(n=r(((...e)=>n.call(t,...e))),t=void 0)}return n}const Pc=[];function Bc(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(e){}return e&&e.target}function Uc(e,t){const n=new kc;Pc.push(n),n.init(e);let o=window.MutationObserver||window.__rrMutationObserver;const i=Dc([window,"optionalAccess",e=>e.Zone,"optionalAccess",e=>e.__symbol__,"optionalCall",e=>e("MutationObserver")]);i&&window[i]&&(o=window[i]);const r=new o(Nc((t=>{e.onMutation&&!1===e.onMutation(t)||n.processMutations.bind(n)(t)})));return r.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),r}function zc({mouseInteractionCb:e,doc:t,mirror:n,blockClass:o,blockSelector:i,unblockSelector:r,sampling:s}){if(!1===s.mouseInteraction)return()=>{};const a=!0===s.mouseInteraction||void 0===s.mouseInteraction?{}:s.mouseInteraction,l=[];let c=null;return Object.keys(Ec).filter((e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e])).forEach((s=>{let a=yl(s);const d=(t=>s=>{const a=Bc(s);if(sc(a,o,i,r,!0))return;let l=null,d=t;if("pointerType"in s){switch(s.pointerType){case"mouse":l=Sc.Mouse;break;case"touch":l=Sc.Touch;break;case"pen":l=Sc.Pen}l===Sc.Touch?Ec[t]===Ec.MouseDown?d="TouchStart":Ec[t]===Ec.MouseUp&&(d="TouchEnd"):Sc.Pen}else cc(s)&&(l=Sc.Touch);null!==l?(c=l,(d.startsWith("Touch")&&l===Sc.Touch||d.startsWith("Mouse")&&l===Sc.Mouse)&&(l=null)):Ec[t]===Ec.Click&&(l=c,c=null);const u=cc(s)?s.changedTouches[0]:s;if(!u)return;const p=n.getId(a),{clientX:m,clientY:g}=u;Nc(e)({type:Ec[d],id:p,x:m,y:g,...null!==l&&{pointerType:l}})})(s);if(window.PointerEvent)switch(Ec[s]){case Ec.MouseDown:case Ec.MouseUp:a=a.replace("mouse","pointer");break;case Ec.TouchStart:case Ec.TouchEnd:return}l.push(Zl(a,d,t))})),Nc((()=>{l.forEach((e=>e()))}))}function Hc({scrollCb:e,doc:t,mirror:n,blockClass:o,blockSelector:i,unblockSelector:r,sampling:s}){return Zl("scroll",Nc(Jl(Nc((s=>{const a=Bc(s);if(!a||sc(a,o,i,r,!0))return;const l=n.getId(a);if(a===t&&t.defaultView){const n=nc(t.defaultView);e({id:l,x:n.left,y:n.top})}else e({id:l,x:a.scrollLeft,y:a.scrollTop})})),s.scroll||100)),t)}const Fc=["INPUT","TEXTAREA","SELECT"],Wc=new WeakMap;function jc({inputCb:e,doc:t,mirror:n,blockClass:o,blockSelector:i,unblockSelector:r,ignoreClass:s,ignoreSelector:a,maskInputOptions:l,maskInputFn:c,sampling:d,userTriggeredOnInput:u,maskTextClass:p,unmaskTextClass:m,maskTextSelector:g,unmaskTextSelector:h}){function f(e){let n=Bc(e);const d=e.isTrusted,f=n&&wl(n.tagName);if("OPTION"===f&&(n=n.parentElement),!n||!f||Fc.indexOf(f)<0||sc(n,o,i,r,!0))return;const v=n;if(v.classList.contains(s)||a&&v.matches(a))return;const y=El(n);let w=Sl(v,f,y),b=!1;const E=_l({maskInputOptions:l,tagName:f,type:y}),S=jl(n,p,g,m,h,E);"radio"!==y&&"checkbox"!==y||(b=n.checked),w=vl({isMasked:S,element:n,value:w,maskInputFn:c}),_(n,u?{text:w,isChecked:b,userTriggered:d}:{text:w,isChecked:b});const T=n.name;"radio"===y&&T&&b&&t.querySelectorAll(`input[type="radio"][name="${T}"]`).forEach((e=>{if(e!==n){const t=vl({isMasked:S,element:e,value:Sl(e,f,y),maskInputFn:c});_(e,u?{text:t,isChecked:!b,userTriggered:!1}:{text:t,isChecked:!b})}}))}function _(t,o){const i=Wc.get(t);if(!i||i.text!==o.text||i.isChecked!==o.isChecked){Wc.set(t,o);const i=n.getId(t);Nc(e)({...o,id:i})}}const v=("last"===d.input?["change"]:["input","change"]).map((e=>Zl(e,Nc(f),t))),y=t.defaultView;if(!y)return()=>{v.forEach((e=>e()))};const w=y.Object.getOwnPropertyDescriptor(y.HTMLInputElement.prototype,"value"),b=[[y.HTMLInputElement.prototype,"value"],[y.HTMLInputElement.prototype,"checked"],[y.HTMLSelectElement.prototype,"value"],[y.HTMLTextAreaElement.prototype,"value"],[y.HTMLSelectElement.prototype,"selectedIndex"],[y.HTMLOptionElement.prototype,"selected"]];return w&&w.set&&v.push(...b.map((e=>Ql(e[0],e[1],{set(){Nc(f)({target:this,isTrusted:!1})}},!1,y)))),Nc((()=>{v.forEach((e=>e()))}))}function qc(e){return function(e,t){if(Zc("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||Zc("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||Zc("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||Zc("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function Gc(e,t,n){let o,i;return e?(e.ownerNode?o=t.getId(e.ownerNode):i=n.getId(e),{styleId:i,id:o}):{}}function Vc({mirror:e,stylesheetManager:t},n){let o=null;o="#document"===n.nodeName?e.getId(n):e.getId(n.host);const i="#document"===n.nodeName?Dc([n,"access",e=>e.defaultView,"optionalAccess",e=>e.Document]):Dc([n,"access",e=>e.ownerDocument,"optionalAccess",e=>e.defaultView,"optionalAccess",e=>e.ShadowRoot]),r=Dc([i,"optionalAccess",e=>e.prototype])?Object.getOwnPropertyDescriptor(Dc([i,"optionalAccess",e=>e.prototype]),"adoptedStyleSheets"):void 0;return null!==o&&-1!==o&&i&&r?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:r.configurable,enumerable:r.enumerable,get(){return Dc([r,"access",e=>e.get,"optionalAccess",e=>e.call,"call",e=>e(this)])},set(e){const n=Dc([r,"access",e=>e.set,"optionalAccess",e=>e.call,"call",t=>t(this,e)]);if(null!==o&&-1!==o)try{t.adoptStyleSheets(e,o)}catch(e){}return n}}),Nc((()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:r.configurable,enumerable:r.enumerable,get:r.get,set:r.set})}))):()=>{}}function Yc(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};const o=Uc(e,e.doc),i=function({mousemoveCb:e,sampling:t,doc:n,mirror:o}){if(!1===t.mousemove)return()=>{};const i="number"==typeof t.mousemove?t.mousemove:50,r="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let s,a=[];const l=Jl(Nc((t=>{const n=Date.now()-s;e(a.map((e=>(e.timeOffset-=n,e))),t),a=[],s=null})),r),c=Nc(Jl(Nc((e=>{const t=Bc(e),{clientX:n,clientY:i}=cc(e)?e.changedTouches[0]:e;s||(s=tc()),a.push({x:n,y:i,id:o.getId(t),timeOffset:tc()-s}),l("undefined"!=typeof DragEvent&&e instanceof DragEvent?bc.Drag:e instanceof MouseEvent?bc.MouseMove:bc.TouchMove)})),i,{trailing:!1})),d=[Zl("mousemove",c,n),Zl("touchmove",c,n),Zl("drag",c,n)];return Nc((()=>{d.forEach((e=>e()))}))}(e),r=zc(e),s=Hc(e),a=function({viewportResizeCb:e},{win:t}){let n=-1,o=-1;return Zl("resize",Nc(Jl(Nc((()=>{const t=oc(),i=ic();n===t&&o===i||(e({width:Number(i),height:Number(t)}),n=t,o=i)})),200)),t)}(e,{win:n}),l=jc(e),c=function({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:o,mirror:i,sampling:r,doc:s}){const a=Nc((s=>Jl(Nc((r=>{const a=Bc(r);if(!a||sc(a,t,n,o,!0))return;const{currentTime:l,volume:c,muted:d,playbackRate:u}=a;e({type:s,id:i.getId(a),currentTime:l,volume:c,muted:d,playbackRate:u})})),r.media||500))),l=[Zl("play",a(0),s),Zl("pause",a(1),s),Zl("seeked",a(2),s),Zl("volumechange",a(3),s),Zl("ratechange",a(4),s)];return Nc((()=>{l.forEach((e=>e()))}))}(e),d=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:o}){if(!o.CSSStyleSheet||!o.CSSStyleSheet.prototype)return()=>{};const i=o.CSSStyleSheet.prototype.insertRule;o.CSSStyleSheet.prototype.insertRule=new Proxy(i,{apply:Nc(((o,i,r)=>{const[s,a]=r,{id:l,styleId:c}=Gc(i,t,n.styleMirror);return(l&&-1!==l||c&&-1!==c)&&e({id:l,styleId:c,adds:[{rule:s,index:a}]}),o.apply(i,r)}))});const r=o.CSSStyleSheet.prototype.deleteRule;let s,a;o.CSSStyleSheet.prototype.deleteRule=new Proxy(r,{apply:Nc(((o,i,r)=>{const[s]=r,{id:a,styleId:l}=Gc(i,t,n.styleMirror);return(a&&-1!==a||l&&-1!==l)&&e({id:a,styleId:l,removes:[{index:s}]}),o.apply(i,r)}))}),o.CSSStyleSheet.prototype.replace&&(s=o.CSSStyleSheet.prototype.replace,o.CSSStyleSheet.prototype.replace=new Proxy(s,{apply:Nc(((o,i,r)=>{const[s]=r,{id:a,styleId:l}=Gc(i,t,n.styleMirror);return(a&&-1!==a||l&&-1!==l)&&e({id:a,styleId:l,replace:s}),o.apply(i,r)}))})),o.CSSStyleSheet.prototype.replaceSync&&(a=o.CSSStyleSheet.prototype.replaceSync,o.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:Nc(((o,i,r)=>{const[s]=r,{id:a,styleId:l}=Gc(i,t,n.styleMirror);return(a&&-1!==a||l&&-1!==l)&&e({id:a,styleId:l,replaceSync:s}),o.apply(i,r)}))}));const l={};Kc("CSSGroupingRule")?l.CSSGroupingRule=o.CSSGroupingRule:(Kc("CSSMediaRule")&&(l.CSSMediaRule=o.CSSMediaRule),Kc("CSSConditionRule")&&(l.CSSConditionRule=o.CSSConditionRule),Kc("CSSSupportsRule")&&(l.CSSSupportsRule=o.CSSSupportsRule));const c={};return Object.entries(l).forEach((([o,i])=>{c[o]={insertRule:i.prototype.insertRule,deleteRule:i.prototype.deleteRule},i.prototype.insertRule=new Proxy(c[o].insertRule,{apply:Nc(((o,i,r)=>{const[s,a]=r,{id:l,styleId:c}=Gc(i.parentStyleSheet,t,n.styleMirror);return(l&&-1!==l||c&&-1!==c)&&e({id:l,styleId:c,adds:[{rule:s,index:[...qc(i),a||0]}]}),o.apply(i,r)}))}),i.prototype.deleteRule=new Proxy(c[o].deleteRule,{apply:Nc(((o,i,r)=>{const[s]=r,{id:a,styleId:l}=Gc(i.parentStyleSheet,t,n.styleMirror);return(a&&-1!==a||l&&-1!==l)&&e({id:a,styleId:l,removes:[{index:[...qc(i),s]}]}),o.apply(i,r)}))})})),Nc((()=>{o.CSSStyleSheet.prototype.insertRule=i,o.CSSStyleSheet.prototype.deleteRule=r,s&&(o.CSSStyleSheet.prototype.replace=s),a&&(o.CSSStyleSheet.prototype.replaceSync=a),Object.entries(l).forEach((([e,t])=>{t.prototype.insertRule=c[e].insertRule,t.prototype.deleteRule=c[e].deleteRule}))}))}(e,{win:n}),u=Vc(e,e.doc),p=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:o},{win:i}){const r=i.CSSStyleDeclaration.prototype.setProperty;i.CSSStyleDeclaration.prototype.setProperty=new Proxy(r,{apply:Nc(((i,s,a)=>{const[l,c,d]=a;if(n.has(l))return r.apply(s,[l,c,d]);const{id:u,styleId:p}=Gc(Dc([s,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,o.styleMirror);return(u&&-1!==u||p&&-1!==p)&&e({id:u,styleId:p,set:{property:l,value:c,priority:d},index:qc(s.parentRule)}),i.apply(s,a)}))});const s=i.CSSStyleDeclaration.prototype.removeProperty;return i.CSSStyleDeclaration.prototype.removeProperty=new Proxy(s,{apply:Nc(((i,r,a)=>{const[l]=a;if(n.has(l))return s.apply(r,[l]);const{id:c,styleId:d}=Gc(Dc([r,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,o.styleMirror);return(c&&-1!==c||d&&-1!==d)&&e({id:c,styleId:d,remove:{property:l},index:qc(r.parentRule)}),i.apply(r,a)}))}),Nc((()=>{i.CSSStyleDeclaration.prototype.setProperty=r,i.CSSStyleDeclaration.prototype.removeProperty=s}))}(e,{win:n}),m=e.collectFonts?function({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const o=[],i=new WeakMap,r=n.FontFace;n.FontFace=function(e,t,n){const o=new r(e,t,n);return i.set(o,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),o};const s=ec(t.fonts,"add",(function(t){return function(n){return yc(Nc((()=>{const t=i.get(n);t&&(e(t),i.delete(n))})),0),t.apply(this,[n])}}));return o.push((()=>{n.FontFace=r})),o.push(s),Nc((()=>{o.forEach((e=>e()))}))}(e):()=>{},g=function(e){const{doc:t,mirror:n,blockClass:o,blockSelector:i,unblockSelector:r,selectionCb:s}=e;let a=!0;const l=Nc((()=>{const e=t.getSelection();if(!e||a&&Dc([e,"optionalAccess",e=>e.isCollapsed]))return;a=e.isCollapsed||!1;const l=[],c=e.rangeCount||0;for(let t=0;t<c;t++){const s=e.getRangeAt(t),{startContainer:a,startOffset:c,endContainer:d,endOffset:u}=s;sc(a,o,i,r,!0)||sc(d,o,i,r,!0)||l.push({start:n.getId(a),startOffset:c,end:n.getId(d),endOffset:u})}s({ranges:l})}));return l(),Zl("selectionchange",l)}(e),h=function({doc:e,customElementCb:t}){const n=e.defaultView;return n&&n.customElements?ec(n.customElements,"define",(function(e){return function(n,o,i){try{t({define:{name:n}})}catch(e){}return e.apply(this,[n,o,i])}})):()=>{}}(e),f=[];for(const t of e.plugins)f.push(t.observer(t.callback,n,t.options));return Nc((()=>{Pc.forEach((e=>e.reset())),o.disconnect(),i(),r(),s(),a(),l(),c(),d(),u(),p(),m(),g(),h(),f.forEach((e=>e()))}))}function Zc(e){return void 0!==window[e]}function Kc(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class Xc{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,n,o){const i=n||this.getIdToRemoteIdMap(e),r=o||this.getRemoteIdToIdMap(e);let s=i.get(t);return s||(s=this.generateIdFn(),i.set(t,s),r.set(s,t)),s}getIds(e,t){const n=this.getIdToRemoteIdMap(e),o=this.getRemoteIdToIdMap(e);return t.map((t=>this.getId(e,t,n,o)))}getRemoteId(e,t,n){const o=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;const i=o.get(t);return i||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map((t=>this.getRemoteId(e,t,n)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}function Jc(e){let t,n=e[0],o=1;for(;o<e.length;){const i=e[o],r=e[o+1];if(o+=2,("optionalAccess"===i||"optionalCall"===i)&&null==n)return;"access"===i||"optionalAccess"===i?(t=n,n=r(n)):"call"!==i&&"optionalCall"!==i||(n=r(((...e)=>n.call(t,...e))),t=void 0)}return n}class Qc{constructor(){this.crossOriginIframeMirror=new Xc(Cl),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class ed{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Xc(Cl),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Xc(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),Jc([this,"access",e=>e.loadListener,"optionalCall",t=>t(e)]),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;if(!e.source)return;const n=this.crossOriginIframeMap.get(e.source);if(!n)return;const o=this.transformCrossOriginEvent(n,t.data.event);o&&this.wrappedEmit(o,t.data.isCheckout)}transformCrossOriginEvent(e,t){switch(t.type){case wc.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:wc.IncrementalSnapshot,data:{source:bc.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case wc.Meta:case wc.Load:case wc.DomContentLoaded:return!1;case wc.Plugin:return t;case wc.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case wc.IncrementalSnapshot:switch(t.data.source){case bc.Mutation:return t.data.adds.forEach((t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(t.node,n)})),t.data.removes.forEach((t=>{this.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((t=>{this.replaceIds(t,e,["id"])})),t.data.texts.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case bc.Drag:case bc.TouchMove:case bc.MouseMove:return t.data.positions.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case bc.ViewportResize:return!1;case bc.MediaInteraction:case bc.MouseInteraction:case bc.Scroll:case bc.CanvasMutation:case bc.Input:return this.replaceIds(t.data,e,["id"]),t;case bc.StyleSheetRule:case bc.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case bc.Font:return t;case bc.Selection:return t.data.ranges.forEach((t=>{this.replaceIds(t,e,["start","end"])})),t;case bc.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),Jc([t,"access",e=>e.data,"access",e=>e.styles,"optionalAccess",e=>e.forEach,"call",t=>t((t=>{this.replaceStyleIds(t,e,["styleId"])}))]),t}}return!1}replace(e,t,n,o){for(const i of o)(Array.isArray(t[i])||"number"==typeof t[i])&&(Array.isArray(t[i])?t[i]=e.getIds(n,t[i]):t[i]=e.getId(n,t[i]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((e=>{this.replaceIdOnNode(e,t)}))}patchRootIdOnNode(e,t){e.type===ul.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach((e=>{this.patchRootIdOnNode(e,t)}))}}class td{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class nd{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!ml(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e);const n=Uc({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(Hc({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),yc((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(Vc({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))}),0)}observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(ec(e.prototype,"attachShadow",(function(e){return function(o){const i=e.call(this,o);return this.shadowRoot&&fc(this)&&n.addShadowRoot(this.shadowRoot,t),i}})))}reset(){this.restoreHandlers.forEach((e=>{try{e()}catch(e){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}class od{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}}class id{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new mc,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},o=[];for(const t of e){let e;this.styleMirror.has(t)?e=this.styleMirror.getId(t):(e=this.styleMirror.add(t),o.push({styleId:e,rules:Array.from(t.rules||CSSRule,((e,t)=>({rule:hl(e),index:t})))})),n.styleIds.push(e)}o.length>0&&(n.styles=o),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class rd{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){!function(...e){vc("requestAnimationFrame")(...e)}((()=>{this.clear(),this.loop&&this.periodicallyClear()}))}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some((e=>e!==t))}add(e,t){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}let sd,ad;const ld=new fl;function cd(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:o,blockClass:i="rr-block",blockSelector:r=null,unblockSelector:s=null,ignoreClass:a="rr-ignore",ignoreSelector:l=null,maskAllText:c=!1,maskTextClass:d="rr-mask",unmaskTextClass:u=null,maskTextSelector:p=null,unmaskTextSelector:m=null,inlineStylesheet:g=!0,maskAllInputs:h,maskInputOptions:f,slimDOMOptions:_,maskAttributeFn:v,maskInputFn:y,maskTextFn:w,maxCanvasSize:b=null,packFn:E,sampling:S={},dataURLOptions:T={},mousemoveWait:x,recordCanvas:$=!1,recordCrossOriginIframes:C=!1,recordAfter:k=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:L=!1,collectFonts:I=!1,inlineImages:A=!1,plugins:M,keepIframeSrcFn:R=(()=>!1),ignoreCSSAttributes:O=new Set([]),errorHandler:N,onMutation:D,getCanvasManager:P}=e;Oc=N;const B=!C||window.parent===window;let U=!1;if(!B)try{window.parent.document&&(U=!1)}catch(e){U=!0}if(B&&!t)throw new Error("emit function is required");void 0!==x&&void 0===S.mousemove&&(S.mousemove=x),ld.reset();const z=!0===h?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==f?f:{},H=!0===_||"all"===_?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===_,headMetaDescKeywords:"all"===_}:_||{};let F;!function(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}();let W=0;const j=e=>{for(const t of M||[])t.eventProcessor&&(e=t.eventProcessor(e));return E&&!U&&(e=E(e)),e};sd=(e,i)=>{const r=e;if(r.timestamp=tc(),!Fi([Pc,"access",e=>e[0],"optionalAccess",e=>e.isFrozen,"call",e=>e()])||r.type===wc.FullSnapshot||r.type===wc.IncrementalSnapshot&&r.data.source===bc.Mutation||Pc.forEach((e=>e.unfreeze())),B)Fi([t,"optionalCall",e=>e(j(r),i)]);else if(U){const e={type:"rrweb",event:j(r),origin:window.location.origin,isCheckout:i};window.parent.postMessage(e,"*")}if(r.type===wc.FullSnapshot)F=r,W=0;else if(r.type===wc.IncrementalSnapshot){if(r.data.source===bc.Mutation&&r.data.isAttachIframe)return;W++;const e=o&&W>=o,t=n&&F&&r.timestamp-F.timestamp>n;(e||t)&&Q(!0)}};const q=e=>{sd({type:wc.IncrementalSnapshot,data:{source:bc.Mutation,...e}})},G=e=>sd({type:wc.IncrementalSnapshot,data:{source:bc.Scroll,...e}}),V=e=>sd({type:wc.IncrementalSnapshot,data:{source:bc.CanvasMutation,...e}}),Y=new id({mutationCb:q,adoptedStyleSheetCb:e=>sd({type:wc.IncrementalSnapshot,data:{source:bc.AdoptedStyleSheet,...e}})}),Z="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new Qc:new ed({mirror:ld,mutationCb:q,stylesheetManager:Y,recordCrossOriginIframes:C,wrappedEmit:sd});for(const e of M||[])e.getMirror&&e.getMirror({nodeMirror:ld,crossOriginIframeMirror:Z.crossOriginIframeMirror,crossOriginIframeStyleMirror:Z.crossOriginIframeStyleMirror});const K=new rd,X=function(e,t){try{return e?e(t):new od}catch(e){return console.warn("Unable to initialize CanvasManager"),new od}}(P,{mirror:ld,win:window,mutationCb:e=>sd({type:wc.IncrementalSnapshot,data:{source:bc.CanvasMutation,...e}}),recordCanvas:$,blockClass:i,blockSelector:r,unblockSelector:s,maxCanvasSize:b,sampling:S.canvas,dataURLOptions:T,errorHandler:N}),J="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new td:new nd({mutationCb:q,scrollCb:G,bypassOptions:{onMutation:D,blockClass:i,blockSelector:r,unblockSelector:s,maskAllText:c,maskTextClass:d,unmaskTextClass:u,maskTextSelector:p,unmaskTextSelector:m,inlineStylesheet:g,maskInputOptions:z,dataURLOptions:T,maskAttributeFn:v,maskTextFn:w,maskInputFn:y,recordCanvas:$,inlineImages:A,sampling:S,slimDOMOptions:H,iframeManager:Z,stylesheetManager:Y,canvasManager:X,keepIframeSrcFn:R,processedNodeManager:K},mirror:ld}),Q=(e=!1)=>{sd({type:wc.Meta,data:{href:window.location.href,width:ic(),height:oc()}},e),Y.reset(),J.init(),Pc.forEach((e=>e.lock()));const t=function(e,t){const{mirror:n=new fl,blockClass:o="rr-block",blockSelector:i=null,unblockSelector:r=null,maskAllText:s=!1,maskTextClass:a="rr-mask",unmaskTextClass:l=null,maskTextSelector:c=null,unmaskTextSelector:d=null,inlineStylesheet:u=!0,inlineImages:p=!1,recordCanvas:m=!1,maskAllInputs:g=!1,maskAttributeFn:h,maskTextFn:f,maskInputFn:_,slimDOM:v=!1,dataURLOptions:y,preserveWhiteSpace:w,onSerialize:b,onIframeLoad:E,iframeLoadTimeout:S,onStylesheetLoad:T,stylesheetLoadTimeout:x,keepIframeSrcFn:$=(()=>!1)}=t||{};return Vl(e,{doc:e,mirror:n,blockClass:o,blockSelector:i,unblockSelector:r,maskAllText:s,maskTextClass:a,unmaskTextClass:l,maskTextSelector:c,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:u,maskInputOptions:!0===g?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===g?{}:g,maskAttributeFn:h,maskTextFn:f,maskInputFn:_,slimDOMOptions:!0===v||"all"===v?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===v,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===v?{}:v,dataURLOptions:y,inlineImages:p,recordCanvas:m,preserveWhiteSpace:w,onSerialize:b,onIframeLoad:E,iframeLoadTimeout:S,onStylesheetLoad:T,stylesheetLoadTimeout:x,keepIframeSrcFn:$,newlyAddedElement:!1})}(document,{mirror:ld,blockClass:i,blockSelector:r,unblockSelector:s,maskAllText:c,maskTextClass:d,unmaskTextClass:u,maskTextSelector:p,unmaskTextSelector:m,inlineStylesheet:g,maskAllInputs:z,maskAttributeFn:v,maskInputFn:y,maskTextFn:w,slimDOM:H,dataURLOptions:T,recordCanvas:$,inlineImages:A,onSerialize:e=>{dc(e,ld)&&Z.addIframe(e),uc(e,ld)&&Y.trackLinkElement(e),pc(e)&&J.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{Z.attachIframe(e,t),J.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{Y.attachLinkElement(e,t)},keepIframeSrcFn:R});if(!t)return console.warn("Failed to snapshot the document");sd({type:wc.FullSnapshot,data:{node:t,initialOffset:nc(window)}}),Pc.forEach((e=>e.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Y.adoptStyleSheets(document.adoptedStyleSheets,ld.getId(document))};ad=Q;try{const e=[],t=e=>Nc(Yc)({onMutation:D,mutationCb:q,mousemoveCb:(e,t)=>sd({type:wc.IncrementalSnapshot,data:{source:t,positions:e}}),mouseInteractionCb:e=>sd({type:wc.IncrementalSnapshot,data:{source:bc.MouseInteraction,...e}}),scrollCb:G,viewportResizeCb:e=>sd({type:wc.IncrementalSnapshot,data:{source:bc.ViewportResize,...e}}),inputCb:e=>sd({type:wc.IncrementalSnapshot,data:{source:bc.Input,...e}}),mediaInteractionCb:e=>sd({type:wc.IncrementalSnapshot,data:{source:bc.MediaInteraction,...e}}),styleSheetRuleCb:e=>sd({type:wc.IncrementalSnapshot,data:{source:bc.StyleSheetRule,...e}}),styleDeclarationCb:e=>sd({type:wc.IncrementalSnapshot,data:{source:bc.StyleDeclaration,...e}}),canvasMutationCb:V,fontCb:e=>sd({type:wc.IncrementalSnapshot,data:{source:bc.Font,...e}}),selectionCb:e=>{sd({type:wc.IncrementalSnapshot,data:{source:bc.Selection,...e}})},customElementCb:e=>{sd({type:wc.IncrementalSnapshot,data:{source:bc.CustomElement,...e}})},blockClass:i,ignoreClass:a,ignoreSelector:l,maskAllText:c,maskTextClass:d,unmaskTextClass:u,maskTextSelector:p,unmaskTextSelector:m,maskInputOptions:z,inlineStylesheet:g,sampling:S,recordCanvas:$,inlineImages:A,userTriggeredOnInput:L,collectFonts:I,doc:e,maskAttributeFn:v,maskInputFn:y,maskTextFn:w,keepIframeSrcFn:R,blockSelector:r,unblockSelector:s,slimDOMOptions:H,dataURLOptions:T,mirror:ld,iframeManager:Z,stylesheetManager:Y,shadowDomManager:J,processedNodeManager:K,canvasManager:X,ignoreCSSAttributes:O,plugins:Fi([M,"optionalAccess",e=>e.filter,"call",e=>e((e=>e.observer)),"optionalAccess",e=>e.map,"call",e=>e((e=>({observer:e.observer,options:e.options,callback:t=>sd({type:wc.Plugin,data:{plugin:e.name,payload:t}})})))])||[]},{});Z.addLoadListener((n=>{try{e.push(t(n.contentDocument))}catch(e){console.warn(e)}}));const n=()=>{Q(),e.push(t(document))};return"interactive"===document.readyState||"complete"===document.readyState?n():(e.push(Zl("DOMContentLoaded",(()=>{sd({type:wc.DomContentLoaded,data:{}}),"DOMContentLoaded"===k&&n()}))),e.push(Zl("load",(()=>{sd({type:wc.Load,data:{}}),"load"===k&&n()}),window))),()=>{e.forEach((e=>e())),K.destroy(),ad=void 0,Oc=void 0}}catch(e){console.warn(e)}}cd.mirror=ld,cd.takeFullSnapshot=function(e){if(!ad)throw new Error("please take full snapshot after start recording");ad(e)};const dd=3;function ud(e){return e>9999999999?e:1e3*e}function pd(e){return e>9999999999?e/1e3:e}function md(e,t){"sentry.transaction"!==t.category&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate((()=>(e.throttledAddEvent({type:wc.Custom,timestamp:1e3*(t.timestamp||0),data:{tag:"breadcrumb",payload:ti(t,10,1e3)}}),"console"===t.category))))}const gd="button,a";function hd(e){return e.closest(gd)||e}function fd(e){const t=_d(e);return t&&t instanceof Element?hd(t):t}function _d(e){return function(e){return"object"==typeof e&&!!e&&"target"in e}(e)?e.target:e}let vd;function yd(e){return vd||(vd=[],Yn(nl,"open",(function(e){return function(...t){if(vd)try{vd.forEach((e=>e()))}catch(e){}return e.apply(nl,t)}}))),vd.push(e),()=>{const t=vd?vd.indexOf(e):-1;t>-1&&vd.splice(t,1)}}class wd{constructor(e,t,n=md){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=t.timeout/1e3,this._threshold=t.threshold/1e3,this._scollTimeout=t.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=t.ignoreSelector,this._addBreadcrumbEvent=n}addListeners(){const e=yd((()=>{this._lastMutation=Ed()}));this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,t){if(function(e,t){if(!bd.includes(e.tagName))return!0;if("INPUT"===e.tagName&&!["submit","button"].includes(e.getAttribute("type")||""))return!0;if("A"===e.tagName&&(e.hasAttribute("download")||e.hasAttribute("target")&&"_self"!==e.getAttribute("target")))return!0;if(t&&e.matches(t))return!0;return!1}(t,this._ignoreSelector)||!function(e){return!(!e.data||"number"!=typeof e.data.nodeId||!e.timestamp)}(e))return;const n={timestamp:pd(e.timestamp),clickBreadcrumb:e,clickCount:0,node:t};this._clicks.some((e=>e.node===n.node&&Math.abs(e.timestamp-n.timestamp)<1))||(this._clicks.push(n),1===this._clicks.length&&this._scheduleCheckClicks())}registerMutation(e=Date.now()){this._lastMutation=pd(e)}registerScroll(e=Date.now()){this._lastScroll=pd(e)}registerClick(e){const t=hd(e);this._handleMultiClick(t)}_handleMultiClick(e){this._getClicks(e).forEach((e=>{e.clickCount++}))}_getClicks(e){return this._clicks.filter((t=>t.node===e))}_checkClicks(){const e=[],t=Ed();this._clicks.forEach((n=>{!n.mutationAfter&&this._lastMutation&&(n.mutationAfter=n.timestamp<=this._lastMutation?this._lastMutation-n.timestamp:void 0),!n.scrollAfter&&this._lastScroll&&(n.scrollAfter=n.timestamp<=this._lastScroll?this._lastScroll-n.timestamp:void 0),n.timestamp+this._timeout<=t&&e.push(n)}));for(const t of e){const e=this._clicks.indexOf(t);e>-1&&(this._generateBreadcrumbs(t),this._clicks.splice(e,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const t=this._replay,n=e.scrollAfter&&e.scrollAfter<=this._scollTimeout,o=e.mutationAfter&&e.mutationAfter<=this._threshold,i=!n&&!o,{clickCount:r,clickBreadcrumb:s}=e;if(i){const n=1e3*Math.min(e.mutationAfter||this._timeout,this._timeout),o=n<1e3*this._timeout?"mutation":"timeout",i={type:"default",message:s.message,timestamp:s.timestamp,category:"ui.slowClickDetected",data:{...s.data,url:nl.location.href,route:t.getCurrentRoute(),timeAfterClickMs:n,endReason:o,clickCount:r||1}};this._addBreadcrumbEvent(t,i)}else if(r>1){const e={type:"default",message:s.message,timestamp:s.timestamp,category:"ui.multiClick",data:{...s.data,url:nl.location.href,route:t.getCurrentRoute(),clickCount:r,metric:!0}};this._addBreadcrumbEvent(t,e)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout((()=>this._checkClicks()),1e3)}}const bd=["A","BUTTON","INPUT"];function Ed(){return Date.now()/1e3}function Sd(e,t){try{if(!function(e){return e.type===dd}(t))return;const{source:n}=t.data;if(n===bc.Mutation&&e.registerMutation(t.timestamp),n===bc.Scroll&&e.registerScroll(t.timestamp),function(e){return e.data.source===bc.MouseInteraction}(t)){const{type:n,id:o}=t.data,i=cd.mirror.getNode(o);i instanceof HTMLElement&&n===Ec.Click&&e.registerClick(i)}}catch(e){}}function Td(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var xd;!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(xd||(xd={}));const $d=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function Cd(e){const t={};for(const n in e)if($d.has(n)){let o=n;"data-testid"!==n&&"data-test-id"!==n||(o="testId"),t[o]=e[n]}return t}const kd=e=>t=>{if(!e.isEnabled())return;const n=function(e){const{target:t,message:n}=function(e){const t="click"===e.name;let n,o=null;try{o=t?fd(e.event):_d(e.event),n=Nn(o,{maxStringLength:200})||"<unknown>"}catch(e){n="<unknown>"}return{target:o,message:n}}(e);return Td({category:`ui.${e.name}`,...Ld(t,n)})}(t);if(!n)return;const o="click"===t.name,i=o?t.event:void 0;var r,s,a;!(o&&e.clickDetector&&i&&i.target)||i.altKey||i.metaKey||i.ctrlKey||i.shiftKey||(r=e.clickDetector,s=n,a=fd(t.event),r.handleClick(s,a)),md(e,n)};function Ld(e,t){const n=cd.mirror.getId(e),o=n&&cd.mirror.getNode(n),i=o&&cd.mirror.getMeta(o),r=i&&function(e){return e.type===xd.Element}(i)?i:null;return{message:t,data:r?{nodeId:n,node:{id:n,tagName:r.tagName,textContent:Array.from(r.childNodes).map((e=>e.type===xd.Text&&e.textContent)).filter(Boolean).map((e=>e.trim())).join(""),attributes:Cd(r.attributes)}}:{}}}function Id(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=function(e){const{metaKey:t,shiftKey:n,ctrlKey:o,altKey:i,key:r,target:s}=e;if(!s||function(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable}(s)||!r)return null;const a=t||o||i,l=1===r.length;if(!a&&l)return null;const c=Nn(s,{maxStringLength:200})||"<unknown>",d=Ld(s,c);return Td({category:"ui.keyDown",message:c,data:{...d.data,metaKey:t,shiftKey:n,ctrlKey:o,altKey:i,key:r}})}(t);n&&md(e,n)}const Ad={resource:function(e){const{entryType:t,initiatorType:n,name:o,responseEnd:i,startTime:r,decodedBodySize:s,encodedBodySize:a,responseStatus:l,transferSize:c}=e;if(["fetch","xmlhttprequest"].includes(n))return null;return{type:`${t}.${n}`,start:Rd(r),end:Rd(i),name:o,data:{size:c,statusCode:l,decodedBodySize:s,encodedBodySize:a}}},paint:function(e){const{duration:t,entryType:n,name:o,startTime:i}=e,r=Rd(i);return{type:n,name:o,start:r,end:r+t,data:void 0}},navigation:function(e){const{entryType:t,name:n,decodedBodySize:o,duration:i,domComplete:r,encodedBodySize:s,domContentLoadedEventStart:a,domContentLoadedEventEnd:l,domInteractive:c,loadEventStart:d,loadEventEnd:u,redirectCount:p,startTime:m,transferSize:g,type:h}=e;if(0===i)return null;return{type:`${t}.${h}`,start:Rd(m),end:Rd(r),name:n,data:{size:g,decodedBodySize:o,encodedBodySize:s,duration:i,domInteractive:c,domContentLoadedEventStart:a,domContentLoadedEventEnd:l,loadEventStart:d,loadEventEnd:u,domComplete:r,redirectCount:p}}}};function Md(e){return Ad[e.entryType]?Ad[e.entryType](e):null}function Rd(e){return((Ci||nl.performance.timeOrigin)+e)/1e3}function Od(e){function t(t){e.performanceEntries.includes(t)||e.performanceEntries.push(t)}function n({entries:e}){e.forEach(t)}const o=[];return["navigation","paint","resource"].forEach((e=>{o.push(ea(e,n))})),o.push(Qs((({metric:t})=>{e.replayPerformanceEntries.push(function(e){const t=e.entries,n=t[t.length-1],o=n?n.element:void 0,i=e.value,r=Rd(i);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:r,end:r,data:{value:i,size:i,nodeId:o?cd.mirror.getId(o):void 0}}}(t))}))),()=>{o.forEach((e=>e()))}}const Nd="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Dd='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,a=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),s=a.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(a,n),O(a,s-8,r.d()),O(a,s-4,e),a}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(G)return G.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function Pd(e,t){Nd&&(Fn.info(e),t&&Ud(e))}function Bd(e,t){Nd&&(Fn.info(e),t&&setTimeout((()=>{Ud(e)}),0))}function Ud(e){lr({category:"console",data:{logger:"replay"},level:"info",message:e},{level:"info"})}class zd extends Error{constructor(){super("Event buffer exceeded maximum size of 20000000.")}}class Hd{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const t=JSON.stringify(e).length;if(this._totalSize+=t,this._totalSize>ll)throw new zd;this.events.push(e)}finish(){return new Promise((e=>{const t=this.events;this.clear(),e(JSON.stringify(t))}))}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map((e=>e.timestamp)).sort()[0];return e?ud(e):null}}class Fd{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise(((e,t)=>{this._worker.addEventListener("message",(({data:n})=>{n.success?e():t()}),{once:!0}),this._worker.addEventListener("error",(e=>{t(e)}),{once:!0})}))),this._ensureReadyPromise}destroy(){Pd("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(e,t){const n=this._getAndIncrementId();return new Promise(((o,i)=>{const r=({data:t})=>{const s=t;if(s.method===e&&s.id===n){if(this._worker.removeEventListener("message",r),!s.success)return Nd&&Fn.error("[Replay]",s.response),void i(new Error("Error in compression worker"));o(s.response)}};this._worker.addEventListener("message",r),this._worker.postMessage({id:n,method:e,arg:t})}))}_getAndIncrementId(){return this._id++}}class Wd{constructor(e){this._worker=new Fd(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const t=ud(e.timestamp);(!this._earliestTimestamp||t<this._earliestTimestamp)&&(this._earliestTimestamp=t);const n=JSON.stringify(e);return this._totalSize+=n.length,this._totalSize>ll?Promise.reject(new zd):this._sendEventToWorker(n)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,(e=>{Nd&&Fn.warn('[Replay] Sending "clear" message to worker failed',e)}))}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class jd{constructor(e){this._fallback=new Hd,this._compression=new Wd(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){return void Pd("[Replay] Failed to load the compression worker, falling back to simple buffer")}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:t}=this._fallback,n=[];for(const t of e)n.push(this._compression.addEvent(t));this._compression.hasCheckout=t,this._used=this._compression;try{await Promise.all(n)}catch(e){Nd&&Fn.warn("[Replay] Failed to add events when switching buffers.",e)}}}function qd({useCompression:e,workerUrl:t}){if(e&&window.Worker){const e=function(e){try{const t=e||function(){if("undefined"==typeof __SENTRY_EXCLUDE_REPLAY_WORKER__||!__SENTRY_EXCLUDE_REPLAY_WORKER__)return function(){const e=new Blob([Dd]);return URL.createObjectURL(e)}();return""}();if(!t)return;Pd("[Replay] Using compression worker"+(e?` from ${e}`:""));const n=new Worker(t);return new jd(n)}catch(e){Pd("[Replay] Failed to create compression worker")}}(t);if(e)return e}return Pd("[Replay] Using simple buffer"),new Hd}function Gd(){try{return"sessionStorage"in nl&&!!nl.sessionStorage}catch(e){return!1}}function Vd(e){!function(){if(!Gd())return;try{nl.sessionStorage.removeItem(ol)}catch(e){}}(),e.session=void 0}function Yd(e){return void 0!==e&&Math.random()<e}function Zd(e){const t=Date.now();return{id:e.id||fo(),started:e.started||t,lastActivity:e.lastActivity||t,segmentId:e.segmentId||0,sampled:e.sampled,previousSessionId:e.previousSessionId}}function Kd(e){if(Gd())try{nl.sessionStorage.setItem(ol,JSON.stringify(e))}catch(e){}}function Xd({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:o}={}){const i=function(e,t){return Yd(e)?"session":!!t&&"buffer"}(e,t),r=Zd({sampled:i,previousSessionId:o});return n&&Kd(r),r}function Jd(e,t,n=+new Date){return null===e||void 0===t||t<0||0!==t&&e+t<=n}function Qd(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:o=Date.now()}){return Jd(e.started,t,o)||Jd(e.lastActivity,n,o)}function eu(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!!Qd(e,{sessionIdleExpire:t,maxReplayDuration:n})&&("buffer"!==e.sampled||0!==e.segmentId)}function tu({traceInternals:e,sessionIdleExpire:t,maxReplayDuration:n,previousSessionId:o},i){const r=i.stickySession&&function(e){if(!Gd())return null;try{const t=nl.sessionStorage.getItem(ol);if(!t)return null;const n=JSON.parse(t);return Bd("[Replay] Loading existing session",e),Zd(n)}catch(e){return null}}(e);return r?eu(r,{sessionIdleExpire:t,maxReplayDuration:n})?(Bd("[Replay] Session in sessionStorage is expired, creating new one..."),Xd(i,{previousSessionId:r.id})):r:(Bd("[Replay] Creating new session",e),Xd(i,{previousSessionId:o}))}function nu(e,t,n){return!!iu(e,t)&&(ou(e,t,n),!0)}async function ou(e,t,n){if(!e.eventBuffer)return null;try{n&&"buffer"===e.recordingMode&&e.eventBuffer.clear(),n&&(e.eventBuffer.hasCheckout=!0);const o=function(e,t){try{if("function"==typeof t&&function(e){return e.type===wc.Custom}(e))return t(e)}catch(e){return Nd&&Fn.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",e),null}return e}(t,e.getOptions().beforeAddRecordingEvent);if(!o)return;return await e.eventBuffer.addEvent(o)}catch(t){const n=t&&t instanceof zd?"addEventSizeExceeded":"addEvent";Nd&&Fn.error(t),await e.stop({reason:n});const o=dr();o&&o.recordDroppedEvent("internal_sdk_error","replay")}}function iu(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=ud(t.timestamp);return!(n+e.timeouts.sessionIdlePause<Date.now())&&(!(n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration)||(Pd(`[Replay] Skipping event with timestamp ${n} because it is after maxReplayDuration`,e.getOptions()._experiments.traceInternals),!1))}function ru(e){return!e.type}function su(e){return"transaction"===e.type}function au(e){return"feedback"===e.type}function lu(e){const t=function(){const e=dr();if(!e)return!1;const t=e.getTransport();if(!t)return!1;return t.send.__sentry__baseTransport__||!1}();return(n,o)=>{if(!e.isEnabled()||!ru(n)&&!su(n))return;const i=o&&o.statusCode;t&&(!i||i<200||i>=300)||(su(n)?function(e,t){const n=e.getContext();t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}(e,n):function(e,t){const n=e.getContext();t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id);if("buffer"!==e.recordingMode||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:o}=e.getOptions();if("function"==typeof o&&!o(t))return;setTimeout((()=>{e.sendBufferedReplayOrFlush()}))}(e,n))}}function cu(e){return t=>{e.isEnabled()&&ru(t)&&function(e,t){const n=t.exception&&t.exception.values&&t.exception.values[0].value;if("string"!=typeof n)return;if(n.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i)){md(e,Td({category:"replay.hydrate-error"}))}}(e,t)}}function du(e,t=!1){const n=t?lu(e):void 0;return Object.assign(((t,o)=>{if(!e.isEnabled())return t;if(function(e){return"replay_event"===e.type}(t))return delete t.breadcrumbs,t;if(!ru(t)&&!su(t)&&!au(t))return t;if(!e.checkAndHandleExpiredSession())return t;if(au(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),function(e,t){e.triggerUserActivity(),e.addUpdate((()=>!t.timestamp||(e.throttledAddEvent({type:wc.Custom,timestamp:1e3*t.timestamp,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1)))}(e,t),t;if(function(e,t){return!(e.type||!e.exception||!e.exception.values||!e.exception.values.length||!t.originalException||!t.originalException.__rrweb__)}(t,o)&&!e.getOptions()._experiments.captureExceptions)return Nd&&Fn.log("[Replay] Ignoring error from rrweb internals",t),null;const i=function(e,t){return"buffer"===e.recordingMode&&t.message!==rl&&!(!t.exception||t.type)&&Yd(e.getOptions().errorSampleRate)}(e,t);return(i||"session"===e.recordingMode)&&(t.tags={...t.tags,replayId:e.getSessionId()}),n&&n(t,{statusCode:200}),t}),{id:"Replay"})}function uu(e,t){return t.map((({type:t,start:n,end:o,name:i,data:r})=>{const s=e.throttledAddEvent({type:wc.Custom,timestamp:n,data:{tag:"performanceSpan",payload:{op:t,description:i,startTimestamp:n,endTimestamp:o,data:r}}});return"string"==typeof s?Promise.resolve(null):s}))}function pu(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{from:t,to:n}=e,o=Date.now()/1e3;return{type:"navigation.push",start:o,end:o,name:n,data:{previous:t}}}(t);null!==n&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate((()=>(uu(e,[n]),!1))))}}function mu(e,t){e.isEnabled()&&null!==t&&(function(e,t){return(!Nd||!e.getOptions()._experiments.traceInternals)&&os(t,dr())}(e,t.name)||e.addUpdate((()=>(uu(e,[t]),!0))))}function gu(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{startTimestamp:t,endTimestamp:n,xhr:o}=e,i=o[Yo];if(!t||!n||!i)return null;const{method:r,url:s,status_code:a}=i;return void 0===s?null:{type:"resource.xhr",name:s,start:t/1e3,end:n/1e3,data:{method:r,statusCode:a}}}(t);mu(e,n)}}function hu(e,t){if(e)try{if("string"==typeof e)return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=Su(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch(e){}}function fu(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function _u(e){try{if("string"==typeof e)return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[Su(e)];if(!e)return[void 0]}catch(t){return Nd&&Fn.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Nd&&Fn.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function vu(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},o=n.warnings||[];return n.warnings=[...o,t],e._meta=n,e}function yu(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:o,url:i,method:r,statusCode:s,request:a,response:l}=t;return{type:e,start:n/1e3,end:o/1e3,name:i,data:to({method:r,statusCode:s,request:a,response:l})}}function wu(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function bu(e,t,n){if(!t&&0===Object.keys(e).length)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const o={headers:e,size:t},{body:i,warnings:r}=function(e){if(!e||"string"!=typeof e)return{body:e};const t=e.length>sl,n=function(e){const t=e[0],n=e[e.length-1];return"["===t&&"]"===n||"{"===t&&"}"===n}(e);if(t){const t=e.slice(0,sl);return n?{body:t,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${t}â¦`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch(e){}return{body:e}}(n);return o.body=i,r&&r.length>0&&(o._meta={warnings:r}),o}function Eu(e,t){return Object.keys(e).reduce(((n,o)=>{const i=o.toLowerCase();return t.includes(i)&&e[o]&&(n[i]=e[o]),n}),{})}function Su(e){return new URLSearchParams(e).toString()}function Tu(e,t){const n=function(e,t=nl.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(nl.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const o=n.href;if(!e.endsWith("/")&&o.endsWith("/"))return o.slice(0,-1);return o}(e);return Tn(n,t)}async function xu(e,t,n){try{const o=await async function(e,t,n){const o=Date.now(),{startTimestamp:i=o,endTimestamp:r=o}=t,{url:s,method:a,status_code:l=0,request_body_size:c,response_body_size:d}=e.data,u=Tu(s,n.networkDetailAllowUrls)&&!Tu(s,n.networkDetailDenyUrls),p=u?function({networkCaptureBodies:e,networkRequestHeaders:t},n,o){const i=n?function(e,t){if(1===e.length&&"string"!=typeof e[0])return ku(e[0],t);if(2===e.length)return ku(e[1],t);return{}}(n,t):{};if(!e)return bu(i,o,void 0);const r=$u(n),[s,a]=_u(r),l=bu(i,o,s);if(a)return vu(l,a);return l}(n,t.input,c):wu(c),m=await async function(e,{networkCaptureBodies:t,textEncoder:n,networkResponseHeaders:o},i,r){if(!e&&void 0!==r)return wu(r);const s=i?Cu(i.headers,o):{};if(!i||!t&&void 0!==r)return bu(s,r,void 0);const[a,l]=await async function(e){const t=function(e){try{return e.clone()}catch(e){Nd&&Fn.warn("[Replay] Failed to clone response body",e)}}(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{const e=await function(e){return new Promise(((t,n)=>{const o=setTimeout((()=>n(new Error("Timeout while trying to read response body"))),500);(async function(e){return await e.text()})(e).then((e=>t(e)),(e=>n(e))).finally((()=>clearTimeout(o)))}))}(t);return[e]}catch(e){return Nd&&Fn.warn("[Replay] Failed to get text body from response",e),[void 0,"BODY_PARSE_ERROR"]}}(i),c=function(e,{networkCaptureBodies:t,textEncoder:n,responseBodySize:o,captureDetails:i,headers:r}){try{const s=e&&e.length&&void 0===o?hu(e,n):o;return i?bu(r,s,t?e:void 0):wu(s)}catch(e){return Nd&&Fn.warn("[Replay] Failed to serialize response body",e),bu(r,o,void 0)}}(a,{networkCaptureBodies:t,textEncoder:n,responseBodySize:r,captureDetails:e,headers:s});if(l)return vu(c,l);return c}(u,n,t.response,d);return{startTimestamp:i,endTimestamp:r,url:s,method:a,statusCode:l,request:p,response:m}}(e,t,n),i=yu("resource.fetch",o);mu(n.replay,i)}catch(e){Nd&&Fn.error("[Replay] Failed to capture fetch breadcrumb",e)}}function $u(e=[]){if(2===e.length&&"object"==typeof e[1])return e[1].body}function Cu(e,t){const n={};return t.forEach((t=>{e.get(t)&&(n[t]=e.get(t))})),n}function ku(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?Cu(n,t):Array.isArray(n)?{}:Eu(n,t):{}}async function Lu(e,t,n){try{const o=function(e,t,n){const o=Date.now(),{startTimestamp:i=o,endTimestamp:r=o,input:s,xhr:a}=t,{url:l,method:c,status_code:d=0,request_body_size:u,response_body_size:p}=e.data;if(!l)return null;if(!a||!Tu(l,n.networkDetailAllowUrls)||Tu(l,n.networkDetailDenyUrls)){return{startTimestamp:i,endTimestamp:r,url:l,method:c,statusCode:d,request:wu(u),response:wu(p)}}const m=a[Yo],g=m?Eu(m.request_headers,n.networkRequestHeaders):{},h=Eu(function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,o]=t.split(": ");return e[n.toLowerCase()]=o,e}),{})}(a),n.networkResponseHeaders),[f,_]=n.networkCaptureBodies?_u(s):[void 0],[v,y]=n.networkCaptureBodies?function(e){const t=[];try{return[e.responseText]}catch(e){t.push(e)}try{return function(e,t){try{if("string"==typeof e)return[e];if(e instanceof Document)return[e.body.outerHTML];if("json"===t&&e&&"object"==typeof e)return[JSON.stringify(e)];if(!e)return[void 0]}catch(t){return Nd&&Fn.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Nd&&Fn.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}(e.response,e.responseType)}catch(e){t.push(e)}return Nd&&Fn.warn("[Replay] Failed to get xhr response body",...t),[void 0]}(a):[void 0],w=bu(g,u,f),b=bu(h,p,v);return{startTimestamp:i,endTimestamp:r,url:l,method:c,statusCode:d,request:_?vu(w,_):w,response:y?vu(b,y):b}}(e,t,n),i=yu("resource.xhr",o);mu(n.replay,i)}catch(e){Nd&&Fn.error("[Replay] Failed to capture xhr breadcrumb",e)}}function Iu(e,t,n){const{xhr:o,input:i}=t;if(!o)return;const r=hu(i,n.textEncoder),s=o.getResponseHeader("content-length")?fu(o.getResponseHeader("content-length")):function(e,t,n){try{return hu("json"===t&&e&&"object"==typeof e?JSON.stringify(e):e,n)}catch(e){return}}(o.response,o.responseType,n.textEncoder);void 0!==r&&(e.data.request_body_size=r),void 0!==s&&(e.data.response_body_size=s)}function Au(e){const t=dr();try{const n=new TextEncoder,{networkDetailAllowUrls:o,networkDetailDenyUrls:i,networkCaptureBodies:r,networkRequestHeaders:s,networkResponseHeaders:a}=e.getOptions(),l={replay:e,textEncoder:n,networkDetailAllowUrls:o,networkDetailDenyUrls:i,networkCaptureBodies:r,networkRequestHeaders:s,networkResponseHeaders:a};t&&t.on?t.on("beforeAddBreadcrumb",((e,t)=>function(e,t,n){if(!t.data)return;try{(function(e){return"xhr"===e.category})(t)&&function(e){return e&&e.xhr}(n)&&(Iu(t,n,e),Lu(t,n,e)),function(e){return"fetch"===e.category}(t)&&function(e){return e&&e.response}(n)&&(!function(e,t,n){const{input:o,response:i}=t,r=hu(o?$u(o):void 0,n.textEncoder),s=i?fu(i.headers.get("content-length")):void 0;void 0!==r&&(e.data.request_body_size=r),void 0!==s&&(e.data.response_body_size=s)}(t,n,e),xu(t,n,e))}catch(e){Nd&&Fn.warn("Error when enriching network breadcrumb")}}(l,e,t))):(Oo(function(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{startTimestamp:t,endTimestamp:n,fetchData:o,response:i}=e;if(!n)return null;const{method:r,url:s}=o;return{type:"resource.fetch",start:t/1e3,end:n/1e3,name:s,data:{method:r,statusCode:i?i.status:void 0}}}(t);mu(e,n)}}(e)),Zo(gu(e)))}catch(e){}}let Mu=null;const Ru=e=>t=>{if(!e.isEnabled())return;const n=function(e){const t=e.getLastBreadcrumb&&e.getLastBreadcrumb();if(Mu===t||!t)return null;if(Mu=t,!function(e){return!!e.category}(t)||["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui."))return null;if("console"===t.category)return function(e){const t=e.data&&e.data.arguments;if(!Array.isArray(t)||0===t.length)return Td(e);let n=!1;const o=t.map((e=>{if(!e)return e;if("string"==typeof e)return e.length>al?(n=!0,`${e.slice(0,al)}â¦`):e;if("object"==typeof e)try{const t=ti(e,7);return JSON.stringify(t).length>al?(n=!0,`${JSON.stringify(t,null,2).slice(0,al)}â¦`):t}catch(e){}return e}));return Td({...e,data:{...e.data,arguments:o,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}(t);return Td(t)}(t);n&&md(e,n)};function Ou(e){const t=ur(),n=dr();t.addScopeListener(Ru(e)),ko(kd(e)),qo(pu(e)),Au(e);const o=du(e,!Nu(n));n&&n.addEventProcessor?n.addEventProcessor(o):function(e){const t=dr();t&&t.addEventProcessor&&t.addEventProcessor(e)}(o),Nu(n)&&(n.on("beforeSendEvent",cu(e)),n.on("afterSendEvent",lu(e)),n.on("createDsc",(t=>{const n=e.getSessionId();if(n&&e.isEnabled()&&"session"===e.recordingMode){e.checkAndHandleExpiredSession()&&(t.replay_id=n)}})),n.on("startTransaction",(t=>{e.lastTransaction=t})),n.on("finishTransaction",(t=>{e.lastTransaction=t})),n.on("beforeSendFeedback",((t,n)=>{const o=e.getSessionId();n&&n.includeReplay&&e.isEnabled()&&o&&t.contexts&&t.contexts.feedback&&(t.contexts.feedback.replay_id=o)})))}function Nu(e){return!(!e||!e.on)}function Du(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:o}=e,i=Date.now()/1e3;return{type:"memory",name:"memory",start:i,end:i,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:o}}}}function Pu(e){let t=!1;return(n,o)=>{if(!e.checkAndHandleExpiredSession())return void(Nd&&Fn.warn("[Replay] Received replay event after session expired."));const i=o||!t;t=!0,e.clickDetector&&Sd(e.clickDetector,n),e.addUpdate((()=>{if("buffer"===e.recordingMode&&i&&e.setInitialState(),!nu(e,n,i))return!0;if(!i)return!1;if(function(e,t){if(!t||!e.session||0!==e.session.segmentId)return;nu(e,function(e){const t=e.getOptions();return{type:wc.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:!!e.eventBuffer&&"worker"===e.eventBuffer.type,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}(e),!1)}(e,i),e.session&&e.session.previousSessionId)return!0;if("buffer"===e.recordingMode&&e.session&&e.eventBuffer){const t=e.eventBuffer.getEarliestTimestamp();t&&(Pd(`[Replay] Updating session start time to earliest event in buffer to ${new Date(t)}`,e.getOptions()._experiments.traceInternals),e.session.started=t,e.getOptions().stickySession&&Kd(e.session))}return"session"===e.recordingMode&&e.flush(),!0}))}}async function Bu({recordingData:e,replayId:t,segmentId:n,eventContext:o,timestamp:i,session:r}){const s=function({recordingData:e,headers:t}){let n;const o=`${JSON.stringify(t)}\n`;if("string"==typeof e)n=`${o}${e}`;else{const t=(new TextEncoder).encode(o);n=new Uint8Array(t.length+e.length),n.set(t),n.set(e,t.length)}return n}({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:l,traceIds:c,initialTimestamp:d}=o,u=dr(),p=ur(),m=u&&u.getTransport(),g=u&&u.getDsn();if(!(u&&m&&g&&r.sampled))return;const h={type:il,replay_start_timestamp:d/1e3,timestamp:i/1e3,error_ids:l,trace_ids:c,urls:a,replay_id:t,segment_id:n,replay_type:r.sampled},f=await async function({client:e,scope:t,replayId:n,event:o}){const i={event_id:n,integrations:"object"!=typeof e._integrations||null===e._integrations||Array.isArray(e._integrations)?void 0:Object.keys(e._integrations)};e.emit&&e.emit("preprocessEvent",o,i);const r=await tr(e.getOptions(),o,i,t,e,kr());if(!r)return null;r.platform=r.platform||"javascript";const s=e.getSdkMetadata&&e.getSdkMetadata(),{name:a,version:l}=s&&s.sdk||{};return r.sdk={...r.sdk,name:a||"sentry.javascript.unknown",version:l||"0.0.0"},r}({scope:p,client:u,replayId:t,event:h});if(!f)return u.recordDroppedEvent("event_processor","replay",h),void Pd("An event processor returned `null`, will not send event.");delete f.sdkProcessingMetadata;const _=function(e,t,n,o){return ki(Pi(e,Di(e),o,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:"string"==typeof t?(new TextEncoder).encode(t).length:t.length},t]])}(f,s,g,u.getOptions().tunnel);let v;try{v=await m.send(_)}catch(e){const t=new Error(rl);try{t.cause=e}catch(e){}throw t}if(!v)return v;if("number"==typeof v.statusCode&&(v.statusCode<200||v.statusCode>=300))throw new Uu(v.statusCode);const y=zi({},v);if(Ui(y,"replay"))throw new zu(y);return v}class Uu extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class zu extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function Hu(e,t={count:0,interval:5e3}){const{recordingData:n,options:o}=e;var i,r;if(n.length)try{return await Bu(e),!0}catch(n){if(n instanceof Uu||n instanceof zu)throw n;if(i="Replays",r={_retryCount:t.count},Cr().setContext(i,r),Nd&&o._experiments&&o._experiments.captureExceptions&&rr(n),t.count>=3){const e=new Error(`${rl} - max retries exceeded`);try{e.cause=n}catch(e){}throw e}return t.interval*=++t.count,new Promise(((n,o)=>{setTimeout((async()=>{try{await Hu(e,t),n(!0)}catch(e){o(e)}}),t.interval)}))}}const Fu="__THROTTLED";function Wu(e,t,n){const o=new Map;let i=!1;return(...r)=>{const s=Math.floor(Date.now()/1e3);if((e=>{const t=e-n;o.forEach(((e,n)=>{n<t&&o.delete(n)}))})(s),[...o.values()].reduce(((e,t)=>e+t),0)>=t){const e=i;return i=!0,e?"__SKIPPED":Fu}i=!1;const a=o.get(s)||0;return o.set(s,a+1),e(...r)}}class ju{constructor({options:e,recordingOptions:t}){ju.prototype.__init.call(this),ju.prototype.__init2.call(this),ju.prototype.__init3.call(this),ju.prototype.__init4.call(this),ju.prototype.__init5.call(this),ju.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=t,this._options=e,this._debouncedFlush=function(e,t,n){let o,i,r;const s=n&&n.maxWait?Math.max(n.maxWait,t):0;function a(){return l(),o=e(),o}function l(){void 0!==i&&clearTimeout(i),void 0!==r&&clearTimeout(r),i=r=void 0}function c(){return i&&clearTimeout(i),i=setTimeout(a,t),s&&void 0===r&&(r=setTimeout(a,s)),o}return c.cancel=l,c.flush=function(){return void 0!==i||void 0!==r?a():o},c}((()=>this._flush()),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Wu(((e,t)=>function(e,t,n){return iu(e,t)?ou(e,t,n):Promise.resolve(null)}(this,e,t)),300,5);const{slowClickTimeout:n,slowClickIgnoreSelectors:o}=this.getOptions(),i=n?{threshold:Math.min(3e3,n),timeout:n,scrollTimeout:300,ignoreSelector:o?o.join(","):""}:void 0;i&&(this.clickDetector=new wd(this,i))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return Boolean(this._canvas)}getOptions(){return this._options}initializeSampling(e){const{errorSampleRate:t,sessionSampleRate:n}=this._options;t<=0&&n<=0||(this._initializeSessionForSampling(e),this.session?!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",Bd(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording()):this._handleException(new Error("Unable to initialize and create session")))}start(){if(this._isEnabled&&"session"===this.recordingMode)throw new Error("Replay recording is already in progress");if(this._isEnabled&&"buffer"===this.recordingMode)throw new Error("Replay buffering is in progress, call `flush()` to save the replay");Bd("[Replay] Starting replay in session mode",this._options._experiments.traceInternals),this._updateUserActivity();const e=tu({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");Bd("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const e=tu({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=cd({...this._recordingOptions,..."buffer"===this.recordingMode&&{checkoutEveryNms:6e4},emit:Pu(this),onMutation:this._onMutationHandler,...e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}})}catch(e){this._handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this._handleException(e),!1}}async stop({forceFlush:e=!1,reason:t}={}){if(this._isEnabled){this._isEnabled=!1;try{Pd("[Replay] Stopping Replay"+(t?` triggered by ${t}`:""),this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,Vd(this)}catch(e){this._handleException(e)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),Pd("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording(),Pd("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if("session"===this.recordingMode)return this.flushImmediate();const t=Date.now();Pd("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const n=this.stopRecording();e&&n&&"session"!==this.recordingMode&&(this.recordingMode="session",this.session&&(this._updateUserActivity(t),this._updateSessionActivity(t),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const t=e();"buffer"!==this.recordingMode&&!0!==t&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._checkSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(!(this._lastActivity&&Jd(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled))return!!this._checkSession();this.pause()}setInitialState(){const e=`${nl.location.pathname}${nl.location.hash}${nl.location.search}`,t=`${nl.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=t,this._context.initialTimestamp=Date.now(),this._context.urls.push(t)}throttledAddEvent(e,t){const n=this._throttledAddEvent(e,t);if(n===Fu){const e=Td({category:"replay.throttled"});this.addUpdate((()=>!nu(this,{type:5,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e,metric:!0}})))}return n}getCurrentRoute(){const e=this.lastTransaction||ur().getTransaction(),t=(e&&Qi(e).data||{})[Br];if(e&&t&&["route","custom"].includes(t))return Qi(e).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=qd({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(e){Nd&&Fn.error("[Replay]",e),Nd&&this._options._experiments&&this._options._experiments.captureExceptions&&rr(e)}_initializeSessionForSampling(e){const t=this._options.errorSampleRate>0,n=tu({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:t});this.session=n}_checkSession(){if(!this.session)return!1;const e=this.session;return!eu(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(e),!1)}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{nl.document.addEventListener("visibilitychange",this._handleVisibilityChange),nl.addEventListener("blur",this._handleWindowBlur),nl.addEventListener("focus",this._handleWindowFocus),nl.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(Ou(this),this._hasInitializedCoreListeners=!0)}catch(e){this._handleException(e)}this._performanceCleanupCallback=Od(this)}_removeListeners(){try{nl.document.removeEventListener("visibilitychange",this._handleVisibilityChange),nl.removeEventListener("blur",this._handleWindowBlur),nl.removeEventListener("focus",this._handleWindowFocus),nl.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this._handleException(e)}}__init(){this._handleVisibilityChange=()=>{"visible"===nl.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const e=Td({category:"ui.blur"});this._doChangeToBackgroundTasks(e)}}__init3(){this._handleWindowFocus=()=>{const e=Td({category:"ui.focus"});this._doChangeToForegroundTasks(e)}}__init4(){this._handleKeyboardEvent=e=>{Id(this,e)}}_doChangeToBackgroundTasks(e){if(!this.session)return;Qd(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}_doChangeToForegroundTasks(e){if(!this.session)return;this.checkAndHandleExpiredSession()?e&&this._createCustomBreadcrumb(e):Pd("[Replay] Document has become active, but session has expired")}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate((()=>{this.throttledAddEvent({type:wc.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})}))}_addPerformanceEntries(){const e=(t=this.performanceEntries,t.map(Md).filter(Boolean)).concat(this.replayPerformanceEntries);var t;return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(uu(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:t}=this;if(!e||!t)return;if(e.segmentId)return;const n=t.getEarliestTimestamp();n&&n<this._context.initialTimestamp&&(this._context.initialTimestamp=n)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){const e=this.getSessionId();if(this.session&&this.eventBuffer&&e){if(await this._addPerformanceEntries(),this.eventBuffer&&this.eventBuffer.hasEvents&&(await async function(e){try{return Promise.all(uu(e,[Du(nl.performance.memory)]))}catch(e){return[]}}(this),this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const t=Date.now();if(t-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const n=this._popEventContext(),o=this.session.segmentId++;this._maybeSaveSession();const i=await this.eventBuffer.finish();await Hu({replayId:e,recordingData:i,segmentId:o,eventContext:n,session:this.session,options:this.getOptions(),timestamp:t})}catch(e){this._handleException(e),this.stop({reason:"sendReplay"});const t=dr();t&&t.recordDroppedEvent("send_error","replay")}}else Nd&&Fn.error("[Replay] No session or eventBuffer found to flush.")}__init5(){this._flush=async({force:e=!1}={})=>{if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession())return void(Nd&&Fn.error("[Replay] Attempting to finish replay event after session expired."));if(!this.session)return;const t=this.session.started,n=Date.now()-t;this._debouncedFlush.cancel();const o=n<this._options.minReplayDuration,i=n>this._options.maxReplayDuration+5e3;if(o||i)return Pd(`[Replay] Session duration (${Math.floor(n/1e3)}s) is too ${o?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),void(o&&this._debouncedFlush());const r=this.eventBuffer;if(r&&0===this.session.segmentId&&!r.hasCheckout&&Pd("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock)return this._flushLock=this._runFlush(),await this._flushLock,void(this._flushLock=void 0);try{await this._flushLock}catch(e){Nd&&Fn.error(e)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&Kd(this.session)}__init6(){this._onMutationHandler=e=>{const t=e.length,n=this._options.mutationLimit,o=n&&t>n;if(t>this._options.mutationBreadcrumbLimit||o){const e=Td({category:"replay.mutations",data:{count:t,limit:o}});this._createCustomBreadcrumb(e)}return!o||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}}function qu(e,t,n,o){const i=[...e,..."string"==typeof o?o.split(","):[],...t];return void 0!==n&&("string"==typeof n&&i.push(`.${n}`),Hn((()=>{console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")}))),i.join(",")}const Gu='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',Vu=["content-length","content-type","accept"];let Yu=!1;class Zu{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:e=5e3,flushMaxDelay:t=5500,minReplayDuration:n=4999,maxReplayDuration:o=36e5,stickySession:i=!0,useCompression:r=!0,workerUrl:s,_experiments:a={},sessionSampleRate:l,errorSampleRate:c,maskAllText:d=!0,maskAllInputs:u=!0,blockAllMedia:p=!0,mutationBreadcrumbLimit:m=750,mutationLimit:g=1e4,slowClickTimeout:h=7e3,slowClickIgnoreSelectors:f=[],networkDetailAllowUrls:_=[],networkDetailDenyUrls:v=[],networkCaptureBodies:y=!0,networkRequestHeaders:w=[],networkResponseHeaders:b=[],mask:E=[],maskAttributes:S=["title","placeholder"],unmask:T=[],block:x=[],unblock:$=[],ignore:C=[],maskFn:k,beforeAddRecordingEvent:L,beforeErrorSampling:I,blockClass:A,blockSelector:M,maskInputOptions:R,maskTextClass:O,maskTextSelector:N,ignoreClass:D}={}){this.name=Zu.id;const P=function({mask:e,unmask:t,block:n,unblock:o,ignore:i,blockClass:r,blockSelector:s,maskTextClass:a,maskTextSelector:l,ignoreClass:c}){const d={maskTextSelector:qu(e,[".sentry-mask","[data-sentry-mask]"],a,l),unmaskTextSelector:qu(t,[".sentry-unmask","[data-sentry-unmask]"]),blockSelector:qu(n,[".sentry-block","[data-sentry-block]",'base[href="/"]'],r,s),unblockSelector:qu(o,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:qu(i,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],c)};return r instanceof RegExp&&(d.blockClass=r),a instanceof RegExp&&(d.maskTextClass=a),d}({mask:E,unmask:T,block:x,unblock:$,ignore:C,blockClass:A,blockSelector:M,maskTextClass:O,maskTextSelector:N,ignoreClass:D});if(this._recordingOptions={maskAllInputs:u,maskAllText:d,maskInputOptions:{...R||{},password:!0},maskTextFn:k,maskInputFn:k,maskAttributeFn:(e,t,n)=>function({el:e,key:t,maskAttributes:n,maskAllText:o,privacyOptions:i,value:r}){return o?i.unmaskTextSelector&&e.matches(i.unmaskTextSelector)?r:n.includes(t)||"value"===t&&"INPUT"===e.tagName&&["submit","button"].includes(e.getAttribute("type")||"")?r.replace(/[\S]/g,"*"):r:r}({maskAttributes:S,maskAllText:d,privacyOptions:P,key:e,value:t,el:n}),...P,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:e=>{try{e.__rrweb__=!0}catch(e){}}},this._initialOptions={flushMinDelay:e,flushMaxDelay:t,minReplayDuration:Math.min(n,15e3),maxReplayDuration:Math.min(o,cl),stickySession:i,sessionSampleRate:l,errorSampleRate:c,useCompression:r,workerUrl:s,blockAllMedia:p,maskAllInputs:u,maskAllText:d,mutationBreadcrumbLimit:m,mutationLimit:g,slowClickTimeout:h,slowClickIgnoreSelectors:f,networkDetailAllowUrls:_,networkDetailDenyUrls:v,networkCaptureBodies:y,networkRequestHeaders:Ku(w),networkResponseHeaders:Ku(b),beforeAddRecordingEvent:L,beforeErrorSampling:I,_experiments:a},"number"==typeof l&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysSessionSampleRate: ${l} })`),this._initialOptions.sessionSampleRate=l),"number"==typeof c&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysOnErrorSampleRate: ${c} })`),this._initialOptions.errorSampleRate=c),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Gu}`:Gu),this._isInitialized&&ei())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Yu}set _isInitialized(e){Yu=e}setupOnce(){ei()&&(this._setup(),setTimeout((()=>this._initialize())))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(e){return this._replay&&this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):Promise.resolve()}getReplayId(){if(this._replay&&this._replay.isEnabled())return this._replay.getSessionId()}_initialize(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}_setup(){const e=function(e){const t=dr(),n=t&&t.getOptions(),o={sessionSampleRate:0,errorSampleRate:0,...to(e)};if(!n)return Hn((()=>{console.warn("SDK client is not available.")})),o;null==e.sessionSampleRate&&null==e.errorSampleRate&&null==n.replaysSessionSampleRate&&null==n.replaysOnErrorSampleRate&&Hn((()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}));"number"==typeof n.replaysSessionSampleRate&&(o.sessionSampleRate=n.replaysSessionSampleRate);"number"==typeof n.replaysOnErrorSampleRate&&(o.errorSampleRate=n.replaysOnErrorSampleRate);return o}(this._initialOptions);this._replay=new ju({options:e,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(){try{const e=dr().getIntegrationByName("ReplayCanvas");if(!e)return;this._replay._canvas=e.getOptions()}catch(e){}}}function Ku(e){return[...Vu,...e.map((e=>e.toLowerCase()))]}var Xu;function Ju(e,t,n=1/0,o=0){return e?e.nodeType!==e.ELEMENT_NODE||o>n?-1:t(e)?o:Ju(e.parentNode,t,n,o+1):-1}function Qu(e,t){return n=>{const o=n;if(null===o)return!1;try{if(e)if("string"==typeof e){if(o.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const o=e.classList[n];if(t.test(o))return!0}return!1}(o,e))return!0;return!(!t||!o.matches(t))}catch(e){return!1}}}Zu.__initStatic(),function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(Xu||(Xu={}));const ep="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let tp={map:{},getId:()=>(console.error(ep),-1),getNode:()=>(console.error(ep),null),removeNodeFromMap(){console.error(ep)},has:()=>(console.error(ep),!1),reset(){console.error(ep)}};function np(e,t,n,o,i=window){const r=i.Object.getOwnPropertyDescriptor(e,t);return i.Object.defineProperty(e,t,o?n:{set(e){lp((()=>{n.set.call(this,e)}),0),r&&r.set&&r.set.call(this,e)}}),()=>np(e,t,r||{},!0)}function op(e,t,n){try{if(!(t in e))return()=>{};const o=e[t],i=n(o);return"function"==typeof i&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:o}})),e[t]=i,()=>{e[t]=o}}catch(e){return()=>{}}}function ip(e,t,n,o,i){if(!e)return!1;const r=function(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}(e);if(!r)return!1;const s=Qu(t,n);if(!i){const e=o&&r.matches(o);return s(r)&&!e}const a=Ju(r,s);let l=-1;return!(a<0)&&(o&&(l=Ju(r,Qu(null,o))),a>-1&&l<0||a<l)}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(tp=new Proxy(tp,{get:(e,t,n)=>("map"===t&&console.error(ep),Reflect.get(e,t,n))})),/[1-9][0-9]{12}/.test(Date.now().toString());const rp={};function sp(e){const t=rp[e];if(t)return t;const n=window.document;let o=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const i=t.contentWindow;i&&i[e]&&(o=i[e]),n.head.removeChild(t)}catch(e){}return rp[e]=o.bind(window)}function ap(...e){return sp("requestAnimationFrame")(...e)}function lp(...e){return sp("setTimeout")(...e)}var cp=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(cp||{});let dp;function up(e){dp=e}const pp=e=>{if(!dp)return e;return(...t)=>{try{return e(...t)}catch(e){if(dp&&!0===dp(e))return()=>{};throw e}}};for(var mp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gp="undefined"==typeof Uint8Array?[]:new Uint8Array(256),hp=0;hp<64;hp++)gp[mp.charCodeAt(hp)]=hp;const fp=new Map;const _p=(e,t,n)=>{if(!e||!wp(e,t)&&"object"!=typeof e)return;const o=function(e,t){let n=fp.get(e);return n||(n=new Map,fp.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name);let i=o.indexOf(e);return-1===i&&(i=o.length,o.push(e)),i};function vp(e,t,n){if(e instanceof Array)return e.map((e=>vp(e,t,n)));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray){return{rr_type:e.constructor.name,args:[Object.values(e)]}}if(e instanceof ArrayBuffer){const t=e.constructor.name,n=function(e){var t,n=new Uint8Array(e),o=n.length,i="";for(t=0;t<o;t+=3)i+=mp[n[t]>>2],i+=mp[(3&n[t])<<4|n[t+1]>>4],i+=mp[(15&n[t+1])<<2|n[t+2]>>6],i+=mp[63&n[t+2]];return o%3==2?i=i.substring(0,i.length-1)+"=":o%3==1&&(i=i.substring(0,i.length-2)+"=="),i}(e);return{rr_type:t,base64:n}}if(e instanceof DataView){return{rr_type:e.constructor.name,args:[vp(e.buffer,t,n),e.byteOffset,e.byteLength]}}if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:n}=e;return{rr_type:t,src:n}}if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}if(e instanceof ImageData){return{rr_type:e.constructor.name,args:[vp(e.data,t,n),e.width,e.height]}}if(wp(e,t)||"object"==typeof e){return{rr_type:e.constructor.name,index:_p(e,t,n)}}return e}const yp=(e,t,n)=>e.map((e=>vp(e,t,n))),wp=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((e=>"function"==typeof t[e]));return Boolean(n.find((n=>e instanceof t[n])))};function bp(e,t,n,o,i){const r=[];try{const s=op(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(r,...s){if(!ip(this,t,n,o,!0)){const e=function(e){return"experimental-webgl"===e?"webgl":e}(r);if("__context"in this||(this.__context=e),i&&["webgl","webgl2"].includes(e))if(s[0]&&"object"==typeof s[0]){const e=s[0];e.preserveDrawingBuffer||(e.preserveDrawingBuffer=!0)}else s.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[r,...s])}}));r.push(s)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{r.forEach((e=>e()))}}function Ep(e,t,n,o,i,r,s,a){const l=[],c=Object.getOwnPropertyNames(e);for(const s of c)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(s))try{if("function"!=typeof e[s])continue;const c=op(e,s,(function(e){return function(...l){const c=e.apply(this,l);if(_p(c,a,this),"tagName"in this.canvas&&!ip(this.canvas,o,i,r,!0)){const e=yp(l,a,this),o={type:t,property:s,args:e};n(this.canvas,o)}return c}}));l.push(c)}catch(o){const i=np(e,s,{set(e){n(this.canvas,{type:t,property:s,args:[e],setter:!0})}});l.push(i)}return l}class Sp{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)};const{sampling:t="all",win:n,blockClass:o,blockSelector:i,unblockSelector:r,maxCanvasSize:s,recordCanvas:a,dataURLOptions:l,errorHandler:c}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,this.options=e,c&&up(c),e.enableManualSnapshot||pp((()=>{a&&"all"===t&&this.initCanvasMutationObserver(n,o,i,r),a&&"number"==typeof t&&this.initCanvasFPSObserver(t,n,o,i,r,s,{dataURLOptions:l})}))()}initCanvasFPSObserver(e,t,n,o,i,r,s){const a=bp(t,n,o,i,!0),l=this.takeSnapshot(!1,e,t,n,o,i,r,s.dataURLOptions);this.resetObservers=()=>{a(),cancelAnimationFrame(l)}}initCanvasMutationObserver(e,t,n,o){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const i=bp(e,t,n,o,!1),r=function(e,t,n,o,i){const r=[],s=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of s)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[a])continue;const s=op(t.CanvasRenderingContext2D.prototype,a,(function(r){return function(...s){return ip(this.canvas,n,o,i,!0)||lp((()=>{const n=yp(s,t,this);e(this.canvas,{type:cp["2D"],property:a,args:n})}),0),r.apply(this,s)}}));r.push(s)}catch(n){const o=np(t.CanvasRenderingContext2D.prototype,a,{set(t){e(this.canvas,{type:cp["2D"],property:a,args:[t],setter:!0})}});r.push(o)}return()=>{r.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,o),s=function(e,t,n,o,i,r){const s=[];return s.push(...Ep(t.WebGLRenderingContext.prototype,cp.WebGL,e,n,o,i,0,t)),void 0!==t.WebGL2RenderingContext&&s.push(...Ep(t.WebGL2RenderingContext.prototype,cp.WebGL2,e,n,o,i,0,t)),()=>{s.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,o,this.mirror);this.resetObservers=()=>{i(),r(),s()}}snapshot(e){const{options:t}=this,n=this.takeSnapshot(!0,"all"===t.sampling?2:t.sampling||2,t.win,t.blockClass,t.blockSelector,t.unblockSelector,t.maxCanvasSize,t.dataURLOptions,e);this.resetObservers=()=>{cancelAnimationFrame(n)}}takeSnapshot(e,t,n,o,i,r,s,a,l){const c=new Map,d=new Worker(function(){const e=new Blob(['for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};']);return URL.createObjectURL(e)}());d.onmessage=e=>{const t=e.data,{id:n}=t;if(c.set(n,!1),!("base64"in t))return;const{base64:o,type:i,width:r,height:s}=t;this.mutationCb({id:n,type:cp["2D"],commands:[{property:"clearRect",args:[0,0,r,s]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:o}],type:i}]},0,0,r,s]}]})};const u=1e3/t;let p,m=0;const g=t=>{m&&t-m<u||(m=t,(e=>{if(e)return[e];const t=[];return n.document.querySelectorAll("canvas").forEach((e=>{ip(e,o,i,r,!0)||t.push(e)})),t})(l).forEach((t=>{const n=this.mirror.getId(t);if(!c.get(n)&&t.width&&t.height){if(c.set(n,!0),!e&&["webgl","webgl2"].includes(t.__context)){const e=t.getContext(t.__context);!1===Fi([e,"optionalAccess",e=>e.getContextAttributes,"call",e=>e(),"optionalAccess",e=>e.preserveDrawingBuffer])&&e.clear(e.COLOR_BUFFER_BIT)}createImageBitmap(t).then((e=>{d.postMessage({id:n,bitmap:e,width:t.width,height:t.height,dataURLOptions:a,maxCanvasSize:s},[e])})).catch((e=>{pp((()=>{throw e}))()}))}}))),p=ap(g)};return p=ap(g),p}startPendingCanvasMutationFlusher(){ap((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,ap(e)};ap(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((e,t)=>{const n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)})),ap((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||-1===t)return;const o=n.map((e=>{const{type:t,...n}=e;return n})),{type:i}=n[0];this.mutationCb({id:t,type:i,commands:o}),this.pendingCanvasMutations.delete(e)}}const Tp={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},xp="ReplayCanvas",$p=1280,Cp=(e={})=>{const[t,n]=e.maxCanvasSize||[],o={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,$p):$p,n?Math.min(n,$p):$p]};let i;const r=new Promise((e=>i=e));return{name:xp,setupOnce(){},getOptions(){const{quality:e,enableManualSnapshot:t,maxCanvasSize:n}=o;return{enableManualSnapshot:t,recordCanvas:!0,getCanvasManager:e=>{const o=new Sp({...e,enableManualSnapshot:t,maxCanvasSize:n,errorHandler:e=>{try{"object"==typeof e&&(e.__rrweb__=!0)}catch(e){}}});return i(o),o},...Tp[e||"medium"]||Tp.medium}},async snapshot(e){(await r).snapshot(e)}}};qr(xp,Cp);const kp=In,Lp="#ffffff",Ip="inherit",Ap="rgba(108, 95, 199, 1)",Mp={fontFamily:"system-ui, 'Helvetica Neue', Arial, sans-serif",fontSize:"14px",background:Lp,backgroundHover:"#f6f6f7",foreground:"#2b2233",border:"1.5px solid rgba(41, 35, 47, 0.13)",borderRadius:"25px",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",success:"#268d75",error:"#df3338",submitBackground:"rgba(88, 74, 192, 1)",submitBackgroundHover:Ap,submitBorder:Ap,submitOutlineFocus:"#29232f",submitForeground:Lp,submitForegroundHover:Lp,cancelBackground:"transparent",cancelBackgroundHover:"var(--background-hover)",cancelBorder:"var(--border)",cancelOutlineFocus:"var(--input-outline-focus)",cancelForeground:"var(--foreground)",cancelForegroundHover:"var(--foreground)",inputBackground:Ip,inputForeground:Ip,inputBorder:"var(--border)",inputOutlineFocus:Ap,formBorderRadius:"20px",formContentBorderRadius:"6px"},Rp=Mp,Op={...Mp,background:"#29232f",backgroundHover:"#352f3b",foreground:"#ebe6ef",border:"1.5px solid rgba(235, 230, 239, 0.15)",success:"#2da98c",error:"#f55459"},Np="widget",Dp="api";async function Pp({feedback:{message:e,email:t,name:n,source:o,url:i}},{includeReplay:r=!0}={}){const s=dr(),a=s&&s.getTransport(),l=s&&s.getDsn();if(!s||!a||!l)return;const c={contexts:{feedback:{contact_email:t,name:n,message:e,url:i,source:o}},type:"feedback"};return cr((async e=>{e.clearBreadcrumbs(),[Dp,Np].includes(String(o))&&e.setLevel("info");const t=await async function({client:e,scope:t,event:n}){const o={};e.emit&&e.emit("preprocessEvent",n,o);const i=await tr(e.getOptions(),n,o,t,e,kr());return null===i?(e.recordDroppedEvent("event_processor","feedback",n),null):(i.platform=i.platform||"javascript",i)}({scope:e,client:s,event:c});if(!t)return;s.emit&&s.emit("beforeSendFeedback",t,{includeReplay:Boolean(r)});const n=Ur(t,l,s.getOptions()._metadata,s.getOptions().tunnel);let i;try{i=await a.send(n)}catch(e){const t=new Error("Unable to send Feedback");try{t.cause=e}catch(e){}throw t}if(i){if("number"==typeof i.statusCode&&(i.statusCode<200||i.statusCode>=300))throw new Error("Unable to send Feedback");return i}}))}const Bp="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Up(e,t){return{...e,...t,themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function zp(e){return`\n  --background: ${e.background};\n  --background-hover: ${e.backgroundHover};\n  --foreground: ${e.foreground};\n  --error: ${e.error};\n  --success: ${e.success};\n  --border: ${e.border};\n  --border-radius: ${e.borderRadius};\n  --box-shadow: ${e.boxShadow};\n\n  --submit-background: ${e.submitBackground};\n  --submit-background-hover: ${e.submitBackgroundHover};\n  --submit-border: ${e.submitBorder};\n  --submit-outline-focus: ${e.submitOutlineFocus};\n  --submit-foreground: ${e.submitForeground};\n  --submit-foreground-hover: ${e.submitForegroundHover};\n\n  --cancel-background: ${e.cancelBackground};\n  --cancel-background-hover: ${e.cancelBackgroundHover};\n  --cancel-border: ${e.cancelBorder};\n  --cancel-outline-focus: ${e.cancelOutlineFocus};\n  --cancel-foreground: ${e.cancelForeground};\n  --cancel-foreground-hover: ${e.cancelForegroundHover};\n\n  --input-background: ${e.inputBackground};\n  --input-foreground: ${e.inputForeground};\n  --input-border: ${e.inputBorder};\n  --input-outline-focus: ${e.inputOutlineFocus};\n\n  --form-border-radius: ${e.formBorderRadius};\n  --form-content-border-radius: ${e.formContentBorderRadius};\n  `}function Hp({id:e,colorScheme:t,themeDark:n,themeLight:o}){try{const i=kp.document,r=i.createElement("div");r.id=e;const s=r.attachShadow({mode:"open"});return s.appendChild(function(e,t,n){const o=e.createElement("style");return o.textContent=`\n:host {\n  --bottom: 1rem;\n  --right: 1rem;\n  --top: auto;\n  --left: auto;\n  --z-index: 100000;\n  --font-family: ${n.light.fontFamily};\n  --font-size: ${n.light.fontSize};\n\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n  z-index: var(--z-index);\n\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n\n  ${zp("dark"===t?n.dark:n.light)}\n}\n\n${"system"===t?`\n@media (prefers-color-scheme: dark) {\n  :host {\n    ${zp(n.dark)}\n  }\n}`:""}\n}`,o}(i,t,{dark:n,light:o})),s.appendChild(function(e){const t=e.createElement("style");return t.textContent="\n.dialog {\n  line-height: 25px;\n  background-color: rgba(0, 0, 0, 0.05);\n  border: none;\n  position: fixed;\n  inset: 0;\n  z-index: 10000;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 1;\n  transition: opacity 0.2s ease-in-out;\n}\n\n.dialog:not([open]) {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n.dialog:not([open]) .dialog__content {\n  transform: translate(0, -16px) scale(0.98);\n}\n\n.dialog__content {\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n\n  border: var(--border);\n  border-radius: var(--form-border-radius);\n  background-color: var(--background);\n  color: var(--foreground);\n\n  width: 320px;\n  max-width: 100%;\n  max-height: calc(100% - 2rem);\n  display: flex;\n  flex-direction: column;\n  box-shadow: var(--box-shadow);\n  transition: transform 0.2s ease-in-out;\n  transform: translate(0, 0) scale(1);\n}\n\n.dialog__header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 20px;\n  font-weight: 600;\n  padding: 24px 24px 0 24px;\n  margin: 0;\n  margin-bottom: 16px;\n}\n\n.brand-link {\n  display: inline-flex;\n}\n\n.error {\n  color: var(--error);\n  margin-bottom: 16px;\n}\n\n.form {\n  display: grid;\n  overflow: auto;\n  flex-direction: column;\n  gap: 16px;\n  padding: 0 24px 24px;\n}\n\n.form__error-container {\n  color: var(--error);\n}\n\n.form__error-container--hidden {\n  display: none;\n}\n\n.form__label {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin: 0px;\n}\n\n.form__label__text {\n  display: grid;\n  gap: 4px;\n  align-items: center;\n  grid-auto-flow: column;\n  grid-auto-columns: max-content;\n}\n\n.form__label__text--required {\n  font-size: 0.85em;\n}\n\n.form__input {\n  line-height: inherit;\n  background-color: var(--input-background);\n  box-sizing: border-box;\n  border: var(--input-border);\n  border-radius: var(--form-content-border-radius);\n  color: var(--input-foreground);\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 500;\n  padding: 6px 12px;\n}\n\n.form__input::placeholder {\n  color: var(--input-foreground);\n  opacity: 0.65;\n}\n\n.form__input:focus-visible {\n  outline: 1px auto var(--input-outline-focus);\n}\n\n.form__input--textarea {\n  font-family: inherit;\n  resize: vertical;\n}\n\n.btn-group {\n  display: grid;\n  gap: 8px;\n  margin-top: 8px;\n}\n\n.btn {\n  line-height: inherit;\n  border: var(--cancel-border);\n  border-radius: var(--form-content-border-radius);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  padding: 6px 16px;\n}\n.btn[disabled] {\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n.btn--primary {\n  background-color: var(--submit-background);\n  border-color: var(--submit-border);\n  color: var(--submit-foreground);\n}\n.btn--primary:hover {\n  background-color: var(--submit-background-hover);\n  color: var(--submit-foreground-hover);\n}\n.btn--primary:focus-visible {\n  outline: 1px auto var(--submit-outline-focus);\n}\n\n.btn--default {\n  background-color: var(--cancel-background);\n  color: var(--cancel-foreground);\n  font-weight: 500;\n}\n.btn--default:hover {\n  background-color: var(--cancel-background-hover);\n  color: var(--cancel-foreground-hover);\n}\n.btn--default:focus-visible {\n  outline: 1px auto var(--cancel-outline-focus);\n}\n\n.success-message {\n  background-color: var(--background);\n  border: var(--border);\n  border-radius: var(--border-radius);\n  box-shadow: var(--box-shadow);\n  font-weight: 600;\n  color: var(--success);\n  padding: 12px 24px;\n  line-height: 25px;\n  display: grid;\n  align-items: center;\n  grid-auto-flow: column;\n  gap: 6px;\n  cursor: default;\n}\n\n.success-icon path {\n  fill: var(--success);\n}\n",t}(i)),{shadow:s,host:r}}catch(e){throw Fn.warn("[Feedback] Browser does not support shadow DOM API"),new Error("Browser does not support shadow DOM API.")}}async function Fp(e,t,n){if(!e)return;e.hideError();try{const e=await function({name:e,email:t,message:n,source:o=Dp,url:i=Pn()},r={}){if(!n)throw new Error("Unable to submit feedback with empty message");return Pp({feedback:{name:e,email:t,message:n,url:i,source:o}},r)}({...t,source:Np},n);return e}catch(t){Bp&&Fn.error(t),e&&e.showError("There was a problem submitting feedback, please wait and try again.")}}function Wp(e,t){return Object.entries(t).forEach((([t,n])=>{e.setAttributeNS(null,t,n)})),e}const jp=20,qp="http://www.w3.org/2000/svg";function Gp(e,t,...n){const o=kp.document.createElement(e);t&&Object.entries(t).forEach((([e,t])=>{"className"===e&&"string"==typeof t?o.setAttribute("class",t):"boolean"==typeof t&&t?o.setAttribute(e,""):"string"==typeof t?o.setAttribute(e,t):e.startsWith("on")&&"function"==typeof t&&o.addEventListener(e.substring(2).toLowerCase(),t)}));for(const e of n)Vp(o,e);return o}function Vp(e,t){const n=kp.document;if(null!=t)if(Array.isArray(t))for(const n of t)Vp(e,n);else!1===t||("string"==typeof t?e.appendChild(n.createTextNode(t)):t instanceof Node?e.appendChild(t):e.appendChild(n.createTextNode(String(t))))}function Yp({buttonLabel:e,onClick:t}){const n=Gp("button",{type:"button",className:"widget__actor","aria-label":e,"aria-hidden":"false"},function(){const e=e=>kp.document.createElementNS(qp,e),t=Wp(e("svg"),{class:"feedback-icon",width:`${jp}`,height:`${jp}`,viewBox:`0 0 ${jp} ${jp}`,fill:"none"}),n=Wp(e("g"),{clipPath:"url(#clip0_57_80)"}),o=Wp(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(o);const i=e("defs"),r=Wp(e("clipPath"),{id:"clip0_57_80"}),s=Wp(e("rect"),{width:`${jp}`,height:`${jp}`,fill:"white"});return r.appendChild(s),i.appendChild(r),t.appendChild(i).appendChild(r).appendChild(s),{get el(){return t}}}().el,e?Gp("span",{className:"widget__actor__text"},e):null);return n.addEventListener("click",(function(e){t&&t(e)})),{get el(){return n},show:()=>{n.classList.remove("widget__actor--hidden"),n.setAttribute("aria-hidden","false")},hide:()=>{n.classList.add("widget__actor--hidden"),n.setAttribute("aria-hidden","true")}}}function Zp(e,t){const n=e.get(t);return"string"==typeof n?n.trim():""}function Kp({nameLabel:e,namePlaceholder:t,emailLabel:n,emailPlaceholder:o,messageLabel:i,messagePlaceholder:r,isRequiredLabel:s,cancelButtonLabel:a,submitButtonLabel:l,showName:c,showEmail:d,isNameRequired:u,isEmailRequired:p,defaultName:m,defaultEmail:g,onCancel:h,onSubmit:f}){const{el:_}=function({label:e}){return{el:Gp("button",{type:"submit",className:"btn btn--primary","aria-label":e},e)}}({label:l});const v=Gp("div",{className:"form__error-container form__error-container--hidden","aria-hidden":"true"});const y=Gp("input",{id:"name",type:c?"text":"hidden","aria-hidden":c?"false":"true",name:"name",required:u,className:"form__input",placeholder:t,value:m}),w=Gp("input",{id:"email",type:d?"text":"hidden","aria-hidden":d?"false":"true",name:"email",required:p,className:"form__input",placeholder:o,value:g}),b=Gp("textarea",{id:"message",autoFocus:"true",rows:"5",name:"message",required:!0,className:"form__input form__input--textarea",placeholder:r}),E=Gp("button",{type:"button",className:"btn btn--default","aria-label":a,onClick:e=>{h&&h(e)}},a),S=Gp("form",{className:"form",onSubmit:function(e){if(e.preventDefault(),e.target instanceof HTMLFormElement)try{if(f){const t=new FormData(e.target),n={name:Zp(t,"name"),email:Zp(t,"email"),message:Zp(t,"message")};f(n)}}catch(e){}}},[v,c&&Gp("label",{htmlFor:"name",className:"form__label"},[Gp("span",{className:"form__label__text"},e,u&&Gp("span",{className:"form__label__text--required"},` ${s}`)),y]),!c&&y,d&&Gp("label",{htmlFor:"email",className:"form__label"},[Gp("span",{className:"form__label__text"},n,p&&Gp("span",{className:"form__label__text--required"},` ${s}`)),w]),!d&&w,Gp("label",{htmlFor:"message",className:"form__label"},[Gp("span",{className:"form__label__text"},i,Gp("span",{className:"form__label__text--required"},` ${s}`)),b]),Gp("div",{className:"btn-group"},[_,E])]);return{get el(){return S},showError:function(e){v.textContent=e,v.classList.remove("form__error-container--hidden"),v.setAttribute("aria-hidden","false")},hideError:function(){v.textContent="",v.classList.add("form__error-container--hidden"),v.setAttribute("aria-hidden","true")}}}const Xp="http://www.w3.org/2000/svg";function Jp({formTitle:e,showBranding:t,showName:n,showEmail:o,isNameRequired:i,isEmailRequired:r,colorScheme:s,defaultName:a,defaultEmail:l,onClosed:c,onCancel:d,onSubmit:u,...p}){let m=null;function g(){m&&(m.open=!1)}const{el:h,showError:f,hideError:_}=Kp({showEmail:o,showName:n,isEmailRequired:r,isNameRequired:i,defaultName:a,defaultEmail:l,onSubmit:u,onCancel:d,...p});return m=Gp("dialog",{className:"dialog",open:!0,onClick:function(){g(),c&&c()}},Gp("div",{className:"dialog__content",onClick:e=>{e.stopPropagation()}},Gp("h2",{className:"dialog__header"},e,t&&Gp("a",{className:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer"},function({colorScheme:e}){const t=e=>kp.document.createElementNS(Xp,e),n=Wp(t("svg"),{class:"sentry-logo",width:"32",height:"30",viewBox:"0 0 72 66",fill:"none"}),o=Wp(t("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});n.append(o);const i=t("defs"),r=t("style");return r.textContent=`\n    path {\n      fill: ${"dark"===e?"#fff":"#362d59"};\n    }`,"system"===e&&(r.textContent+="\n    @media (prefers-color-scheme: dark) {\n      path: {\n        fill: '#fff';\n      }\n    }\n    "),i.append(r),n.append(i),{get el(){return n}}}({colorScheme:s}).el)),h)),{get el(){return m},showError:f,hideError:_,open:function(){m&&(m.open=!0)},close:g,checkIsOpen:function(){return m&&!0===m.open||!1}}}const Qp=16,em=17,tm="http://www.w3.org/2000/svg";function nm({message:e,onRemove:t}){function n(){o&&(o.remove(),t&&t())}const o=Gp("div",{className:"success-message",onClick:n},function(){const e=e=>kp.document.createElementNS(tm,e),t=Wp(e("svg"),{class:"success-icon",width:`${Qp}`,height:`${em}`,viewBox:`0 0 ${Qp} ${em}`,fill:"none"}),n=Wp(e("g"),{clipPath:"url(#clip0_57_156)"}),o=Wp(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),i=Wp(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(i,o);const r=e("defs"),s=Wp(e("clipPath"),{id:"clip0_57_156"}),a=Wp(e("rect"),{width:`${Qp}`,height:`${Qp}`,fill:"white",transform:"translate(0 0.5)"});return s.appendChild(a),r.appendChild(s),t.appendChild(r).appendChild(s).appendChild(a),{get el(){return t}}}().el,e);return{el:o,remove:n}}function om({shadow:e,options:{shouldCreateActor:t=!0,...n},attachTo:o}){let i,r,s=!1;async function a(t){if(!r)return;const o=[];if(n.isNameRequired&&!t.name&&o.push(n.nameLabel),n.isEmailRequired&&!t.email&&o.push(n.emailLabel),t.message||o.push(n.messageLabel),o.length>0)return void r.showError(`Please enter in the following required fields: ${o.join(", ")}`);await Fp(r,t)?(m(),function(){if(e)try{const t=nm({message:n.successMessageText,onRemove:()=>{o&&clearTimeout(o),c()}});if(!t.el)throw new Error("Unable to show success message");e.appendChild(t.el);const o=setTimeout((()=>{t&&t.remove()}),5e3)}catch(e){Fn.error(e)}}(),n.onSubmitSuccess&&n.onSubmitSuccess()):n.onSubmitError&&n.onSubmitError()}function l(){const e=dr(),t=e&&e.getIntegrationByName&&e.getIntegrationByName("Replay");t&&t.flush().catch((e=>{Bp&&Fn.error(e)}))}function c(){i&&i.show()}function d(){i&&i.hide()}function u(){try{if(r)return r.open(),s=!0,n.onFormOpen&&n.onFormOpen(),void l();const t=n.useSentryUser,o=ur(),i=o&&o.getUser();if(r=Jp({colorScheme:n.colorScheme,showBranding:n.showBranding,showName:n.showName||n.isNameRequired,showEmail:n.showEmail||n.isEmailRequired,isNameRequired:n.isNameRequired,isEmailRequired:n.isEmailRequired,formTitle:n.formTitle,cancelButtonLabel:n.cancelButtonLabel,submitButtonLabel:n.submitButtonLabel,emailLabel:n.emailLabel,emailPlaceholder:n.emailPlaceholder,messageLabel:n.messageLabel,messagePlaceholder:n.messagePlaceholder,nameLabel:n.nameLabel,namePlaceholder:n.namePlaceholder,isRequiredLabel:n.isRequiredLabel,defaultName:t&&i&&i[t.name]||"",defaultEmail:t&&i&&i[t.email]||"",onClosed:()=>{c(),s=!1,n.onFormClose&&n.onFormClose()},onCancel:()=>{p(),c()},onSubmit:a}),!r.el)throw new Error("Unable to open Feedback dialog");e.appendChild(r.el),d(),n.onFormOpen&&n.onFormOpen(),l()}catch(e){Fn.error(e)}}function p(){r&&(r.close(),s=!1,n.onFormClose&&n.onFormClose())}function m(){if(r){p();const e=r.el;e&&e.remove(),r=void 0}}function g(){s||u(),d()}return o?o.addEventListener("click",g):t&&(i=Yp({buttonLabel:n.buttonLabel,onClick:g}),i.el&&e.appendChild(i.el)),{get actor(){return i},get dialog(){return r},showActor:c,hideActor:d,removeActor:function(){i&&i.el&&i.el.remove()},openDialog:u,closeDialog:p,removeDialog:m}}const im=kp.document;class rm{static __initStatic(){this.id="Feedback"}constructor({autoInject:e=!0,id:t="sentry-feedback",isEmailRequired:n=!1,isNameRequired:o=!1,showBranding:i=!0,showEmail:r=!0,showName:s=!0,useSentryUser:a={email:"email",name:"username"},themeDark:l,themeLight:c,colorScheme:d="system",buttonLabel:u="Report a Bug",cancelButtonLabel:p="Cancel",submitButtonLabel:m="Send Bug Report",formTitle:g="Report a Bug",emailPlaceholder:h="your.email@example.org",emailLabel:f="Email",messagePlaceholder:_="What's the bug? What did you expect?",messageLabel:v="Description",namePlaceholder:y="Your Name",nameLabel:w="Name",isRequiredLabel:b="(required)",successMessageText:E="Thank you for your report!",onFormClose:S,onFormOpen:T,onSubmitError:x,onSubmitSuccess:$}={}){this.name=rm.id,this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1,this.options={autoInject:e,showBranding:i,id:t,isEmailRequired:n,isNameRequired:o,showEmail:r,showName:s,useSentryUser:a,colorScheme:d,themeDark:{...Op,...l},themeLight:{...Rp,...c},buttonLabel:u,cancelButtonLabel:p,submitButtonLabel:m,formTitle:g,emailLabel:f,emailPlaceholder:h,messageLabel:v,messagePlaceholder:_,nameLabel:w,namePlaceholder:y,isRequiredLabel:b,successMessageText:E,onFormClose:S,onFormOpen:T,onSubmitError:x,onSubmitSuccess:$}}setupOnce(){if(ei())try{this._cleanupWidgetIfExists();const{autoInject:e}=this.options;if(!e)return;this._createWidget(this.options)}catch(e){Bp&&Fn.error(e)}}openDialog(){this._widget||this._createWidget({...this.options,shouldCreateActor:!1}),this._widget&&this._widget.openDialog()}closeDialog(){this._widget&&this._widget.closeDialog()}attachTo(e,t){try{const n=Up(this.options,t||{});return this._ensureShadowHost(n,(({shadow:t})=>{const o="string"==typeof e?im.querySelector(e):"function"==typeof e.addEventListener?e:null;if(!o)return Bp&&Fn.error("[Feedback] Unable to attach to target element"),null;const i=om({shadow:t,options:n,attachTo:o});return this._widgets.add(i),this._widget||(this._widget=i),i}))}catch(e){return Bp&&Fn.error(e),null}}createWidget(e){try{return this._createWidget(Up(this.options,e||{}))}catch(e){return Bp&&Fn.error(e),null}}removeWidget(e){if(!e)return!1;try{if(this._widgets.has(e))return e.removeActor(),e.removeDialog(),this._widgets.delete(e),this._widget===e&&(this._widget=null),!0}catch(e){Bp&&Fn.error(e)}return!1}getWidget(){return this._widget}remove(){this._host&&this._host.remove(),this._initialize()}_initialize(){this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1}_cleanupWidgetIfExists(){this._host&&this.remove();const e=im.querySelector(`#${this.options.id}`);e&&e.remove()}_createWidget(e){return this._ensureShadowHost(e,(({shadow:t})=>{const n=om({shadow:t,options:e});return!this._hasInsertedActorStyles&&n.actor&&(t.appendChild(function(e){const t=e.createElement("style");return t.textContent="\n.widget__actor {\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n  z-index: var(--z-index);\n\n  line-height: 16px;\n\n  display: flex;\n  align-items: center;\n  gap: 8px;\n\n  border-radius: var(--border-radius);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  padding: 16px;\n  text-decoration: none;\n  z-index: 9000;\n\n  color: var(--foreground);\n  background-color: var(--background);\n  border: var(--border);\n  box-shadow: var(--box-shadow);\n  opacity: 1;\n  transition: opacity 0.1s ease-in-out;\n}\n\n.widget__actor:hover {\n  background-color: var(--background-hover);\n}\n\n.widget__actor svg {\n  width: 16px;\n  height: 16px;\n}\n\n.widget__actor--hidden {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n\n.widget__actor__text {\n}\n\n@media (max-width: 600px) {\n  .widget__actor__text {\n    display: none;\n  }\n}\n\n.feedback-icon path {\n  fill: var(--foreground);\n}\n",t}(im)),this._hasInsertedActorStyles=!0),this._widgets.add(n),this._widget||(this._widget=n),n}))}_ensureShadowHost(e,t){let n=!1;if(!this._shadow||!this._host){const{id:t,colorScheme:o,themeLight:i,themeDark:r}=e,{shadow:s,host:a}=Hp({id:t,colorScheme:o,themeLight:i,themeDark:r});this._shadow=s,this._host=a,n=!0}this._host.dataset.sentryFeedbackColorscheme=e.colorScheme;const o=t({shadow:this._shadow,host:this._host});return n&&im.body.appendChild(this._host),o}}rm.__initStatic();const sm="CaptureConsole",am=(e={})=>{const t=e.levels||Un;return{name:sm,setupOnce(){},setup(e){"console"in In&&go((({args:n,level:o})=>{dr()===e&&t.includes(o)&&function(e,t){const n={level:Si(t),extra:{arguments:e}};cr((o=>{if(o.addEventProcessor((e=>(e.logger="console",wo(e,{handled:!1,type:"console"}),e))),"assert"===t&&!1===e[0]){const t=`Assertion failed: ${Sn(e.slice(1)," ")||"console.assert"}`;return o.setExtra("arguments",e.slice(1)),void sr(t,n)}const i=e.find((e=>e instanceof Error));if("error"===t&&i)return void rr(i,n);sr(Sn(e," "),n)}))}(n,o)}))}}};qr(sm,am);const lm="Debug",cm=(e={})=>{const t={debugger:!1,stringify:!1,...e};return{name:lm,setupOnce(){},setup(e){e.on&&e.on("beforeSendEvent",((e,n)=>{t.debugger,Hn((()=>{t.stringify?(console.log(JSON.stringify(e,null,2)),n&&Object.keys(n).length&&console.log(JSON.stringify(n,null,2))):(console.log(e),n&&Object.keys(n).length&&console.log(n))}))}))}}};qr(lm,cm);const dm="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,um="Dedupe";function pm(e,t){let n=hm(e),o=hm(t);if(!n&&!o)return!0;if(n&&!o||!n&&o)return!1;if(o.length!==n.length)return!1;for(let e=0;e<o.length;e++){const t=o[e],i=n[e];if(t.filename!==i.filename||t.lineno!==i.lineno||t.colno!==i.colno||t.function!==i.function)return!1}return!0}function mm(e,t){let n=e.fingerprint,o=t.fingerprint;if(!n&&!o)return!0;if(n&&!o||!n&&o)return!1;try{return!(n.join("")!==o.join(""))}catch(e){return!1}}function gm(e){return e.exception&&e.exception.values&&e.exception.values[0]}function hm(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}qr(um,(()=>{let e;return{name:um,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,o=t.message;if(!n&&!o)return!1;if(n&&!o||!n&&o)return!1;if(n!==o)return!1;if(!mm(e,t))return!1;if(!pm(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=gm(t),o=gm(e);if(!n||!o)return!1;if(n.type!==o.type||n.value!==o.value)return!1;if(!mm(e,t))return!1;if(!pm(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return dm&&Fn.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}}));const fm="ExtraErrorData";function _m(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}qr(fm,((e={})=>{const t=e.depth||3,n=e.captureErrorCause||!1;return{name:fm,setupOnce(){},processEvent:(e,o)=>function(e,t={},n,o){if(!t.originalException||!ln(t.originalException))return e;const i=t.originalException.name||t.originalException.constructor.name,r=function(e,t){try{const n=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],o={};for(const t of Object.keys(e)){if(-1!==n.indexOf(t))continue;const i=e[t];o[t]=ln(i)?i.toString():i}if(t&&void 0!==e.cause&&(o.cause=ln(e.cause)?e.cause.toString():e.cause),"function"==typeof e.toJSON){const t=e.toJSON();for(const e of Object.keys(t)){const n=t[e];o[e]=ln(n)?n.toString():n}}return o}catch(e){dm&&Fn.error("Unable to extract extra data from the Error object:",e)}return null}(t.originalException,o);if(r){const t={...e.contexts},o=ti(r,n);return hn(o)&&(Zn(o,"__sentry_skip_normalization__",!0),t[i]=o),{...e,contexts:t}}return e}(e,o,t,n)}}));var vm={exports:{}};
/*!
      localForage -- Offline Storage, Improved
      Version 1.10.0
      https://localforage.github.io/localForage
      (c) 2013-2017 Mozilla, Apache License 2.0
  */!function(e,t){e.exports=function e(t,n,o){function i(s,a){if(!n[s]){if(!t[s]){if(!a&&_m)return _m(s);if(r)return r(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};t[s][0].call(c.exports,(function(e){var n=t[s][1][e];return i(n||e)}),c,c.exports,e,t,n,o)}return n[s].exports}for(var r=_m,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,t,n){(function(e){var n,o,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var r=0,s=new i(d),a=e.document.createTextNode("");s.observe(a,{characterData:!0}),n=function(){a.data=r=++r%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){d(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(d,0)};else{var l=new e.MessageChannel;l.port1.onmessage=d,n=function(){l.port2.postMessage(0)}}var c=[];function d(){var e,t;o=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}o=!1}function u(e){1!==c.push(e)||o||n()}t.exports=u}).call(this,void 0!==lt?lt:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){var o=e(1);function i(){}var r={},s=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==i&&m(this,e)}function d(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function u(e,t,n){o((function(){var o;try{o=t(n)}catch(t){return r.reject(e,t)}o===e?r.reject(e,new TypeError("Cannot resolve promise with itself")):r.resolve(e,o)}))}function p(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function m(e,t){var n=!1;function o(t){n||(n=!0,r.reject(e,t))}function i(t){n||(n=!0,r.resolve(e,t))}function s(){t(i,o)}var a=g(s);"error"===a.status&&o(a.value)}function g(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}function h(e){return e instanceof this?e:r.resolve(new this(i),e)}function f(e){var t=new this(i);return r.reject(t,e)}function _(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,o=!1;if(!n)return this.resolve([]);for(var s=new Array(n),a=0,l=-1,c=new this(i);++l<n;)d(e[l],l);return c;function d(e,i){function l(e){s[i]=e,++a!==n||o||(o=!0,r.resolve(c,s))}t.resolve(e).then(l,(function(e){o||(o=!0,r.reject(c,e))}))}}function v(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,o=!1;if(!n)return this.resolve([]);for(var s=-1,a=new this(i);++s<n;)l(e[s]);return a;function l(e){t.resolve(e).then((function(e){o||(o=!0,r.resolve(a,e))}),(function(e){o||(o=!0,r.reject(a,e))}))}}t.exports=c,c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===s)return this;var n=new this.constructor(i);return this.state!==l?u(n,this.state===a?e:t,this.outcome):this.queue.push(new d(n,e,t)),n},d.prototype.callFulfilled=function(e){r.resolve(this.promise,e)},d.prototype.otherCallFulfilled=function(e){u(this.promise,this.onFulfilled,e)},d.prototype.callRejected=function(e){r.reject(this.promise,e)},d.prototype.otherCallRejected=function(e){u(this.promise,this.onRejected,e)},r.resolve=function(e,t){var n=g(p,t);if("error"===n.status)return r.reject(e,n.value);var o=n.value;if(o)m(e,o);else{e.state=a,e.outcome=t;for(var i=-1,s=e.queue.length;++i<s;)e.queue[i].callFulfilled(t)}return e},r.reject=function(e,t){e.state=s,e.outcome=t;for(var n=-1,o=e.queue.length;++n<o;)e.queue[n].callRejected(t);return e},c.resolve=h,c.reject=f,c.all=_,c.race=v},{1:1}],3:[function(e,t,n){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==lt?lt:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}var s=r();function a(){try{if(!s||!s.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}function l(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),o=0;o<e.length;o+=1)n.append(e[o]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var c=Promise;function d(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function u(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function p(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function m(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",h=void 0,f={},_=Object.prototype.toString,v="readonly",y="readwrite";function w(e){for(var t=e.length,n=new ArrayBuffer(t),o=new Uint8Array(n),i=0;i<t;i++)o[i]=e.charCodeAt(i);return n}function b(e){return new c((function(t){var n=e.transaction(g,y),o=l([""]);n.objectStore(g).put(o,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function E(e){return"boolean"==typeof h?c.resolve(h):b(e).then((function(e){return h=e}))}function S(e){var t=f[e.name],n={};n.promise=new c((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function T(e){var t=f[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function x(e,t){var n=f[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function $(e,t){return new c((function(n,o){if(f[e.name]=f[e.name]||D(),e.db){if(!t)return n(e.db);S(e),e.db.close()}var i=[e.name];t&&i.push(e.version);var r=s.open.apply(s,i);t&&(r.onupgradeneeded=function(t){var n=r.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(g)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),r.onerror=function(e){e.preventDefault(),o(r.error)},r.onsuccess=function(){var t=r.result;t.onversionchange=function(e){e.target.close()},n(t),T(e)}}))}function C(e){return $(e,!1)}function k(e){return $(e,!0)}function L(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),o=e.version<e.db.version,i=e.version>e.db.version;if(o&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||n){if(n){var r=e.db.version+1;r>e.version&&(e.version=r)}return!0}return!1}function I(e){return new c((function(t,n){var o=new FileReader;o.onerror=n,o.onloadend=function(n){var o=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:o,type:e.type})},o.readAsBinaryString(e)}))}function A(e){return l([w(atob(e.data))],{type:e.type})}function M(e){return e&&e.__local_forage_encoded_blob}function R(e){var t=this,n=t._initReady().then((function(){var e=f[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return u(n,e,e),n}function O(e){S(e);for(var t=f[e.name],n=t.forages,o=0;o<n.length;o++){var i=n[o];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,C(e).then((function(t){return e.db=t,L(e)?k(e):t})).then((function(o){e.db=t.db=o;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=o})).catch((function(t){throw x(e,t),t}))}function N(e,t,n,o){void 0===o&&(o=1);try{var i=e.db.transaction(e.storeName,t);n(null,i)}catch(i){if(o>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return c.resolve().then((function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),k(e)})).then((function(){return O(e).then((function(){N(e,t,n,o-1)}))})).catch(n);n(i)}}function D(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function P(e){var t=this,n={db:null};if(e)for(var o in e)n[o]=e[o];var i=f[n.name];i||(i=D(),f[n.name]=i),i.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=R);var r=[];function s(){return c.resolve()}for(var a=0;a<i.forages.length;a++){var l=i.forages[a];l!==t&&r.push(l._initReady().catch(s))}var d=i.forages.slice(0);return c.all(r).then((function(){return n.db=i.db,C(n)})).then((function(e){return n.db=e,L(n,t._defaultConfig.version)?k(n):e})).then((function(e){n.db=i.db=e,t._dbInfo=n;for(var o=0;o<d.length;o++){var r=d[o];r!==t&&(r._dbInfo.db=n.db,r._dbInfo.version=n.version)}}))}function B(e,t){var n=this;e=p(e);var o=new c((function(t,o){n.ready().then((function(){N(n._dbInfo,v,(function(i,r){if(i)return o(i);try{var s=r.objectStore(n._dbInfo.storeName).get(e);s.onsuccess=function(){var e=s.result;void 0===e&&(e=null),M(e)&&(e=A(e)),t(e)},s.onerror=function(){o(s.error)}}catch(e){o(e)}}))})).catch(o)}));return d(o,t),o}function U(e,t){var n=this,o=new c((function(t,o){n.ready().then((function(){N(n._dbInfo,v,(function(i,r){if(i)return o(i);try{var s=r.objectStore(n._dbInfo.storeName).openCursor(),a=1;s.onsuccess=function(){var n=s.result;if(n){var o=n.value;M(o)&&(o=A(o));var i=e(o,n.key,a++);void 0!==i?t(i):n.continue()}else t()},s.onerror=function(){o(s.error)}}catch(e){o(e)}}))})).catch(o)}));return d(o,t),o}function z(e,t,n){var o=this;e=p(e);var i=new c((function(n,i){var r;o.ready().then((function(){return r=o._dbInfo,"[object Blob]"===_.call(t)?E(r.db).then((function(e){return e?t:I(t)})):t})).then((function(t){N(o._dbInfo,y,(function(r,s){if(r)return i(r);try{var a=s.objectStore(o._dbInfo.storeName);null===t&&(t=void 0);var l=a.put(t,e);s.oncomplete=function(){void 0===t&&(t=null),n(t)},s.onabort=s.onerror=function(){var e=l.error?l.error:l.transaction.error;i(e)}}catch(e){i(e)}}))})).catch(i)}));return d(i,n),i}function H(e,t){var n=this;e=p(e);var o=new c((function(t,o){n.ready().then((function(){N(n._dbInfo,y,(function(i,r){if(i)return o(i);try{var s=r.objectStore(n._dbInfo.storeName).delete(e);r.oncomplete=function(){t()},r.onerror=function(){o(s.error)},r.onabort=function(){var e=s.error?s.error:s.transaction.error;o(e)}}catch(e){o(e)}}))})).catch(o)}));return d(o,t),o}function F(e){var t=this,n=new c((function(e,n){t.ready().then((function(){N(t._dbInfo,y,(function(o,i){if(o)return n(o);try{var r=i.objectStore(t._dbInfo.storeName).clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=r.error?r.error:r.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return d(n,e),n}function W(e){var t=this,n=new c((function(e,n){t.ready().then((function(){N(t._dbInfo,v,(function(o,i){if(o)return n(o);try{var r=i.objectStore(t._dbInfo.storeName).count();r.onsuccess=function(){e(r.result)},r.onerror=function(){n(r.error)}}catch(e){n(e)}}))})).catch(n)}));return d(n,e),n}function j(e,t){var n=this,o=new c((function(t,o){e<0?t(null):n.ready().then((function(){N(n._dbInfo,v,(function(i,r){if(i)return o(i);try{var s=r.objectStore(n._dbInfo.storeName),a=!1,l=s.openKeyCursor();l.onsuccess=function(){var n=l.result;n?0===e||a?t(n.key):(a=!0,n.advance(e)):t(null)},l.onerror=function(){o(l.error)}}catch(e){o(e)}}))})).catch(o)}));return d(o,t),o}function q(e){var t=this,n=new c((function(e,n){t.ready().then((function(){N(t._dbInfo,v,(function(o,i){if(o)return n(o);try{var r=i.objectStore(t._dbInfo.storeName).openKeyCursor(),s=[];r.onsuccess=function(){var t=r.result;t?(s.push(t.key),t.continue()):e(s)},r.onerror=function(){n(r.error)}}catch(e){n(e)}}))})).catch(n)}));return d(n,e),n}function G(e,t){t=m.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var o,i=this;if(e.name){var r=e.name===n.name&&i._dbInfo.db?c.resolve(i._dbInfo.db):C(e).then((function(t){var n=f[e.name],o=n.forages;n.db=t;for(var i=0;i<o.length;i++)o[i]._dbInfo.db=t;return t}));o=e.storeName?r.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;S(e);var o=f[e.name],i=o.forages;t.close();for(var r=0;r<i.length;r++){var a=i[r];a._dbInfo.db=null,a._dbInfo.version=n}var l=new c((function(t,o){var i=s.open(e.name,n);i.onerror=function(e){i.result.close(),o(e)},i.onupgradeneeded=function(){i.result.deleteObjectStore(e.storeName)},i.onsuccess=function(){var e=i.result;e.close(),t(e)}}));return l.then((function(e){o.db=e;for(var t=0;t<i.length;t++){var n=i[t];n._dbInfo.db=e,T(n._dbInfo)}})).catch((function(t){throw(x(e,t)||c.resolve()).catch((function(){})),t}))}})):r.then((function(t){S(e);var n=f[e.name],o=n.forages;t.close();for(var i=0;i<o.length;i++)o[i]._dbInfo.db=null;var r=new c((function(t,n){var o=s.deleteDatabase(e.name);o.onerror=function(){var e=o.result;e&&e.close(),n(o.error)},o.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},o.onsuccess=function(){var e=o.result;e&&e.close(),t(e)}}));return r.then((function(e){n.db=e;for(var t=0;t<o.length;t++)T(o[t]._dbInfo)})).catch((function(t){throw(x(e,t)||c.resolve()).catch((function(){})),t}))}))}else o=c.reject("Invalid arguments");return d(o,t),o}var V={_driver:"asyncStorage",_initStorage:P,_support:a(),iterate:U,getItem:B,setItem:z,removeItem:H,clear:F,length:W,key:j,keys:q,dropInstance:G};function Y(){return"function"==typeof openDatabase}var Z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",K="~~local_forage_type~",X=/^~~local_forage_type~([^~]+)~/,J="__lfsc__:",Q=J.length,ee="arbf",te="blob",ne="si08",oe="ui08",ie="uic8",re="si16",se="si32",ae="ur16",le="ui32",ce="fl32",de="fl64",ue=Q+ee.length,pe=Object.prototype.toString;function me(e){var t,n,o,i,r,s=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var c=new ArrayBuffer(s),d=new Uint8Array(c);for(t=0;t<a;t+=4)n=Z.indexOf(e[t]),o=Z.indexOf(e[t+1]),i=Z.indexOf(e[t+2]),r=Z.indexOf(e[t+3]),d[l++]=n<<2|o>>4,d[l++]=(15&o)<<4|i>>2,d[l++]=(3&i)<<6|63&r;return c}function ge(e){var t,n=new Uint8Array(e),o="";for(t=0;t<n.length;t+=3)o+=Z[n[t]>>2],o+=Z[(3&n[t])<<4|n[t+1]>>4],o+=Z[(15&n[t+1])<<2|n[t+2]>>6],o+=Z[63&n[t+2]];return n.length%3==2?o=o.substring(0,o.length-1)+"=":n.length%3==1&&(o=o.substring(0,o.length-2)+"=="),o}function he(e,t){var n="";if(e&&(n=pe.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===pe.call(e.buffer))){var o,i=J;e instanceof ArrayBuffer?(o=e,i+=ee):(o=e.buffer,"[object Int8Array]"===n?i+=ne:"[object Uint8Array]"===n?i+=oe:"[object Uint8ClampedArray]"===n?i+=ie:"[object Int16Array]"===n?i+=re:"[object Uint16Array]"===n?i+=ae:"[object Int32Array]"===n?i+=se:"[object Uint32Array]"===n?i+=le:"[object Float32Array]"===n?i+=ce:"[object Float64Array]"===n?i+=de:t(new Error("Failed to get type for BinaryArray"))),t(i+ge(o))}else if("[object Blob]"===n){var r=new FileReader;r.onload=function(){var n=K+e.type+"~"+ge(this.result);t(J+te+n)},r.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}}function fe(e){if(e.substring(0,Q)!==J)return JSON.parse(e);var t,n=e.substring(ue),o=e.substring(Q,ue);if(o===te&&X.test(n)){var i=n.match(X);t=i[1],n=n.substring(i[0].length)}var r=me(n);switch(o){case ee:return r;case te:return l([r],{type:t});case ne:return new Int8Array(r);case oe:return new Uint8Array(r);case ie:return new Uint8ClampedArray(r);case re:return new Int16Array(r);case ae:return new Uint16Array(r);case se:return new Int32Array(r);case le:return new Uint32Array(r);case ce:return new Float32Array(r);case de:return new Float64Array(r);default:throw new Error("Unkown type: "+o)}}var _e={serialize:he,deserialize:fe,stringToBuffer:me,bufferToString:ge};function ve(e,t,n,o){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,o)}function ye(e){var t=this,n={db:null};if(e)for(var o in e)n[o]="string"!=typeof e[o]?e[o].toString():e[o];var i=new c((function(e,o){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return o(e)}n.db.transaction((function(i){ve(i,n,(function(){t._dbInfo=n,e()}),(function(e,t){o(t)}))}),o)}));return n.serializer=_e,i}function we(e,t,n,o,i,r){e.executeSql(n,o,i,(function(e,s){s.code===s.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,a){a.rows.length?r(e,s):ve(e,t,(function(){e.executeSql(n,o,i,r)}),r)}),r):r(e,s)}),r)}function be(e,t){var n=this;e=p(e);var o=new c((function(t,o){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){we(n,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var o=n.rows.length?n.rows.item(0).value:null;o&&(o=i.serializer.deserialize(o)),t(o)}),(function(e,t){o(t)}))}))})).catch(o)}));return d(o,t),o}function Ee(e,t){var n=this,o=new c((function(t,o){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){we(n,i,"SELECT * FROM "+i.storeName,[],(function(n,o){for(var r=o.rows,s=r.length,a=0;a<s;a++){var l=r.item(a),c=l.value;if(c&&(c=i.serializer.deserialize(c)),void 0!==(c=e(c,l.key,a+1)))return void t(c)}t()}),(function(e,t){o(t)}))}))})).catch(o)}));return d(o,t),o}function Se(e,t,n,o){var i=this;e=p(e);var r=new c((function(r,s){i.ready().then((function(){void 0===t&&(t=null);var a=t,l=i._dbInfo;l.serializer.serialize(t,(function(t,c){c?s(c):l.db.transaction((function(n){we(n,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){r(a)}),(function(e,t){s(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(o>0)return void r(Se.apply(i,[e,a,n,o-1]));s(t)}}))}))})).catch(s)}));return d(r,n),r}function Te(e,t,n){return Se.apply(this,[e,t,n,1])}function xe(e,t){var n=this;e=p(e);var o=new c((function(t,o){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){we(n,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){o(t)}))}))})).catch(o)}));return d(o,t),o}function $e(e){var t=this,n=new c((function(e,n){t.ready().then((function(){var o=t._dbInfo;o.db.transaction((function(t){we(t,o,"DELETE FROM "+o.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return d(n,e),n}function Ce(e){var t=this,n=new c((function(e,n){t.ready().then((function(){var o=t._dbInfo;o.db.transaction((function(t){we(t,o,"SELECT COUNT(key) as c FROM "+o.storeName,[],(function(t,n){var o=n.rows.item(0).c;e(o)}),(function(e,t){n(t)}))}))})).catch(n)}));return d(n,e),n}function ke(e,t){var n=this,o=new c((function(t,o){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){we(n,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var o=n.rows.length?n.rows.item(0).key:null;t(o)}),(function(e,t){o(t)}))}))})).catch(o)}));return d(o,t),o}function Le(e){var t=this,n=new c((function(e,n){t.ready().then((function(){var o=t._dbInfo;o.db.transaction((function(t){we(t,o,"SELECT key FROM "+o.storeName,[],(function(t,n){for(var o=[],i=0;i<n.rows.length;i++)o.push(n.rows.item(i).key);e(o)}),(function(e,t){n(t)}))}))})).catch(n)}));return d(n,e),n}function Ie(e){return new c((function(t,n){e.transaction((function(o){o.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,o){for(var i=[],r=0;r<o.rows.length;r++)i.push(o.rows.item(r).name);t({db:e,storeNames:i})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}function Ae(e,t){t=m.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var o,i=this;return o=e.name?new c((function(t){var o;o=e.name===n.name?i._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:o,storeNames:[e.storeName]}):t(Ie(o))})).then((function(e){return new c((function(t,n){e.db.transaction((function(o){function i(e){return new c((function(t,n){o.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var r=[],s=0,a=e.storeNames.length;s<a;s++)r.push(i(e.storeNames[s]));c.all(r).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):c.reject("Invalid arguments"),d(o,t),o}var Me={_driver:"webSQLStorage",_initStorage:ye,_support:Y(),iterate:Ee,getItem:be,setItem:Te,removeItem:xe,clear:$e,length:Ce,key:ke,keys:Le,dropInstance:Ae};function Re(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function Oe(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function Ne(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}function De(){return!Ne()||localStorage.length>0}function Pe(e){var t=this,n={};if(e)for(var o in e)n[o]=e[o];return n.keyPrefix=Oe(e,t._defaultConfig),De()?(t._dbInfo=n,n.serializer=_e,c.resolve()):c.reject()}function Be(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var o=localStorage.key(n);0===o.indexOf(e)&&localStorage.removeItem(o)}}));return d(n,e),n}function Ue(e,t){var n=this;e=p(e);var o=n.ready().then((function(){var t=n._dbInfo,o=localStorage.getItem(t.keyPrefix+e);return o&&(o=t.serializer.deserialize(o)),o}));return d(o,t),o}function ze(e,t){var n=this,o=n.ready().then((function(){for(var t=n._dbInfo,o=t.keyPrefix,i=o.length,r=localStorage.length,s=1,a=0;a<r;a++){var l=localStorage.key(a);if(0===l.indexOf(o)){var c=localStorage.getItem(l);if(c&&(c=t.serializer.deserialize(c)),void 0!==(c=e(c,l.substring(i),s++)))return c}}}));return d(o,t),o}function He(e,t){var n=this,o=n.ready().then((function(){var t,o=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(o.keyPrefix.length)),t}));return d(o,t),o}function Fe(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,o=[],i=0;i<n;i++){var r=localStorage.key(i);0===r.indexOf(e.keyPrefix)&&o.push(r.substring(e.keyPrefix.length))}return o}));return d(n,e),n}function We(e){var t=this.keys().then((function(e){return e.length}));return d(t,e),t}function je(e,t){var n=this;e=p(e);var o=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return d(o,t),o}function qe(e,t,n){var o=this;e=p(e);var i=o.ready().then((function(){void 0===t&&(t=null);var n=t;return new c((function(i,r){var s=o._dbInfo;s.serializer.serialize(t,(function(t,o){if(o)r(o);else try{localStorage.setItem(s.keyPrefix+e,t),i(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||r(e),r(e)}}))}))}));return d(i,n),i}function Ge(e,t){if(t=m.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var o,i=this;return o=e.name?new c((function(t){e.storeName?t(Oe(e,i._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):c.reject("Invalid arguments"),d(o,t),o}var Ve={_driver:"localStorageWrapper",_initStorage:Pe,_support:Re(),iterate:ze,getItem:Ue,setItem:qe,removeItem:je,clear:Be,length:We,key:He,keys:Fe,dropInstance:Ge},Ye=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},Ze=function(e,t){for(var n=e.length,o=0;o<n;){if(Ye(e[o],t))return!0;o++}return!1},Ke=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Xe={},Je={},Qe={INDEXEDDB:V,WEBSQL:Me,LOCALSTORAGE:Ve},et=[Qe.INDEXEDDB._driver,Qe.WEBSQL._driver,Qe.LOCALSTORAGE._driver],tt=["dropInstance"],nt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),ot={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function it(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function rt(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(Ke(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var st=function(){function e(t){for(var n in i(this,e),Qe)if(Qe.hasOwnProperty(n)){var o=Qe[n],r=o._driver;this[n]=r,Xe[r]||this.defineDriver(o)}this._defaultConfig=rt({},ot),this._config=rt({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":o(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var o=new c((function(t,n){try{var o=e._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(i);for(var r=nt.concat("_initStorage"),s=0,a=r.length;s<a;s++){var l=r[s];if((!Ze(tt,l)||e[l])&&"function"!=typeof e[l])return void n(i)}var u=function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=c.reject(t);return d(n,arguments[arguments.length-1]),n}},n=0,o=tt.length;n<o;n++){var i=tt[n];e[i]||(e[i]=t(i))}};u();var p=function(n){Xe[o]&&console.info("Redefining LocalForage driver: "+o),Xe[o]=e,Je[o]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(p,n):p(!!e._support):p(!0)}catch(e){n(e)}}));return u(o,t,n),o},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var o=Xe[e]?c.resolve(Xe[e]):c.reject(new Error("Driver not found."));return u(o,t,n),o},e.prototype.getSerializer=function(e){var t=c.resolve(_e);return u(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return u(n,e,e),n},e.prototype.setDriver=function(e,t,n){var o=this;Ke(e)||(e=[e]);var i=this._getSupportedDrivers(e);function r(){o._config.driver=o.driver()}function s(e){return o._extend(e),r(),o._ready=o._initStorage(o._config),o._ready}function a(e){return function(){var t=0;function n(){for(;t<e.length;){var i=e[t];return t++,o._dbInfo=null,o._ready=null,o.getDriver(i).then(s).catch(n)}r();var a=new Error("No available storage method found.");return o._driverSet=c.reject(a),o._driverSet}return n()}}var l=null!==this._driverSet?this._driverSet.catch((function(){return c.resolve()})):c.resolve();return this._driverSet=l.then((function(){var e=i[0];return o._dbInfo=null,o._ready=null,o.getDriver(e).then((function(e){o._driver=e._driver,r(),o._wrapLibraryMethodsWithReady(),o._initDriver=a(i)}))})).catch((function(){r();var e=new Error("No available storage method found.");return o._driverSet=c.reject(e),o._driverSet})),u(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!Je[e]},e.prototype._extend=function(e){rt(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,o=e.length;n<o;n++){var i=e[n];this.supports(i)&&t.push(i)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=nt.length;e<t;e++)it(this,nt[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),at=new st;t.exports=at},{3:3}]},{},[4])(4)}(vm);const ym=In;class wm{static __initStatic(){this.id="Offline"}constructor(e={}){this.name=wm.id,this.maxStoredEvents=e.maxStoredEvents||30,this.offlineEventStore=vm.exports.createInstance({name:"sentry/offlineEventStore"})}setupOnce(e,t){this.hub=t(),"addEventListener"in ym&&ym.addEventListener("online",(()=>{this._sendEvents().catch((()=>{dm&&Fn.warn("could not send cached events")}))}));const n=e=>this.hub&&this.hub.getIntegration(wm)&&"navigator"in ym&&"onLine"in ym.navigator&&!ym.navigator.onLine?(dm&&Fn.log("Event dropped due to being a offline - caching instead"),this._cacheEvent(e).then((e=>this._enforceMaxEvents())).catch((e=>{dm&&Fn.warn("could not cache event while offline")})),null):e;n.id=this.name,e(n),"navigator"in ym&&"onLine"in ym.navigator&&ym.navigator.onLine&&this._sendEvents().catch((()=>{dm&&Fn.warn("could not send cached events")}))}async _cacheEvent(e){return this.offlineEventStore.setItem(fo(),ti(e))}async _enforceMaxEvents(){const e=[];return this.offlineEventStore.iterate(((t,n,o)=>{e.push({cacheKey:n,event:t})})).then((()=>this._purgeEvents(e.sort(((e,t)=>(t.event.timestamp||0)-(e.event.timestamp||0))).slice(this.maxStoredEvents<e.length?this.maxStoredEvents:e.length).map((e=>e.cacheKey))))).catch((e=>{dm&&Fn.warn("could not enforce max events")}))}async _purgeEvent(e){return this.offlineEventStore.removeItem(e)}async _purgeEvents(e){return Promise.all(e.map((e=>this._purgeEvent(e)))).then()}async _sendEvents(){return this.offlineEventStore.iterate(((e,t,n)=>{this.hub?(this.hub.captureEvent(e),this._purgeEvent(t).catch((e=>{dm&&Fn.warn("could not purge event from cache")}))):dm&&Fn.warn("no hub found - could not send cached event")}))}}wm.__initStatic();const bm=In,Em="ReportingObserver",Sm=new WeakMap,Tm=(e={})=>{const t=e.types||["crash","deprecation","intervention"];function n(e){if(Sm.has(dr()))for(const t of e)cr((e=>{e.setExtra("url",t.url);const n=`ReportingObserver [${t.type}]`;let o="No details available";if(t.body){const n={};for(const e in t.body)n[e]=t.body[e];if(e.setExtra("body",n),"crash"===t.type){const e=t.body;o=[e.crashId||"",e.reason||""].join(" ").trim()||o}else{o=t.body.message||o}}sr(`${n}: ${o}`)}))}return{name:Em,setupOnce(){if(!("ReportingObserver"in Ao))return;new bm.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(e){Sm.set(e,!0)}}};qr(Em,Tm);const xm="RewriteFrames",$m=(e={})=>{const t=e.root,n=e.prefix||"app:///",o=e.iteratee||(e=>{if(!e.filename)return e;const o=/^[a-zA-Z]:\\/.test(e.filename)||e.filename.includes("\\")&&!e.filename.includes("/"),i=/^\//.test(e.filename);if(o||i){const i=o?e.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):e.filename,r=t?function(e,t){e=ri(e).slice(1),t=ri(t).slice(1);const n=si(e.split("/")),o=si(t.split("/")),i=Math.min(n.length,o.length);let r=i;for(let e=0;e<i;e++)if(n[e]!==o[e]){r=e;break}let s=[];for(let e=r;e<n.length;e++)s.push("..");return s=s.concat(o.slice(r)),s.join("/")}(t,i):ai(i);e.filename=`${n}${r}`}return e});return{name:xm,setupOnce(){},processEvent(e){let t=e;return e.exception&&Array.isArray(e.exception.values)&&(t=function(e){try{return{...e,exception:{...e.exception,values:e.exception.values.map((e=>{return{...e,...e.stacktrace&&{stacktrace:(t=e.stacktrace,{...t,frames:t&&t.frames&&t.frames.map((e=>o(e)))})}};var t}))}}}catch(t){return e}}(t)),t}}};qr(xm,$m);const Cm="SessionTiming",km=()=>{const e=Date.now();return{name:Cm,setupOnce(){},processEvent(t){const n=Date.now();return{...t,extra:{...t.extra,"session:start":e,"session:duration":n-e,"session:end":n}}}}};qr(Cm,km);const Lm="Transaction";function Im(e){return e.module||e.function?`${e.module||"?"}/${e.function||"?"}`:"<unknown>"}qr(Lm,(()=>({name:Lm,setupOnce(){},processEvent(e){const t=function(e){const t=e.exception&&e.exception.values&&e.exception.values[0];return t&&t.stacktrace&&t.stacktrace.frames||[]}(e);for(let n=t.length-1;n>=0;n--){const o=t[n];if(!0===o.in_app){e.transaction=Im(o);break}}return e}})));const Am="HttpClient",Mm=(e={})=>{const t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:Am,setupOnce(){},setup(e){!function(e,t){if(!Ro())return;Oo((n=>{if(dr()!==e)return;const{response:o,args:i}=n,[r,s]=i;o&&function(e,t,n,o){if(Nm(e,n.status,n.url)){const e=function(e,t){if(!t&&e instanceof Request)return e;if(e instanceof Request&&e.bodyUsed)return e;return new Request(e,t)}(t,o);let i,r,s,a;Pm()&&([{headers:i,cookies:s},{headers:r,cookies:a}]=[{cookieHeader:"Cookie",obj:e},{cookieHeader:"Set-Cookie",obj:n}].map((({cookieHeader:e,obj:t})=>{const n=function(e){const t={};return e.forEach(((e,n)=>{t[n]=e})),t}(t.headers);let o;try{const t=n[e]||n[e.toLowerCase()]||void 0;t&&(o=Om(t))}catch(t){dm&&Fn.log(`Could not extract cookies from header ${e}`)}return{headers:n,cookies:o}})));ar(Dm({url:e.url,method:e.method,status:n.status,requestHeaders:i,responseHeaders:r,requestCookies:s,responseCookies:a}))}}(t,r,o,s)}))}(e,t),function(e,t){if(!("XMLHttpRequest"in In))return;Zo((n=>{if(dr()!==e)return;const o=n.xhr,i=o[Yo];if(!i)return;const{method:r,request_headers:s}=i;try{!function(e,t,n,o){if(Nm(e,t.status,t.responseURL)){let e,i,r;if(Pm()){try{const e=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;e&&(i=Om(e))}catch(e){dm&&Fn.log("Could not extract cookies from response headers")}try{r=function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,o]=t.split(": ");return e[n]=o,e}),{})}(t)}catch(e){dm&&Fn.log("Could not extract headers from response")}e=o}ar(Dm({url:t.responseURL,method:n,status:t.status,requestHeaders:e,responseHeaders:r,responseCookies:i}))}}(t,o,r,s)}catch(e){dm&&Fn.warn("Error while extracting response event form XHR response",e)}}))}(e,t)}}};function Rm(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function Om(e){return e.split("; ").reduce(((e,t)=>{const[n,o]=t.split("=");return e[n]=o,e}),{})}function Nm(e,t,n){return function(e,t){return e.some((e=>"number"==typeof e?e===t:t>=e[0]&&t<=e[1]))}(e.failedRequestStatusCodes,t)&&(o=e.failedRequestTargets,i=n,o.some((e=>"string"==typeof e?i.includes(e):e.test(i))))&&!os(n,dr());var o,i}function Dm(e){const t=`HTTP Client Error with status code: ${e.status}`,n={message:t,exception:{values:[{type:"Error",value:t}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:Rm(e.responseHeaders)}}};return wo(n,{type:"http.client",handled:!1}),n}function Pm(){const e=dr();return!!e&&Boolean(e.getOptions().sendDefaultPii)}qr(Am,Mm);const Bm=In,Um="ContextLines",zm=(e={})=>{const t=null!=e.frameContextLines?e.frameContextLines:7;return{name:Um,setupOnce(){},processEvent:e=>function(e,t){const n=Bm.document,o=Bm.location&&gi(Bm.location.href);if(!n||!o)return e;const i=e.exception&&e.exception.values;if(!i||!i.length)return e;const r=n.documentElement.innerHTML;if(!r)return e;const s=["<!DOCTYPE html>","<html>",...r.split("\n"),"</html>"];return i.forEach((e=>{const n=e.stacktrace;n&&n.frames&&(n.frames=n.frames.map((e=>function(e,t,n,o){if(e.filename!==n||!e.lineno||!t.length)return e;return function(e,t,n=5){if(void 0===t.lineno)return;const o=e.length,i=Math.max(Math.min(o-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,i-n),i).map((e=>En(e,0))),t.context_line=En(e[Math.min(o-1,i)],t.colno||0),t.post_context=e.slice(Math.min(i+1,o),i+1+n).map((e=>En(e,0)))}(t,e,o),e}(e,s,o,t))))})),e}(e,t)}};qr(Um,zm);const Hm=1e6,Fm=String(0),Wm="main";let jm="",qm="",Gm="",Vm=ra.navigator&&ra.navigator.userAgent||"",Ym="";const Zm=ra.navigator&&ra.navigator.language||ra.navigator&&ra.navigator.languages&&ra.navigator.languages[0]||"";const Km=ra.navigator&&ra.navigator.userAgentData;var Xm;function Jm(e){return function(e){return!("thread_metadata"in e)}(e)?function(e){let t,n=0;const o={samples:[],stacks:[],frames:[],thread_metadata:{[Fm]:{name:Wm}}};if(!e.samples.length)return o;const i=e.samples[0].timestamp,r="number"==typeof performance.timeOrigin?performance.timeOrigin:Ci||0,s=r-(Ci||r);for(let r=0;r<e.samples.length;r++){const a=e.samples[r];if(void 0===a.stackId){void 0===t&&(t=n,o.stacks[t]=[],n++),o.samples[r]={elapsed_since_start_ns:((a.timestamp+s-i)*Hm).toFixed(0),stack_id:t,thread_id:Fm};continue}let l=e.stacks[a.stackId];const c=[];for(;l;){c.push(l.frameId);const t=e.frames[l.frameId];void 0===o.frames[l.frameId]&&(o.frames[l.frameId]={function:t.name,abs_path:"number"==typeof t.resourceId?e.resources[t.resourceId]:void 0,lineno:t.line,colno:t.column}),l=void 0===l.parentId?void 0:e.stacks[l.parentId]}const d={elapsed_since_start_ns:((a.timestamp+s-i)*Hm).toFixed(0),stack_id:n,thread_id:Fm};o.stacks[n]=c,o.samples[r]=d,n++}return o}(e):e}function Qm(e,t,n,o){if("transaction"!==o.type)throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(null==n)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const i=function(e){const t=e&&e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id;return"string"==typeof t&&32!==t.length&&ca&&Fn.log(`[Profiling] Invalid traceId: ${t} on profiled event`),"string"!=typeof t?"":t}(o),r=Jm(n),s=t||("number"==typeof o.start_timestamp?1e3*o.start_timestamp:Date.now()),a="number"==typeof o.timestamp?1e3*o.timestamp:Date.now();return{event_id:e,timestamp:new Date(s).toISOString(),platform:"javascript",version:"1",release:o.release||"",environment:o.environment||ji,runtime:{name:"javascript",version:ra.navigator.userAgent},os:{name:jm,version:qm,build_number:Vm},device:{locale:Zm,model:Ym,manufacturer:Vm,architecture:Gm,is_emulator:!1},debug_meta:{images:ng(n.resources)},profile:r,transactions:[{name:o.transaction||"",id:o.event_id||fo(),trace_id:i,active_thread_id:Fm,relative_start_ns:"0",relative_end_ns:(1e6*(a-s)).toFixed(0)}]}}function eg(e){return"pageload"===e.op}"object"==typeof(Xm=Km)&&null!==Xm&&"getHighEntropyValues"in Xm&&Km.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then((e=>{if(jm=e.platform||"",Gm=e.architecture||"",Ym=e.model||"",qm=e.platformVersion||"",e.fullVersionList&&e.fullVersionList.length>0){const t=e.fullVersionList[e.fullVersionList.length-1];Vm=`${t.brand} ${t.version}`}})).catch((e=>{}));const tg=new WeakMap;function ng(e){const t=In._sentryDebugIds;if(!t)return[];const n=dr(),o=n&&n.getOptions(),i=o&&o.stackParser;if(!i)return[];let r;const s=tg.get(i);s?r=s:(r=new Map,tg.set(i,r));const a=Object.keys(t).reduce(((e,n)=>{let o;const s=r.get(n);s?o=s:(o=i(n),r.set(n,o));for(let i=o.length-1;i>=0;i--){const r=o[i],s=r&&r.filename;if(r&&s){e[s]=t[n];break}}return e}),{}),l=[];for(const t of e)t&&a[t]&&l.push({type:"sourcemap",code_file:t,debug_id:a[t]});return l}let og=!1;const ig=3e4;function rg(e){if(og)return ca&&Fn.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return ca&&Fn.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const t=dr(),n=t&&t.getOptions();if(!n)return ca&&Fn.log("[Profiling] Profiling disabled, no options found."),!1;const o=n.profilesSampleRate;if(!("number"!=typeof(i=o)&&"boolean"!=typeof i||"number"==typeof i&&isNaN(i)?(ca&&Fn.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(i)} of type ${JSON.stringify(typeof i)}.`),0):!0===i||!1===i||!(i<0||i>1)||(ca&&Fn.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${i}.`),0)))return ca&&Fn.warn("[Profiling] Discarding profile because of invalid sample rate."),!1;var i;if(!o)return ca&&Fn.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1;return!!(!0===o||Math.random()<o)||(ca&&Fn.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(o)})`),!1)}function sg(e,t,n,o){return function(e){return e.samples.length<2?(ca&&Fn.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):!!e.frames.length||(ca&&Fn.log("[Profiling] Discarding profile because it contains no frames"),!1)}(n)?Qm(e,t,n,o):null}const ag=new Map;function lg(e){const t=ag.get(e);return t&&ag.delete(e),t}function cg(e){let t;eg(e)&&(t=1e3*$i());const n=function(){const e=ra.Profiler;if("function"!=typeof e)return void(ca&&Fn.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object."));const t=Math.floor(ig/10);try{return new e({sampleInterval:10,maxBufferSize:t})}catch(e){ca&&(Fn.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),Fn.log("[Profiling] Disabling profiling for current user session.")),og=!0}}();if(!n)return e;ca&&Fn.log(`[Profiling] started profiling transaction: ${Qi(e).description}`);const o=fo();async function i(){return e&&n?n.stop().then((t=>(r&&(ra.clearTimeout(r),r=void 0),ca&&Fn.log(`[Profiling] stopped profiling of transaction: ${Qi(e).description}`),t?(function(e,t){if(ag.set(e,t),ag.size>30){const e=ag.keys().next().value;ag.delete(e)}}(o,t),null):(ca&&Fn.log(`[Profiling] profiler returned null profile for: ${Qi(e).description}`,"this may indicate an overlapping transaction or a call to stopProfiling with a profile title that was never started"),null)))).catch((e=>(ca&&Fn.log("[Profiling] error while stopping profiler:",e),null))):null}let r=ra.setTimeout((()=>{ca&&Fn.log("[Profiling] max profile duration elapsed, stopping profiling for:",Qi(e).description),i()}),ig);const s=e.end.bind(e);return e.end=function(){return e?(i().then((()=>{e.setContext("profile",{profile_id:o,start_timestamp:t}),s()}),(()=>{s()})),e):s()},e}const dg="BrowserProfiling",ug=()=>({name:dg,setupOnce(){},setup(e){const t=ur().getTransaction();t&&eg(t)&&rg(t)&&cg(t),"function"==typeof e.on?(e.on("startTransaction",(e=>{rg(e)&&cg(e)})),e.on("beforeEnvelope",(e=>{if(!ag.size)return;const t=function(e){const t=[];return Ii(e,((e,n)=>{if("transaction"===n)for(let n=1;n<e.length;n++){const o=e[n];o&&o.contexts&&o.contexts.profile&&o.contexts.profile.profile_id&&t.push(e[n])}})),t}(e);if(!t.length)return;const n=[];for(const e of t){const t=e&&e.contexts,o=t&&t.profile&&t.profile.profile_id,i=t&&t.profile&&t.profile.start_timestamp;if("string"!=typeof o){ca&&Fn.log("[Profiling] cannot find profile for a transaction without a profile context");continue}if(!o){ca&&Fn.log("[Profiling] cannot find profile for a transaction without a profile context");continue}t&&t.profile&&delete t.profile;const r=lg(o);if(!r){ca&&Fn.log(`[Profiling] Could not retrieve profile for transaction: ${o}`);continue}const s=sg(o,i,r,e);s&&n.push(s)}!function(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n])}(e,n)}))):Fn.warn("[Profiling] Client does not support hooks, profiling will be disabled")}});qr(dg,ug);let pg={};function mg(){}ra.Sentry&&ra.Sentry.Integrations&&(pg=ra.Sentry.Integrations);const gg=e=>e;function hg(e){return e()}function fg(){return Object.create(null)}function _g(e){e.forEach(hg)}function vg(e){return"function"==typeof e}function yg(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function wg(e,...t){if(null==e){for(const e of t)e(void 0);return mg}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function bg(e,t,n){e.$$.on_destroy.push(wg(t,n))}function Eg(e,t,n,o){if(e){const i=Sg(e,t,n,o);return e[0](i)}}function Sg(e,t,n,o){return e[1]&&o?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](o(t))):n.ctx}function Tg(e,t,n,o){if(e[2]&&o){const i=e[2](o(n));if(void 0===t.dirty)return i;if("object"==typeof i){const e=[],n=Math.max(t.dirty.length,i.length);for(let o=0;o<n;o+=1)e[o]=t.dirty[o]|i[o];return e}return t.dirty|i}return t.dirty}function xg(e,t,n,o,i,r){if(i){const s=Sg(t,n,o,r);e.p(s,i)}}function $g(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}function Cg(e){return null==e?"":e}function kg(e,t,n){return e.set(n),t}function Lg(e){return e&&vg(e.destroy)?e.destroy:mg}function Ig(e){const t="string"==typeof e&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}const Ag="undefined"!=typeof window;let Mg=Ag?()=>window.performance.now():()=>Date.now(),Rg=Ag?e=>requestAnimationFrame(e):mg;const Og=new Set;function Ng(e){Og.forEach((t=>{t.c(e)||(Og.delete(t),t.f())})),0!==Og.size&&Rg(Ng)}function Dg(e){let t;return 0===Og.size&&Rg(Ng),{promise:new Promise((n=>{Og.add(t={c:e,f:n})})),abort(){Og.delete(t)}}}function Pg(e,t){e.appendChild(t)}function Bg(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Ug(e){const t=Wg("style");return t.textContent="/* empty */",function(e,t){Pg(e.head||e,t),t.sheet}(Bg(e),t),t.sheet}function zg(e,t,n){e.insertBefore(t,n||null)}function Hg(e){e.parentNode&&e.parentNode.removeChild(e)}function Fg(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function Wg(e){return document.createElement(e)}function jg(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function qg(e){return document.createTextNode(e)}function Gg(){return qg(" ")}function Vg(){return qg("")}function Yg(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function Zg(e){return function(t){return t.preventDefault(),e.call(this,t)}}function Kg(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function Xg(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Jg(e,t){t=""+t,e.data!==t&&(e.data=t)}function Qg(e,t){e.value=null==t?"":t}function eh(e,t,n,o){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function th(e,t,n){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t)return void(o.selected=!0)}n&&void 0===t||(e.selectedIndex=-1)}let nh;function oh(){if(void 0===nh){nh=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(e){nh=!0}}return nh}function ih(e,t,n){e.classList.toggle(t,!!n)}function rh(e,t,{bubbles:n=!1,cancelable:o=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:o})}class sh{is_svg=!1;e=void 0;n=void 0;t=void 0;a=void 0;constructor(e=!1){this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=jg(t.nodeName):this.e=Wg(11===t.nodeType?"TEMPLATE":t.nodeName),this.t="TEMPLATE"!==t.tagName?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from("TEMPLATE"===this.e.nodeName?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)zg(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(Hg)}}function ah(e,t){return new e(t)}const lh=new Map;let ch,dh=0;function uh(e,t,n,o,i,r,s,a=0){const l=16.666/o;let c="{\n";for(let e=0;e<=1;e+=l){const o=t+(n-t)*r(e);c+=100*e+`%{${s(o,1-o)}}\n`}const d=c+`100% {${s(n,1-n)}}\n}`,u=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(d)}_${a}`,p=Bg(e),{stylesheet:m,rules:g}=lh.get(p)||function(e,t){const n={stylesheet:Ug(t),rules:{}};return lh.set(e,n),n}(p,e);g[u]||(g[u]=!0,m.insertRule(`@keyframes ${u} ${d}`,m.cssRules.length));const h=e.style.animation||"";return e.style.animation=`${h?`${h}, `:""}${u} ${o}ms linear ${i}ms 1 both`,dh+=1,u}function ph(e,t){const n=(e.style.animation||"").split(", "),o=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),i=n.length-o.length;i&&(e.style.animation=o.join(", "),dh-=i,dh||Rg((()=>{dh||(lh.forEach((e=>{const{ownerNode:t}=e.stylesheet;t&&Hg(t)})),lh.clear())})))}function mh(e){ch=e}function gh(){if(!ch)throw new Error("Function called outside component initialization");return ch}function hh(e){gh().$$.on_mount.push(e)}function fh(e){gh().$$.on_destroy.push(e)}function _h(){const e=gh();return(t,n,{cancelable:o=!1}={})=>{const i=e.$$.callbacks[t];if(i){const r=rh(t,n,{cancelable:o});return i.slice().forEach((t=>{t.call(e,r)})),!r.defaultPrevented}return!0}}function vh(e,t){return gh().$$.context.set(e,t),t}function yh(e){return gh().$$.context.get(e)}function wh(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const bh=[],Eh=[];let Sh=[];const Th=[],xh=Promise.resolve();let $h=!1;function Ch(){$h||($h=!0,xh.then(Rh))}function kh(e){Sh.push(e)}function Lh(e){Th.push(e)}const Ih=new Set;let Ah,Mh=0;function Rh(){if(0!==Mh)return;const e=ch;do{try{for(;Mh<bh.length;){const e=bh[Mh];Mh++,mh(e),Oh(e.$$)}}catch(e){throw bh.length=0,Mh=0,e}for(mh(null),bh.length=0,Mh=0;Eh.length;)Eh.pop()();for(let e=0;e<Sh.length;e+=1){const t=Sh[e];Ih.has(t)||(Ih.add(t),t())}Sh.length=0}while(bh.length);for(;Th.length;)Th.pop()();$h=!1,Ih.clear(),mh(e)}function Oh(e){if(null!==e.fragment){e.update(),_g(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(kh)}}function Nh(){return Ah||(Ah=Promise.resolve(),Ah.then((()=>{Ah=null}))),Ah}function Dh(e,t,n){e.dispatchEvent(rh(`${t?"intro":"outro"}${n}`))}const Ph=new Set;let Bh;function Uh(){Bh={r:0,c:[],p:Bh}}function zh(){Bh.r||_g(Bh.c),Bh=Bh.p}function Hh(e,t){e&&e.i&&(Ph.delete(e),e.i(t))}function Fh(e,t,n,o){if(e&&e.o){if(Ph.has(e))return;Ph.add(e),Bh.c.push((()=>{Ph.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}else o&&o()}const Wh={duration:0};function jh(e,t,n){const o={direction:"in"};let i,r,s=t(e,n,o),a=!1,l=0;function c(){i&&ph(e,i)}function d(){const{delay:t=0,duration:n=300,easing:o=gg,tick:d=mg,css:u}=s||Wh;u&&(i=uh(e,0,1,n,t,o,u,l++)),d(0,1);const p=Mg()+t,m=p+n;r&&r.abort(),a=!0,kh((()=>Dh(e,!0,"start"))),r=Dg((t=>{if(a){if(t>=m)return d(1,0),Dh(e,!0,"end"),c(),a=!1;if(t>=p){const e=o((t-p)/n);d(e,1-e)}}return a}))}let u=!1;return{start(){u||(u=!0,ph(e),vg(s)?(s=s(o),Nh().then(d)):d())},invalidate(){u=!1},end(){a&&(c(),a=!1)}}}function qh(e,t,n){const o={direction:"out"};let i,r=t(e,n,o),s=!0;const a=Bh;let l;function c(){const{delay:t=0,duration:n=300,easing:o=gg,tick:c=mg,css:d}=r||Wh;d&&(i=uh(e,1,0,n,t,o,d));const u=Mg()+t,p=u+n;kh((()=>Dh(e,!1,"start"))),"inert"in e&&(l=e.inert,e.inert=!0),Dg((t=>{if(s){if(t>=p)return c(0,1),Dh(e,!1,"end"),--a.r||_g(a.c),!1;if(t>=u){const e=o((t-u)/n);c(1-e,e)}}return s}))}return a.r+=1,vg(r)?Nh().then((()=>{r=r(o),c()})):c(),{end(t){t&&"inert"in e&&(e.inert=l),t&&r.tick&&r.tick(1,0),s&&(i&&ph(e,i),s=!1)}}}function Gh(e,t,n,o){let i,r=t(e,n,{direction:"both"}),s=o?0:1,a=null,l=null,c=null;function d(){c&&ph(e,c)}function u(e,t){const n=e.b-s;return t*=Math.abs(n),{a:s,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function p(t){const{delay:n=0,duration:o=300,easing:p=gg,tick:m=mg,css:g}=r||Wh,h={start:Mg()+n,b:t};t||(h.group=Bh,Bh.r+=1),"inert"in e&&(t?void 0!==i&&(e.inert=i):(i=e.inert,e.inert=!0)),a||l?l=h:(g&&(d(),c=uh(e,s,t,o,n,p,g)),t&&m(0,1),a=u(h,o),kh((()=>Dh(e,t,"start"))),Dg((t=>{if(l&&t>l.start&&(a=u(l,o),l=null,Dh(e,a.b,"start"),g&&(d(),c=uh(e,s,a.b,a.duration,0,p,r.css))),a)if(t>=a.end)m(s=a.b,1-s),Dh(e,a.b,"end"),l||(a.b?d():--a.group.r||_g(a.group.c)),a=null;else if(t>=a.start){const e=t-a.start;s=a.a+a.d*p(e/a.duration),m(s,1-s)}return!(!a&&!l)})))}return{run(e){vg(r)?Nh().then((()=>{r=r({direction:e?"in":"out"}),p(e)})):p(e)},end(){d(),a=l=null}}}function Vh(e){return void 0!==e?.length?e:Array.from(e)}function Yh(e,t,n){const o=e.$$.props[t];void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function Zh(e){e&&e.c()}function Kh(e,t,n){const{fragment:o,after_update:i}=e.$$;o&&o.m(t,n),kh((()=>{const t=e.$$.on_mount.map(hg).filter(vg);e.$$.on_destroy?e.$$.on_destroy.push(...t):_g(t),e.$$.on_mount=[]})),i.forEach(kh)}function Xh(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];Sh.forEach((o=>-1===e.indexOf(o)?t.push(o):n.push(o))),n.forEach((e=>e())),Sh=t}(n.after_update),_g(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Jh(e,t,n,o,i,r,s=null,a=[-1]){const l=ch;mh(e);const c=e.$$={fragment:null,ctx:[],props:r,update:mg,not_equal:i,bound:fg(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:fg(),dirty:a,skip_bound:!1,root:t.target||l.$$.root};s&&s(c.root);let d=!1;if(c.ctx=n?n(e,t.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return c.ctx&&i(c.ctx[t],c.ctx[t]=r)&&(!c.skip_bound&&c.bound[t]&&c.bound[t](r),d&&function(e,t){-1===e.$$.dirty[0]&&(bh.push(e),Ch(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(e,t)),n})):[],c.update(),d=!0,_g(c.before_update),c.fragment=!!o&&o(c.ctx),t.target){if(t.hydrate){const e=function(e){return Array.from(e.childNodes)}(t.target);c.fragment&&c.fragment.l(e),e.forEach(Hg)}else c.fragment&&c.fragment.c();t.intro&&Hh(e.$$.fragment),Kh(e,t.target,t.anchor),Rh()}mh(l)}class Qh{$$=void 0;$$set=void 0;$destroy(){Xh(this,1),this.$destroy=mg}$on(e,t){if(!vg(t))return mg;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ef=[];function tf(e,t=mg){let n;const o=new Set;function i(t){if(yg(e,t)&&(e=t,n)){const t=!ef.length;for(const t of o)t[1](),ef.push(t,e);if(t){for(let e=0;e<ef.length;e+=2)ef[e][0](ef[e+1]);ef.length=0}}}function r(t){i(t(e))}return{set:i,update:r,subscribe:function(s,a=mg){const l=[s,a];return o.add(l),1===o.size&&(n=t(i,r)||mg),s(e),()=>{o.delete(l),0===o.size&&n&&(n(),n=null)}}}}const nf=function(){const{subscribe:e,set:t,update:n}=tf({});return chrome.storage.sync.get(null,(e=>{t(e),chrome.storage.local.get(["isLoggedIn","isProUser","translatorServiceType","writeServiceType","apiServiceType","docTranslatorServiceType","browserInstanceId","featureSet","hasTermbaseService"],(e=>{n((t=>({...t,...e})))}))})),chrome.storage.onChanged.addListener((e=>{const t=["a_t","r_t","i_t","accountId"];let o={};for(const[n,i]of Object.entries(e))!1===t.includes(n)&&(o[n]=i.newValue);if(rn()){const e="background-color: #324054;padding: 3px; font-size:12px;color:#e1e8c3; font-weight:600";console.log(`%c${(new Date).toISOString()} UPDATE USER SETTINGS`,e,o)}return n((e=>({...e,...o}))),!0})),{subscribe:e,set:e=>chrome.storage.sync.set(e)}}(),of=function(){const{subscribe:e,update:t}=tf({});return chrome.runtime.onMessage.addListener((function(e,n){switch(e.action){case"newWebsiteState":e.payload&&t((t=>({...t,[n.tab.id]:{...t[n.tab.id],...e.payload,error:e.payload.error?e.payload.error:void 0}})));break;case"resetWebsiteState":e.payload&&t((t=>({...t,[n.tab.id]:{...e.payload}})))}return!0})),{subscribe:e,fetchCurrentWebsiteSettings:()=>{chrome.tabs&&chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{action:"dlGetWebsiteData"},(function(n){t((t=>({...t,[e[0].id]:{...t[e[0].id],...n}})))}))}))}}}();!function(e,t,n){const o=!Array.isArray(e),i=o?[e]:e;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const r=t.length<2;return s=(e,n)=>{let s=!1;const a=[];let l=0,c=mg;const d=()=>{if(l)return;c();const i=t(o?a[0]:a,e,n);r?e(i):c=vg(i)?i:mg},u=i.map(((e,t)=>wg(e,(e=>{a[t]=e,l&=~(1<<t),s&&d()}),(()=>{l|=1<<t}))));return s=!0,d(),function(){_g(u),c(),s=!1}},{subscribe:tf(n,s).subscribe};var s}(of,(async(e,t)=>{if(!chrome.tabs)return;t(e[(await chrome.tabs.query({active:!0,currentWindow:!0}))[0].id])})),function(){const{subscribe:e,set:n}=tf([]);t({action:"dlGetExperiments",payload:{forceFetch:!1}}).then((e=>n(e))),chrome.runtime.onMessage.addListener((function(e){if("dlExperimentsUpdated"===e.action)e.payload&&n(e.payload.experiments);return!0}))}();const rf=e=>!![/Receiving end does not exist/,/message channel closed before a response was received/,/Extension context invalidated/].some((t=>t.test(e))),sf={dsn:"https://f7c23f019d154c319e91e8de004727dc@errortracking.deepl.com/12",release:"deepl-browser-extension@1.28.2",environment:on(),tracesSampleRate:sn()?.1:1,sampleRate:sn()?.1:1,ignoreErrors:[/Receiving end does not exist/,/message channel closed before a response was received/,/Extension context invalidated/],beforeSend(e){const t=e.message||e.exception&&e.exception.values&&e.exception.values[0].value||"";return rf(t)?null:e}};function af(e,t){t.captureException(e)}const lf="PROTOCOL_ERROR",cf="NETWORK_ERROR",df="FULL_PAGE_SERVER_ERROR",uf="-32003",pf="429",mf="403",gf="1045601",hf="1042902",ff={ENTRY_NOT_FOUND:"ENTRY_NOT_FOUND",SERVER_ERROR:"SERVER_ERROR"},_f="TRANSLATED_INPUT_NOT_SET",vf="HTML_NODE_CHAR_LENGTH_TOO_LONG",yf="TRANSLATOR_FREE_ACCOUNT_LIMIT_EXCEEDED",wf="TRANSLATOR_ANONYMOUS_LIMIT_EXCEEDED",bf="TRANSLATOR_FREE_ANON_WITH_WRITE_PRO",Ef="WRITE_ANON_OR_FREE_LIMIT_EXCEEDED",Sf="WRITE_WITH_PRO_TRANSLATOR_LIMIT_EXCEEDED";class Tf extends Error{constructor(e,t){super(t),this.name=yf,this.limit=e,this.message=t}}class xf extends Error{constructor(e,t){super(t),this.name=wf,this.limit=e,this.message=t}}class $f extends Error{constructor(e,t){super(t),this.name=Ef,this.limit=e,this.message=t}}class Cf extends Error{constructor(e,t){super(t),this.name=Sf,this.limit=e,this.message=t}}function kf(e){let t;return{c(){t=Wg("div"),Xg(t,"class","dl-zendesk-icon svelte-1tytp0d")},m(e,n){zg(e,t,n)},p:mg,i:mg,o:mg,d(e){e&&Hg(t)}}}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");function Lf(e,t,n){let o,i,r,s;bg(e,nf,(e=>n(1,o=e))),vh("text_direction",Bt());const a=()=>{const e=window.location.pathname,t=Vb(e);let n=!1;if(s!==t&&(n=!0,s=t),t){const e=Yb();if(!e)return;const o=Zb(e)||Kb(e,t);o&&o.processRefreshUI(n)}},l=async e=>{if("dlChangeActiveTabStatus"===e.action)if(e.payload.isActive)c();else{if(!document.hidden)return;d()}return!0},c=()=>{i&&clearInterval(i),i=setInterval(a,800)},d=()=>{clearInterval(i)};hh((()=>{const e=o.zendeskSuccessfulTranslations>=ve;n(0,r=o?.featureSet?.customizations?.includes("zendesk")),e&&!r&&kg(nf,o.isZendeskEnabled=!1,o),u()}));const u=()=>{c(),chrome.runtime.onMessage.addListener(l)};return fh((()=>{i&&d(),chrome.runtime.onMessage.removeListener(l),Jb()})),e.$$.update=()=>{2&e.$$.dirty&&!o?.featureSet?.customizations?.includes("zendesk")&&o.zendeskSuccessfulTranslations>=ve&&(kg(nf,o.isZendeskEnabled=!1,o),Qb()),3&e.$$.dirty&&!1===r&&o?.featureSet?.customizations?.includes("zendesk")&&(n(0,r=!0),kg(nf,o.isZendeskEnabled=!0,o),c()),2&e.$$.dirty&&(o.isZendeskEnabled?c():Qb())},[r,o]}class If extends Qh{constructor(e){super(),Jh(this,e,Lf,kf,yg,{})}}class Af{static HTML_TAG_NAME="deepl-zendesk-controller";static createElement=(e=document)=>{const t=e.createElement(Af.HTML_TAG_NAME),n=new Af(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t.showOnboarding=n.showOnboarding,t.getActiveTermbases=n.getActiveTermbases,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer)}createDOM=()=>{this.domElement.mainComponent=new If({target:this.domElement.shadowContainer,props:{onClose:this.cleanupDOM,controller:this}})};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()};showOnboarding=()=>{this.domElement.mainComponent.showOnboarding()};getActiveTermbases=()=>this.domElement.mainComponent.getActiveTermbases()}function Mf(e){const t=e-1;return t*t*t+1}function Rf(e,{delay:t=0,duration:n=400,easing:o=gg}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:o,css:e=>"opacity: "+e*i}}function Of(e,{delay:t=0,duration:n=400,easing:o=Mf,x:i=0,y:r=0,opacity:s=0}={}){const a=getComputedStyle(e),l=+a.opacity,c="none"===a.transform?"":a.transform,d=l*(1-s),[u,p]=Ig(i),[m,g]=Ig(r);return{delay:t,duration:n,easing:o,css:(e,t)=>`\n\t\t\ttransform: ${c} translate(${(1-e)*u}${p}, ${(1-e)*m}${g});\n\t\t\topacity: ${l-d*t}`}}function Nf(e,{delay:t=0,duration:n=400,easing:o=Mf,axis:i="y"}={}){const r=getComputedStyle(e),s=+r.opacity,a="y"===i?"height":"width",l=parseFloat(r[a]),c="y"===i?["top","bottom"]:["left","right"],d=c.map((e=>`${e[0].toUpperCase()}${e.slice(1)}`)),u=parseFloat(r[`padding${d[0]}`]),p=parseFloat(r[`padding${d[1]}`]),m=parseFloat(r[`margin${d[0]}`]),g=parseFloat(r[`margin${d[1]}`]),h=parseFloat(r[`border${d[0]}Width`]),f=parseFloat(r[`border${d[1]}Width`]);return{delay:t,duration:n,easing:o,css:e=>`overflow: hidden;opacity: ${Math.min(20*e,1)*s};${a}: ${e*l}px;padding-${c[0]}: ${e*u}px;padding-${c[1]}: ${e*p}px;margin-${c[0]}: ${e*m}px;margin-${c[1]}: ${e*g}px;border-${c[0]}-width: ${e*h}px;border-${c[1]}-width: ${e*f}px;`}}function Df(e,t){if(!e||!t)return!1;const n=/[\n\r\s]+/gm,o=e.replace(n,""),i=t.replace(n,"");return o.includes(i)}function Pf(e,t,n){let o={block:"end",position:e.length};return t.forEach((t=>{const i=e.indexOf(`<${t}>`,n);i>-1&&i<o.position&&(o={block:t,position:i})})),[o.block,o.position]}function Bf(e,t=[]){const n=[];let o=0,i=!1;for(;!i;){const[r,s]=Pf(e,t,o);if("end"===r&&(i=!0),o<s&&n.push({block:"main",text:e.substring(o,s)}),i)break;const a=e.indexOf(`</${r}>`,s);-1===a?(n.push({block:r,text:e.substring(s+`<${r}>`.length)}),i=!0):(n.push({block:r,text:e.substring(s+`<${r}>`.length,a)}),o=a+`</${r}>`.length)}return n}function Uf(e){return e.match(/[^\s.,:;'"]+|[.,:;'"]|\s+/g)||[]}function zf(e,t){const n=Uf(e),o=Uf(t),i=function(e,t,n){const o=n||((e,t)=>e===t),i=(()=>{let n=0;for(;o(e[n],t[n])&&n<e.length;)++n;return n})();if(i===e.length&&e.length===t.length)return[i];const r=(()=>{let n=e.length-1,r=t.length-1;for(;o(e[n],t[r])&&n>i&&r>i;)--n,--r;return e.length-n-1})(),s=e.length-i-r+1,a=t.length-i-r+1,l=s+a,c=new Map,d=new Map;c.set(1,0),d.set(1,null);for(let n=0;n<=l;++n)for(let l=-n;l<=n;l+=2){let u,p,m;for(l==-n||l!=n&&c.get(l-1)<c.get(l+1)?(u=c.get(l+1),m=[d.get(l+1),void 0,void 0]):(u=c.get(l-1)+1,m=[d.get(l-1),void 0,void 0]),p=u-l;u<s&&p<a&&o(e[u+i],t[p+i]);)++u,++p;if(u>=s&&p>=a){m[1]=s+r-1,m[2]=a+r-1;let e=-1,t=-1;const n=[];for(;m;)n.push([m[1],m[2]]),m=m[0];let o=[],l=null;for(;n.length;){const i=n.pop(),r=i[0],s=i[1],a=r-e,c=s-t,d=Math.min(a,c);a>d&&(l?l[0]+=a-d:(l=[a-d,0],o.push(l))),c>d&&(l?l[1]+=c-d:(l=[0,c-d],o.push(l))),d>0&&(o.push(d),l=null),e=r,t=s}return o[0]=o[0]-1+i,o}c.set(l,u),m[1]=u,m[2]=p,d.set(l,m)}throw new Error("[diff]","should not happen?")}(n,o),r=[];let s=0,a=0,l=0;for(;s<i.length;){const e=i[s];let t=0;for(let o=a+e-1;o>=a;o-=1)t+=n[o]?.match(/^\s/)?2:1;a+=e,l+=e;let c=0,d=0;if(a<n.length&&l<o.length&&n[a]?.match(/^\s/)&&o[l]?.match(/^\s/)&&(c-=1,d-=1,t+=1),r.push(t),s+=1,s<i.length){const[e,t]=i[s];for(let t=a+e-1;t>=a;t-=1)c+=n[t]?.match(/^\s/)?2:1;for(let e=l+t-1;e>=l;e-=1)d+=o[e]?.match(/^\s/)?2:1;r.push([Math.max(c,0),Math.max(d,0)]),s+=1,a+=e,l+=t}}return[r,n,o,i]}function Hf(e,t){let n=0;const o=function(e,t){const n=zf(t,e),o=[];let i=0,r=0,s=0,a=0;return n[3].forEach((e=>{if(Array.isArray(e)&&"number"==typeof e[0]&&"number"==typeof e[1]){if(0!==e[1]){const t=n[2].slice(r,r+e[1]).join(""),l=n[1].slice(i,i+e[0]).join(""),c={original:l,replace:t};c.changeLength=t.length,c.changeOffset=s,c.originalLength=l.length,c.originalOffset=a,s+=t.length,a+=l.length,o.push(c)}i+=e[0],r+=e[1]}else{let t=0;n[2].slice(r,r+e).forEach((e=>t+=e.length)),s+=t;let o=0;n[1].slice(i,i+e).forEach((e=>o+=e.length)),a+=o,i+=e,r+=e}})),o}(e,t),i=[];for(let t of o){t.changeOffset>n&&i.push({isHighlighted:!1,text:e.substring(n,t.changeOffset)});const o=t.changeOffset+t.changeLength;i.push({isHighlighted:!0,text:e.substring(t.changeOffset,o)}),n=o}return n<e.length&&i.push({isHighlighted:!1,text:e.substring(n,e.length)}),i}const Ff=e=>{let t="";for(const n of e.childNodes)n.nodeType===Node.TEXT_NODE?t+=n.textContent:n.nodeType===Node.ELEMENT_NODE&&"none"!==n.style.display&&(t+=Ff(n));return t};function Wf(e){return"IFRAME"===e.nodeName.toUpperCase()?Gf(e):e.ownerDocument===document?window:e.ownerDocument}function jf(e){return e.ownerDocument===document?document:e.ownerDocument}function qf(e){return"IFRAME"!==e.nodeName.toUpperCase()?e:Gf(e).body}function Gf(e){return e.contentDocument||e.contentWindow.document}function Vf(e){if("IFRAME"===e.nodeName.toUpperCase())return window;if(e.ownerDocument!==document){const t=e?.ownerDocument?.defaultView?.frameElement?.contentWindow;if(t)return t}return window}function Yf(e){return"IFRAME"===e.nodeName.toUpperCase()?Gf(e):e.ownerDocument===document?document:e.ownerDocument}function Zf(e){return new Promise(((t,n)=>{requestAnimationFrame((()=>{const n=jf(e).createRange();n.selectNodeContents(qf(e));const o=Wf(e).getSelection();o.removeAllRanges(),o.addRange(n),t(o)}))}))}const Kf=async(e,t)=>{await en(10);const n=new ClipboardEvent("paste");n.clipboardData.setData("text/html",t.html),n.clipboardData.setData("text/plain",t.text),e.dispatchEvent(n),await en(10)},Xf=async(e,t)=>{await en(10);const n=new ClipboardEvent("paste",{dataType:"text/html",data:t.html});e.dispatchEvent(n),await en(10)},Jf=async(e,t)=>{await en(10);const n=new ClipboardEvent("paste",{dataType:"text/plain",data:t.text});e.dispatchEvent(n),await en(10)},Qf=async(e,t)=>{await en(10),document.execCommand("insertText",!1,t.text),await en(10)},e_=async(e,t)=>{await en(10),document.execCommand("insertHTML",!1,t.html),await en(10)},t_=async(e,t)=>{const n=Vf(e);await en(10);const o=new DataTransfer;o.setData("text/html",t.html),o.setData("text/plain",t.text),e.dispatchEvent(new n.ClipboardEvent("paste",{clipboardData:o,bubbles:!0,cancelable:!0})),o.clearData(),await en(10)},n_=async(e,t)=>{const n=Yf(e),o=Vf(e),i=n.createEvent("TextEvent");i.initTextEvent("textInput",!0,!0,o,t.text),e.dispatchEvent(i),await en(10)},o_=async(e,t)=>{const n=Yf(e);e.value&&e.select(),n.execCommand("insertHTML",!1,t.html),await en(20),(e.value||""===e.value)&&(e.value=t.text)},i_=async(e,n,o)=>{const i=st();o||e.focus();const r=qf(e).innerText,s=qf(e).value,a=[...i?[{method:Kf,isSuccessful:()=>r_(r,e.innerText,n.text)},{method:Xf,isSuccessful:()=>r_(r,e.innerText,n.text)},{method:Jf,isSuccessful:()=>r_(r,e.innerText,n.text)},{method:Qf,isSuccessful:()=>r_(r,e.innerText,n.text)},{method:e_,isSuccessful:()=>r_(r,e.innerText,n.text)||r_(s,e.value,n.text)}]:[],{method:t_,isSuccessful:()=>r_(r,qf(e).innerText,n.text)},{method:n_,isSuccessful:()=>r_(r,qf(e).innerText,n.text)},{method:o_,isSuccessful:()=>r_(r,qf(e).innerText,n.text)||r_(s,qf(e).value,n.text)}];for(const t of a)if(i&&rn()&&console.log(`trying paste event: ${t.method.name}`),await t.method(e,n),t.isSuccessful())return void(i&&rn()&&console.log("attempt was successful: ",t.method.name));throw await en(1e3),t({action:"dlTranslatedInputTextNotSet",payload:window.location.hostname}),new Error({error:_f})},r_=(e,t,n)=>{let o=!0;return(e&&!t||!Df(e,n)&&e===t||!Df(t,n))&&(o=!1),o},s_=(e,t)=>{const n=new(Vf(t).KeyboardEvent)(e,{bubbles:!0,cancelable:!0,keyCode:8,which:8,location:0,key:"Backspace"});return t.dispatchEvent(n)},a_=(e,t)=>{const n=new MouseEvent(e,{bubbles:!0,cancelable:!1});return t.dispatchEvent(n)},l_=e=>{const t=Vf(e),n=jf(e);if(s_("keydown",e)){const o=new t.InputEvent("beforeinput",{bubbles:!0,cancelable:!0,inputType:"deleteContent"});e.dispatchEvent(o)&&n.execCommand("delete",!1)}s_("keyup",e)};function c_(e,{isShadow:t=!1,exceptions:n=[]}={}){const o=o=>{const i=t?o.composedPath()[0]:o.target;!e||e.contains(i)||o.defaultPrevented||function(e,t){for(let n of t)if(e.closest(n))return!0;return!1}(i,n)||e.dispatchEvent(new CustomEvent("click_outside",e))};return document.addEventListener("click",o,!0),{destroy(){document.removeEventListener("click",o,!0)}}}function d_(e){document.addEventListener("deepl-reset-event",e)}function u_(e){let t,n;const o=e[12].default,i=Eg(o,e,e[11],null);return{c(){t=Wg("div"),i&&i.c()},m(e,o){zg(e,t,o),i&&i.m(t,null),n=!0},p(e,t){i&&i.p&&(!n||2048&t)&&xg(i,o,e,e[11],n?Tg(o,e[11],t,null):$g(e[11]),null)},i(e){n||(Hh(i,e),n=!0)},o(e){Fh(i,e),n=!1},d(e){e&&Hg(t),i&&i.d(e)}}}function p_(e){let t,n,o;const i=e[12].default,r=Eg(i,e,e[11],null);return{c(){t=Wg("div"),r&&r.c(),Xg(t,"data-tooltip",e[0]),Xg(t,"style",n=`z-index: ${e[2]}; ${e[6]}`),Xg(t,"class","svelte-1a71ske"),ih(t,"multiline",e[1]),ih(t,"isFlexItem",e[4]),ih(t,"isRTL",e[7]),ih(t,"showProShield",e[5])},m(e,n){zg(e,t,n),r&&r.m(t,null),o=!0},p(e,s){r&&r.p&&(!o||2048&s)&&xg(r,i,e,e[11],o?Tg(i,e[11],s,null):$g(e[11]),null),(!o||1&s)&&Xg(t,"data-tooltip",e[0]),(!o||68&s&&n!==(n=`z-index: ${e[2]}; ${e[6]}`))&&Xg(t,"style",n),(!o||2&s)&&ih(t,"multiline",e[1]),(!o||16&s)&&ih(t,"isFlexItem",e[4]),(!o||128&s)&&ih(t,"isRTL",e[7]),(!o||32&s)&&ih(t,"showProShield",e[5])},i(e){o||(Hh(r,e),o=!0)},o(e){Fh(r,e),o=!1},d(e){e&&Hg(t),r&&r.d(e)}}}function m_(e){let t,n,o,i;const r=[p_,u_],s=[];function a(e,t){return e[3]?0:1}return t=a(e),n=s[t]=r[t](e),{c(){n.c(),o=Vg()},m(e,n){s[t].m(e,n),zg(e,o,n),i=!0},p(e,[i]){let l=t;t=a(e),t===l?s[t].p(e,i):(Uh(),Fh(s[l],1,1,(()=>{s[l]=null})),zh(),n=s[t],n?n.p(e,i):(n=s[t]=r[t](e),n.c()),Hh(n,1),n.m(o.parentNode,o))},i(e){i||(Hh(n),i=!0)},o(e){Fh(n),i=!1},d(e){e&&Hg(o),s[t].d(e)}}}function g_(e,t,n){let o,i,{$$slots:r={},$$scope:s}=t;const{deepl_inline_ui:a}=D;let{tooltip:l=!1}=t,{multiline:c=!1}=t,{zIndex:d=a.z_index}=t,{isEnabled:u=!0}=t,{isFlexItem:p=!1}=t,{width:m=null}=t,{parentIsRTL:g=!1}=t,{ignoreTextDirection:h=!1}=t,{showProShield:f=!1}=t;return e.$$set=e=>{"tooltip"in e&&n(0,l=e.tooltip),"multiline"in e&&n(1,c=e.multiline),"zIndex"in e&&n(2,d=e.zIndex),"isEnabled"in e&&n(3,u=e.isEnabled),"isFlexItem"in e&&n(4,p=e.isFlexItem),"width"in e&&n(8,m=e.width),"parentIsRTL"in e&&n(9,g=e.parentIsRTL),"ignoreTextDirection"in e&&n(10,h=e.ignoreTextDirection),"showProShield"in e&&n(5,f=e.showProShield),"$$scope"in e&&n(11,s=e.$$scope)},e.$$.update=()=>{1536&e.$$.dirty&&n(7,o=g||!h&&"rtl"===Bt()),256&e.$$.dirty&&n(6,i=m?`width: ${m}px`:"")},[l,c,d,u,p,f,i,o,m,g,h,s,r]}class h_ extends Qh{constructor(e){super(),Jh(this,e,g_,m_,yg,{tooltip:0,multiline:1,zIndex:2,isEnabled:3,isFlexItem:4,width:8,parentIsRTL:9,ignoreTextDirection:10,showProShield:5})}}const f_=(e,t)=>{const n=new ResizeObserver((()=>{const n={clientHeight:e.clientHeight,clientWidth:e.clientWidth,offsetHeight:e.offsetHeight,offsetWidth:e.offsetWidth};t(n)}));return n.observe(e),()=>{n.disconnect()}};function __(e,t,n){const o=e.slice();return o[46]=t[n],o[48]=n,o}function v_(e){let t,n,o,i=Vh(e[3]),r=[];for(let t=0;t<i.length;t+=1)r[t]=b_(__(e,i,t));return{c(){t=Wg("ul");for(let e=0;e<r.length;e+=1)r[e].c();Xg(t,"id","dropdown_list"),Xg(t,"role","listbox"),Xg(t,"aria-labelledby","dropdown_option"),Xg(t,"tabindex","-1"),Xg(t,"style",n="up"===e[12]?"bottom: 30px":`height: ${e[16].height}; top: ${e[16].top};`),Xg(t,"data-qa",e[6]),Xg(t,"class","svelte-1tk603q"),ih(t,"alternate-dropdown-list","sm"===e[8]),ih(t,"align-right",e[9])},m(n,o){zg(n,t,o);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,null);e[37](t)},p(e,o){if(4726795&o[0]){let n;for(i=Vh(e[3]),n=0;n<i.length;n+=1){const s=__(e,i,n);r[n]?r[n].p(s,o):(r[n]=b_(s),r[n].c(),r[n].m(t,null))}for(;n<r.length;n+=1)r[n].d(1);r.length=i.length}69632&o[0]&&n!==(n="up"===e[12]?"bottom: 30px":`height: ${e[16].height}; top: ${e[16].top};`)&&Xg(t,"style",n),64&o[0]&&Xg(t,"data-qa",e[6]),256&o[0]&&ih(t,"alternate-dropdown-list","sm"===e[8]),512&o[0]&&ih(t,"align-right",e[9])},i(e){o||kh((()=>{o=jh(t,Of,{y:-5,duration:500}),o.start()}))},o:mg,d(n){n&&Hg(t),Fg(r,n),e[37](null)}}}function y_(e){let t,n=e[46].label+"";return{c(){t=qg(n)},m(e,n){zg(e,t,n)},p(e,o){8&o[0]&&n!==(n=e[46].label+"")&&Jg(t,n)},d(e){e&&Hg(t)}}}function w_(e){let t,n,o=dt(e[46].label)+"";return{c(){t=new sh(!1),n=Vg(),t.a=n},m(e,i){t.m(o,e,i),zg(e,n,i)},p(e,n){8&n[0]&&o!==(o=dt(e[46].label)+"")&&t.p(o)},d(e){e&&(Hg(n),t.d())}}}function b_(e){let t,n,o,i,r,s,a;function l(e,t){return e[13]?w_:y_}let c=l(e),d=c(e);function u(){return e[36](e[46])}return{c(){t=Wg("li"),d.c(),n=Gg(),Xg(t,"role","option"),Xg(t,"data-option-value",o=e[46].value),Xg(t,"data-option-regionalvariant",i=e[46].regionalVariant),Xg(t,"aria-selected",r=e[0]===e[46]),Xg(t,"class","svelte-1tk603q"),ih(t,"selected",e[0]===e[46]),ih(t,"keyboardSelected",e[48]===e[19])},m(o,i){zg(o,t,i),d.m(t,null),Pg(t,n),s||(a=[Yg(t,"click",u),Yg(t,"mousedown",Kg(Zg(e[33])))],s=!0)},p(s,a){c===(c=l(e=s))&&d?d.p(e,a):(d.d(1),d=c(e),d&&(d.c(),d.m(t,n))),8&a[0]&&o!==(o=e[46].value)&&Xg(t,"data-option-value",o),8&a[0]&&i!==(i=e[46].regionalVariant)&&Xg(t,"data-option-regionalvariant",i),9&a[0]&&r!==(r=e[0]===e[46])&&Xg(t,"aria-selected",r),9&a[0]&&ih(t,"selected",e[0]===e[46]),524288&a[0]&&ih(t,"keyboardSelected",e[48]===e[19])},d(e){e&&Hg(t),d.d(),s=!1,_g(a)}}}function E_(e){let t,n,o,i,r,s,a,l=e[1]&&v_(e);return{c(){t=Wg("div"),n=Wg("button"),o=qg(e[17]),i=Gg(),l&&l.c(),Xg(n,"aria-haspopup","listbox"),Xg(n,"id","dropdown_button"),Xg(n,"aria-labelledby","dropdown_option dropdown_button"),Xg(n,"aria-expanded",e[1]),Xg(n,"data-qa",e[5]),Xg(n,"class","svelte-1tk603q"),ih(n,"dropdown-label","original"===e[7]),ih(n,"dropdown-label-alternate","alternate"===e[7]),ih(n,"dropdown-label-zendesk","zendesk"===e[7]),ih(n,"dropdown-label-input-selection-result","input-selection-result"===e[7]),ih(n,"dropdown-label-full-width",e[10]),ih(n,"dropdown-label-borderless",e[11]),ih(n,"dropup","up"===e[12]),ih(n,"extra-padding",e[14]),Xg(t,"class",r=Cg(`dropdown__wrapper ${e[4]}`)+" svelte-1tk603q"),Xg(t,"style",e[21]),ih(t,"disabled",e[2])},m(r,c){zg(r,t,c),Pg(t,n),Pg(n,o),e[35](n),Pg(t,i),l&&l.m(t,null),e[39](t),s||(a=[Yg(n,"click",e[23]),Yg(n,"mousedown",Kg(Zg(e[34]))),Yg(n,"keydown",e[24]),Lg(c_.call(null,t,{isShadow:!0})),Yg(t,"click_outside",e[38])],s=!0)},p(e,i){131072&i[0]&&Jg(o,e[17]),2&i[0]&&Xg(n,"aria-expanded",e[1]),32&i[0]&&Xg(n,"data-qa",e[5]),128&i[0]&&ih(n,"dropdown-label","original"===e[7]),128&i[0]&&ih(n,"dropdown-label-alternate","alternate"===e[7]),128&i[0]&&ih(n,"dropdown-label-zendesk","zendesk"===e[7]),128&i[0]&&ih(n,"dropdown-label-input-selection-result","input-selection-result"===e[7]),1024&i[0]&&ih(n,"dropdown-label-full-width",e[10]),2048&i[0]&&ih(n,"dropdown-label-borderless",e[11]),4096&i[0]&&ih(n,"dropup","up"===e[12]),16384&i[0]&&ih(n,"extra-padding",e[14]),e[1]?l?(l.p(e,i),2&i[0]&&Hh(l,1)):(l=v_(e),l.c(),Hh(l,1),l.m(t,null)):l&&(l.d(1),l=null),16&i[0]&&r!==(r=Cg(`dropdown__wrapper ${e[4]}`)+" svelte-1tk603q")&&Xg(t,"class",r),2097152&i[0]&&Xg(t,"style",e[21]),20&i[0]&&ih(t,"disabled",e[2])},i(e){Hh(l)},o:mg,d(n){n&&Hg(t),e[35](null),l&&l.d(),e[39](null),s=!1,_g(a)}}}function S_(e,t,n){let{isOpen:o=!1}=t,{disabled:i=!1}=t,{items:r=[]}=t,{placeholder:s=""}=t,{customClass:a=""}=t,{selectedOption:l}=t,{defaultOption:c}=t,{dataQaButton:d="dl-dropdown-button"}=t,{dataQaList:u="dl-dropdown-list"}=t,{variant:p="original"}=t,{fontSize:m="default"}=t,{alignRight:g=!0}=t,{extraText:h=""}=t,{isFullWidth:f=!1}=t,{isBorderless:_=!1}=t,{direction:v="down"}=t,{allowLabelHtml:y=!1}=t,{showSortCode:w=!1}=t,{extraPadding:b=!1}=t,{dropdownMaxHeight:E=300}=t,{autoHeight:S=!1}=t;const T=yh("deepl_settings");let x,$,C,k,L,I=0,A={},M={},R={},O=-1,N="visibility: hidden; opacity:0; height:0;";const D=_h();function P(){A.spaceAbove=Math.abs(x.getBoundingClientRect().top),A.spaceBelow=Math.abs(window.innerHeight-x.getBoundingClientRect().bottom)}c&&(l=c),hh((()=>{setTimeout((()=>{n(21,N="")}),100),k=f_(C,(({clientWidth:e})=>{n(31,I=e)}))})),fh((()=>{k&&k()}));return e.$$set=e=>{"isOpen"in e&&n(1,o=e.isOpen),"disabled"in e&&n(2,i=e.disabled),"items"in e&&n(3,r=e.items),"placeholder"in e&&n(25,s=e.placeholder),"customClass"in e&&n(4,a=e.customClass),"selectedOption"in e&&n(0,l=e.selectedOption),"defaultOption"in e&&n(26,c=e.defaultOption),"dataQaButton"in e&&n(5,d=e.dataQaButton),"dataQaList"in e&&n(6,u=e.dataQaList),"variant"in e&&n(7,p=e.variant),"fontSize"in e&&n(8,m=e.fontSize),"alignRight"in e&&n(9,g=e.alignRight),"extraText"in e&&n(27,h=e.extraText),"isFullWidth"in e&&n(10,f=e.isFullWidth),"isBorderless"in e&&n(11,_=e.isBorderless),"direction"in e&&n(12,v=e.direction),"allowLabelHtml"in e&&n(13,y=e.allowLabelHtml),"showSortCode"in e&&n(28,w=e.showSortCode),"extraPadding"in e&&n(14,b=e.extraPadding),"dropdownMaxHeight"in e&&n(29,E=e.dropdownMaxHeight),"autoHeight"in e&&n(30,S=e.autoHeight)},e.$$.update=()=>{1&e.$$.dirty[0]|3&e.$$.dirty[1]&&(l&&(R?.value===l?.value&&R?.regionalVariant===l?.regionalVariant||(n(32,R=l),D("valueselected",{selectedOption:l}))),I&&P()),436207617&e.$$.dirty[0]&&n(17,$=l?`${w?l.value:l.selectedOptionLabel}${h?` ${h}`:""}`:`${s}${h?` ${h}`:""}`)},[l,o,i,r,a,d,u,p,m,g,f,_,v,y,b,x,M,$,C,O,L,N,T,function(){"down"===v&&function(){if(S)return;if(P(),n(16,M.top="auto",M),n(16,M.height=`${E}px`,M),A.spaceBelow>A.spaceAbove)A.spaceBelow<=E&&n(16,M.height=Math.ceil(.8*A.spaceBelow)+"px",M);else{let e=E;A.spaceAbove<=E&&(e=Math.ceil(.8*A.spaceAbove)),n(16,M.height=`${e}px`,M),n(16,M.top="-"+(e+2)+"px",M)}}(),n(1,o=!o),function(){let e=x.getRootNode().querySelector("ul li[aria-selected=true]");setTimeout((()=>{e?.scrollIntoView({block:"nearest"})}),0)}()},function(e){if(!o)return;if("ArrowUp"===e.key&&O>0)n(19,O-=1);else if("ArrowDown"===e.key&&O<r.length-1)n(19,O+=1);else if("Enter"===e.key&&-1!==O){const t=r[O];n(1,o=!1),n(0,l=t),n(19,O=-1),T.set({regionalVariant:t.regionalVariant||""}),e.preventDefault(),e.stopPropagation()}else{if("Escape"!==e.key)return;n(1,o=!1),n(19,O=-1)}const t=r[O];var i=L.querySelector(`[data-option-value="${t.value}"]`).offsetTop-L.offsetTop;L.scrollTo({top:i,behavior:"smooth"})},s,c,h,w,E,S,I,R,function(t){wh.call(this,e,t)},function(t){wh.call(this,e,t)},function(e){Eh[e?"unshift":"push"]((()=>{x=e,n(15,x)}))},e=>{n(1,o=!1),n(0,l=e),n(19,O=-1),T.set({regionalVariant:e.regionalVariant||""})},function(e){Eh[e?"unshift":"push"]((()=>{L=e,n(20,L)}))},()=>{n(1,o=!1)},function(e){Eh[e?"unshift":"push"]((()=>{C=e,n(18,C)}))}]}class T_ extends Qh{constructor(e){super(),Jh(this,e,S_,E_,yg,{isOpen:1,disabled:2,items:3,placeholder:25,customClass:4,selectedOption:0,defaultOption:26,dataQaButton:5,dataQaList:6,variant:7,fontSize:8,alignRight:9,extraText:27,isFullWidth:10,isBorderless:11,direction:12,allowLabelHtml:13,showSortCode:28,extraPadding:14,dropdownMaxHeight:29,autoHeight:30},null,[-1,-1])}}function x_(e){let t,n,o,i,r;return n=new T_({props:{items:e[1],selectedOption:e[2],alignRight:!1,dataQaButton:"deepl-formality-selection-button",dataQaList:"deepl-formality-selection-list",variant:"zendesk",isFullWidth:e[0],direction:"up"}}),n.$on("valueselected",e[3]),{c(){t=Wg("div"),Zh(n.$$.fragment)},m(s,a){zg(s,t,a),Kh(n,t,null),o=!0,i||(r=Yg(t,"mousedown",Kg(Zg(e[5]))),i=!0)},p(e,[t]){const o={};2&t&&(o.items=e[1]),4&t&&(o.selectedOption=e[2]),1&t&&(o.isFullWidth=e[0]),n.$set(o)},i(e){o||(Hh(n.$$.fragment,e),o=!0)},o(e){Fh(n.$$.fragment,e),o=!1},d(e){e&&Hg(t),Xh(n),i=!1,r()}}}function $_(e,t,n){let o,i;const r=_h();let{value:s}=t,{isFullWidth:a=!1}=t;return e.$$set=e=>{"value"in e&&n(4,s=e.value),"isFullWidth"in e&&n(0,a=e.isFullWidth)},e.$$.update=()=>{18&e.$$.dirty&&n(2,i=s?o.find((e=>e.value===s)):o.find((e=>"auto"===e.value)))},n(1,o=[{value:"auto",label:chrome.i18n.getMessage("ui_formality_automatic"),selectedOptionLabel:chrome.i18n.getMessage("ui_formality_automatic")},{value:"formal",label:chrome.i18n.getMessage("ui_formality_formal"),selectedOptionLabel:chrome.i18n.getMessage("ui_formality_formal")},{value:"informal",label:chrome.i18n.getMessage("ui_formality_informal"),selectedOptionLabel:chrome.i18n.getMessage("ui_formality_informal")}]),[a,o,i,function(e){e.detail.selectedOption.value!==s&&r("selection",e.detail)},s,function(t){wh.call(this,e,t)}]}class C_ extends Qh{constructor(e){super(),Jh(this,e,$_,x_,yg,{value:4,isFullWidth:0})}}const k_="ACCESS_DENIED",L_="INVALID_REQUEST",I_="INVALID_GRANT",A_="INVALID_NONCE",M_="ITA_RATE_LIMITED",R_="ITA_RATE_LIMITED_RESTRICTED",O_="PROTOCOL_ERROR",N_="NETWORK_ERROR",D_="FULL_PAGE_SERVER_ERROR",P_="-32003",B_="429",U_="403",z_="401",H_="1045601",F_="1042902";function W_(){return!!chrome&&!!chrome.tabs}const j_=tf(!1);function q_(e){let t,n,o;return{c(){t=Wg("button"),t.innerHTML='<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 13L13 1M1 1L13 13" stroke="#DA5E5C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',Xg(t,"class","dl-close-icon svelte-nsrzuc")},m(i,r){zg(i,t,r),n||(o=Yg(t,"click",(function(){vg(e[0])&&e[0].apply(this,arguments)})),n=!0)},p(t,n){e=t},d(e){e&&Hg(t),n=!1,o()}}}function G_(e){let t,n,o,i,r,s;const a=e[2].default,l=Eg(a,e,e[1],null);let c=e[0]&&q_(e);return{c(){t=Wg("div"),n=Wg("div"),n.innerHTML='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 12L10 10M10 10L12 8M10 10L8 8M10 10L12 12M19 10C19 14.9706 14.9706 19 10 19C5.02944 19 1 14.9706 1 10C1 5.02944 5.02944 1 10 1C14.9706 1 19 5.02944 19 10Z" stroke="#DA5E5C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',o=Gg(),i=Wg("div"),l&&l.c(),r=Gg(),c&&c.c(),Xg(n,"class","icon-container svelte-nsrzuc"),Xg(i,"class","message svelte-nsrzuc"),Xg(t,"class","error-msg svelte-nsrzuc")},m(e,a){zg(e,t,a),Pg(t,n),Pg(t,o),Pg(t,i),l&&l.m(i,null),Pg(t,r),c&&c.m(t,null),s=!0},p(e,[n]){l&&l.p&&(!s||2&n)&&xg(l,a,e,e[1],s?Tg(a,e[1],n,null):$g(e[1]),null),e[0]?c?c.p(e,n):(c=q_(e),c.c(),c.m(t,null)):c&&(c.d(1),c=null)},i(e){s||(Hh(l,e),s=!0)},o(e){Fh(l,e),s=!1},d(e){e&&Hg(t),l&&l.d(e),c&&c.d()}}}function V_(e,t,n){let{$$slots:o={},$$scope:i}=t,{close:r}=t;return e.$$set=e=>{"close"in e&&n(0,r=e.close),"$$scope"in e&&n(1,i=e.$$scope)},[r,i,o]}class Y_ extends Qh{constructor(e){super(),Jh(this,e,V_,G_,yg,{close:0})}}function Z_(e){let t,n,o;return{c(){t=Wg("button"),t.innerHTML='<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 13L13 1M1 1L13 13" stroke="#ECBA82" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',Xg(t,"class","dl-close-icon svelte-kyufep")},m(i,r){zg(i,t,r),n||(o=Yg(t,"click",(function(){vg(e[0])&&e[0].apply(this,arguments)})),n=!0)},p(t,n){e=t},d(e){e&&Hg(t),n=!1,o()}}}function K_(e){let t,n,o,i,r,s;const a=e[2].default,l=Eg(a,e,e[1],null);let c=e[0]&&Z_(e);return{c(){t=Wg("div"),n=Wg("div"),n.innerHTML='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 6V10M10 14H10.01M19 10C19 14.9706 14.9706 19 10 19C5.02944 19 1 14.9706 1 10C1 5.02944 5.02944 1 10 1C14.9706 1 19 5.02944 19 10Z" stroke="#ECBA82" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',o=Gg(),i=Wg("div"),l&&l.c(),r=Gg(),c&&c.c(),Xg(n,"class","icon-container svelte-kyufep"),Xg(i,"class","message svelte-kyufep"),Xg(t,"class","warn-msg svelte-kyufep")},m(e,a){zg(e,t,a),Pg(t,n),Pg(t,o),Pg(t,i),l&&l.m(i,null),Pg(t,r),c&&c.m(t,null),s=!0},p(e,[n]){l&&l.p&&(!s||2&n)&&xg(l,a,e,e[1],s?Tg(a,e[1],n,null):$g(e[1]),null),e[0]?c?c.p(e,n):(c=Z_(e),c.c(),c.m(t,null)):c&&(c.d(1),c=null)},i(e){s||(Hh(l,e),s=!0)},o(e){Fh(l,e),s=!1},d(e){e&&Hg(t),l&&l.d(e),c&&c.d()}}}function X_(e,t,n){let{$$slots:o={},$$scope:i}=t,{close:r}=t;return e.$$set=e=>{"close"in e&&n(0,r=e.close),"$$scope"in e&&n(1,i=e.$$scope)},[r,i,o]}class J_ extends Qh{constructor(e){super(),Jh(this,e,X_,K_,yg,{close:0})}}function Q_(e){let t;return{c(){t=Wg("span"),t.textContent=`${chrome.i18n.getMessage("error_message_generic_error")}`,Xg(t,"data-qa","error-message-generic")},m(e,n){zg(e,t,n)},p:mg,i:mg,o:mg,d(e){e&&Hg(t)}}}class ev extends Qh{constructor(e){super(),Jh(this,e,null,Q_,yg,{})}}function tv(e){let t;return{c(){t=Wg("span"),t.textContent=`${chrome.i18n.getMessage("error_message_internet_connection")}`},m(e,n){zg(e,t,n)},p:mg,i:mg,o:mg,d(e){e&&Hg(t)}}}class nv extends Qh{constructor(e){super(),Jh(this,e,null,tv,yg,{})}}function ov(e){let t;return{c(){t=Wg("span"),t.textContent=`${chrome.i18n.getMessage("full_page_translation_error_service_not_available")}`},m(e,n){zg(e,t,n)},p:mg,i:mg,o:mg,d(e){e&&Hg(t)}}}class iv extends Qh{constructor(e){super(),Jh(this,e,null,ov,yg,{})}}const rv="DOCS_GOOGLE_COM_FEEDBACK_FORM",sv="NEW_FEEDBACK_FORM",av="DEEPL_COM_PRO",lv="DEEPL_COM_PRO_WRITE",cv="DEEPL_COM_TRANSLATOR",dv="DEEPL_COM_HOMEPAGE",uv="DEEPL_COM_WRITE",pv="SHORTCUT_SETTINGS",mv="CHROME_WRITE_A_REVIEW",gv="EDGE_WRITE_A_REVIEW",hv="GMAIL_FEEDBACK_SURVEY",fv="GSLIDES_FEEDBACK_SURVEY",_v="FIREFOX_WRITE_A_REVIEW",vv="DEEPL_SUPPORT",yv="FIREFOX_FEEDBACK_SURVEY",wv="CUSTOMER_SEGMENTATION_SURVEY_FREE",bv="CUSTOMER_SEGMENTATION_SURVEY_PRO",Ev="ARABIC_SURVEY",Sv="ADDINS_ADS";function Tv(e){let t,n,o,i,r,s;return{c(){t=Wg("div"),n=Wg("div"),n.textContent=`${chrome.i18n.getMessage("warning_message_different_subscription_needed")}`,o=Gg(),i=Wg("div"),i.textContent=`${chrome.i18n.getMessage("link_get_pro_license")}`,Xg(i,"class","link svelte-1mpkjv7"),Xg(t,"class","container svelte-1mpkjv7")},m(a,l){zg(a,t,l),Pg(t,n),Pg(t,o),Pg(t,i),r||(s=Yg(i,"click",e[0]),r=!0)},p:mg,i:mg,o:mg,d(e){e&&Hg(t),r=!1,s()}}}function xv(e){return[function(){t({action:"dlExternalURLRedirect",payload:{destination:av,utmContent:"warning_user_unauthorised"}})}]}class $v extends Qh{constructor(e){super(),Jh(this,e,xv,Tv,yg,{})}}function Cv(e){let t,n,o,i,r,s;return{c(){t=Wg("div"),n=Wg("div"),n.textContent=`${chrome.i18n.getMessage("warning_message_free_usage_limit_reached")}`,o=Gg(),i=Wg("div"),i.textContent=`${chrome.i18n.getMessage("link_try_deepl")}`,Xg(i,"class","link svelte-1mpkjv7"),Xg(t,"class","container svelte-1mpkjv7")},m(a,l){zg(a,t,l),Pg(t,n),Pg(t,o),Pg(t,i),r||(s=Yg(i,"click",e[0]),r=!0)},p:mg,i:mg,o:mg,d(e){e&&Hg(t),r=!1,s()}}}function kv(e){return[function(){t({action:"dlExternalURLRedirect",payload:{destination:av,utmContent:"warning_user_blocked"}})}]}class Lv extends Qh{constructor(e){super(),Jh(this,e,kv,Cv,yg,{})}}function Iv(e){let t;return{c(){t=Wg("span"),t.textContent=`${chrome.i18n.getMessage("error_message_please_login")}`},m(e,n){zg(e,t,n)},p:mg,i:mg,o:mg,d(e){e&&Hg(t)}}}class Av extends Qh{constructor(e){super(),Jh(this,e,null,Iv,yg,{})}}function Mv(e,t,n){const o=e.slice();return o[1]=t[n],o}function Rv(e){let t,n=e[1].text+"";return{c(){t=qg(n)},m(e,n){zg(e,t,n)},p:mg,d(e){e&&Hg(t)}}}function Ov(e){let t,n,o;return{c(){t=Wg("span"),t.textContent=`${e[1].text} `,Xg(t,"class","link svelte-1mpkjv7")},m(i,r){zg(i,t,r),n||(o=Yg(t,"click",e[0]),n=!0)},p:mg,d(e){e&&Hg(t),n=!1,o()}}}function Nv(e){let t;let n=function(e,t){return"deeplSupportLink"===e[1].block?Ov:Rv}(e),o=n(e);return{c(){o.c(),t=Vg()},m(e,n){o.m(e,n),zg(e,t,n)},p(e,t){o.p(e,t)},d(e){e&&Hg(t),o.d(e)}}}function Dv(e){let t,n=Vh(Bf(chrome.i18n.getMessage("warning_message_account_limit_reached"),["deeplSupportLink"])),o=[];for(let t=0;t<n.length;t+=1)o[t]=Nv(Mv(e,n,t));return{c(){t=Wg("div");for(let e=0;e<o.length;e+=1)o[e].c();Xg(t,"class","container svelte-1mpkjv7")},m(e,n){zg(e,t,n);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,null)},p(e,[i]){if(1&i){let r;for(n=Vh(Bf(chrome.i18n.getMessage("warning_message_account_limit_reached"),["deeplSupportLink"])),r=0;r<n.length;r+=1){const s=Mv(e,n,r);o[r]?o[r].p(s,i):(o[r]=Nv(s),o[r].c(),o[r].m(t,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=n.length}},i:mg,o:mg,d(e){e&&Hg(t),Fg(o,e)}}}function Pv(e){return[function(){t({action:"dlExternalURLRedirect",payload:{destination:vv}})}]}class Bv extends Qh{constructor(e){super(),Jh(this,e,Pv,Dv,yg,{})}}function Uv(e){let t;return{c(){t=Wg("span"),t.textContent=`${chrome.i18n.getMessage("error_message_technical_issue")}`},m(e,n){zg(e,t,n)},p:mg,i:mg,o:mg,d(e){e&&Hg(t)}}}class zv extends Qh{constructor(e){super(),Jh(this,e,null,Uv,yg,{})}}function Hv(e){let t;return{c(){t=Wg("span"),t.textContent=`${chrome.i18n.getMessage("error_message_session_expired")}`},m(e,n){zg(e,t,n)},p:mg,i:mg,o:mg,d(e){e&&Hg(t)}}}class Fv extends Qh{constructor(e){super(),Jh(this,e,null,Hv,yg,{})}}function Wv(e){let t;return{c(){t=Wg("span"),t.textContent=`${chrome.i18n.getMessage("full_page_translation_error_exceeds_char_limit")}`},m(e,n){zg(e,t,n)},p:mg,i:mg,o:mg,d(e){e&&Hg(t)}}}class jv extends Qh{constructor(e){super(),Jh(this,e,null,Wv,yg,{})}}function qv(e,t,n){const o=e.slice();return o[5]=t[n],o}function Gv(e){let t,n=e[5].text+"";return{c(){t=qg(n)},m(e,n){zg(e,t,n)},p(e,o){4&o&&n!==(n=e[5].text+"")&&Jg(t,n)},d(e){e&&Hg(t)}}}function Vv(e){let t,n,o=e[5].text+"";return{c(){t=Wg("strong"),n=qg(o)},m(e,o){zg(e,t,o),Pg(t,n)},p(e,t){4&t&&o!==(o=e[5].text+"")&&Jg(n,o)},d(e){e&&Hg(t)}}}function Yv(e){let t;function n(e,t){return"strong"===e[5].block?Vv:Gv}let o=n(e),i=o(e);return{c(){i.c(),t=Vg()},m(e,n){i.m(e,n),zg(e,t,n)},p(e,r){o===(o=n(e))&&i?i.p(e,r):(i.d(1),i=o(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){e&&Hg(t),i.d(e)}}}function Zv(e){let t,n,o,i;return{c(){t=jg("svg"),n=jg("path"),Xg(n,"d","M4 12L12 4M4 4L12 12"),Xg(n,"stroke","white"),Xg(n,"stroke-width","1.5"),Xg(n,"stroke-linecap","round"),Xg(n,"stroke-linejoin","round"),Xg(t,"width","16"),Xg(t,"height","16"),Xg(t,"viewBox","0 0 16 16"),Xg(t,"fill","none"),Xg(t,"xmlns","http://www.w3.org/2000/svg"),Xg(t,"class","svelte-1mvy8b2")},m(r,s){zg(r,t,s),Pg(t,n),o||(i=Yg(t,"click",(function(){vg(e[1])&&e[1].apply(this,arguments)})),o=!0)},p(t,n){e=t},d(e){e&&Hg(t),o=!1,i()}}}function Kv(e){let t,n,o,i,r,s,a,l,c,d,u,p,m,g=Vh(Bf(chrome.i18n.getMessage("notification_anonymous_user_limit_exceeded_description",e[2]),["strong"])),h=[];for(let t=0;t<g.length;t+=1)h[t]=Yv(qv(e,g,t));let f=e[1]&&Zv(e);return{c(){t=Wg("div"),n=Wg("div"),o=Wg("h1"),o.textContent=`${chrome.i18n.getMessage("notification_anonymous_user_limit_exceeded_headline")}`,i=Gg(),r=Wg("p");for(let e=0;e<h.length;e+=1)h[e].c();s=Gg(),a=Wg("div"),l=Wg("button"),l.textContent=`${chrome.i18n.getMessage("notification_anonymous_user_limit_exceeded_login_button")}`,c=Gg(),d=Wg("button"),d.textContent=`${chrome.i18n.getMessage("notification_anonymous_user_limit_exceeded_signup_button")}`,u=Gg(),f&&f.c(),Xg(o,"class","svelte-1mvy8b2"),Xg(r,"class","description svelte-1mvy8b2"),Xg(n,"class","messages svelte-1mvy8b2"),ih(n,"small",e[0].small),Xg(l,"class","log-in svelte-1mvy8b2"),Xg(d,"class","sign-up svelte-1mvy8b2"),Xg(a,"class","actions svelte-1mvy8b2"),ih(a,"small",e[0].small),Xg(t,"class","container svelte-1mvy8b2"),Xg(t,"data-testid","error-message-anonymous-limit-exceeded"),ih(t,"small",e[0].small)},m(g,_){zg(g,t,_),Pg(t,n),Pg(n,o),Pg(n,i),Pg(n,r);for(let e=0;e<h.length;e+=1)h[e]&&h[e].m(r,null);Pg(t,s),Pg(t,a),Pg(a,l),Pg(a,c),Pg(a,d),Pg(t,u),f&&f.m(t,null),p||(m=[Yg(l,"click",e[3]),Yg(d,"click",e[4])],p=!0)},p(e,[o]){if(4&o){let t;for(g=Vh(Bf(chrome.i18n.getMessage("notification_anonymous_user_limit_exceeded_description",e[2]),["strong"])),t=0;t<g.length;t+=1){const n=qv(e,g,t);h[t]?h[t].p(n,o):(h[t]=Yv(n),h[t].c(),h[t].m(r,null))}for(;t<h.length;t+=1)h[t].d(1);h.length=g.length}1&o&&ih(n,"small",e[0].small),1&o&&ih(a,"small",e[0].small),e[1]?f?f.p(e,o):(f=Zv(e),f.c(),f.m(t,null)):f&&(f.d(1),f=null),1&o&&ih(t,"small",e[0].small)},i:mg,o:mg,d(e){e&&Hg(t),Fg(h,e),f&&f.d(),p=!1,_g(m)}}}function Xv(e,n,o){let{config:i}=n,{close:r}=n,s="";return hh((()=>{t({action:"dlGetUsersCharacterLimit"}).then((e=>o(2,s=e.toString()))),t({action:"dlTrackUpgradeNotificationIsDisplayed",payload:{type:De}})})),fh((()=>{t({action:"dlTrackUpgradeNotificationClosed",payload:{type:De}})})),e.$$set=e=>{"config"in e&&o(0,i=e.config),"close"in e&&o(1,r=e.close)},[i,r,s,function(){t({action:"dlRequestLogin"}).then((()=>{})).catch((e=>{console.log(e)})),t({action:"dlTrackUpgradeNotificationAction",payload:{type:De,cta:He}})},function(){t({action:"dlExternalURLRedirect",payload:{destination:av,utmContent:"notification_anonymous_user_limit_exceeded"}}),t({action:"dlTrackUpgradeNotificationAction",payload:{type:De,cta:Fe}})}]}class Jv extends Qh{constructor(e){super(),Jh(this,e,Xv,Kv,yg,{config:0,close:1})}}function Qv(e,t,n){const o=e.slice();return o[4]=t[n],o}function ey(e){let t,n=e[4].text+"";return{c(){t=qg(n)},m(e,n){zg(e,t,n)},p(e,o){4&o&&n!==(n=e[4].text+"")&&Jg(t,n)},d(e){e&&Hg(t)}}}function ty(e){let t,n,o=e[4].text+"";return{c(){t=Wg("strong"),n=qg(o)},m(e,o){zg(e,t,o),Pg(t,n)},p(e,t){4&t&&o!==(o=e[4].text+"")&&Jg(n,o)},d(e){e&&Hg(t)}}}function ny(e){let t;function n(e,t){return"strong"===e[4].block?ty:ey}let o=n(e),i=o(e);return{c(){i.c(),t=Vg()},m(e,n){i.m(e,n),zg(e,t,n)},p(e,r){o===(o=n(e))&&i?i.p(e,r):(i.d(1),i=o(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){e&&Hg(t),i.d(e)}}}function oy(e){let t,n,o,i;return{c(){t=jg("svg"),n=jg("path"),Xg(n,"d","M4 12L12 4M4 4L12 12"),Xg(n,"stroke","white"),Xg(n,"stroke-width","1.5"),Xg(n,"stroke-linecap","round"),Xg(n,"stroke-linejoin","round"),Xg(t,"width","16"),Xg(t,"height","16"),Xg(t,"viewBox","0 0 16 16"),Xg(t,"fill","none"),Xg(t,"xmlns","http://www.w3.org/2000/svg"),Xg(t,"class","svelte-1i5r4eu")},m(r,s){zg(r,t,s),Pg(t,n),o||(i=Yg(t,"click",(function(){vg(e[1])&&e[1].apply(this,arguments)})),o=!0)},p(t,n){e=t},d(e){e&&Hg(t),o=!1,i()}}}function iy(e){let t,n,o,i,r,s,a,l,c,d,u,p=Vh(Bf(chrome.i18n.getMessage("notification_free_account_limit_exceeded_description",e[2]),["strong"])),m=[];for(let t=0;t<p.length;t+=1)m[t]=ny(Qv(e,p,t));let g=e[1]&&oy(e);return{c(){t=Wg("div"),n=Wg("div"),o=Wg("h1"),o.textContent=`${chrome.i18n.getMessage("notification_free_account_limit_exceeded_headline")}`,i=Gg(),r=Wg("p");for(let e=0;e<m.length;e+=1)m[e].c();s=Gg(),a=Wg("div"),l=Wg("button"),l.textContent=`${chrome.i18n.getMessage("notification_free_account_limit_exceeded_signup_button")}`,c=Gg(),g&&g.c(),Xg(o,"class","svelte-1i5r4eu"),Xg(r,"class","description svelte-1i5r4eu"),Xg(n,"class","messages svelte-1i5r4eu"),ih(n,"small",e[0].small),Xg(l,"class","sign-up svelte-1i5r4eu"),Xg(a,"class","actions svelte-1i5r4eu"),ih(a,"small",e[0].small),Xg(t,"class","container svelte-1i5r4eu"),Xg(t,"data-testid","error-message-limit-exceeded-free-account"),ih(t,"small",e[0].small)},m(p,h){zg(p,t,h),Pg(t,n),Pg(n,o),Pg(n,i),Pg(n,r);for(let e=0;e<m.length;e+=1)m[e]&&m[e].m(r,null);Pg(t,s),Pg(t,a),Pg(a,l),Pg(t,c),g&&g.m(t,null),d||(u=Yg(l,"click",e[3]),d=!0)},p(e,[o]){if(4&o){let t;for(p=Vh(Bf(chrome.i18n.getMessage("notification_free_account_limit_exceeded_description",e[2]),["strong"])),t=0;t<p.length;t+=1){const n=Qv(e,p,t);m[t]?m[t].p(n,o):(m[t]=ny(n),m[t].c(),m[t].m(r,null))}for(;t<m.length;t+=1)m[t].d(1);m.length=p.length}1&o&&ih(n,"small",e[0].small),1&o&&ih(a,"small",e[0].small),e[1]?g?g.p(e,o):(g=oy(e),g.c(),g.m(t,null)):g&&(g.d(1),g=null),1&o&&ih(t,"small",e[0].small)},i:mg,o:mg,d(e){e&&Hg(t),Fg(m,e),g&&g.d(),d=!1,u()}}}function ry(e,n,o){let{config:i}=n,{close:r}=n,s="";return hh((()=>{t({action:"dlGetUsersCharacterLimit"}).then((e=>o(2,s=e.toString()))),t({action:"dlTrackUpgradeNotificationIsDisplayed",payload:{type:Pe}})})),fh((()=>{t({action:"dlTrackUpgradeNotificationClosed",payload:{type:Pe}})})),e.$$set=e=>{"config"in e&&o(0,i=e.config),"close"in e&&o(1,r=e.close)},[i,r,s,function(){t({action:"dlExternalURLRedirect",payload:{destination:av,utmContent:"notification_free_account_limit_exceeded"}}),t({action:"dlTrackUpgradeNotificationAction",payload:{type:Pe,cta:ze}})}]}class sy extends Qh{constructor(e){super(),Jh(this,e,ry,iy,yg,{config:0,close:1})}}function ay(e){let t,n,o,i;return{c(){t=jg("svg"),n=jg("path"),Xg(n,"d","M4 12L12 4M4 4L12 12"),Xg(n,"stroke","white"),Xg(n,"stroke-width","1.5"),Xg(n,"stroke-linecap","round"),Xg(n,"stroke-linejoin","round"),Xg(t,"width","16"),Xg(t,"height","16"),Xg(t,"viewBox","0 0 16 16"),Xg(t,"fill","none"),Xg(t,"xmlns","http://www.w3.org/2000/svg"),Xg(t,"class","svelte-1uko7yn")},m(r,s){zg(r,t,s),Pg(t,n),o||(i=Yg(t,"click",(function(){vg(e[1])&&e[1].apply(this,arguments)})),o=!0)},p(t,n){e=t},d(e){e&&Hg(t),o=!1,i()}}}function ly(e){let t,n,o,i,r,s,a,l,c,d,u,p=chrome.i18n.getMessage("limit_popup_translator_subscribe_to_paid_body")+"",m=e[1]&&ay(e);return{c(){t=Wg("div"),n=Wg("div"),o=Wg("h1"),o.textContent=`${chrome.i18n.getMessage("limit_popup_translator_free_title")}`,i=Gg(),r=Wg("p"),s=Gg(),a=Wg("div"),l=Wg("button"),l.textContent=`${chrome.i18n.getMessage("limit_popup_upgrade_translator_cta")}`,c=Gg(),m&&m.c(),Xg(o,"class","svelte-1uko7yn"),Xg(r,"class","description svelte-1uko7yn"),Xg(n,"class","messages small svelte-1uko7yn"),ih(n,"small",e[0].small),Xg(l,"class","sign-up svelte-1uko7yn"),Xg(a,"class","actions svelte-1uko7yn"),ih(a,"small",e[0].small),Xg(t,"class","container svelte-1uko7yn"),Xg(t,"data-testid","error-message-limit-exceeded-translator-free-write-pro"),ih(t,"small",e[0].small)},m(g,h){zg(g,t,h),Pg(t,n),Pg(n,o),Pg(n,i),Pg(n,r),r.innerHTML=p,Pg(t,s),Pg(t,a),Pg(a,l),Pg(t,c),m&&m.m(t,null),d||(u=Yg(l,"click",e[2]),d=!0)},p(e,[o]){1&o&&ih(n,"small",e[0].small),1&o&&ih(a,"small",e[0].small),e[1]?m?m.p(e,o):(m=ay(e),m.c(),m.m(t,null)):m&&(m.d(1),m=null),1&o&&ih(t,"small",e[0].small)},i:mg,o:mg,d(e){e&&Hg(t),m&&m.d(),d=!1,u()}}}function cy(e,n,o){let{config:i}=n,{close:r}=n;return hh((()=>{t({action:"dlTrackUpgradeNotificationIsDisplayed",payload:{type:Pe}})})),fh((()=>{t({action:"dlTrackUpgradeNotificationClosed",payload:{type:Pe}})})),e.$$set=e=>{"config"in e&&o(0,i=e.config),"close"in e&&o(1,r=e.close)},[i,r,function(){t({action:"dlExternalURLRedirect",payload:{destination:av,utmContent:"notification_translator_limit_exceeded_with_write_pro"}}),t({action:"dlTrackUpgradeNotificationAction",payload:{type:Pe,cta:ze}})}]}class dy extends Qh{constructor(e){super(),Jh(this,e,cy,ly,yg,{config:0,close:1})}}function uy(e){let t,n,o;return{c(){t=Wg("button"),t.textContent=`${chrome.i18n.getMessage("notification_anonymous_user_limit_exceeded_login_button")}`,Xg(t,"class","log-in svelte-1tmoo4x")},m(i,r){zg(i,t,r),n||(o=Yg(t,"click",e[4]),n=!0)},p:mg,d(e){e&&Hg(t),n=!1,o()}}}function py(e){let t,n,o,i;return{c(){t=jg("svg"),n=jg("path"),Xg(n,"d","M4 12L12 4M4 4L12 12"),Xg(n,"stroke","white"),Xg(n,"stroke-width","1.5"),Xg(n,"stroke-linecap","round"),Xg(n,"stroke-linejoin","round"),Xg(t,"width","16"),Xg(t,"height","16"),Xg(t,"viewBox","0 0 16 16"),Xg(t,"fill","none"),Xg(t,"xmlns","http://www.w3.org/2000/svg"),Xg(t,"class","svelte-1tmoo4x")},m(r,s){zg(r,t,s),Pg(t,n),o||(i=Yg(t,"click",(function(){vg(e[1])&&e[1].apply(this,arguments)})),o=!0)},p(t,n){e=t},d(e){e&&Hg(t),o=!1,i()}}}function my(e){let t,n,o,i,r,s,a,l,c,d,u,p,m=chrome.i18n.getMessage("limit_popup_write_anon_free_body")+"",g=!e[2]&&uy(e),h=e[1]&&py(e);return{c(){t=Wg("div"),n=Wg("div"),o=Wg("h1"),o.textContent=`${chrome.i18n.getMessage("limit_popup_write_title")}`,i=Gg(),r=Wg("p"),s=Gg(),a=Wg("div"),g&&g.c(),l=Gg(),c=Wg("button"),c.textContent=`${chrome.i18n.getMessage("limit_popup_try_for_free_cta")}`,d=Gg(),h&&h.c(),Xg(o,"class","svelte-1tmoo4x"),Xg(r,"class","description svelte-1tmoo4x"),Xg(n,"class","messages svelte-1tmoo4x"),ih(n,"small",e[0].small),Xg(c,"class","sign-up svelte-1tmoo4x"),Xg(a,"class","actions svelte-1tmoo4x"),ih(a,"small",e[0].small),Xg(t,"class","container svelte-1tmoo4x"),Xg(t,"data-testid","error-message-limit-exceeded-translator-free-write-anon-or-free"),ih(t,"small",e[0].small)},m(f,_){zg(f,t,_),Pg(t,n),Pg(n,o),Pg(n,i),Pg(n,r),r.innerHTML=m,Pg(t,s),Pg(t,a),g&&g.m(a,null),Pg(a,l),Pg(a,c),Pg(t,d),h&&h.m(t,null),u||(p=Yg(c,"click",e[3]),u=!0)},p(e,[o]){1&o&&ih(n,"small",e[0].small),e[2]?g&&(g.d(1),g=null):g?g.p(e,o):(g=uy(e),g.c(),g.m(a,l)),1&o&&ih(a,"small",e[0].small),e[1]?h?h.p(e,o):(h=py(e),h.c(),h.m(t,null)):h&&(h.d(1),h=null),1&o&&ih(t,"small",e[0].small)},i:mg,o:mg,d(e){e&&Hg(t),g&&g.d(),h&&h.d(),u=!1,p()}}}function gy(e,n,o){let i,r;bg(e,nf,(e=>o(5,r=e)));let{config:s}=n,{close:a}=n;return hh((()=>{t({action:"dlTrackUpgradeNotificationIsDisplayed",payload:{type:i?Ue:Be}})})),fh((()=>{t({action:"dlTrackUpgradeNotificationClosed",payload:{type:i?Ue:Be}})})),e.$$set=e=>{"config"in e&&o(0,s=e.config),"close"in e&&o(1,a=e.close)},e.$$.update=()=>{32&e.$$.dirty&&o(2,i=Qe(r))},[s,a,i,function(){let e="notification_free_account_limit_exceeded_write";if(s&&s.nicheIntegration)switch(s.nicheIntegration){case ie.gmail:e="gmail_customization_write";break;case ie.gslides:e="gslides_customization_write"}t({action:"dlExternalURLRedirect",payload:{destination:lv,utmContent:e}}),t({action:"dlTrackUpgradeNotificationAction",payload:{type:i?Ue:Be,cta:ze}})},function(){t({action:"dlRequestLogin"}).then((()=>{})).catch((e=>{console.log(e)})),t({action:"dlTrackUpgradeNotificationAction",payload:{type:i?Ue:Be,cta:He}})},r]}class hy extends Qh{constructor(e){super(),Jh(this,e,gy,my,yg,{config:0,close:1})}}function fy(e){let t,n,o,i;return{c(){t=jg("svg"),n=jg("path"),Xg(n,"d","M4 12L12 4M4 4L12 12"),Xg(n,"stroke","white"),Xg(n,"stroke-width","1.5"),Xg(n,"stroke-linecap","round"),Xg(n,"stroke-linejoin","round"),Xg(t,"width","16"),Xg(t,"height","16"),Xg(t,"viewBox","0 0 16 16"),Xg(t,"fill","none"),Xg(t,"xmlns","http://www.w3.org/2000/svg"),Xg(t,"class","svelte-1i5r4eu")},m(r,s){zg(r,t,s),Pg(t,n),o||(i=Yg(t,"click",(function(){vg(e[1])&&e[1].apply(this,arguments)})),o=!0)},p(t,n){e=t},d(e){e&&Hg(t),o=!1,i()}}}function _y(e){let t,n,o,i,r,s,a,l,c,d,u,p=chrome.i18n.getMessage("limit_popup_write_anon_free_body")+"",m=e[1]&&fy(e);return{c(){t=Wg("div"),n=Wg("div"),o=Wg("h1"),o.textContent=`${chrome.i18n.getMessage("limit_popup_write_title")}`,i=Gg(),r=Wg("p"),s=Gg(),a=Wg("div"),l=Wg("button"),l.textContent=`${chrome.i18n.getMessage("limit_popup_upgrade_write_cta")}`,c=Gg(),m&&m.c(),Xg(o,"class","svelte-1i5r4eu"),Xg(r,"class","description svelte-1i5r4eu"),Xg(n,"class","messages svelte-1i5r4eu"),ih(n,"small",e[0].small),Xg(l,"class","sign-up svelte-1i5r4eu"),Xg(a,"class","actions svelte-1i5r4eu"),ih(a,"small",e[0].small),Xg(t,"class","container svelte-1i5r4eu"),Xg(t,"data-testid","error-message-limit-exceeded-translator-pro-write-anon-or-free"),ih(t,"small",e[0].small)},m(g,h){zg(g,t,h),Pg(t,n),Pg(n,o),Pg(n,i),Pg(n,r),r.innerHTML=p,Pg(t,s),Pg(t,a),Pg(a,l),Pg(t,c),m&&m.m(t,null),d||(u=Yg(l,"click",e[2]),d=!0)},p(e,[o]){1&o&&ih(n,"small",e[0].small),1&o&&ih(a,"small",e[0].small),e[1]?m?m.p(e,o):(m=fy(e),m.c(),m.m(t,null)):m&&(m.d(1),m=null),1&o&&ih(t,"small",e[0].small)},i:mg,o:mg,d(e){e&&Hg(t),m&&m.d(),d=!1,u()}}}function vy(e,n,o){let i,r;bg(e,nf,(e=>o(3,r=e)));let{config:s}=n,{close:a}=n;return hh((()=>{t({action:"dlTrackUpgradeNotificationIsDisplayed",payload:{type:i?Ue:Be}})})),fh((()=>{t({action:"dlTrackUpgradeNotificationClosed",payload:{type:i?Ue:Be}})})),e.$$set=e=>{"config"in e&&o(0,s=e.config),"close"in e&&o(1,a=e.close)},e.$$.update=()=>{8&e.$$.dirty&&(i=Qe(r))},[s,a,function(){let e="notification_write_limit_exceeded_with_translator_pro";if(s&&s.nicheIntegration)switch(s.nicheIntegration){case ie.gmail:e="gmail_customization_write";break;case ie.gslides:e="gslides_customization_write"}t({action:"dlExternalURLRedirect",payload:{destination:lv,utmContent:e}}),t({action:"dlTrackUpgradeNotificationAction",payload:{type:i?Ue:Be,cta:ze}})},r]}class yy extends Qh{constructor(e){super(),Jh(this,e,vy,_y,yg,{config:0,close:1})}}function wy(e){let t,n,o;var i=e[2];function r(e,t){return{props:{config:e[1],close:e[0]}}}return i&&(t=ah(i,r(e))),{c(){t&&Zh(t.$$.fragment),n=Vg()},m(e,i){t&&Kh(t,e,i),zg(e,n,i),o=!0},p(e,o){if(4&o&&i!==(i=e[2])){if(t){Uh();const e=t;Fh(e.$$.fragment,1,0,(()=>{Xh(e,1)})),zh()}i?(t=ah(i,r(e)),Zh(t.$$.fragment),Hh(t.$$.fragment,1),Kh(t,n.parentNode,n)):t=null}else if(i){const n={};2&o&&(n.config=e[1]),1&o&&(n.close=e[0]),t.$set(n)}},i(e){o||(t&&Hh(t.$$.fragment,e),o=!0)},o(e){t&&Fh(t.$$.fragment,e),o=!1},d(e){e&&Hg(n),t&&Xh(t,e)}}}function by(e){let t,n;return t=new J_({props:{close:e[0],config:e[1],$$slots:{default:[Sy]},$$scope:{ctx:e}}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.close=e[0]),2&n&&(o.config=e[1]),262&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function Ey(e){let t,n;return t=new Y_({props:{close:e[0],config:e[1],$$slots:{default:[Ty]},$$scope:{ctx:e}}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.close=e[0]),2&n&&(o.config=e[1]),262&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function Sy(e){let t,n,o;var i=e[2];function r(e,t){return{props:{config:e[1]}}}return i&&(t=ah(i,r(e))),{c(){t&&Zh(t.$$.fragment),n=Vg()},m(e,i){t&&Kh(t,e,i),zg(e,n,i),o=!0},p(e,o){if(4&o&&i!==(i=e[2])){if(t){Uh();const e=t;Fh(e.$$.fragment,1,0,(()=>{Xh(e,1)})),zh()}i?(t=ah(i,r(e)),Zh(t.$$.fragment),Hh(t.$$.fragment,1),Kh(t,n.parentNode,n)):t=null}else if(i){const n={};2&o&&(n.config=e[1]),t.$set(n)}},i(e){o||(t&&Hh(t.$$.fragment,e),o=!0)},o(e){t&&Fh(t.$$.fragment,e),o=!1},d(e){e&&Hg(n),t&&Xh(t,e)}}}function Ty(e){let t,n,o;var i=e[2];function r(e,t){return{props:{config:e[1]}}}return i&&(t=ah(i,r(e))),{c(){t&&Zh(t.$$.fragment),n=Vg()},m(e,i){t&&Kh(t,e,i),zg(e,n,i),o=!0},p(e,o){if(4&o&&i!==(i=e[2])){if(t){Uh();const e=t;Fh(e.$$.fragment,1,0,(()=>{Xh(e,1)})),zh()}i?(t=ah(i,r(e)),Zh(t.$$.fragment),Hh(t.$$.fragment,1),Kh(t,n.parentNode,n)):t=null}else if(i){const n={};2&o&&(n.config=e[1]),t.$set(n)}},i(e){o||(t&&Hh(t.$$.fragment,e),o=!0)},o(e){t&&Fh(t.$$.fragment,e),o=!1},d(e){e&&Hg(n),t&&Xh(t,e)}}}function xy(e){let t,n,o,i;const r=[Ey,by,wy],s=[];function a(e,t){return e[3]===e[4].SERIOUS||e[3]===e[4].UNKNOWN?0:e[3]===e[4].WARNING?1:e[3]===e[4].CUSTOM?2:-1}return~(t=a(e))&&(n=s[t]=r[t](e)),{c(){n&&n.c(),o=Vg()},m(e,n){~t&&s[t].m(e,n),zg(e,o,n),i=!0},p(e,[i]){let l=t;t=a(e),t===l?~t&&s[t].p(e,i):(n&&(Uh(),Fh(s[l],1,1,(()=>{s[l]=null})),zh()),~t?(n=s[t],n?n.p(e,i):(n=s[t]=r[t](e),n.c()),Hh(n,1),n.m(o.parentNode,o)):n=null)},i(e){i||(Hh(n),i=!0)},o(e){Fh(n),i=!1},d(e){e&&Hg(o),~t&&s[t].d(e)}}}function $y(e,t,n){let i,r,{error:s}=t,{close:a}=t,{config:l={}}=t;const c={UNKNOWN:1,WARNING:2,SERIOUS:3,CUSTOM:4},d={[lf]:ev,[cf]:nv,[df]:iv,[mf]:Av,[k_]:Fv,[I_]:Fv,[L_]:Fv,[A_]:Fv,[pf]:Lv,[hf]:Lv,[vf]:jv,[uf]:$v,[gf]:Bv,[_f]:zv,[yf]:sy,[wf]:Jv,[bf]:dy,[Ef]:hy,[Sf]:yy,[O_]:ev,[N_]:nv,[D_]:iv,[U_]:$v,[B_]:Lv,[F_]:Lv,[P_]:$v,[H_]:Bv,[z_]:Av,[M_]:Bv,[R_]:Bv};return hh((()=>{W_()?o({action:"dlErrorVisibility",payload:{state:!0}}):j_.set(!0)})),fh((()=>{W_()?o({action:"dlErrorVisibility",payload:{state:!1}}):j_.set(!1)})),e.$$set=e=>{"error"in e&&n(5,s=e.error),"close"in e&&n(0,a=e.close),"config"in e&&n(1,l=e.config)},e.$$.update=()=>{32&e.$$.dirty&&n(3,i=function(e){switch(e){case lf:case cf:case df:case mf:case O_:case N_:case D_:case U_:case k_:case I_:case L_:case A_:case _f:return c.SERIOUS;case pf:case hf:case B_:case F_:case vf:case uf:case gf:case P_:case H_:case M_:case R_:return c.WARNING;case yf:case wf:case Ef:case Sf:case bf:return c.CUSTOM;default:return c.UNKNOWN}}(s?s.error:"")),32&e.$$.dirty&&n(2,r=s&&d[s.error]||ev)},[a,l,r,i,c,s]}class Cy extends Qh{constructor(e){super(),Jh(this,e,$y,xy,yg,{error:5,close:0,config:1})}}function ky(e){let t,n,o,i,r,s,a,l,c;return i=new Cy({props:{error:e[3]}}),{c(){t=Wg("div"),n=Wg("button"),o=Gg(),Zh(i.$$.fragment),Xg(n,"class","close-button svelte-6y44uj"),Xg(t,"class","dl-zendesk-error-message svelte-6y44uj"),Xg(t,"dir",Bt())},m(r,s){zg(r,t,s),Pg(t,n),Pg(t,o),Kh(i,t,null),a=!0,l||(c=[Yg(n,"click",e[8]),Lg(c_.call(null,t,{isShadow:!0})),Yg(t,"click_outside",e[8])],l=!0)},p(e,t){const n={};8&t[0]&&(n.error=e[3]),i.$set(n)},i(e){a||(Hh(i.$$.fragment,e),kh((()=>{a&&(s&&s.end(1),r=jh(t,Of,{y:-5,duration:300}),r.start())})),a=!0)},o(e){Fh(i.$$.fragment,e),r&&r.invalidate(),s=qh(t,Of,{y:-5,duration:300}),a=!1},d(e){e&&Hg(t),Xh(i),e&&s&&s.end(),l=!1,_g(c)}}}function Ly(e){let t,n;return t=new C_({props:{value:e[6].zendeskFormality}}),t.$on("selection",e[9]),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};64&n[0]&&(o.value=e[6].zendeskFormality),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function Iy(e){let t,n,o;return{c(){t=Wg("button"),t.innerHTML='<span class="svelte-6y44uj"></span>',Xg(t,"class","dl-zendesk-input-icon svelte-6y44uj"),ih(t,"is-active",e[1]),ih(t,"is-loading",e[2]),ih(t,"is-language-mismatching",e[0])},m(i,r){zg(i,t,r),n||(o=Yg(t,"click",e[7]),n=!0)},p(e,n){2&n[0]&&ih(t,"is-active",e[1]),4&n[0]&&ih(t,"is-loading",e[2]),1&n[0]&&ih(t,"is-language-mismatching",e[0])},d(e){e&&Hg(t),n=!1,o()}}}function Ay(e){let t,n,o,i,r,s=e[3]&&ky(e),a=e[4]&&Ly(e);return i=new h_({props:{tooltip:e[5],zIndex:"0",$$slots:{default:[Iy]},$$scope:{ctx:e}}}),{c(){s&&s.c(),t=Gg(),n=Wg("div"),a&&a.c(),o=Gg(),Zh(i.$$.fragment),Xg(n,"class","dl-icons-holder svelte-6y44uj"),Xg(n,"dir",Bt()),ih(n,"has-formality",e[4])},m(e,l){s&&s.m(e,l),zg(e,t,l),zg(e,n,l),a&&a.m(n,null),Pg(n,o),Kh(i,n,null),r=!0},p(e,l){e[3]?s?(s.p(e,l),8&l[0]&&Hh(s,1)):(s=ky(e),s.c(),Hh(s,1),s.m(t.parentNode,t)):s&&(Uh(),Fh(s,1,1,(()=>{s=null})),zh()),e[4]?a?(a.p(e,l),16&l[0]&&Hh(a,1)):(a=Ly(e),a.c(),Hh(a,1),a.m(n,o)):a&&(Uh(),Fh(a,1,1,(()=>{a=null})),zh());const c={};32&l[0]&&(c.tooltip=e[5]),7&l[0]|4&l[1]&&(c.$$scope={dirty:l,ctx:e}),i.$set(c),(!r||16&l[0])&&ih(n,"has-formality",e[4])},i(e){r||(Hh(s),Hh(a),Hh(i.$$.fragment,e),r=!0)},o(e){Fh(s),Fh(a),Fh(i.$$.fragment,e),r=!1},d(e){e&&(Hg(t),Hg(n)),s&&s.d(e),a&&a.d(),Xh(i)}}}function My(e,n,o){let r,s,a;bg(e,nf,(e=>o(6,a=e))),vh("text_direction",Bt());let l,c,d,u,{controller:p}=n,{editable:m}=n,g=!1,h=!1,f=!1,_=!1,v="",y="",w=!1;const b=()=>{o(1,g=!0)},E=()=>{o(1,g=!1)};async function S(e,n,o){if("dlTriggerTranslationShortcut"===e.action){if(document.activeElement!==m)return;try{t({action:"dlTrackUseOfShortcut",payload:{shortcutType:z,location:U.inputTranslationTriggerIcon}})}catch(e){console.error(e)}await T(),o()}return!0}const T=async()=>{if(_)return;const e=st(),t=()=>{if(e){const e=window.getSelection().toString();navigator.clipboard.writeText(e).then((()=>{x(e)})).catch((e=>{console.error("Unable to copy text to clipboard",e)}))}else{const e=new ClipboardEvent("copy",{bubbles:!0,clipboardData:new DataTransfer});h=!0,m.dispatchEvent(e)}},n=window.getSelection();let o;o=e?n&&n.anchorNode&&"#text"==n.anchorNode.nodeName&&"Range"==n.type&&m.contains(n.anchorNode):n&&n.baseNode&&"#text"==n.baseNode.nodeName&&"Range"==n.type&&m.contains(n.baseNode),0!==m.innerText.trim().length&&(o?t():(await Zf(m),setTimeout(t,300)))},x=async e=>{h=!1,o(2,_=!0),o(0,w=!1);const t=p.getTicketLanguageInformation()?.language,n=p.getInputWorkingArea();n.innerHTML=dt(e);const[i,s]=await kP({element:n,targetLang:t,...r&&["formal","informal"].includes(a.zendeskFormality)&&{formality:a.zendeskFormality}});s?(console.error({e:s}),o(3,d=s),zP({eventType:he,controller:p,error:s.error||s.message})):i&&k(i,e),o(2,_=!1)},$=async e=>{if(!h)return;h=!1,o(2,_=!0),o(0,w=!1);const t=p.getTicketLanguageInformation()?.language,n=e.clipboardData.getData("text/html"),i=p.getInputWorkingArea();i.innerHTML=dt(n);const[s,l]=await kP({element:i,targetLang:t,...r&&["formal","informal"].includes(a.zendeskFormality)&&{formality:a.zendeskFormality}});l?(console.error({e:l}),o(3,d=l),zP({eventType:he,controller:p,error:l.error||l.message})):s&&k(s,n),o(2,_=!1)},C=()=>{if(!f)return;f=!1;window.getSelection().collapse(null)},k=(e,t)=>{if(st())document.execCommand("insertText",!1,e),f=!0;else{const t=new DataTransfer;t.setData("text/html",e);const n=new ClipboardEvent("paste",{bubbles:!0,clipboardData:t});f=!0,m.dispatchEvent(n)}zP({eventType:ge,controller:p,sourceTextLength:t.length,targetTextLength:e.length})},L=()=>{const e=m.innerText;e!==y&&(y=e,u&&(clearTimeout(u),u=void 0),u=setTimeout(I,400))},I=async()=>{const e=p.getTicketLanguageInformation();if(!e||!e.isSupported||!e.isDetected)return;const t=m.innerText;if(t.trim()){console.log("There has content: ",`${t.trim()}`);let n=await Mt(t),i=e.language;n=Ot(n),i=Ot(i);let r=!1;n&&i&&n!==i&&(r=!0),w!==r&&o(0,w=r)}else console.log("There is no content"),o(0,w=!1),A()},A=()=>{l&&l.resetTooltip()};return hh((()=>{chrome.runtime.onMessage.addListener(S),t({action:"dlCheckCommandShortcuts"}).then((e=>{o(14,v=e?e.filter((e=>e.name==z))[0].shortcut:"")})),m.addEventListener("focus",b),m.addEventListener("blur",E),m.addEventListener("copy",$),m.addEventListener("paste",C),m.addEventListener("keydown",L),l=bE(p),document.activeElement===m&&b()})),fh((()=>{chrome.runtime.onMessage.removeListener(S),m&&(m.removeEventListener("focus",b),m.removeEventListener("blur",E),m.removeEventListener("copy",$),m.removeEventListener("paste",C),m.removeEventListener("keydown",L),l&&(l.cleanupDOM(),l.remove()))})),e.$$set=e=>{"controller"in e&&o(10,p=e.controller),"editable"in e&&o(11,m=e.editable)},e.$$.update=()=>{32768&e.$$.dirty[0]&&o(4,r=Pt(c)),49152&e.$$.dirty[0]&&o(5,s=i.find((e=>e.langCode===c))?chrome.i18n.getMessage("ui_zendesk_input_tooltip")+(v?` (${v})`:""):""),1&e.$$.dirty[0]&&l&&l.setIsLanguageMismatching(w)},[w,g,_,d,r,s,a,T,()=>{o(3,d=void 0)},e=>{const t=e.detail.selectedOption.value;kg(nf,a.zendeskFormality=t,a)},p,m,e=>{o(15,c=e)},()=>{const e=window.getSelection();return e&&e.baseNode&&"#text"==e.baseNode.nodeName&&"Range"==e.type&&m.contains(e.baseNode)},v,c]}class Ry extends Qh{constructor(e){super(),Jh(this,e,My,Ay,yg,{controller:10,editable:11,updateTargetLanguage:12,getInputHasSelection:13},null,[-1,-1])}get updateTargetLanguage(){return this.$$.ctx[12]}get getInputHasSelection(){return this.$$.ctx[13]}}class Oy{static HTML_TAG_NAME="deepl-zendesk-input-icon";static createElement=(e=document)=>{const t=e.createElement(Oy.HTML_TAG_NAME),n=new Oy(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t.getInputHasSelection=n.getInputHasSelection,t.updateTargetLanguage=n.updateTargetLanguage,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer)}createDOM=({controller:e,editable:t})=>{this.domElement.mainComponent=new Ry({target:this.domElement.shadowContainer,props:{onClose:this.cleanupDOM,controller:e,editable:t}})};getInputHasSelection=()=>this.domElement.mainComponent.getInputHasSelection();updateTargetLanguage=e=>{this.domElement.mainComponent?.updateTargetLanguage(e)};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}function Ny(e,t,n){const o=e.slice();return o[16]=t[n],o[18]=n,o}function Dy(e){let t,n,o=!e[0]&&By(e),i=Vh(e[3]),r=[];for(let t=0;t<i.length;t+=1)r[t]=Hy(Ny(e,i,t));return{c(){t=Wg("div"),o&&o.c(),n=Gg();for(let e=0;e<r.length;e+=1)r[e].c();Xg(t,"class","dl-zendesk-translation-placeholder svelte-1xx4hw"),Xg(t,"dir",Bt()),ih(t,"loading-skeleton",e[0])},m(e,i){zg(e,t,i),o&&o.m(t,null),Pg(t,n);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,null)},p(e,s){if(e[0]?o&&(o.d(1),o=null):o?o.p(e,s):(o=By(e),o.c(),o.m(t,n)),8&s){let n;for(i=Vh(e[3]),n=0;n<i.length;n+=1){const o=Ny(e,i,n);r[n]?r[n].p(o,s):(r[n]=Hy(o),r[n].c(),r[n].m(t,null))}for(;n<r.length;n+=1)r[n].d(1);r.length=i.length}1&s&&ih(t,"loading-skeleton",e[0])},i:mg,o:mg,d(e){e&&Hg(t),o&&o.d(),Fg(r,e)}}}function Py(e){let t,n,o;return n=new Cy({props:{error:e[2],close:e[6]}}),{c(){t=Wg("div"),Zh(n.$$.fragment),Xg(t,"class","dl-zendesk-translation-placeholder has-error svelte-1xx4hw")},m(e,i){zg(e,t,i),Kh(n,t,null),o=!0},p(e,t){const o={};4&t&&(o.error=e[2]),n.$set(o)},i(e){o||(Hh(n.$$.fragment,e),o=!0)},o(e){Fh(n.$$.fragment,e),o=!1},d(e){e&&Hg(t),Xh(n)}}}function By(e){let t,n,o;return{c(){t=Wg("button"),Xg(t,"class","close-button svelte-1xx4hw")},m(i,r){zg(i,t,r),n||(o=Yg(t,"click",e[5]),n=!0)},p:mg,d(e){e&&Hg(t),n=!1,o()}}}function Uy(e){let t,n=dt(e[16])+"";return{c(){t=Wg("span"),Xg(t,"class","svelte-1xx4hw")},m(e,o){zg(e,t,o),t.innerHTML=n},p(e,o){8&o&&n!==(n=dt(e[16])+"")&&(t.innerHTML=n)},d(e){e&&Hg(t)}}}function zy(e){let t;return{c(){t=Wg("br")},m(e,n){zg(e,t,n)},d(e){e&&Hg(t)}}}function Hy(e){let t,n,o=e[16]&&Uy(e),i=e[18]<e[3].length-1&&zy();return{c(){o&&o.c(),t=Gg(),i&&i.c(),n=Vg()},m(e,r){o&&o.m(e,r),zg(e,t,r),i&&i.m(e,r),zg(e,n,r)},p(e,r){e[16]?o?o.p(e,r):(o=Uy(e),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null),e[18]<e[3].length-1?i||(i=zy(),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},d(e){e&&(Hg(t),Hg(n)),o&&o.d(e),i&&i.d(e)}}}function Fy(e){let t,n,o,i,r,s,a,l,c;const d=[Py,Dy],u=[];function p(e,t){return e[2]?0:e[1]||e[0]?1:-1}return~(i=p(e))&&(r=u[i]=d[i](e)),{c(){t=Wg("div"),n=Wg("button"),n.textContent=`${chrome.i18n.getMessage("ui_zendesk_message_translate")}`,o=Gg(),r&&r.c(),s=Vg(),Xg(n,"class","dl-zendesk-translate-this-ticket svelte-1xx4hw"),Xg(t,"dir",Bt())},m(r,d){zg(r,t,d),Pg(t,n),zg(r,o,d),~i&&u[i].m(r,d),zg(r,s,d),a=!0,l||(c=Yg(n,"click",e[4]),l=!0)},p(e,[t]){let n=i;i=p(e),i===n?~i&&u[i].p(e,t):(r&&(Uh(),Fh(u[n],1,1,(()=>{u[n]=null})),zh()),~i?(r=u[i],r?r.p(e,t):(r=u[i]=d[i](e),r.c()),Hh(r,1),r.m(s.parentNode,s)):r=null)},i(e){a||(Hh(r),a=!0)},o(e){Fh(r),a=!1},d(e){e&&(Hg(t),Hg(o),Hg(s)),~i&&u[i].d(e),l=!1,c()}}}function Wy(e,t,n){let o,i;bg(e,nf,(e=>n(14,i=e))),vh("text_direction",Bt());let r,{controller:s}=t,{message:a}=t,l=!1,c=!1,d=!1,u="",p=!1;const m=async({trigger:e})=>{n(1,d=!1),n(0,l=!0),n(2,r=void 0);let t=lE(a).innerText;n(11,u=t);const[o,c]=await LP({targetLang:i.selectedTargetLanguage,sourceLang:s.getTicketLanguageInformation()?.language,text:t,trigger:e});if(c)n(11,u=""),n(1,d=!1),n(2,r=c),p=!0,zP({eventType:he,controller:s,error:c.error||c.message});else if(o){n(11,u=o),n(1,d=!0),zP({eventType:me,controller:s,sourceTextLength:t.length,targetTextLength:u.length})}else n(1,d=!0);n(0,l=!1)};return e.$$set=e=>{"controller"in e&&n(7,s=e.controller),"message"in e&&n(8,a=e.message)},e.$$.update=()=>{2048&e.$$.dirty&&n(3,o=u.split("\n"))},[l,d,r,o,()=>{l||m({trigger:_})},()=>{n(1,d=!1),n(0,l=!1),n(11,u=""),s.getIsAutoTranslatedEnabled()&&(c=!0)},()=>{n(2,r=void 0)},s,a,()=>{!s.getIsAutoTranslatedEnabled()||d||l||c||p||m({trigger:f})},()=>{!d||l||c||m({trigger:_})},u]}class jy extends Qh{constructor(e){super(),Jh(this,e,Wy,Fy,yg,{controller:7,message:8,processRefreshUI:9,triggerTranslateAgain:10})}get processRefreshUI(){return this.$$.ctx[9]}get triggerTranslateAgain(){return this.$$.ctx[10]}}class qy{static HTML_TAG_NAME="deepl-zendesk-message-controller";static createElement=(e=document)=>{const t=e.createElement(qy.HTML_TAG_NAME),n=new qy(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t.processRefreshUI=n.processRefreshUI,t.triggerTranslateAgain=n.triggerTranslateAgain,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer)}createDOM=({controller:e,message:t})=>{this.domElement.mainComponent=new jy({target:this.domElement.shadowContainer,props:{onClose:this.cleanupDOM,controller:e,message:t}})};processRefreshUI=()=>{this.domElement.mainComponent.processRefreshUI()};triggerTranslateAgain=()=>{this.domElement.mainComponent.triggerTranslateAgain()};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}function Gy(e){let t,n,o,i,r,s,a,l,c,d=chrome.i18n.getMessage("ui_zendesk_input_language_mismatch")+"";return{c(){t=Wg("div"),n=Wg("button"),o=Gg(),i=qg(d),Xg(n,"class","dismiss-tooltip svelte-p7jbvt"),Xg(t,"class","dl-zendesk-submit-button-tooltip svelte-p7jbvt"),eh(t,"max-width",(e[1].width||0)+"px"),eh(t,"bottom",e[0].height+12+"px"),Xg(t,"dir",Bt())},m(r,s){zg(r,t,s),Pg(t,n),Pg(t,o),Pg(t,i),a=!0,l||(c=Yg(n,"click",e[4]),l=!0)},p(e,n){(!a||2&n)&&eh(t,"max-width",(e[1].width||0)+"px"),(!a||1&n)&&eh(t,"bottom",e[0].height+12+"px")},i(e){a||(kh((()=>{a&&(s&&s.end(1),r=jh(t,Of,{y:-5,duration:500}),r.start())})),a=!0)},o(e){r&&r.invalidate(),s=qh(t,Of,{y:-5,duration:500}),a=!1},d(e){e&&Hg(t),e&&s&&s.end(),l=!1,c()}}}function Vy(e){let t,n,o=e[2]&&!e[3]&&Gy(e);return{c(){o&&o.c(),t=Vg()},m(e,i){o&&o.m(e,i),zg(e,t,i),n=!0},p(e,[n]){e[2]&&!e[3]?o?(o.p(e,n),12&n&&Hh(o,1)):(o=Gy(e),o.c(),Hh(o,1),o.m(t.parentNode,t)):o&&(Uh(),Fh(o,1,1,(()=>{o=null})),zh())},i(e){n||(Hh(o),n=!0)},o(e){Fh(o),n=!1},d(e){e&&Hg(t),o&&o.d(e)}}}function Yy(e,t,n){vh("text_direction",Bt());let{coords:o}=t,{containerCoords:i}=t,r=!1,s=!1;return e.$$set=e=>{"coords"in e&&n(0,o=e.coords),"containerCoords"in e&&n(1,i=e.containerCoords)},[o,i,r,s,()=>{n(3,s=!0)},e=>{n(2,r=e)},()=>{console.log("Resetting tooltip..."),n(2,r=!1),n(3,s=!1)}]}class Zy extends Qh{constructor(e){super(),Jh(this,e,Yy,Vy,yg,{coords:0,containerCoords:1,setIsLanguageMismatching:5,resetTooltip:6})}get setIsLanguageMismatching(){return this.$$.ctx[5]}get resetTooltip(){return this.$$.ctx[6]}}class Ky{static HTML_TAG_NAME="deepl-zendesk-submit-button-tooltip";static createElement=(e=document)=>{const t=e.createElement(Ky.HTML_TAG_NAME),n=new Ky(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t.setIsLanguageMismatching=n.setIsLanguageMismatching,t.resetTooltip=n.resetTooltip,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer)}createDOM=({coords:e,containerCoords:t})=>{this.domElement.mainComponent=new Zy({target:this.domElement.shadowContainer,props:{onClose:this.cleanupDOM,coords:e,containerCoords:t}})};setIsLanguageMismatching=e=>{this.domElement.mainComponent?.setIsLanguageMismatching(e)};resetTooltip=()=>{this.domElement.mainComponent?.resetTooltip()};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}function Xy(e){let t,n,o;return{c(){t=Wg("div"),n=Gg(),o=Wg("div"),Xg(t,"class","dl-zendesk-icon svelte-i3vxpb"),Xg(o,"class","dl-zendesk-working-area svelte-i3vxpb")},m(e,i){zg(e,t,i),zg(e,n,i),zg(e,o,i)},p:mg,i:mg,o:mg,d(e){e&&(Hg(t),Hg(n),Hg(o))}}}function Jy(e,t,n){let o;bg(e,nf,(e=>n(17,o=e))),vh("text_direction",Bt());let r,{pane:s}=t,{ticketId:a}=t,{controller:l}=t,c={language:"",isDetected:!1,isSupported:!1,hasAttemptedLanguageDetection:!1},d=!1;const u={inputIconLanguageUpdate:void 0,topIconLanguageUpdate:void 0,toolbarLanguageUpdate:void 0,toolbarAutoTranslateStatus:void 0,ticketTypeDetection:void 0},p=(e,t)=>{u[e]=t},m=()=>{for(const e of Object.keys(u))if(u[e]){u[e]()&&(u[e]=void 0)}},g=async()=>{if(!r)return;let e;try{switch(r){case fe:e=await cE(s);break;case _e:e=await dE(s)}}catch(e){rn()&&console.error({e:e})}e&&(e=Ot(e),n(13,c.hasAttemptedLanguageDetection=!0,c),n(13,c.language=e,c),n(13,c.isDetected=!0,c),n(13,c.isSupported=!!i.find((t=>t.langCode===e)),c),zP({eventType:ce,controller:l}),EE(s))};return hh((()=>{zP({eventType:le,controller:l}),p("ticketTypeDetection",(()=>{const e=iE(s);return!!e&&(r=e,g(),!0)}))})),e.$$set=e=>{"pane"in e&&n(0,s=e.pane),"ticketId"in e&&n(1,a=e.ticketId),"controller"in e&&n(2,l=e.controller)},e.$$.update=()=>{8193&e.$$.dirty&&p("toolbarLanguageUpdate",(()=>uE(s,{language:c.language,isDetected:c.isDetected,isSupported:c.isSupported}))),8193&e.$$.dirty&&(p("inputIconLanguageUpdate",(()=>gE(s,c.language))),p("topIconLanguageUpdate",(()=>mE(s)))),16385&e.$$.dirty&&p("toolbarAutoTranslateStatus",(()=>{pE(s,{isEnabled:d})}))},[s,a,l,()=>s,()=>a,()=>c,()=>d,e=>{n(13,c.language=e.language,c),n(13,c.isDetected=e.isDetected,c),n(13,c.isSupported=e.isSupported,c)},e=>{n(14,d=e)},()=>r,e=>{r=e},async(e=!1)=>{if(e&&n(13,c={language:"",isDetected:!1,isSupported:!1,hasAttemptedLanguageDetection:!1}),c.hasAttemptedLanguageDetection||await g(),Xb(l,o.isZendeskEnabled),c.isSupported&&o.isZendeskEnabled){hE(l);for(const e of rE(s)){const t=fE(e);t&&t.processRefreshUI()}}yE(s),m()},()=>{wE(s)},c,d]}class Qy extends Qh{constructor(e){super(),Jh(this,e,Jy,Xy,yg,{pane:0,ticketId:1,controller:2,getPane:3,getTicketId:4,getTicketLanguageInformation:5,getIsAutoTranslatedEnabled:6,setLanguageInformation:7,setIsAutoTranslateEnabled:8,getTicketType:9,setTicketType:10,processRefreshUI:11,getInputHasSelection:12})}get getPane(){return this.$$.ctx[3]}get getTicketId(){return this.$$.ctx[4]}get getTicketLanguageInformation(){return this.$$.ctx[5]}get getIsAutoTranslatedEnabled(){return this.$$.ctx[6]}get setLanguageInformation(){return this.$$.ctx[7]}get setIsAutoTranslateEnabled(){return this.$$.ctx[8]}get getTicketType(){return this.$$.ctx[9]}get setTicketType(){return this.$$.ctx[10]}get processRefreshUI(){return this.$$.ctx[11]}get getInputHasSelection(){return this.$$.ctx[12]}}class ew{static HTML_TAG_NAME="deepl-zendesk-ticket-controller";static createElement=(e=document)=>{const t=e.createElement(ew.HTML_TAG_NAME),n=new ew(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t.getTicketId=n.getTicketId,t.getPane=n.getPane,t.getTicketLanguageInformation=n.getTicketLanguageInformation,t.getIsAutoTranslatedEnabled=n.getIsAutoTranslatedEnabled,t.setIsAutoTranslateEnabled=n.setIsAutoTranslateEnabled,t.getInputWorkingArea=n.getInputWorkingArea,t.setLanguageInformation=n.setLanguageInformation,t.getTicketType=n.getTicketType,t.setTicketType=n.setTicketType,t.processRefreshUI=n.processRefreshUI,t.getInputHasSelection=n.getInputHasSelection,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer)}createDOM=({ticketId:e,pane:t})=>{this.domElement.mainComponent=new Qy({target:this.domElement.shadowContainer,props:{onClose:this.cleanupDOM,controller:this.domElement,ticketId:e,pane:t}})};getTicketId=()=>this.domElement.mainComponent?.getTicketId();getPane=()=>this.domElement.mainComponent?.getPane();getTicketLanguageInformation=()=>this.domElement.mainComponent?.getTicketLanguageInformation();getIsAutoTranslatedEnabled=()=>this.domElement.mainComponent?.getIsAutoTranslatedEnabled();setIsAutoTranslateEnabled=e=>{this.domElement.mainComponent?.setIsAutoTranslateEnabled(e)};getInputWorkingArea=()=>this.domElement.shadowContainer.querySelector(".dl-zendesk-working-area");setLanguageInformation=e=>{this.domElement.mainComponent?.setLanguageInformation(e)};getTicketType=()=>this.domElement.mainComponent?.getTicketType();setTicketType=e=>{this.domElement.mainComponent?.setTicketType(e)};processRefreshUI=(e=!1)=>{this.domElement.mainComponent.processRefreshUI(e)};getInputHasSelection=()=>this.domElement.mainComponent?.getInputHasSelection();cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}function tw(e){let t,n,o,i,r;return n=new T_({props:{items:e[3],selectedOption:e[2],alignRight:!1,dataQaButton:"deepl-language-selection-button",dataQaList:"deepl-language-selection-list",variant:"zendesk",isFullWidth:e[1],extraText:e[0]?chrome.i18n.getMessage("ui_zendesk_language_detected"):""}}),n.$on("valueselected",e[4]),{c(){t=Wg("div"),Zh(n.$$.fragment)},m(s,a){zg(s,t,a),Kh(n,t,null),o=!0,i||(r=Yg(t,"mousedown",Kg(Zg(e[7]))),i=!0)},p(e,[t]){const o={};8&t&&(o.items=e[3]),4&t&&(o.selectedOption=e[2]),2&t&&(o.isFullWidth=e[1]),1&t&&(o.extraText=e[0]?chrome.i18n.getMessage("ui_zendesk_language_detected"):""),n.$set(o)},i(e){o||(Hh(n.$$.fragment,e),o=!0)},o(e){Fh(n.$$.fragment,e),o=!1},d(e){e&&Hg(t),Xh(n),i=!1,r()}}}function nw(e,t,n){let o,i;const r=_h(),s=Rt();let{value:a}=t,{isDetected:l=!1}=t,{isSupported:c=!0}=t,{isFullWidth:d=!1}=t;const u={label:chrome.i18n.getMessage("writing_config_tab_language_selector_empty"),selectedOptionLabel:chrome.i18n.getMessage("writing_config_tab_language_selector_empty"),value:"NOT_SUPPORTED"};return e.$$set=e=>{"value"in e&&n(5,a=e.value),"isDetected"in e&&n(0,l=e.isDetected),"isSupported"in e&&n(6,c=e.isSupported),"isFullWidth"in e&&n(1,d=e.isFullWidth)},e.$$.update=()=>{64&e.$$.dirty&&n(3,o=[...c?[]:[u],...s]),96&e.$$.dirty&&n(2,i=c?a?s.find((e=>e.value===a)):void 0:u)},[l,d,i,o,function(e){e.detail.selectedOption.value!==a&&r("selection",e.detail)},a,c,function(t){wh.call(this,e,t)}]}class ow extends Qh{constructor(e){super(),Jh(this,e,nw,tw,yg,{value:5,isDetected:0,isSupported:6,isFullWidth:1})}}function iw(e){let t,n,o,i;function r(e,t){return e[1]?aw:sw}let s=r(e),a=s(e);return{c(){t=Wg("button"),a.c(),Xg(t,"class","translate-all svelte-147seig"),t.disabled=n=!e[0].isSupported},m(n,r){zg(n,t,r),a.m(t,null),o||(i=Yg(t,"click",e[6]),o=!0)},p(e,o){s===(s=r(e))&&a?a.p(e,o):(a.d(1),a=s(e),a&&(a.c(),a.m(t,null))),1&o&&n!==(n=!e[0].isSupported)&&(t.disabled=n)},i:mg,o:mg,d(e){e&&Hg(t),a.d(),o=!1,i()}}}function rw(e){let t,n;return t=new h_({props:{tooltip:chrome.i18n.getMessage(e[1]?"ui_zendesk_autotranslate_stop":"ui_zendesk_autotranslate_start"),$$slots:{default:[lw]},$$scope:{ctx:e}}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};2&n&&(o.tooltip=chrome.i18n.getMessage(e[1]?"ui_zendesk_autotranslate_stop":"ui_zendesk_autotranslate_start")),131073&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function sw(e){let t,n=chrome.i18n.getMessage("ui_zendesk_autotranslate_start")+"";return{c(){t=qg(n)},m(e,n){zg(e,t,n)},p:mg,d(e){e&&Hg(t)}}}function aw(e){let t,n=chrome.i18n.getMessage("ui_zendesk_autotranslate_stop")+"";return{c(){t=qg(n)},m(e,n){zg(e,t,n)},p:mg,d(e){e&&Hg(t)}}}function lw(e){let t,n,o,i;return{c(){t=Wg("button"),Xg(t,"class","translate-all btn-icon svelte-147seig"),t.disabled=n=!e[0].isSupported},m(n,r){zg(n,t,r),o||(i=Yg(t,"click",e[6]),o=!0)},p(e,o){1&o&&n!==(n=!e[0].isSupported)&&(t.disabled=n)},d(e){e&&Hg(t),o=!1,i()}}}function cw(e){let t,n,o,i,r,s,a,l,c,d,u,p,m,g,h,f;c=new ow({props:{value:e[0].language,isDetected:e[0].isDetected,isSupported:e[0].isSupported,isFullWidth:"lg"!==e[4]}}),c.$on("selection",e[5]);const _=[rw,iw],v=[];function y(e,t){return"sm"===e[4]?0:1}return p=y(e),m=v[p]=_[p](e),{c(){t=Wg("div"),n=Wg("div"),o=Wg("button"),i=Gg(),r=Wg("div"),s=Wg("div"),s.textContent=`${chrome.i18n.getMessage("ui_zendesk_senders_language")}`,a=Gg(),l=Wg("div"),Zh(c.$$.fragment),d=Gg(),u=Wg("div"),m.c(),Xg(o,"class","senders-language-toggle svelte-147seig"),Xg(s,"class","label svelte-147seig"),Xg(l,"class","dropdown-container svelte-147seig"),Xg(r,"class","container svelte-147seig"),ih(r,"show",e[3]),Xg(n,"class","senders-language svelte-147seig"),Xg(u,"class","translate-all-container"),Xg(t,"class","dl-zendesk-toolbar svelte-147seig"),Xg(t,"dir",Bt()),ih(t,"toolbar-sm","sm"===e[4]),ih(t,"toolbar-md","md"===e[4]),ih(t,"toolbar-lg","lg"===e[4])},m(m,_){zg(m,t,_),Pg(t,n),Pg(n,o),Pg(n,i),Pg(n,r),Pg(r,s),Pg(r,a),Pg(r,l),Kh(c,l,null),Pg(t,d),Pg(t,u),v[p].m(u,null),e[13](t),g=!0,h||(f=[Yg(o,"click",e[7]),Lg(c_.call(null,n,{isShadow:!0})),Yg(n,"click_outside",e[12])],h=!0)},p(e,[n]){const o={};1&n&&(o.value=e[0].language),1&n&&(o.isDetected=e[0].isDetected),1&n&&(o.isSupported=e[0].isSupported),16&n&&(o.isFullWidth="lg"!==e[4]),c.$set(o),(!g||8&n)&&ih(r,"show",e[3]);let i=p;p=y(e),p===i?v[p].p(e,n):(Uh(),Fh(v[i],1,1,(()=>{v[i]=null})),zh(),m=v[p],m?m.p(e,n):(m=v[p]=_[p](e),m.c()),Hh(m,1),m.m(u,null)),(!g||16&n)&&ih(t,"toolbar-sm","sm"===e[4]),(!g||16&n)&&ih(t,"toolbar-md","md"===e[4]),(!g||16&n)&&ih(t,"toolbar-lg","lg"===e[4])},i(e){g||(Hh(c.$$.fragment,e),Hh(m),g=!0)},o(e){Fh(c.$$.fragment,e),Fh(m),g=!1},d(n){n&&Hg(t),Xh(c),v[p].d(),e[13](null),h=!1,_g(f)}}}function dw(e,t,n){let o;vh("text_direction",Bt());const i=[{key:"sm",max:300},{key:"md",min:301,max:650},{key:"lg",min:651,isDefault:!0}];let{controller:r}=t;const s={language:"",isDetected:!1,isSupported:!1};let a,l,c,d=!1,u=!1;hh((()=>{c=f_(a,(e=>{n(11,l=e.clientWidth)}))})),fh((()=>{c&&c()}));return e.$$set=e=>{"controller"in e&&n(8,r=e.controller)},e.$$.update=()=>{2048&e.$$.dirty&&n(4,o=(e=>{const t=i.find((e=>e.isDefault));for(const t of i)if(!(t.min&&t.min>e||t.max&&t.max<e))return t.key;return t.key})(l))},[s,d,a,u,o,e=>{const t=e.detail.selectedOption.value;r.setLanguageInformation({language:t,isDetected:!1,isSupported:!0}),zP({eventType:de,controller:r,metaDataOverride:{ticketLanguage:t,isTicketLanguageAutodetected:!1}})},()=>{const e=!d;r.setIsAutoTranslateEnabled(e),zP({eventType:e?ue:pe,controller:r,metaDataOverride:{isAutoTranslateEnabled:e}})},()=>{n(3,u=!u)},r,({language:e,isDetected:t,isSupported:o})=>{n(0,s.language=e,s),n(0,s.isDetected=t,s),n(0,s.isSupported=o,s)},e=>{n(1,d=e)},l,()=>n(3,u=!1),function(e){Eh[e?"unshift":"push"]((()=>{a=e,n(2,a)}))}]}class uw extends Qh{constructor(e){super(),Jh(this,e,dw,cw,yg,{controller:8,updateLanguageInformation:9,updateAutoTranslateStatus:10})}get updateLanguageInformation(){return this.$$.ctx[9]}get updateAutoTranslateStatus(){return this.$$.ctx[10]}}class pw{static HTML_TAG_NAME="deepl-zendesk-toolbar";static createElement=(e=document)=>{const t=e.createElement(pw.HTML_TAG_NAME),n=new pw(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t.updateLanguageInformation=n.updateLanguageInformation,t.updateAutoTranslateStatus=n.updateAutoTranslateStatus,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer)}createDOM=({controller:e})=>{this.domElement.mainComponent=new uw({target:this.domElement.shadowContainer,props:{onClose:this.cleanupDOM,controller:e}})};updateLanguageInformation=e=>{this.domElement.mainComponent.updateLanguageInformation(e)};updateAutoTranslateStatus=e=>{this.domElement.mainComponent.updateAutoTranslateStatus(e)};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}function mw(e){let t,n,o,i,r;return n=new Cy({props:{error:e[1],close:e[2]}}),{c(){t=Wg("div"),Zh(n.$$.fragment),Xg(t,"class","container svelte-1wstx56"),Xg(t,"dir",Bt())},m(e,o){zg(e,t,o),Kh(n,t,null),r=!0},p(e,t){const o={};2&t&&(o.error=e[1]),4&t&&(o.close=e[2]),n.$set(o)},i(e){r||(Hh(n.$$.fragment,e),kh((()=>{r&&(i&&i.end(1),o=jh(t,Of,{x:100,duration:1e3}),o.start())})),r=!0)},o(e){Fh(n.$$.fragment,e),o&&o.invalidate(),i=qh(t,Of,{x:100,duration:1e3}),r=!1},d(e){e&&Hg(t),Xh(n),e&&i&&i.end()}}}function gw(e){let t,n,o=e[3]&&!1===e[0]&&mw(e);return{c(){o&&o.c(),t=Vg()},m(e,i){o&&o.m(e,i),zg(e,t,i),n=!0},p(e,[n]){e[3]&&!1===e[0]?o?(o.p(e,n),9&n&&Hh(o,1)):(o=mw(e),o.c(),Hh(o,1),o.m(t.parentNode,t)):o&&(Uh(),Fh(o,1,1,(()=>{o=null})),zh())},i(e){n||(Hh(o),n=!0)},o(e){Fh(o),n=!1},d(e){e&&Hg(t),o&&o.d(e)}}}function hw(e,t,n){let o;bg(e,j_,(e=>n(4,o=e))),vh("text_direction",Bt());let{error:i}=t,{close:r}=t,{errorAlreadyShown:s}=t,a=!1;return hh((()=>{setTimeout((()=>{n(3,a=!0),n(0,s=o)}),100)})),e.$$set=e=>{"error"in e&&n(1,i=e.error),"close"in e&&n(2,r=e.close),"errorAlreadyShown"in e&&n(0,s=e.errorAlreadyShown)},[s,i,r,a]}class fw extends Qh{constructor(e){super(),Jh(this,e,hw,gw,yg,{error:1,close:2,errorAlreadyShown:0})}}class _w{static HTML_TAG_NAME="deepl-alert";static createElement=(e=document)=>{const t=e.createElement(_w.HTML_TAG_NAME),n=new _w(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent=void 0;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowContainer.addEventListener("click",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=e=>{const t="rtl"===Bt()?"left":"right";this.domElement.shadowContainer.style.cssText=`position: fixed; top: 20px; ${t}: 20px; z-index: ${D.deepl_inline_ui.z_index}`,this.domElement.mainComponent=new fw({target:this.domElement.shadowContainer,props:{error:e,close:this.cleanupDOM}})};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy(),this.domElement.remove()}}function vw(e){try{const t=_w.createElement();document.documentElement.appendChild(t),t.createDOM(e),d_((()=>t.cleanupDOM))}catch(e){rn()&&console.log(e)}}const yw=function(){let e={isDarkMode:nt()};const{subscribe:t,update:n}=tf(e);return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(()=>{n((e=>({...e,isDarkMode:nt()})))})),{subscribe:t,update:e=>{if(rn()&&!{IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.28.2",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.28.2",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.28.2",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.28.2",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.28.2",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.28.2",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.28.2",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.28.2",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.28.2",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365"},APP_VERSION:"1.28.2",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0,REVIEW_UI_WITH_ITA:!1,BATCH_TRANSLATE_HTML_REQUEST:!1}}.DISABLE_DEBUG_LOGS){const t="background-color: #403f3e;padding: 3px; font-size:12px;color:#c8e0c1; font-weight:600";console.log(`%c${(new Date).toISOString()} UPDATE WEBSITE STATE`,t,e)}n((t=>(e&&e.error?vw(e.error):j_.set(!1),{...t,...e,error:e.error?e.error:void 0})))}}}();e.websiteData=void 0;const ww=yw.subscribe((n=>{e.websiteData={...n},n&&Object.keys(n).length>0&&t({action:"newWebsiteState",payload:{...n}})}));function bw(e,t,n){const o=e.slice();return o[24]=t[n],o}function Ew(e,t,n){const o=e.slice();return o[24]=t[n],o}function Sw(e){let t,n,o,i,r;return n=new T_({props:{disabled:e[0],items:e[14],defaultOption:e[18],placeholder:e[16],dataQaButton:"deepl-language-selection-button",dataQaList:"deepl-language-selection-list",customClass:e[3],variant:e[5],fontSize:e[6],alignRight:e[7],isBorderless:e[8],showSortCode:e[9],extraPadding:e[10],dropdownMaxHeight:e[11],autoHeight:e[12]}}),n.$on("valueselected",e[17]),{c(){t=Wg("div"),Zh(n.$$.fragment)},m(s,a){zg(s,t,a),Kh(n,t,null),o=!0,i||(r=Yg(t,"mousedown",Kg(Zg(e[22]))),i=!0)},p(e,t){const o={};1&t&&(o.disabled=e[0]),16384&t&&(o.items=e[14]),8&t&&(o.customClass=e[3]),32&t&&(o.variant=e[5]),64&t&&(o.fontSize=e[6]),128&t&&(o.alignRight=e[7]),256&t&&(o.isBorderless=e[8]),512&t&&(o.showSortCode=e[9]),1024&t&&(o.extraPadding=e[10]),2048&t&&(o.dropdownMaxHeight=e[11]),4096&t&&(o.autoHeight=e[12]),n.$set(o)},i(e){o||(Hh(n.$$.fragment,e),o=!0)},o(e){Fh(n.$$.fragment,e),o=!1},d(e){e&&Hg(t),Xh(n),i=!1,r()}}}function Tw(e){let t,n,o,i,r,s,a=e[2]&&$w(),l=Vh(e[14]),c=[];for(let t=0;t<l.length;t+=1)c[t]=Cw(bw(e,l,t));return{c(){t=Wg("div"),n=Wg("select"),a&&a.c(),o=Vg();for(let e=0;e<c.length;e+=1)c[e].c();Xg(n,"data-qa","deepl-language-selection"),Xg(n,"aria-label","Select Language"),Xg(n,"class","svelte-1ww98o"),Xg(t,"class",i=Cg("alternate"===e[5]?"language-selector-alternate":"language-selector")+" svelte-1ww98o")},m(i,l){zg(i,t,l),Pg(t,n),a&&a.m(n,null),Pg(n,o);for(let e=0;e<c.length;e+=1)c[e]&&c[e].m(n,null);th(n,e[1]),r||(s=Yg(n,"change",Zg(e[23])),r=!0)},p(e,r){if(e[2]?a?a.p(e,r):(a=$w(),a.c(),a.m(n,o)):a&&(a.d(1),a=null),16384&r){let t;for(l=Vh(e[14]),t=0;t<l.length;t+=1){const o=bw(e,l,t);c[t]?c[t].p(o,r):(c[t]=Cw(o),c[t].c(),c[t].m(n,null))}for(;t<c.length;t+=1)c[t].d(1);c.length=l.length}16386&r&&th(n,e[1]),32&r&&i!==(i=Cg("alternate"===e[5]?"language-selector-alternate":"language-selector")+" svelte-1ww98o")&&Xg(t,"class",i)},i:mg,o:mg,d(e){e&&Hg(t),a&&a.d(),Fg(c,e),r=!1,s()}}}function xw(e){let t,n,o,i,r=Vh(e[14]),s=[];for(let t=0;t<r.length;t+=1)s[t]=kw(Ew(e,r,t));return{c(){t=Wg("div"),n=Wg("select");for(let e=0;e<s.length;e+=1)s[e].c();n.disabled=!0,Xg(n,"data-qa","deepl-language-selection-readonly"),Xg(n,"aria-label","Select Language - dropdown disabled"),Xg(n,"class","svelte-1ww98o"),Xg(t,"class","language-selector read-only svelte-1ww98o")},m(r,a){zg(r,t,a),Pg(t,n);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(n,null);th(n,e[1]),o||(i=Yg(n,"change",Zg(Iw)),o=!0)},p(e,t){if(16384&t){let o;for(r=Vh(e[14]),o=0;o<r.length;o+=1){const i=Ew(e,r,o);s[o]?s[o].p(i,t):(s[o]=kw(i),s[o].c(),s[o].m(n,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=r.length}16386&t&&th(n,e[1])},i:mg,o:mg,d(e){e&&Hg(t),Fg(s,e),o=!1,i()}}}function $w(e){let t,n,o,i=chrome.i18n.getMessage("supported_languages_undefined")+"";return{c(){t=Wg("option"),n=qg(i),o=Gg(),t.__value=void 0,Qg(t,t.__value),Xg(t,"data-option-regionalvariant",void 0)},m(e,i){zg(e,t,i),Pg(t,n),Pg(t,o)},p:mg,d(e){e&&Hg(t)}}}function Cw(e){let t,n,o,i,r,s=e[24].label+"";return{c(){t=Wg("option"),n=qg(s),o=Gg(),t.__value=i=e[24].value,Qg(t,t.__value),Xg(t,"data-option-regionalvariant",r=e[24].regionalVariant)},m(e,i){zg(e,t,i),Pg(t,n),Pg(t,o)},p(e,o){16384&o&&s!==(s=e[24].label+"")&&Jg(n,s),16384&o&&i!==(i=e[24].value)&&(t.__value=i,Qg(t,t.__value)),16384&o&&r!==(r=e[24].regionalVariant)&&Xg(t,"data-option-regionalvariant",r)},d(e){e&&Hg(t)}}}function kw(e){let t,n,o,i,r,s=e[24].label+"";return{c(){t=Wg("option"),n=qg(s),o=Gg(),t.__value=i=e[24].value,Qg(t,t.__value),Xg(t,"data-option-regionalvariant",r=e[24].regionalVariant)},m(e,i){zg(e,t,i),Pg(t,n),Pg(t,o)},p(e,o){16384&o&&s!==(s=e[24].label+"")&&Jg(n,s),16384&o&&i!==(i=e[24].value)&&(t.__value=i,Qg(t,t.__value)),16384&o&&r!==(r=e[24].regionalVariant)&&Xg(t,"data-option-regionalvariant",r)},d(e){e&&Hg(t)}}}function Lw(e){let t,n,o,i,r;const s=[xw,Tw,Sw],a=[];function l(e,n){return e[13]?0:(null==t&&(t=!!W_()),t?1:2)}return n=l(e),o=a[n]=s[n](e),{c(){o.c(),i=Vg()},m(e,t){a[n].m(e,t),zg(e,i,t),r=!0},p(e,[t]){let r=n;n=l(e),n===r?a[n].p(e,t):(Uh(),Fh(a[r],1,1,(()=>{a[r]=null})),zh(),o=a[n],o?o.p(e,t):(o=a[n]=s[n](e),o.c()),Hh(o,1),o.m(i.parentNode,i))},i(e){r||(Hh(o),r=!0)},o(e){Fh(o),r=!1},d(e){e&&Hg(i),a[n].d(e)}}}const Iw=()=>{};function Aw(e,t,n){let o,r=mg,s=()=>(r(),r=wg(p,(e=>n(21,o=e))),p);e.$$.on_destroy.push((()=>r()));const a=_h();let{value:l}=t,{showChooseLanguageOption:c=!1}=t,{customClass:u=""}=t,{websiteSettings:p}=t;s();let m,{disabled:g=!1}=t,{variant:h="original"}=t,{fontSize:f="default"}=t,{alignRight:_=!1}=t,{isBorderless:v=!1}=t,{showSortCode:y=!1}=t,{extraPadding:w=!1}=t,{showRegionalVariants:b=!0}=t,{dropdownMaxHeight:E=300}=t,{onlyShowWriteEnabledLanguages:S=!1}=t,{autoHeight:T}=t,{readOnly:x=!1}=t,$=c?chrome.i18n.getMessage("supported_languages_undefined"):void 0;m=b?Rt():i.filter((e=>!["PT-BR","EN-US","ZH-HANT"].includes(e.langCode))).map((e=>"EN-GB"===e.langCode?{...e,langCode:"EN"}:"PT-PT"===e.langCode?{...e,langCode:"PT"}:e)).map((e=>({value:e.langCode,label:chrome.i18n.getMessage(`supported_languages_${e.langCode}`),selectedOptionLabel:chrome.i18n.getMessage(`supported_languages_${e.langCode}`)}))).sort(((e,t)=>e.label.localeCompare(t.label,chrome.i18n.getUILanguage()))),S&&(m=m.filter((e=>Dt(e.value))));let C=l?m.find((e=>e.value===l)):void 0;return e.$$set=e=>{"value"in e&&n(1,l=e.value),"showChooseLanguageOption"in e&&n(2,c=e.showChooseLanguageOption),"customClass"in e&&n(3,u=e.customClass),"websiteSettings"in e&&s(n(4,p=e.websiteSettings)),"disabled"in e&&n(0,g=e.disabled),"variant"in e&&n(5,h=e.variant),"fontSize"in e&&n(6,f=e.fontSize),"alignRight"in e&&n(7,_=e.alignRight),"isBorderless"in e&&n(8,v=e.isBorderless),"showSortCode"in e&&n(9,y=e.showSortCode),"extraPadding"in e&&n(10,w=e.extraPadding),"showRegionalVariants"in e&&n(19,b=e.showRegionalVariants),"dropdownMaxHeight"in e&&n(11,E=e.dropdownMaxHeight),"onlyShowWriteEnabledLanguages"in e&&n(20,S=e.onlyShowWriteEnabledLanguages),"autoHeight"in e&&n(12,T=e.autoHeight),"readOnly"in e&&n(13,x=e.readOnly)},e.$$.update=()=>{2097152&e.$$.dirty&&(o&&o.translationState===d.ongoingTranslation?n(0,g=!0):o&&[d.none,d.isTranslationComplete].includes(o.translationState)&&n(0,g=!1))},[g,l,c,u,p,h,f,_,v,y,w,E,T,x,m,a,$,function(e){g||a("selection",e.detail)},C,b,S,o,function(t){wh.call(this,e,t)},e=>{if(g)return;const t=e.target.options[e.target.selectedIndex].getAttribute("data-option-regionalVariant")||void 0;a("selection",{selectedOption:{value:e.target.value,regionalVariant:t}})}]}class Mw extends Qh{constructor(e){super(),Jh(this,e,Aw,Lw,yg,{value:1,showChooseLanguageOption:2,customClass:3,websiteSettings:4,disabled:0,variant:5,fontSize:6,alignRight:7,isBorderless:8,showSortCode:9,extraPadding:10,showRegionalVariants:19,dropdownMaxHeight:11,onlyShowWriteEnabledLanguages:20,autoHeight:12,readOnly:13})}}function Rw(e){let t,n,o,i;return{c(){t=jg("svg"),n=jg("path"),Xg(n,"d","M1 7L5 11L15 1"),Xg(n,"stroke",o=e[0]?e[3]:e[4]),Xg(n,"stroke-width","2"),Xg(n,"stroke-linecap","round"),Xg(n,"stroke-linejoin","round"),Xg(n,"class","svelte-mrm8jk"),Xg(t,"width",e[2]),Xg(t,"height",e[1]),Xg(t,"class","checkmark svelte-mrm8jk"),Xg(t,"viewBox","0 0 16 12"),Xg(t,"fill","none"),Xg(t,"xmlns","http://www.w3.org/2000/svg"),Xg(t,"style",i=`padding: ${e[6]};`),ih(t,"enableHover",e[5])},m(e,o){zg(e,t,o),Pg(t,n)},p(e,[r]){25&r&&o!==(o=e[0]?e[3]:e[4])&&Xg(n,"stroke",o),4&r&&Xg(t,"width",e[2]),2&r&&Xg(t,"height",e[1]),64&r&&i!==(i=`padding: ${e[6]};`)&&Xg(t,"style",i),32&r&&ih(t,"enableHover",e[5])},i:mg,o:mg,d(e){e&&Hg(t)}}}function Ow(e,t,n){let{disabled:o=!1}=t,{height:i="16px"}=t,{width:r="16px"}=t,{disabledColor:s="#727A83"}=t,{enabledColor:a="#007E5E"}=t,{enableHover:l=!1}=t,{padding:c}=t;return e.$$set=e=>{"disabled"in e&&n(0,o=e.disabled),"height"in e&&n(1,i=e.height),"width"in e&&n(2,r=e.width),"disabledColor"in e&&n(3,s=e.disabledColor),"enabledColor"in e&&n(4,a=e.enabledColor),"enableHover"in e&&n(5,l=e.enableHover),"padding"in e&&n(6,c=e.padding)},[o,i,r,s,a,l,c]}class Nw extends Qh{constructor(e){super(),Jh(this,e,Ow,Rw,yg,{disabled:0,height:1,width:2,disabledColor:3,enabledColor:4,enableHover:5,padding:6})}}function Dw(e,t,n){const o=e.slice();return o[19]=t[n],o[21]=n,o}function Pw(e,t,n){const o=e.slice();return o[22]=t[n],o}function Bw(e,t,n){const o=e.slice();return o[25]=t[n],o}function Uw(e){let t,n,o,i,r,s,a,l,c,d,u=e[5].name+"",p=Vh(e[5].termDictionaries),m=[];for(let t=0;t<p.length;t+=1)m[t]=zw(Bw(e,p,t));let g=e[5].hasAdditionalPairs&&Hw(e);return{c(){t=Wg("div"),n=Wg("div"),o=Wg("div"),i=qg(u),r=Gg();for(let e=0;e<m.length;e+=1)m[e].c();s=Gg(),g&&g.c(),a=Gg(),l=Wg("div"),l.textContent="Remove",Xg(o,"class","title"),Xg(l,"class","remove-button svelte-1ium3jp"),Xg(n,"class","glossary-menu-active-glossary-display svelte-1ium3jp"),Xg(t,"class","glossary-menu-active-glossary-display-container svelte-1ium3jp")},m(u,p){zg(u,t,p),Pg(t,n),Pg(n,o),Pg(o,i),Pg(n,r);for(let e=0;e<m.length;e+=1)m[e]&&m[e].m(n,null);Pg(n,s),g&&g.m(n,null),Pg(n,a),Pg(n,l),c||(d=Yg(l,"click",e[9]),c=!0)},p(e,t){if(32&t&&u!==(u=e[5].name+"")&&Jg(i,u),2080&t){let o;for(p=Vh(e[5].termDictionaries),o=0;o<p.length;o+=1){const i=Bw(e,p,o);m[o]?m[o].p(i,t):(m[o]=zw(i),m[o].c(),m[o].m(n,s))}for(;o<m.length;o+=1)m[o].d(1);m.length=p.length}e[5].hasAdditionalPairs?g?g.p(e,t):(g=Hw(e),g.c(),g.m(n,a)):g&&(g.d(1),g=null)},d(e){e&&Hg(t),Fg(m,e),g&&g.d(),c=!1,d()}}}function zw(e){let t,n=e[11](e[25].languagePair)+"";return{c(){t=Wg("div"),Xg(t,"class","lang-pair svelte-1ium3jp")},m(e,o){zg(e,t,o),t.innerHTML=n},p(e,o){32&o&&n!==(n=e[11](e[25].languagePair)+"")&&(t.innerHTML=n)},d(e){e&&Hg(t)}}}function Hw(e){let t,n,o;return{c(){t=Wg("div"),t.textContent=`${chrome.i18n.getMessage("glossary_settings_show_more_lang_pairs")}...`,Xg(t,"class","show-more svelte-1ium3jp")},m(i,r){zg(i,t,r),n||(o=Yg(t,"click",e[13]),n=!0)},p:mg,d(e){e&&Hg(t),n=!1,o()}}}function Fw(e){let t;function n(e,t){return e[0]?e[3]||0!==e[1].length?Ww:jw:qw}let o=n(e),i=o(e);return{c(){i.c(),t=Vg()},m(e,n){i.m(e,n),zg(e,t,n)},p(e,r){o===(o=n(e))&&i?i.p(e,r):(i.d(1),i=o(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){e&&Hg(t),i.d(e)}}}function Ww(e){let t,n=Vh(e[6]),o=[];for(let t=0;t<n.length;t+=1)o[t]=Zw(Dw(e,n,t));return{c(){t=Wg("div");for(let e=0;e<o.length;e+=1)o[e].c();Xg(t,"class","glossary-list svelte-1ium3jp")},m(e,n){zg(e,t,n);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,null)},p(e,i){if(3270&i){let r;for(n=Vh(e[6]),r=0;r<n.length;r+=1){const s=Dw(e,n,r);o[r]?o[r].p(s,i):(o[r]=Zw(s),o[r].c(),o[r].m(t,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=n.length}},d(e){e&&Hg(t),Fg(o,e)}}}function jw(e){let t,n,o,i,r;return{c(){t=Wg("div"),n=Wg("div"),o=Wg("div"),o.innerHTML='<div class="icon svelte-1ium3jp"></div>',i=Gg(),r=Wg("div"),r.textContent=`${chrome.i18n.getMessage("zendesk_no_glossaries_found")}`,Xg(o,"class","icon-container svelte-1ium3jp"),Xg(r,"class","content svelte-1ium3jp"),Xg(n,"class","container svelte-1ium3jp"),Xg(t,"class","glossary-not-found svelte-1ium3jp")},m(e,s){zg(e,t,s),Pg(t,n),Pg(n,o),Pg(n,i),Pg(n,r)},p:mg,d(e){e&&Hg(t)}}}function qw(e){let t,n,o,i,r;return{c(){t=Wg("div"),n=Wg("div"),o=Wg("div"),o.innerHTML='<div class="icon svelte-1ium3jp"></div>',i=Gg(),r=Wg("div"),r.textContent=`${chrome.i18n.getMessage("zendesk_not_pro_user_body")}`,Xg(o,"class","icon-container svelte-1ium3jp"),Xg(r,"class","content svelte-1ium3jp"),Xg(n,"class","container svelte-1ium3jp"),Xg(t,"class","glossary-not-found svelte-1ium3jp")},m(e,s){zg(e,t,s),Pg(t,n),Pg(n,o),Pg(n,i),Pg(n,r)},p:mg,d(e){e&&Hg(t)}}}function Gw(e){let t,n,o=e[11](e[22].languagePair)+"";return{c(){t=Wg("div"),n=qg(o),Xg(t,"class","lang-pair svelte-1ium3jp")},m(e,o){zg(e,t,o),Pg(t,n)},p(e,t){64&t&&o!==(o=e[11](e[22].languagePair)+"")&&Jg(n,o)},d(e){e&&Hg(t)}}}function Vw(e){let t,n,o;function i(){return e[14](e[19])}return{c(){t=Wg("div"),t.textContent=`${chrome.i18n.getMessage("glossary_settings_show_more_lang_pairs")}...`,Xg(t,"class","show-more svelte-1ium3jp")},m(e,r){zg(e,t,r),n||(o=Yg(t,"click",i),n=!0)},p(t,n){e=t},d(e){e&&Hg(t),n=!1,o()}}}function Yw(e){let t;return{c(){t=Wg("div"),Xg(t,"class","divider svelte-1ium3jp")},m(e,n){zg(e,t,n)},d(e){e&&Hg(t)}}}function Zw(e){let t,n,o,i,r,s,a,l,c,d,u,p,m,g,h=e[19].name+"",f=Vh(e[19].termDictionaries),_=[];for(let t=0;t<f.length;t+=1)_[t]=Gw(Pw(e,f,t));let v=e[19].hasAdditionalPairs&&Vw(e);function y(){return e[15](e[19])}let w=e[21]<e[1].length-1&&Yw();return{c(){t=Wg("div"),n=Wg("div"),o=Wg("div"),i=qg(h),r=Gg();for(let e=0;e<_.length;e+=1)_[e].c();s=Gg(),v&&v.c(),a=Gg(),l=Wg("div"),c=Wg("input"),u=Gg(),w&&w.c(),p=Vg(),Xg(o,"class","name"),Xg(n,"class","info svelte-1ium3jp"),Xg(c,"type","radio"),c.checked=d=e[2]?.zendeskActiveTermbase?.id===e[19].id,Xg(c,"class","svelte-1ium3jp"),Xg(l,"class","radio-container svelte-1ium3jp"),Xg(t,"class","glossary-item svelte-1ium3jp")},m(e,d){zg(e,t,d),Pg(t,n),Pg(n,o),Pg(o,i),Pg(n,r);for(let e=0;e<_.length;e+=1)_[e]&&_[e].m(n,null);Pg(n,s),v&&v.m(n,null),Pg(t,a),Pg(t,l),Pg(l,c),zg(e,u,d),w&&w.m(e,d),zg(e,p,d),m||(g=Yg(c,"click",y),m=!0)},p(t,o){if(e=t,64&o&&h!==(h=e[19].name+"")&&Jg(i,h),2112&o){let t;for(f=Vh(e[19].termDictionaries),t=0;t<f.length;t+=1){const i=Pw(e,f,t);_[t]?_[t].p(i,o):(_[t]=Gw(i),_[t].c(),_[t].m(n,s))}for(;t<_.length;t+=1)_[t].d(1);_.length=f.length}e[19].hasAdditionalPairs?v?v.p(e,o):(v=Vw(e),v.c(),v.m(n,null)):v&&(v.d(1),v=null),68&o&&d!==(d=e[2]?.zendeskActiveTermbase?.id===e[19].id)&&(c.checked=d),e[21]<e[1].length-1?w||(w=Yw(),w.c(),w.m(p.parentNode,p)):w&&(w.d(1),w=null)},d(e){e&&(Hg(t),Hg(u),Hg(p)),Fg(_,e),v&&v.d(),w&&w.d(e),m=!1,g()}}}function Kw(e){let t,n,o,i,r,s,a,l,c,d,u,p=e[5]&&Uw(e),m=e[4]&&Fw(e);return{c(){t=Wg("div"),n=Wg("div"),o=Wg("div"),i=Wg("div"),i.textContent="Glossary",r=Gg(),s=Wg("div"),a=Gg(),p&&p.c(),l=Gg(),m&&m.c(),c=Vg(),Xg(i,"class","glossary-menu-text"),Xg(s,"class","glossary-menu-toggle svelte-1ium3jp"),ih(s,"isGlossaryListExpanded",e[4]),Xg(o,"class","glossary-menu-toggle-container svelte-1ium3jp"),Xg(n,"class","glossary-menu"),Xg(t,"class","glossary-menu-container svelte-1ium3jp"),ih(t,"isGlossaryListExpanded",e[4])},m(g,h){zg(g,t,h),Pg(t,n),Pg(n,o),Pg(o,i),Pg(o,r),Pg(o,s),Pg(n,a),p&&p.m(n,null),zg(g,l,h),m&&m.m(g,h),zg(g,c,h),d||(u=Yg(o,"click",e[8]),d=!0)},p(e,[o]){16&o&&ih(s,"isGlossaryListExpanded",e[4]),e[5]?p?p.p(e,o):(p=Uw(e),p.c(),p.m(n,null)):p&&(p.d(1),p=null),16&o&&ih(t,"isGlossaryListExpanded",e[4]),e[4]?m?m.p(e,o):(m=Fw(e),m.c(),m.m(c.parentNode,c)):m&&(m.d(1),m=null)},i:mg,o:mg,d(e){e&&(Hg(t),Hg(l),Hg(c)),p&&p.d(),m&&m.d(e),d=!1,u()}}}function Xw(e,n,o){let i;bg(e,nf,(e=>o(2,i=e)));let{userHasZendeskPermissions:r}=n,s=[],a=!0,l=!1,c=[],d=null,u=[];const p=e=>{o(12,c=[...c,e])},m=e=>{const n=s.find((t=>t.id===e));n&&(kg(nf,i.zendeskActiveTermbase=n,i),t({action:"dlTrackGlossaryEnabled",payload:{nicheIntegration:ie.zendesk}}))},g=async()=>{o(3,a=!0);try{const[e]=await IP();o(1,s=e)}catch(e){rn()&&console.error(e)}finally{(()=>{if(!i.zendeskActiveTermbase)return;if(!s||0===s.length)return void kg(nf,i.zendeskActiveTermbase=null,i);const e=s.map((e=>e.id));if(i.zendeskActiveTermbase&&e.includes(i.zendeskActiveTermbase.id)){const e=s.find((e=>e.id===i.zendeskActiveTermbase.id));kg(nf,i.zendeskActiveTermbase=e,i)}else kg(nf,i.zendeskActiveTermbase=null,i)})(),o(3,a=!1)}},h=async e=>{if("dlChangeActiveTabStatus"===e.action)e.payload.isActive&&g();return!0};hh((()=>{g(),chrome.runtime.onMessage.addListener(h)})),fh((()=>{chrome.runtime.onMessage.removeListener(h)}));return e.$$set=e=>{"userHasZendeskPermissions"in e&&o(0,r=e.userHasZendeskPermissions)},e.$$.update=()=>{4098&e.$$.dirty&&o(6,u=s.map((e=>c.includes(e.id)||e.termDictionaries.length<=3?e:{...e,termDictionaries:e.termDictionaries.slice(0,3),hasAdditionalPairs:!0}))),4&e.$$.dirty&&(i.zendeskActiveTermbase||o(5,d=null)),4100&e.$$.dirty&&i.zendeskActiveTermbase&&(c.includes(i.zendeskActiveTermbase.id)||i.zendeskActiveTermbase.termDictionaries.length<=3?o(5,d=i.zendeskActiveTermbase):o(5,d={...i.zendeskActiveTermbase,termDictionaries:i.zendeskActiveTermbase.termDictionaries.slice(0,3),hasAdditionalPairs:!0}))},[r,s,i,a,l,d,u,p,()=>{o(4,l=!l),l&&(r||t({action:"dlTrackZendeskGlossaryOpened",payload:{glossaryConfigOpenedWithoutGlossaryPermissions:!0}}),r&&!a&&0==s.length&&t({action:"dlTrackZendeskGlossaryOpened",payload:{glossaryConfigOpenedWithNoGlossariesFound:!0}}))},()=>{kg(nf,i.zendeskActiveTermbase=null,i),t({action:"dlTrackGlossaryDisabled",payload:{nicheIntegration:ie.zendesk}})},m,e=>{if(!e||!e.includes(">"))return chrome.i18n.getMessage("supported_languages_undefined");const[t,n]=e.split(">");return`${chrome.i18n.getMessage(`supported_languages_${t.toUpperCase()}`)} â ${chrome.i18n.getMessage(`supported_languages_${n.toUpperCase()}`)}`},c,()=>{p(d.id)},e=>{p(e.id)},e=>m(e.id)]}class Jw extends Qh{constructor(e){super(),Jh(this,e,Xw,Kw,yg,{userHasZendeskPermissions:0})}}function Qw(e){let t,n,o,i,r,s;const a=e[1].default,l=Eg(a,e,e[0],null);return{c(){t=Wg("div"),n=Wg("div"),o=jg("svg"),i=jg("path"),r=Gg(),l&&l.c(),Xg(i,"d","M12 8V12M12 16H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z"),Xg(i,"stroke","#D6A300"),Xg(i,"stroke-width","1.5"),Xg(i,"stroke-linecap","round"),Xg(i,"stroke-linejoin","round"),Xg(o,"width","24"),Xg(o,"height","24"),Xg(o,"viewBox","0 0 24 24"),Xg(o,"fill","none"),Xg(o,"xmlns","http://www.w3.org/2000/svg"),Xg(n,"class","content svelte-hf4zwi"),Xg(t,"class","container svelte-hf4zwi")},m(e,a){zg(e,t,a),Pg(t,n),Pg(n,o),Pg(o,i),Pg(n,r),l&&l.m(n,null),s=!0},p(e,[t]){l&&l.p&&(!s||1&t)&&xg(l,a,e,e[0],s?Tg(a,e[0],t,null):$g(e[0]),null)},i(e){s||(Hh(l,e),s=!0)},o(e){Fh(l,e),s=!1},d(e){e&&Hg(t),l&&l.d(e)}}}function eb(e,t,n){let{$$slots:o={},$$scope:i}=t;return e.$$set=e=>{"$$scope"in e&&n(0,i=e.$$scope)},[i,o]}class tb extends Qh{constructor(e){super(),Jh(this,e,eb,Qw,yg,{})}}function nb(e){let t,n,o,i,r,s=chrome.i18n.getMessage("zendesk_translations_left_info",[`${e[1]}/${ve}`])+"";return{c(){t=Wg("div"),n=Wg("div"),o=qg(e[0]),i=Gg(),r=Wg("div"),Xg(n,"class","info-text svelte-62gn63"),Xg(r,"class","translation-info svelte-62gn63"),Xg(t,"class","container svelte-62gn63")},m(e,a){zg(e,t,a),Pg(t,n),Pg(n,o),Pg(t,i),Pg(t,r),r.innerHTML=s},p(e,[t]){1&t&&Jg(o,e[0]),2&t&&s!==(s=chrome.i18n.getMessage("zendesk_translations_left_info",[`${e[1]}/${ve}`])+"")&&(r.innerHTML=s)},i:mg,o:mg,d(e){e&&Hg(t)}}}function ob(e,t,n){let{infoText:o}=t,{translationCount:i}=t;return e.$$set=e=>{"infoText"in e&&n(0,o=e.infoText),"translationCount"in e&&n(1,i=e.translationCount)},[o,i]}class ib extends Qh{constructor(e){super(),Jh(this,e,ob,nb,yg,{infoText:0,translationCount:1})}}function rb(e){let t,n,o,i,r=chrome.i18n.getMessage("zendesk_popup_char_limit_label",[e[2]])+"",s=chrome.i18n.getMessage("zendesk_popup_char_limit_content")+"";return{c(){t=Wg("div"),n=qg(r),o=Gg(),i=qg(s),Xg(t,"class","translation-count svelte-6kl6z0")},m(e,r){zg(e,t,r),Pg(t,n),zg(e,o,r),zg(e,i,r)},p(e,t){4&t&&r!==(r=chrome.i18n.getMessage("zendesk_popup_char_limit_label",[e[2]])+"")&&Jg(n,r)},i:mg,o:mg,d(e){e&&(Hg(t),Hg(o),Hg(i))}}}function sb(e){let t,n;return t=new tb({props:{$$slots:{default:[cb]},$$scope:{ctx:e}}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};12&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function ab(e){let t,n;return t=new tb({props:{$$slots:{default:[db]},$$scope:{ctx:e}}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};12&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function lb(e){let t,n,o,i,r,s;const a=[mb,pb,ub],l=[];function c(e,o){return 2&o&&(t=null),2&o&&(n=null),null==t&&(t=!!Ke(e[1],ye.TRANSLATOR)),t?0:(null==n&&(n=!!et(e[1],ye.TRANSLATOR)),n?1:2)}return o=c(e,-1),i=l[o]=a[o](e),{c(){i.c(),r=Vg()},m(e,t){l[o].m(e,t),zg(e,r,t),s=!0},p(e,t){let n=o;o=c(e,t),o===n?l[o].p(e,t):(Uh(),Fh(l[n],1,1,(()=>{l[n]=null})),zh(),i=l[o],i?i.p(e,t):(i=l[o]=a[o](e),i.c()),Hh(i,1),i.m(r.parentNode,r))},i(e){s||(Hh(i),s=!0)},o(e){Fh(i),s=!1},d(e){e&&Hg(r),l[o].d(e)}}}function cb(e){let t,n;return t=new ib({props:{infoText:chrome.i18n.getMessage("zendesk_limit_not_reached_free_account_infobox"),translationCount:e[2]}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.translationCount=e[2]),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function db(e){let t,n;return t=new ib({props:{infoText:chrome.i18n.getMessage("zendesk_limit_not_reached_pro_user_infobox"),translationCount:e[2]}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.translationCount=e[2]),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function ub(e){let t,n,o,i;return{c(){t=Wg("div"),n=Wg("div"),o=Gg(),i=Wg("div"),i.textContent=`${chrome.i18n.getMessage("zendesk_limit_reached_infobox")}`,Xg(n,"class","icon svelte-6kl6z0"),Xg(i,"class","text svelte-6kl6z0"),Xg(t,"class","upgrade-infobox svelte-6kl6z0")},m(e,r){zg(e,t,r),Pg(t,n),Pg(t,o),Pg(t,i)},p:mg,i:mg,o:mg,d(e){e&&Hg(t)}}}function pb(e){let t,n;return t=new tb({props:{$$slots:{default:[gb]},$$scope:{ctx:e}}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};12&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function mb(e){let t,n;return t=new tb({props:{$$slots:{default:[hb]},$$scope:{ctx:e}}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};12&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function gb(e){let t,n;return t=new ib({props:{infoText:chrome.i18n.getMessage("zendesk_limit_reached_free_account_infobox"),translationCount:e[2]}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.translationCount=e[2]),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function hb(e){let t,n;return t=new ib({props:{infoText:chrome.i18n.getMessage("zendesk_limit_reached_pro_user_infobox"),translationCount:e[2]}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.translationCount=e[2]),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function fb(e){let t,n,o,i,r,s;const a=[lb,ab,sb,rb],l=[];function c(e,o){return 2&o&&(t=null),2&o&&(n=null),e[0]?0:(null==t&&(t=!!Ke(e[1],ye.TRANSLATOR)),t?1:(null==n&&(n=!!et(e[1],ye.TRANSLATOR)),n?2:3))}return o=c(e,-1),i=l[o]=a[o](e),{c(){i.c(),r=Vg()},m(e,t){l[o].m(e,t),zg(e,r,t),s=!0},p(e,[t]){let n=o;o=c(e,t),o===n?l[o].p(e,t):(Uh(),Fh(l[n],1,1,(()=>{l[n]=null})),zh(),i=l[o],i?i.p(e,t):(i=l[o]=a[o](e),i.c()),Hh(i,1),i.m(r.parentNode,r))},i(e){s||(Hh(i),s=!0)},o(e){Fh(i),s=!1},d(e){e&&Hg(r),l[o].d(e)}}}function _b(e,t,n){let{limitReached:o}=t,{settings:i}=t,{remainingTranslations:r}=t;return e.$$set=e=>{"limitReached"in e&&n(0,o=e.limitReached),"settings"in e&&n(1,i=e.settings),"remainingTranslations"in e&&n(2,r=e.remainingTranslations)},[o,i,r]}class vb extends Qh{constructor(e){super(),Jh(this,e,_b,fb,yg,{limitReached:0,settings:1,remainingTranslations:2})}}function yb(e,t,n){const o=e.slice();return o[17]=t[n],o}function wb(e){let t,n,o,i,r,s;const a=[Tb,Sb,Eb,bb],l=[];function c(e,t){return"onboarding"===e[4]?0:"user_has_reached_limit"===e[4]?1:"language_not_supported"===e[4]?2:3}n=c(e),o=l[n]=a[n](e);let d=!e[1]&&"onboarding"!==e[4]&&$b(e),u=(!e[2].isZendeskEnabled||"default"===e[4]||"onboarding"===e[4])&&!e[5]&&Db(e);return{c(){t=Wg("div"),o.c(),i=Gg(),d&&d.c(),r=Gg(),u&&u.c(),Xg(t,"class","dl-zendesk-modal svelte-csh6q0"),ih(t,"onboarding","onboarding"===e[4])},m(e,o){zg(e,t,o),l[n].m(t,null),Pg(t,i),d&&d.m(t,null),Pg(t,r),u&&u.m(t,null),s=!0},p(e,p){let m=n;n=c(e),n===m?l[n].p(e,p):(Uh(),Fh(l[m],1,1,(()=>{l[m]=null})),zh(),o=l[n],o?o.p(e,p):(o=l[n]=a[n](e),o.c()),Hh(o,1),o.m(t,i)),e[1]||"onboarding"===e[4]?d&&(d.d(1),d=null):d?d.p(e,p):(d=$b(e),d.c(),d.m(t,r)),e[2].isZendeskEnabled&&"default"!==e[4]&&"onboarding"!==e[4]||e[5]?u&&(u.d(1),u=null):u?u.p(e,p):(u=Db(e),u.c(),u.m(t,null)),(!s||16&p)&&ih(t,"onboarding","onboarding"===e[4])},i(e){s||(Hh(o),s=!0)},o(e){Fh(o),s=!1},d(e){e&&Hg(t),l[n].d(),d&&d.d(),u&&u.d()}}}function bb(e){let t,n,o,i,r,s,a,l,c,d,u,p,m,g,h,f,_,v,y=chrome.i18n.getMessage("ui_zendesk_modal_deepl_translate_into")+"",w=chrome.i18n.getMessage("ui_zendesk_modal_ok")+"";n=new Jw({props:{userHasZendeskPermissions:e[1]}});let b=!e[1]&&xb(e);return d=new Mw({props:{value:e[2].selectedTargetLanguage,websiteSettings:yw,disabled:!e[2].isZendeskEnabled,customClass:"dropdown__zendesk-top-icon",fontSize:"md",dropdownMaxHeight:150}}),d.$on("selection",e[13]),{c(){t=Wg("div"),Zh(n.$$.fragment),o=Gg(),b&&b.c(),i=Gg(),r=Wg("div"),s=qg(y),a=Gg(),l=Wg("div"),c=Wg("div"),Zh(d.$$.fragment),u=Gg(),p=Wg("div"),m=Wg("button"),g=qg(w),Xg(t,"class","modal-section glossary svelte-csh6q0"),Xg(c,"class","dropdown svelte-csh6q0"),Xg(m,"class","btn-primary svelte-csh6q0"),m.disabled=h=!e[2].isZendeskEnabled,Xg(p,"class","right svelte-csh6q0"),Xg(l,"class","dropdown-container svelte-csh6q0"),Xg(r,"class","modal-section language-selector svelte-csh6q0")},m(h,y){zg(h,t,y),Kh(n,t,null),zg(h,o,y),b&&b.m(h,y),zg(h,i,y),zg(h,r,y),Pg(r,s),Pg(r,a),Pg(r,l),Pg(l,c),Kh(d,c,null),Pg(l,u),Pg(l,p),Pg(p,m),Pg(m,g),f=!0,_||(v=Yg(m,"click",e[14]),_=!0)},p(e,t){const o={};2&t&&(o.userHasZendeskPermissions=e[1]),n.$set(o),e[1]?b&&(Uh(),Fh(b,1,1,(()=>{b=null})),zh()):b?(b.p(e,t),2&t&&Hh(b,1)):(b=xb(e),b.c(),Hh(b,1),b.m(i.parentNode,i));const r={};4&t&&(r.value=e[2].selectedTargetLanguage),4&t&&(r.disabled=!e[2].isZendeskEnabled),d.$set(r),(!f||4&t&&h!==(h=!e[2].isZendeskEnabled))&&(m.disabled=h)},i(e){f||(Hh(n.$$.fragment,e),Hh(b),Hh(d.$$.fragment,e),f=!0)},o(e){Fh(n.$$.fragment,e),Fh(b),Fh(d.$$.fragment,e),f=!1},d(e){e&&(Hg(t),Hg(o),Hg(i),Hg(r)),Xh(n),b&&b.d(e),Xh(d),_=!1,v()}}}function Eb(e){let t,n,o;return{c(){t=Wg("div"),t.textContent=`${chrome.i18n.getMessage("ui_zendesk_modal_language_not_supported_line_1")}`,n=Gg(),o=Wg("div"),o.textContent=`${chrome.i18n.getMessage("ui_zendesk_modal_language_not_supported_line_2")}`,Xg(t,"class","modal-section language-not-supported svelte-csh6q0"),Xg(o,"class","modal-section secondary-text svelte-csh6q0")},m(e,i){zg(e,t,i),zg(e,n,i),zg(e,o,i)},p:mg,i:mg,o:mg,d(e){e&&(Hg(t),Hg(n),Hg(o))}}}function Sb(e){let t,n,o;return n=new vb({props:{limitReached:!0,remainingTranslations:e[6],settings:e[2]}}),{c(){t=Wg("div"),Zh(n.$$.fragment),Xg(t,"class","modal-section reached-limit svelte-csh6q0")},m(e,i){zg(e,t,i),Kh(n,t,null),o=!0},p(e,t){const o={};64&t&&(o.remainingTranslations=e[6]),4&t&&(o.settings=e[2]),n.$set(o)},i(e){o||(Hh(n.$$.fragment,e),o=!0)},o(e){Fh(n.$$.fragment,e),o=!1},d(e){e&&Hg(t),Xh(n)}}}function Tb(e){let t,n,o,i,r,s,a,l,c,d,u,p,m,g,h,f,_,v,y,w=chrome.i18n.getMessage("zendesk_onboarding_content_one",[ve])+"",b=chrome.i18n.getMessage("zendesk_onboarding_content_two")+"",E=chrome.i18n.getMessage("zendesk_onboarding_content_three")+"";return s=new Nw({props:{width:"16px",height:"16px",padding:"3px 0 0 0"}}),u=new Nw({props:{width:"16px",height:"16px",padding:"3px 0 0 0"}}),f=new Nw({props:{width:"16px",height:"16px",padding:"3px 0 0 0"}}),{c(){t=Wg("div"),n=Wg("div"),n.textContent=`${chrome.i18n.getMessage("ui_zendesk_modal_welcome")}`,o=Gg(),i=Wg("div"),r=Wg("div"),Zh(s.$$.fragment),a=Gg(),l=Wg("div"),c=Gg(),d=Wg("div"),Zh(u.$$.fragment),p=Gg(),m=Wg("div"),g=Gg(),h=Wg("div"),Zh(f.$$.fragment),_=Gg(),v=Wg("div"),Xg(n,"class","welcome svelte-csh6q0"),Xg(l,"class","copy-text svelte-csh6q0"),Xg(r,"class","copy svelte-csh6q0"),Xg(m,"class","copy-text svelte-csh6q0"),Xg(d,"class","copy svelte-csh6q0"),Xg(v,"class","copy-text svelte-csh6q0"),Xg(h,"class","copy svelte-csh6q0"),Xg(i,"class","body svelte-csh6q0"),Xg(t,"class","modal-section onboarding svelte-csh6q0")},m(e,S){zg(e,t,S),Pg(t,n),Pg(t,o),Pg(t,i),Pg(i,r),Kh(s,r,null),Pg(r,a),Pg(r,l),l.innerHTML=w,Pg(i,c),Pg(i,d),Kh(u,d,null),Pg(d,p),Pg(d,m),m.innerHTML=b,Pg(i,g),Pg(i,h),Kh(f,h,null),Pg(h,_),Pg(h,v),v.innerHTML=E,y=!0},p:mg,i(e){y||(Hh(s.$$.fragment,e),Hh(u.$$.fragment,e),Hh(f.$$.fragment,e),y=!0)},o(e){Fh(s.$$.fragment,e),Fh(u.$$.fragment,e),Fh(f.$$.fragment,e),y=!1},d(e){e&&Hg(t),Xh(s),Xh(u),Xh(f)}}}function xb(e){let t,n,o;return n=new vb({props:{limitReached:!1,remainingTranslations:e[6],settings:e[2]}}),{c(){t=Wg("div"),Zh(n.$$.fragment),Xg(t,"class","modal-section svelte-csh6q0")},m(e,i){zg(e,t,i),Kh(n,t,null),o=!0},p(e,t){const o={};64&t&&(o.remainingTranslations=e[6]),4&t&&(o.settings=e[2]),n.$set(o)},i(e){o||(Hh(n.$$.fragment,e),o=!0)},o(e){Fh(n.$$.fragment,e),o=!1},d(e){e&&Hg(t),Xh(n)}}}function $b(e){let t,n,o,i,r,s,a,l,c,d,u;function p(e,t){return 36&t&&(n=null),36&t&&(o=null),36&t&&(i=null),null==n&&(n=!(!Ke(e[2],ye.TRANSLATOR)||e[5])),n?Ib:(null==o&&(o=!(!Ke(e[2],ye.TRANSLATOR)||!e[5])),o?Lb:(null==i&&(i=!(!et(e[2],ye.TRANSLATOR)||e[5])),i?kb:e[5]?Cb:void 0))}let m=p(e,-1),g=m&&m(e);function h(e,t){return 4&t&&(a=null),null==a&&(a=!!Ke(e[2],ye.TRANSLATOR)),a?Mb:Ab}let f=h(e,-1),_=f(e),v=Vh(Bf(chrome.i18n.getMessage("zendesk_try_pro_log_in_link"),["loginLink"])),y=[];for(let t=0;t<v.length;t+=1)y[t]=Nb(yb(e,v,t));return{c(){t=Wg("div"),g&&g.c(),r=Gg(),s=Wg("button"),_.c(),l=Gg(),c=Wg("div");for(let e=0;e<y.length;e+=1)y[e].c();Xg(s,"class","upgrade-button svelte-csh6q0"),Xg(c,"class","login-text svelte-csh6q0"),Xg(t,"class","modal-section upgrade-button-container svelte-csh6q0")},m(n,o){zg(n,t,o),g&&g.m(t,null),Pg(t,r),Pg(t,s),_.m(s,null),Pg(t,l),Pg(t,c);for(let e=0;e<y.length;e+=1)y[e]&&y[e].m(c,null);d||(u=Yg(s,"click",e[10]),d=!0)},p(e,n){if(m===(m=p(e,n))&&g?g.p(e,n):(g&&g.d(1),g=m&&m(e),g&&(g.c(),g.m(t,r))),f===(f=h(e,n))&&_?_.p(e,n):(_.d(1),_=f(e),_&&(_.c(),_.m(s,null))),512&n){let t;for(v=Vh(Bf(chrome.i18n.getMessage("zendesk_try_pro_log_in_link"),["loginLink"])),t=0;t<v.length;t+=1){const o=yb(e,v,t);y[t]?y[t].p(o,n):(y[t]=Nb(o),y[t].c(),y[t].m(c,null))}for(;t<y.length;t+=1)y[t].d(1);y.length=v.length}},d(e){e&&Hg(t),g&&g.d(),_.d(),Fg(y,e),d=!1,u()}}}function Cb(e){let t,n=chrome.i18n.getMessage("zendesk_limit_reached_content")+"";return{c(){t=Wg("span"),Xg(t,"class","svelte-csh6q0")},m(e,o){zg(e,t,o),t.innerHTML=n},p:mg,d(e){e&&Hg(t)}}}function kb(e){let t,n=chrome.i18n.getMessage("zendesk_limit_not_reached_free_account_content")+"";return{c(){t=qg(n)},m(e,n){zg(e,t,n)},p:mg,d(e){e&&Hg(t)}}}function Lb(e){let t,n,o=chrome.i18n.getMessage("zendesk_limit_reached_pro_user_content")+"";return{c(){t=new sh(!1),n=Vg(),t.a=n},m(e,i){t.m(o,e,i),zg(e,n,i)},p:mg,d(e){e&&(Hg(n),t.d())}}}function Ib(e){let t,n=chrome.i18n.getMessage("zendesk_limit_not_reached_pro_user_content")+"";return{c(){t=qg(n)},m(e,n){zg(e,t,n)},p:mg,d(e){e&&Hg(t)}}}function Ab(e){let t,n=chrome.i18n.getMessage("zendesk_try_pro_advanced_button")+"";return{c(){t=qg(n)},m(e,n){zg(e,t,n)},p:mg,d(e){e&&Hg(t)}}}function Mb(e){let t,n=chrome.i18n.getMessage("zendesk_upgrade_cta")+"";return{c(){t=qg(n)},m(e,n){zg(e,t,n)},p:mg,d(e){e&&Hg(t)}}}function Rb(e){let t,n,o=e[17].text+"";return{c(){t=new sh(!1),n=Vg(),t.a=n},m(e,i){t.m(o,e,i),zg(e,n,i)},p:mg,d(e){e&&(Hg(n),t.d())}}}function Ob(e){let t,n,o,i=e[17].text+"";return{c(){t=Wg("span"),Xg(t,"class","upgrade-link svelte-csh6q0")},m(r,s){zg(r,t,s),t.innerHTML=i,n||(o=Yg(t,"click",e[9]),n=!0)},p:mg,d(e){e&&Hg(t),n=!1,o()}}}function Nb(e){let t;let n=function(e,t){return"loginLink"===e[17].block?Ob:Rb}(e),o=n(e);return{c(){o.c(),t=Vg()},m(e,n){o.m(e,n),zg(e,t,n)},p(e,t){o.p(e,t)},d(e){e&&Hg(t),o.d(e)}}}function Db(e){let t,n,o,i,r,s,a;return{c(){t=Wg("div"),n=Wg("div"),n.textContent=`${chrome.i18n.getMessage("zendesk_popup_on_off_label")}`,o=Gg(),i=Wg("div"),r=Wg("span"),r.innerHTML='<span class="svelte-csh6q0"></span>',Xg(n,"class","text svelte-csh6q0"),Xg(r,"class","on-off-switch svelte-csh6q0"),ih(r,"on",e[2].isZendeskEnabled),Xg(i,"class","switch"),Xg(t,"class","modal-section switch-container svelte-csh6q0")},m(l,c){zg(l,t,c),Pg(t,n),Pg(t,o),Pg(t,i),Pg(i,r),s||(a=Yg(r,"click",e[8]),s=!0)},p(e,t){4&t&&ih(r,"on",e[2].isZendeskEnabled)},d(e){e&&Hg(t),s=!1,a()}}}function Pb(e){let t,n,o,i,r,s,a=e[3]&&wb(e);return{c(){t=Wg("div"),n=Wg("button"),o=Gg(),a&&a.c(),Xg(n,"class","dl-zendesk-top-icon svelte-csh6q0"),Xg(t,"dir",Bt())},m(l,c){zg(l,t,c),Pg(t,n),Pg(t,o),a&&a.m(t,null),i=!0,r||(s=[Yg(n,"click",e[12]),Lg(c_.call(null,t,{isShadow:!0})),Yg(t,"click_outside",e[7])],r=!0)},p(e,[n]){e[3]?a?(a.p(e,n),8&n&&Hh(a,1)):(a=wb(e),a.c(),Hh(a,1),a.m(t,null)):a&&(Uh(),Fh(a,1,1,(()=>{a=null})),zh())},i(e){i||(Hh(a),i=!0)},o(e){Fh(a),i=!1},d(e){e&&Hg(t),a&&a.d(),r=!1,_g(s)}}}function Bb(e,n,o){let i;bg(e,nf,(e=>o(2,i=e))),vh("text_direction",Bt());let r,{controller:s}=n,a=!1,l="default",c=!1,d=!1;const u=()=>{c?o(4,l="user_has_reached_limit"):i.isZendeskOnboarded?(o(3,a=!1),o(4,l="default")):(o(4,l="onboarding"),kg(nf,i.isZendeskOnboarded=!0,i),t({action:"dlTrackOnboardingModalShown",payload:{nicheIntegration:ie.zendesk}}),o(3,a=!0))},p=()=>{"onboarding"===l&&(kg(nf,i.isZendeskOnboarded=!0,i),o(4,l="default")),"welcome"===l&&o(4,l="default"),o(3,a=!1)};hh((()=>{u(),i.isZendeskEnabled&&i.zendeskActiveTermbase&&(async()=>{if(!i.zendeskActiveTermbase)return;let e=[];try{const[t]=await IP();e=t}catch(e){rn()&&console.error(e)}if(!e||0===e.length)return void kg(nf,i.zendeskActiveTermbase=null,i);const t=e.map((e=>e.id));if(i.zendeskActiveTermbase&&t.includes(i.zendeskActiveTermbase.id)){const t=e.find((e=>e.id===i.zendeskActiveTermbase.id));kg(nf,i.zendeskActiveTermbase=t,i)}else kg(nf,i.zendeskActiveTermbase=null,i)})()}));return e.$$set=e=>{"controller"in e&&o(0,s=e.controller)},e.$$.update=()=>{4&e.$$.dirty&&o(1,d=i?.featureSet?.customizations?.includes("zendesk")),4&e.$$.dirty&&o(6,r=ve-i.zendeskSuccessfulTranslations),6&e.$$.dirty&&(i.zendeskSuccessfulTranslations>=ve&&!d?(o(5,c=!0),u()):(o(5,c=!1),u())),2&e.$$.dirty&&d&&(o(5,c=!1),o(4,l="default"))},[s,d,i,a,l,c,r,p,()=>{kg(nf,i.isZendeskEnabled=!i.isZendeskEnabled,i)},()=>{t({action:"dlRequestLogin"})},function(){t({action:"dlTrackUILocationClicked",payload:U.zendeskTryProLink}),t({action:"dlExternalURLRedirect",payload:{destination:av,utmContent:"zendesk_customization"}})},u,()=>{a?p():o(3,a=!0)},e=>{kg(nf,i.selectedTargetLanguage=e.detail.selectedOption.value,i),vE(s)},()=>{i.isZendeskEnabled&&p()}]}class Ub extends Qh{constructor(e){super(),Jh(this,e,Bb,Pb,yg,{controller:0,updateIconSettings:11})}get updateIconSettings(){return this.$$.ctx[11]}}class zb{static HTML_TAG_NAME="deepl-zendesk-top-icon";static createElement=(e=document)=>{const t=e.createElement(zb.HTML_TAG_NAME),n=new zb(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t.triggerUpdateIconSettings=n.triggerUpdateIconSettings,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer)}createDOM=({controller:e})=>{this.domElement.mainComponent=new Ub({target:this.domElement.shadowContainer,props:{onClose:this.cleanupDOM,controller:e}})};triggerUpdateIconSettings=()=>{this.domElement.mainComponent.updateIconSettings()};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}const Hb=[...tl].filter((e=>!["BrowserApiErrors","TryCatch","Breadcrumbs","GlobalHandlers"].includes(e.name))),Fb=()=>{const e=new va({...sf,transport:wa,stackParser:ka,integrations:Hb}),t=new yr;return t.setClient(e),t.setContext("appContext",{location:"content"}),(e=>{chrome.storage.sync.get(["installationId","session","isLoggedIn","translatorServiceType","writeServiceType"],(function(t){e.setTag("internal_session_id",t.session.id),e.setTag("is_translator_pro",Ke(t,ye.TRANSLATOR)),e.setTag("is_write_pro",Ke(t,ye.WRITE)),e.setTag("is_logged_in",t.isLoggedIn)})),chrome.storage.local.get("browserInstanceId",(function(t){e.setTag("browser_instance_id",t.browserInstanceId)})),chrome.storage.onChanged.addListener((t=>(t?.session?.newValue&&e.setTag("internal_session_id",t.session.newValue.id),t?.installationId&&e.setUser({id:t.installationId}),t?.browser_instance_id&&e.setTag("browser_instance_id",nf.browserInstanceId.newValue),!0!==t.isLoggedIn?.newValue&&!1!==t.isLoggedIn?.newValue||e.setTag("is_logged_in",t.isLoggedIn.newValue),t.translatorServiceType&&chrome.storage.sync.get(["isLoggedIn"],e.setTag("is_translator_pro",Ke({...nf,translatorServiceType:t.translatorServiceType.newValue},ye.TRANSLATOR))),t.writeServiceType&&chrome.storage.sync.get(["isLoggedIn"],e.setTag("is_write_pro",Ke({...nf,writeServiceType:t.writeServiceType.newValue},ye.WRITE))),!0)))})(t),{client:e,scope:t}},{scope:Wb}=Fb(),jb=()=>{const e=window.location.hostname.split(".");if(e.length<2)return!1;return"zendesk.com"===`${e[e.length-2]}.${e[e.length-1]}`},qb=()=>document.querySelector("deepl-zendesk-controller"),Gb=()=>Af.createElement(),Vb=e=>{const t=e.match(/^\/agent\/tickets\/(\d+)$/);if(t)return t[1]},Yb=()=>{const e=document.querySelector("#main_panes");if(e)return Array.from(e.children).find((e=>"hidden"!==window.getComputedStyle(e).visibility&&"none"!==window.getComputedStyle(e).display))},Zb=e=>e.querySelector("deepl-zendesk-ticket-controller"),Kb=(e,t)=>{const n=ew.createElement();return e.appendChild(n),n.createDOM({pane:e,ticketId:t}),n},Xb=(e,t)=>{try{const n=e.getPane();if(n.querySelector("deepl-zendesk-top-icon")||tE(n,e),!t)return;e.getTicketLanguageInformation().isSupported?(n.querySelector("deepl-zendesk-toolbar")||nE(n,e),n.querySelector("deepl-zendesk-input-icon")||oE(n,e)):n.querySelector("deepl-zendesk-toolbar")||nE(n,e)}catch(e){rn()&&console.error(e),af(e,Wb)}},Jb=()=>{eE(["deepl-zendesk-ticket-controller","deepl-zendesk-top-icon","deepl-zendesk-toolbar","deepl-zendesk-input-icon","deepl-zendesk-message-controller","deepl-zendesk-submit-button-tooltip","deepl-zendesk-onboarding-modal"])},Qb=()=>{eE(["deepl-zendesk-toolbar","deepl-zendesk-input-icon","deepl-zendesk-message-controller","deepl-zendesk-onboarding-modal"]);const e=Array.from(document.getElementsByTagName("deepl-zendesk-ticket-controller"));for(const t of e)t.setIsAutoTranslateEnabled(!1)},eE=e=>{try{for(const t of e)if(t){const e=Array.from(document.getElementsByTagName(t));for(const t of e)t.cleanupDOM(),t.remove()}}catch(e){rn()&&console.error(e),af(e,Wb)}},tE=(e,t)=>{const n=zb.createElement(),o=e.querySelector('[data-test-id="omni-header-filter-trigger"],[data-test-id="omni-header-ticket-actions-trigger"]');if(!o)return;const i=o.parentElement;return i?(i.prepend(n),n.createDOM({controller:t}),n):void 0},nE=(e,t)=>{const n=pw.createElement(),o=e.querySelector('[data-test-id="ticket-call-controls-action-bar"]');if(o)return o.after(n),n.createDOM({controller:t}),n.updateLanguageInformation(t.getTicketLanguageInformation()),n},oE=(e,t)=>{const n=Oy.createElement(),o=e.querySelector('div[data-test-id="omnichannel-composer-toolbar"] ul'),i=e.querySelector('div[data-test-id="ticket-rich-text-editor"] [contenteditable="true"]');if(i&&o&&o)return o.append(n),n.createDOM({controller:t,editable:i}),n},iE=e=>{const t=e.querySelector('div[data-test-id="omnichannel-composer-toolbar"] ul[data-test-id="ticket-editor-app-icon-view"][data-cy="ticket-editor-app-icon-view"]'),n=e.querySelector('div[data-test-id="omnichannel-composer-toolbar"] ul');return t?fe:n?_e:void 0},rE=e=>Array.from(e.querySelectorAll('article[data-test-id="omni-log-comment-item"]')),sE=e=>{const t=rE(e);if(!(t.length<1))return t.sort(((e,t)=>{const n=e.querySelector('time[data-test-id="timestamp-relative"]').getAttribute("datetime"),o=t.querySelector('time[data-test-id="timestamp-relative"]').getAttribute("datetime");return n===o?0:new Date(n)<Date(o)?-1:1})),t[0]},aE=(e,t)=>{const n=rE(e);if(n.length<1)return;n.sort(((e,t)=>{const n=e.querySelector('time[data-test-id="timestamp-relative"]').getAttribute("datetime"),o=t.querySelector('time[data-test-id="timestamp-relative"]').getAttribute("datetime");return n===o?0:new Date(n)<Date(o)?-1:1}));const o=[];for(let e=0;e<t;e++)n[e]&&o.push(n[e]);return o},lE=e=>e.querySelector('[data-test-id="omni-log-item-message"]'),cE=async e=>{const t=sE(e);if(t){const e=t?lE(t).innerText:"";return await Mt(e)}},dE=async e=>{const t=aE(e,12),n=[];for(const e in t)try{const o=t[e],i=o?lE(o).innerText:"",r=o.querySelector('[data-test-id="omni-log-item-sender"] a')?.getAttribute("href"),s=o.querySelector('[data-test-id="omni-log-item-sender"] a strong').innerText;if(0==i.length)continue;let a=n.find((e=>e.id===r));const l=i.includes(`: ${s}`)&&i.indexOf(`: ${s}`)+`: ${s}`.length===i.length,c=0===Number(e);a||(a={id:r,name:s,messages:[],isLikelyCustomer:!1,isFirstMessage:!1},n.push(a)),l&&(a.isLikelyCustomer=!0),c&&(a.isFirstMessage=!0),a.messages.push({message:i,shouldBeSkipped:l||i.length<=3})}catch(e){rn()&&console.log("Dev debug: unable to read message content in detectTicketLanguageInLiveChat")}const o=(1===n.filter((e=>e.isLikelyCustomer)).length?n.find((e=>e.isLikelyCustomer)):n.find((e=>!e.isFirstMessage))).messages.filter((e=>!e.shouldBeSkipped)).map((e=>e.message));o.sort(((e,t)=>e.length>t.length?-1:e.length<t.length?1:0));const i=o[0];if(i)return await Mt(i)},uE=(e,t)=>{const n=e.querySelector("deepl-zendesk-toolbar");return!!n&&(n.updateLanguageInformation(t),!0)},pE=(e,{isEnabled:t})=>{const n=e.querySelector("deepl-zendesk-toolbar");return!!n&&(n.updateAutoTranslateStatus(t),!0)},mE=e=>{const t=e.querySelector("deepl-zendesk-top-icon");return!!t&&(t.triggerUpdateIconSettings(),!0)},gE=(e,t)=>{const n=e.querySelector("deepl-zendesk-input-icon");return!!n&&(n.updateTargetLanguage(t),!0)},hE=e=>{try{const t=e.getPane(),n=rE(t);for(const t of n)fE(t)||_E(t,e)}catch(e){rn()&&console.error(e),af(e,Wb)}},fE=e=>e.querySelector("deepl-zendesk-message-controller"),_E=(e,t)=>{const n=qy.createElement(),o=lE(e);if(!o||!o.parentNode||!o.parentNode.parentNode)return;return o.parentNode.parentNode.after(n),n.createDOM({controller:t,message:e}),n},vE=e=>{const t=Array.from(e.getPane().querySelectorAll("deepl-zendesk-message-controller"));for(const e of t)e.triggerTranslateAgain()},yE=e=>{const t=Array.from(e.querySelectorAll("iframe"));for(const e of t)e.contentWindow.postMessage("dl-zendesk-welcome-screen","*")},wE=e=>{const t=e.querySelector("deepl-zendesk-input-icon");return!!t&&t.getInputHasSelection()},bE=e=>{const t=e.getPane().querySelector('[data-test-id="submit_button-button"]'),n=t.closest('[data-garden-id="buttons.button_group_view"]'),o=t.getBoundingClientRect(),i=n.getBoundingClientRect(),r=Ky.createElement();return r.createDOM({controller:e,coords:o,containerCoords:i}),n.prepend(r),r},EE=e=>{const t=e.querySelector('[data-test-id="conversation-translator-language-detection-prompt"]');t&&t.remove()},SE=()=>{const e=new URL(window.location.href);return"https:"===e.protocol&&"mail.google.com"===e.hostname},TE=e=>e instanceof HTMLTextAreaElement||e instanceof HTMLInputElement&&["text","search"].includes(e.type),xE=e=>e.selectionStart<e.selectionEnd,$E=async(e,t,n)=>{if(!TE(e))return n||(e=>{a_("mousedown",e);const t=window.getSelection();t.removeAllRanges();const n=new Range;n.setStart(e,0),n.collapse(!1),t.addRange(n),a_("mouseup",e)})(e),await i_(e,t,!0);if(xE(e)||((e,{start:t,end:n})=>{e.selectionStart=t,e.selectionEnd=n})(e,{start:0,end:e.value.length}),!document.execCommand("insertText",!1,t.text)){const n=e.value.substring(0,e.selectionStart)+t.text+e.value.substring(e.selectionEnd);e.value=n}};function CE(e,t){if(!t)return!1;const n=t.getBoundingClientRect();if(TE(e))return function(e,t){const n=function(e){const t=document.createElement("div");document.body.appendChild(t);var n=window.getComputedStyle(e);t.style.whiteSpace="pre-wrap",t.style.wordWrap="break-word",t.style.position="fixed",t.style.overflow="hidden",["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"].forEach((function(e){t.style[e]=n[e]}));const o=e.getBoundingClientRect();return t.style.top=Math.round(o.top)+"px",t.style.left=Math.round(o.left)+"px",t.innerText=e.value,t}(e);let o=!1;try{o=kE(n,t)}catch(e){}return n.remove(),o}(e,n);{const t=Wf(e).getSelection(),o=function(e){return"IFRAME"===e.nodeName.toUpperCase()?e.getBoundingClientRect():{top:0,left:0}}(e);if(t.rangeCount)return kE(qf(e),n,o)}return!1}function kE(e,t,n={top:0,left:0}){const o=Wf(e).getSelection();for(const s of e.childNodes)if("#text"===s.nodeName.toLowerCase()){const e=o.getRangeAt(0).cloneRange();e.setStart(s,0),e.setEnd(s,s.textContent.length);const a=e.getClientRects();if(!a.length)continue;for(const e of a){const o={left:e.left+n.left,right:e.right+n.left,top:e.top+n.top,bottom:e.bottom+n.top};if(r=t,(i=o).left<=r.right&&i.right>=r.left&&i.top<=r.bottom&&i.bottom>=r.top)return!0}}else if(e.childNodes.length&&kE(s,t,n))return!0;var i,r;return!1}function LE(e,t){const n=t.filter((t=>new RegExp(t).exec(e)));return n&&n.length>0}function IE(e,t){return LE(e,R)||LE(t,O)}function AE(e){let t;try{t=new URL(e)}catch(e){return!1}return"http:"===t.protocol||"https:"===t.protocol}function ME(e,t){if(e&&t&&"string"==typeof e&&Array.isArray(t)){if(0===t.length)return e;for(const n of t)e.substr(0,n.length)===n&&(e=e.substr(n.length));return e}}function RE(e){try{return new URL(e),!0}catch(e){return!1}}const OE=e=>{const t={"&":".","<":".",">":".",'"':".","'":".","#":".",";":".","%":".","\\":".","/":"."};return e.replace(/[&<>"'#;%\\/]/g,(function(e){return t[e]}))};function NE(e){const t=e||window.getSelection().getRangeAt(0),n=t.getBoundingClientRect(),o=document.body.parentNode.getBoundingClientRect(),{top:i,left:r,right:s,bottom:a,height:l,width:c}=n,d={x:r-o.left,y:a-o.top,selectedTop:i,selectedBottom:a,selectedRight:o.width-s,selectedLeft:r+window.pageXOffset,selectedWidth:c,height:l};if(t.collapsed){const e=t.commonAncestorContainer;d.x=e.getBoundingClientRect().left,d.y=e.getBoundingClientRect().top+e.offsetHeight}return d}const DE=(e,t)=>{let n={left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom)};return n.left>=n.right||n.top>=n.bottom?null:n},PE=e=>{const t=window.getComputedStyle(e),n=t.getPropertyValue("overflow-y"),o=t.getPropertyValue("overflow-x"),i=["hidden","scroll","auto"];return i.includes(n)||i.includes(o)};function BE(e){const t=(e=>{let t=e.getBoundingClientRect(),n={left:t.left,right:t.right,bottom:t.bottom,top:t.top};const o={top:0,left:0,right:0,bottom:0,width:0,height:0},i={top:0,left:0,right:window.innerWidth,bottom:window.innerHeight};for(let t=e.parentElement;null!==t&&t!==e.ownerDocument.body;t=t.parentElement){let e=t.getBoundingClientRect();const i=DE(n,e);if(i)n=i;else if(PE(t))return o}return n=DE(n,i),n?{top:n.top,bottom:n.bottom,left:n.left,right:n.right,width:n.right-n.left,height:n.bottom-n.top}:o})(e),n=e.selectionStart,o=e.selectionEnd,i=document.createElement("div");i.id="mirror",document.body.appendChild(i);const r=window.getComputedStyle(e);i.style.fontFamily=r.fontFamily,i.style.fontSize=r.fontSize,i.style.padding=r.padding,i.style.border=r.border,i.style.lineHeight=r.lineHeight,i.style.whiteSpace="pre-wrap",i.style.wordWrap="break-word",i.style.visibility="hidden",i.style.top=`${t.top+window.scrollY}px`,i.style.bottom=`${t.bottom+window.scrollY}px`,i.style.left=`${t.left}px`,i.style.height=r.height,i.style.width=`${t.width}px`,i.style.position="absolute";const s=OE(e.value.substring(0,n)),a=OE(e.value.substring(n,o)),l=OE(e.value.substring(o)),c=dt(s+'<span id="marker-start" style="position: absolute;">|</span>'+a+'<span id="marker-end" style="position: absolute;">|</span>'+l);i.innerHTML=c;const d=document.getElementById("marker-start"),u=document.getElementById("marker-end"),p=d.getBoundingClientRect(),m=u.getBoundingClientRect(),g=document.body.parentNode.getBoundingClientRect(),h=e.getBoundingClientRect(),f={x:p.left-g.left,y:h.top>0?m.bottom-g.top:m.bottom-g.top+h.top,selectedTop:p.top,selectedBottom:m.bottom,selectedRight:g.width-m.right,selectedLeft:p.left+window.pageXOffset,selectedWidth:m.right-p.right,height:m.bottom-p.top};return document.body.removeChild(i),f}function UE(e){let t=e.childNodes[0];for(let n of Array.from(e.childNodes))if(t.getBoundingClientRect||(t=n),n.getBoundingClientRect&&(n.getBoundingClientRect().right>t.getBoundingClientRect().right&&(t=n),n.hasChildNodes())){const e=UE(n);if(e&&e.getBoundingClientRect){const o=n.getBoundingClientRect(),i=e.getBoundingClientRect();o.right<i.right&&(t=e)}}return t}const zE=e=>{const t=[],n=[];return WE({domElements:t,strings:n,element:e}),{domElements:t,strings:n}};function HE(e){for(var t=0;t<e.childNodes.length;++t){const n=e.childNodes[t];if("#text"!=n.nodeName&&"#comment"!=n.nodeName){if("block"==window.getComputedStyle(n).display)return!0;if(HE(n))return!0}}return!1}const FE=({strings:e,domElements:t})=>{for(const n in t)Array.isArray(e[n])?t[n].innerHTML=dt(e[n].join("")):t[n].innerHTML=dt(e[n])},WE=({domElements:e,strings:t,element:n})=>{if("#text"!=n.nodeName&&"#comment"!=n.nodeName)if(VE(n))e.push(n),t.push(dt(n.innerHTML));else for(const o of n.childNodes)WE({domElements:e,strings:t,element:o})},jE=({domElements:e,strings:t,element:n,tmpElementMap:o})=>{if("#text"!=n.nodeName&&"#comment"!=n.nodeName&&"FORM"!=n.nodeName)if(VE(n))void 0!==o&&qE({topElement:n,element:n,tmpElementMap:o}),e.push(n),t.push(dt(n.innerHTML));else for(const i of n.childNodes)jE({domElements:e,strings:t,element:i,tmpElementMap:o})},qE=({topElement:e,element:t,tmpElementMap:n})=>{Array.from(t.children).forEach((t=>{qE({topElement:e,element:t,tmpElementMap:n})})),t!==e&&GE(t,n)},GE=(e,t)=>{const n=Object.keys(t).length+1,o=e.tagName,i={};Array.from(e.attributes).forEach((e=>{i[e.name]=e.value}));const r=`a${n}`,s=document.createElement(r);s.innerHTML=dt(e.innerHTML),e.replaceWith(s),t[r]={originalTagName:o,originalAttributes:i}};function VE(e){if(YE(e)||KE(e))return!1;for(const t of e.childNodes)if("#text"==t.nodeName&&""!=t.wholeText.trim()||"font"==t.nodeName)return!0;for(const t of e.childNodes)if(!YE(t)&&(!ZE(t)||KE(t)||"inline"!=window.getComputedStyle(t).display||HE(e)))return!1;if(void 0===e.innerText||""==e.innerText.trim())return!1;if(1===e.childNodes.length){const t=e.childNodes[0];return YE(t)}return!0}const YE=e=>"#text"==e.nodeName||"#comment"==e.nodeName,ZE=e=>ae.includes(e.nodeName.toLowerCase()),KE=e=>se.includes(e.nodeName.toLowerCase());function XE(e){for(var t=[];null!=e.parentNode;){for(var n=0,o=0,i=0;i<e.parentNode.childNodes.length;i++){var r=e.parentNode.childNodes[i];r.nodeName===e.nodeName&&(r===e&&(o=n),n++)}e.hasAttribute("id")&&""!=e.id?t.unshift(e.nodeName.toLowerCase()+"#"+e.id):n>1?t.unshift(e.nodeName.toLowerCase()+":nth-child("+(o+1)+")"):t.unshift(e.nodeName.toLowerCase()),e=e.parentNode}return t.slice(1)}function JE(e){let t;return{c(){t=Wg("div"),Xg(t,"class","loader svelte-c65fyl"),ih(t,"small",e[0])},m(e,n){zg(e,t,n)},p(e,[n]){1&n&&ih(t,"small",e[0])},i:mg,o:mg,d(e){e&&Hg(t)}}}function QE(e,t,n){let{small:o=!1}=t;return e.$$set=e=>{"small"in e&&n(0,o=e.small)},[o]}class eS extends Qh{constructor(e){super(),Jh(this,e,QE,JE,yg,{small:0})}}const tS={developer_tools:"DEVELOPER_TOOLS",settings_page:"SETTINGS_PAGE",settings_writing:"SETTINGS_WRITING",settings_reading:"SETTINGS_READING",settings_customizations:"SETTINGS_CUSTOMIZATIONS",settings_glossary:"SETTINGS_GLOSSARY",onboarding:"ONBOARDING",onboarding_after_successful_login:"ONBOARDING_AFTER_SUCCESSFUL_LOGIN",firefox_first_run:"FIREFOX_FIRST_RUN",privacy_policy:"PRIVACY_POLICY",create_account:"CREATE_ACCOUNT"};function nS(e){let t,n,o,i,r,s;return{c(){t=Wg("div"),n=Wg("span"),n.textContent=`${chrome.i18n.getMessage("inline_translation_link_more_settings")}`,o=Gg(),i=Wg("span"),Xg(i,"class","icon icon-external-link svelte-1yv621f"),Xg(t,"class","settings-link svelte-1yv621f")},m(a,l){zg(a,t,l),Pg(t,n),Pg(t,o),Pg(t,i),r||(s=Yg(t,"click",Kg(Zg(e[0]))),r=!0)},p:mg,i:mg,o:mg,d(e){e&&Hg(t),r=!1,s()}}}function oS(e,n,o){let{page:i=tS.settings_page}=n;return e.$$set=e=>{"page"in e&&o(1,i=e.page)},[function(){t({action:"dlOpenInternalPage",payload:{destination:i}})},i]}class iS extends Qh{constructor(e){super(),Jh(this,e,oS,nS,yg,{page:1})}}function rS(e){let t,n,o;return{c(){t=Wg("button"),Xg(t,"type","button"),Xg(t,"class","close-icon svelte-nskp1z")},m(i,r){zg(i,t,r),n||(o=Yg(t,"click",e[0]),n=!0)},p:mg,i:mg,o:mg,d(e){e&&Hg(t),n=!1,o()}}}function sS(e){return[function(t){wh.call(this,e,t)}]}class aS extends Qh{constructor(e){super(),Jh(this,e,sS,rS,yg,{})}}function lS(e){let t,n,o,i,r,s,a,l,c,d,u,p,m;return i=new aS({}),i.$on("click",e[2]),c=new Mw({props:{value:e[0].selectedTargetLanguage}}),c.$on("selection",e[3]),p=new iS({}),{c(){t=Wg("div"),n=Wg("div"),o=Wg("div"),Zh(i.$$.fragment),r=Gg(),s=Wg("div"),a=Wg("p"),a.textContent=`${chrome.i18n.getMessage("whatsapp_web_settings_languageswitch_label")}`,l=Gg(),Zh(c.$$.fragment),d=Gg(),u=Wg("div"),Zh(p.$$.fragment),Xg(o,"class","close-icon-container svelte-8cr9h0"),Xg(n,"class","header"),Xg(a,"class","label-language-switch svelte-8cr9h0"),Xg(s,"class","body svelte-8cr9h0"),Xg(u,"class","footer svelte-8cr9h0"),Xg(t,"class","container svelte-8cr9h0")},m(e,g){zg(e,t,g),Pg(t,n),Pg(n,o),Kh(i,o,null),Pg(t,r),Pg(t,s),Pg(s,a),Pg(s,l),Kh(c,s,null),Pg(t,d),Pg(t,u),Kh(p,u,null),m=!0},p(e,[t]){const n={};1&t&&(n.value=e[0].selectedTargetLanguage),c.$set(n)},i(e){m||(Hh(i.$$.fragment,e),Hh(c.$$.fragment,e),Hh(p.$$.fragment,e),m=!0)},o(e){Fh(i.$$.fragment,e),Fh(c.$$.fragment,e),Fh(p.$$.fragment,e),m=!1},d(e){e&&Hg(t),Xh(i),Xh(c),Xh(p)}}}function cS(e,t,n){let o;const i=yh("deepl_settings");bg(e,i,(e=>n(0,o=e)));const r=_h();return[o,i,function(){r("close")},e=>i.set({selectedTargetLanguage:e.detail.selectedOption.value,isTargetLanguageConfirmed:!0,regionalVariant:e.detail.selectedOption.regionalVariant||""})]}class dS extends Qh{constructor(e){super(),Jh(this,e,cS,lS,yg,{})}}function uS(e){return/\bdark\b/gm.test(e)}const pS=function(){let e={isDarkMode:uS(document.body.className)};const{subscribe:t,update:n}=tf(e);let o=new MutationObserver((e=>{e.forEach((e=>{"attributes"===e.type&&"class"===e.attributeName&&n((e=>({...e,isDarkMode:uS(document.body.className)})))}))}));return o.observe(document.body,{attributes:!0}),setTimeout((()=>{d_((()=>{o.disconnect()}))})),{subscribe:t}}();function mS(e){let t,n,o,i,r,s,a,l,c,d,u,p,m,g;const h=[hS,gS],f=[];function _(e,t){return e[2]?0:1}return n=_(e),o=f[n]=h[n](e),{c(){t=Wg("div"),o.c(),i=Gg(),r=Wg("div"),r.textContent=`${chrome.i18n.getMessage("whatsapp_web_show_alternatives_link")}`,s=Gg(),a=Wg("button"),l=jg("svg"),c=jg("path"),Xg(r,"class","show-alternatives svelte-3k7vbu"),ih(r,"dark",e[6]),Xg(c,"d","M3 9L9 3M3 3L9 9"),Xg(c,"stroke",d=e[3]&&e[3].isDarkMode?"#F2F4F7":"#037171"),Xg(c,"stroke-width","1.5"),Xg(c,"stroke-linecap","round"),Xg(c,"stroke-linejoin","round"),Xg(l,"width","12"),Xg(l,"height","12"),Xg(l,"viewBox","0 0 12 12"),Xg(l,"fill","none"),Xg(l,"xmlns","http://www.w3.org/2000/svg"),Xg(a,"class","svelte-3k7vbu"),Xg(t,"class","container svelte-3k7vbu"),Xg(t,"dir",Bt()),ih(t,"dark",e[6])},m(o,d){zg(o,t,d),f[n].m(t,null),Pg(t,i),Pg(t,r),Pg(t,s),Pg(t,a),Pg(a,l),Pg(l,c),p=!0,m||(g=[Yg(r,"click",e[7]),Yg(a,"click",(function(){vg(e[1])&&e[1].apply(this,arguments)}))],m=!0)},p(s,a){let l=n;n=_(e=s),n===l?f[n].p(e,a):(Uh(),Fh(f[l],1,1,(()=>{f[l]=null})),zh(),o=f[n],o?o.p(e,a):(o=f[n]=h[n](e),o.c()),Hh(o,1),o.m(t,i)),(!p||64&a)&&ih(r,"dark",e[6]),(!p||8&a&&d!==(d=e[3]&&e[3].isDarkMode?"#F2F4F7":"#037171"))&&Xg(c,"stroke",d),(!p||64&a)&&ih(t,"dark",e[6])},i(e){p||(Hh(o),u||kh((()=>{u=jh(t,Of,{y:-10,duration:200}),u.start()})),p=!0)},o(e){Fh(o),p=!1},d(e){e&&Hg(t),f[n].d(),m=!1,_g(g)}}}function gS(e){let t,n,o,i;return{c(){t=Wg("div"),n=Wg("span"),o=qg(e[0]),Xg(n,"class","translatedText svelte-3k7vbu"),Xg(t,"dir",i=Bt(e[5]))},m(e,i){zg(e,t,i),Pg(t,n),Pg(n,o)},p(e,n){1&n&&Jg(o,e[0]),32&n&&i!==(i=Bt(e[5]))&&Xg(t,"dir",i)},i:mg,o:mg,d(e){e&&Hg(t)}}}function hS(e){let t,n;return t=new Cy({props:{error:e[2]}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.error=e[2]),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function fS(e){let t,n,o=e[4]&&mS(e);return{c(){o&&o.c(),t=Vg()},m(e,i){o&&o.m(e,i),zg(e,t,i),n=!0},p(e,[n]){e[4]?o?(o.p(e,n),16&n&&Hh(o,1)):(o=mS(e),o.c(),Hh(o,1),o.m(t.parentNode,t)):o&&(Uh(),Fh(o,1,1,(()=>{o=null})),zh())},i(e){n||(Hh(o),n=!0)},o(e){Fh(o),n=!1},d(e){e&&Hg(t),o&&o.d(e)}}}function _S(e,n,o){let i,r,s;bg(e,nf,(e=>o(9,r=e))),bg(e,pS,(e=>o(3,s=e))),vh("text_direction",Bt());let a,l,{translatedText:c}=n,{sourceText:d}=n,{onClose:u}=n,{error:p}=n,m=!1;return setTimeout((()=>o(4,m=!0)),50),e.$$set=e=>{"translatedText"in e&&o(0,c=e.translatedText),"sourceText"in e&&o(8,d=e.sourceText),"onClose"in e&&o(1,u=e.onClose),"error"in e&&o(2,p=e.error)},e.$$.update=()=>{8&e.$$.dirty&&o(6,i=s&&s.isDarkMode),256&e.$$.dirty&&Mt(d).then((e=>{a=e})),512&e.$$.dirty&&o(5,l=r.selectedTargetLanguage)},[c,u,p,s,m,l,i,function(){t({action:"dlExternalURLRedirect",payload:{destination:cv,sourceLang:a,targetLang:l,textToShare:d}})},d,r]}class vS extends Qh{constructor(e){super(),Jh(this,e,_S,fS,yg,{translatedText:0,sourceText:8,onClose:1,error:2})}}class yS{static HTML_TAG_NAME="deepl-whatsapp-translated-message";static createElement=(e=document)=>{const t=e.createElement(yS.HTML_TAG_NAME),n=new yS(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowContainer.addEventListener("click",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=(e,t,n,o)=>{this.domElement.mainComponent=new vS({target:this.domElement.shadowContainer,props:{translatedText:e,onClose:n,sourceText:t,error:o}})};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}function wS(e){let t,n,o,i,r,s,a,l;const c=[ES,bS],d=[];function u(e,t){return e[5]?0:1}n=u(e),o=d[n]=c[n](e);let p=e[7]&&$S(e);return{c(){t=Wg("div"),o.c(),i=Gg(),p&&p.c(),Xg(t,"class","container svelte-tz0fan"),Xg(t,"style",r=`\n    top: ${e[6]}px; \n    left: ${e[12]}px; \n    z-index: ${e[14]}; \n    opacity: ${e[11]};`),Xg(t,"dir",Bt()),ih(t,"isTranslated",e[4]),ih(t,"isHidden",e[1]),ih(t,"messageHasReactionIcon",e[8]),ih(t,"isExpanded",e[2]),ih(t,"isParentRTL",e[0])},m(o,r){zg(o,t,r),d[n].m(t,null),Pg(t,i),p&&p.m(t,null),e[26](t),s=!0,a||(l=[Yg(t,"mouseleave",e[27]),Lg(c_.call(null,t,{isShadow:!0})),Yg(t,"click_outside",e[16]),Yg(t,"mousedown",Kg(Zg(e[21])))],a=!0)},p(e,a){let l=n;n=u(e),n===l?d[n].p(e,a):(Uh(),Fh(d[l],1,1,(()=>{d[l]=null})),zh(),o=d[n],o?o.p(e,a):(o=d[n]=c[n](e),o.c()),Hh(o,1),o.m(t,i)),e[7]?p?(p.p(e,a),128&a&&Hh(p,1)):(p=$S(e),p.c(),Hh(p,1),p.m(t,null)):p&&(Uh(),Fh(p,1,1,(()=>{p=null})),zh()),(!s||6208&a&&r!==(r=`\n    top: ${e[6]}px; \n    left: ${e[12]}px; \n    z-index: ${e[14]}; \n    opacity: ${e[11]};`))&&Xg(t,"style",r),(!s||16&a)&&ih(t,"isTranslated",e[4]),(!s||2&a)&&ih(t,"isHidden",e[1]),(!s||256&a)&&ih(t,"messageHasReactionIcon",e[8]),(!s||4&a)&&ih(t,"isExpanded",e[2]),(!s||1&a)&&ih(t,"isParentRTL",e[0])},i(e){s||(Hh(o),Hh(p),s=!0)},o(e){Fh(o),Fh(p),s=!1},d(o){o&&Hg(t),d[n].d(),p&&p.d(),e[26](null),a=!1,_g(l)}}}function bS(e){let t,n,o,i;t=new h_({props:{tooltip:chrome.i18n.getMessage("whatsapp_web_tooltip_translate_button"),multiline:!0,zIndex:"0",parentIsRTL:e[0],ignoreTextDirection:!0,$$slots:{default:[SS]},$$scope:{ctx:e}}});let r=e[2]&&TS(e);return{c(){Zh(t.$$.fragment),n=Gg(),r&&r.c(),o=Vg()},m(e,s){Kh(t,e,s),zg(e,n,s),r&&r.m(e,s),zg(e,o,s),i=!0},p(e,n){const i={};1&n&&(i.parentIsRTL=e[0]),1073741828&n&&(i.$$scope={dirty:n,ctx:e}),t.$set(i),e[2]?r?(r.p(e,n),4&n&&Hh(r,1)):(r=TS(e),r.c(),Hh(r,1),r.m(o.parentNode,o)):r&&(Uh(),Fh(r,1,1,(()=>{r=null})),zh())},i(e){i||(Hh(t.$$.fragment,e),Hh(r),i=!0)},o(e){Fh(t.$$.fragment,e),Fh(r),i=!1},d(e){e&&(Hg(n),Hg(o)),Xh(t,e),r&&r.d(e)}}}function ES(e){let t,n;return t=new eS({props:{small:!0}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p:mg,i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function SS(e){let t,n,o;return{c(){t=Wg("div"),t.innerHTML='<svg width="15" height="15" viewBox="0 0 19 19" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-tz0fan"><g clip-path="url(#clip0)"><path d="M1.85295 4.86015V12.4035C1.85295 12.7953 2.05334 13.1545 2.38029 13.3504L8.70832 17.1167C8.72427 17.1262 8.7404 17.1353 8.75668 17.1439L11.8727 19L11.8621 17.3672L11.8685 16.4605L11.8717 16.4747V16.1699C11.8717 15.9893 11.9613 15.8272 12.0993 15.7262L12.3015 15.6059L12.3991 15.5494L12.394 15.5508L16.091 13.3504C16.418 13.1545 16.6184 12.7953 16.6184 12.4035V4.86015C16.6184 4.46829 16.418 4.10909 16.091 3.91316L9.76299 0.146947C9.43604 -0.0489825 9.03527 -0.0489825 8.70832 0.146947L2.38029 3.92404C2.05334 4.11997 1.85295 4.47918 1.85295 4.86015Z" fill="#0F2B46"></path><path d="M6.68257 5.19787C7.10444 4.77336 7.77943 4.77336 8.2013 5.19787C8.50446 5.49621 8.60497 5.92588 8.50281 6.3113L11.4143 8.05411C11.4193 8.04902 11.4243 8.04396 11.4294 8.03894C11.8513 7.61442 12.5263 7.61442 12.9481 8.03894C13.4017 8.48522 13.4017 9.2254 12.9481 9.67168C12.5263 10.0962 11.8513 10.0962 11.4294 9.67168C11.111 9.35838 11.0162 8.90024 11.1448 8.50062L11.1341 8.50683L8.24372 6.78659C8.23005 6.80156 8.21591 6.81624 8.2013 6.83062C7.77943 7.25514 7.10444 7.25514 6.68257 6.83062C6.22906 6.38434 6.22906 5.64416 6.68257 5.19787Z" fill="white"></path><path d="M8.50819 11.5811L11.3455 9.88917L10.8182 9.58439L8.2574 11.1016C8.23971 11.0816 8.2212 11.062 8.20187 11.043C7.78 10.6185 7.10501 10.6185 6.68314 11.043C6.22963 11.4893 6.22963 12.2295 6.68314 12.6757C7.10501 13.1003 7.78 13.1003 8.20187 12.6757C8.50012 12.3822 8.60222 11.9616 8.50819 11.5811Z" fill="white"></path></g><defs><clipPath id="clip0"><rect width="18.5294" height="19" fill="white" transform="matrix(-1 0 0 1 18.5294 0)"></rect></clipPath></defs></svg>',Xg(t,"class","translateTrigger svelte-tz0fan")},m(i,r){zg(i,t,r),n||(o=[Yg(t,"mouseover",e[23]),Yg(t,"click",e[15])],n=!0)},p:mg,d(e){e&&Hg(t),n=!1,_g(o)}}}function TS(e){let t,n;return t=new h_({props:{tooltip:chrome.i18n.getMessage("whatsapp_web_tooltip_settings_button"),multiline:!0,zIndex:"0",$$slots:{default:[xS]},$$scope:{ctx:e}}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};1073741952&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function xS(e){let t,n,o,i;return{c(){t=Wg("div"),t.innerHTML='<svg width="15" height="15" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-tz0fan"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.11001 16.2439H10.71L11.025 14.0488C11.565 13.8732 12.015 13.6098 12.465 13.2585L14.58 14.0488L16.38 10.9756L14.625 9.57073C14.67 9.30732 14.67 9.0439 14.67 8.78049C14.67 8.51707 14.67 8.25366 14.625 7.99024L16.38 6.58537L14.58 3.5122L12.465 4.30244C12.015 3.99512 11.52 3.73171 11.025 3.5122L10.665 1.31707H7.06501L6.70501 3.5122C6.16501 3.68781 5.71501 3.95122 5.26501 4.30244L3.15001 3.5122L1.35001 6.58537L3.10501 7.99024C3.06001 8.25366 3.06001 8.51707 3.06001 8.78049C3.06001 9.0439 3.06001 9.30732 3.10501 9.57073L1.35001 10.9756L3.15001 14.0488L5.31001 13.2585C5.76001 13.5659 6.25501 13.8293 6.75001 14.0488L7.11001 16.2439ZM9.94501 15.3659H7.83001L7.51501 13.3463L7.24501 13.2585C6.66001 13.0829 6.12001 12.7756 5.67001 12.3805L5.44501 12.2049L3.55501 12.9073L2.52001 11.1512L4.09501 9.87805L4.05001 9.61463C4.00501 9.30732 3.96001 9 3.96001 8.73659C3.96001 8.47317 4.00501 8.16585 4.05001 7.85854L4.09501 7.63902L2.52001 6.36585L3.55501 4.60976L5.44501 5.3122L5.67001 5.09268C6.12001 4.69756 6.66001 4.43415 7.24501 4.21463L7.51501 4.12683L7.83001 2.19512H9.94501L10.26 4.21463L10.53 4.30244C11.115 4.47805 11.655 4.78537 12.105 5.18049L12.285 5.3561L14.175 4.65366L15.21 6.40976L13.635 7.68293L13.68 7.94634C13.725 8.25366 13.77 8.56098 13.77 8.82439C13.77 9.08781 13.725 9.39512 13.68 9.70244L13.635 9.96585L15.21 11.239L14.175 12.9951L12.285 12.2927L12.105 12.4683C11.655 12.8634 11.115 13.1268 10.53 13.3463L10.26 13.4341L9.94501 15.3659ZM6.03018 8.78047C6.03018 10.3171 7.29018 11.5463 8.86518 11.5463C10.4402 11.5463 11.7002 10.3171 11.7002 8.78047C11.7002 7.24388 10.4402 6.01461 8.86518 6.01461C7.29018 6.01461 6.03018 7.24388 6.03018 8.78047ZM6.93018 8.78047C6.93018 7.72681 7.78518 6.89266 8.86518 6.89266C9.94518 6.89266 10.8002 7.72681 10.8002 8.78047C10.8002 9.83413 9.94518 10.6683 8.86518 10.6683C7.78518 10.6683 6.93018 9.83413 6.93018 8.78047Z" fill="#0F2B46"></path></svg>',Xg(t,"class","settingsTrigger svelte-tz0fan")},m(n,r){zg(n,t,r),o||(i=[Yg(t,"click",e[24]),Yg(t,"mousedown",Kg(Zg(e[22])))],o=!0)},p:mg,i(e){n||kh((()=>{n=jh(t,Of,{x:-8,duration:600}),n.start()}))},o:mg,d(e){e&&Hg(t),o=!1,_g(i)}}}function $S(e){let t,n,o,i,r;return n=new dS({}),n.$on("close",e[25]),{c(){t=Wg("div"),Zh(n.$$.fragment),Xg(t,"class","settingsContainer svelte-tz0fan"),ih(t,"isTop",!e[9]),ih(t,"isLeft",!e[10])},m(e,o){zg(e,t,o),Kh(n,t,null),r=!0},p(e,n){(!r||512&n)&&ih(t,"isTop",!e[9]),(!r||1024&n)&&ih(t,"isLeft",!e[10])},i(e){r||(Hh(n.$$.fragment,e),kh((()=>{r&&(i&&i.end(1),o=jh(t,Of,{y:-10,duration:600}),o.start())})),r=!0)},o(e){Fh(n.$$.fragment,e),o&&o.invalidate(),i=qh(t,Of,{y:-10,duration:600}),r=!1},d(e){e&&Hg(t),Xh(n),e&&i&&i.end()}}}function CS(e){let t,n,o=e[13]&&e[13].isWhatsAppWebEnabled&&wS(e);return{c(){o&&o.c(),t=Vg()},m(e,i){o&&o.m(e,i),zg(e,t,i),n=!0},p(e,[n]){e[13]&&e[13].isWhatsAppWebEnabled?o?(o.p(e,n),8192&n&&Hh(o,1)):(o=wS(e),o.c(),Hh(o,1),o.m(t.parentNode,t)):o&&(Uh(),Fh(o,1,1,(()=>{o=null})),zh())},i(e){n||(Hh(o),n=!0)},o(e){Fh(o),n=!1},d(e){e&&Hg(t),o&&o.d(e)}}}function kS(e,n,o){let i;bg(e,nf,(e=>o(13,i=e))),vh("deepl_settings",nf),vh("deepl_website_settings",yw),vh("text_direction",Bt());let{textElement:r}=n,{messageContainer:s}=n,a=!1;const l=265,c=150,d=220;let u,p,m,g,h=!1,f=!0,_=0,v=0,y=!1,w=!1,b=!1,E=D.deepl_inline_ui.z_index,S=!0,T=!0,x=0;function $(){const e=u.parentNode.getBoundingClientRect(),t=UE(s);o(6,v=s.getBoundingClientRect().height/2),o(19,_=t.getBoundingClientRect().right-e.left);setTimeout((()=>{const t=s.querySelector('[data-icon="react"]');t&&(o(19,_=t.getBoundingClientRect().right-e.left),o(20,m=!0)),o(11,x=1),a&&o(19,_=_+-42)}),c);const n=s.querySelector('[data-a8n="reaction-bubble"]'),i=s.querySelector('[data-testid="reaction-bubble"]');o(8,b=!(!n&&!i)),window.innerHeight-e.bottom<d+v?o(9,S=!1):o(9,S=!0),s.getBoundingClientRect().right-t.getBoundingClientRect().right<l?o(10,T=!1):o(10,T=!0)}s.addEventListener("mouseover",(()=>{o(1,f=!1)}),!1),s.addEventListener("mouseout",(()=>{y||o(1,f=!0)}),!1);return e.$$set=e=>{"textElement"in e&&o(18,r=e.textElement),"messageContainer"in e&&o(17,s=e.messageContainer)},e.$$.update=()=>{1310722&e.$$.dirty&&(o(0,a=Ut(r.parentNode)),f||m||$()),524293&e.$$.dirty&&(console.log("isParentRTL",a),console.log("shdfL",w),o(12,g=a&&w?_-20:_))},[a,f,w,u,p,h,v,y,b,S,T,x,g,i,E,async function(){if(p)return;o(5,h=!0),o(7,y=!1);let e,n,i="";try{i=await Mt(r.innerText)}catch(e){console.log(e)}try{n=await t({action:"dlRequestWhatsAppMessageTranslation",payload:{message:r.innerText,messageLang:i,domainName:window.location.hostname}})}catch(t){e=t,console.error(e)}o(4,p=e?"":n[0].text),o(5,h=!1);const a=yS.createElement();a.createDOM(p,r.innerText,(()=>{o(17,s.dataset.dlIsTranslated="false",s),setTimeout((()=>o(4,p="")),600),a.cleanupDOM(),a.remove()}),e),r.appendChild(a),o(17,s.dataset.dlIsTranslated="true",s)},function(){o(7,y=!1)},s,r,_,m,function(t){wh.call(this,e,t)},function(t){wh.call(this,e,t)},()=>o(2,w=!0),()=>o(7,y=!y),()=>o(7,y=!1),function(e){Eh[e?"unshift":"push"]((()=>{u=e,o(3,u)}))},()=>{y||o(2,w=!1)}]}class LS extends Qh{constructor(e){super(),Jh(this,e,kS,CS,yg,{textElement:18,messageContainer:17})}}class IS{static HTML_TAG_NAME="deepl-whatsapp-message-in-translator";static createElement=(e=document)=>{const t=e.createElement(IS.HTML_TAG_NAME),n=new IS(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowContainer.addEventListener("click",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=(e,t)=>{this.domElement.mainComponent=new LS({target:this.domElement.shadowContainer,props:{textElement:e,messageContainer:t}})};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}function AS(){const e=document.querySelector("deepl-whatsapp-messages-in-translator");if(e){const t=document.body.querySelector("[data-testid=conversation-panel-messages]"),n=document.querySelector("footer").getBoundingClientRect(),o=t.getBoundingClientRect();return e.style.left=o.right-58+"px",void(e.style.top=n.top-55+"px")}}function MS(){let e=new MutationObserver((()=>{!function(){const e=document.body.querySelectorAll(".message-in");for(let t of e)if("true"!==t.dataset.dlHasMessageTranslator&&"true"!==t.dataset.dlIsTranslated){t.dataset.dlHasMessageTranslator="true";const e=t.querySelector(".selectable-text.copyable-text");if(e&&e.innerText&&!RE(e.innerText)){const n=IS.createElement();n.createDOM(e,t),n.style.position="absolute",n.style.top="0px",t.appendChild(n)}}}()}));e.observe(document.body,{attributes:!0,childList:!0,subtree:!0}),window.addEventListener("resize",AS),d_((()=>{window.removeEventListener("resize",AS),e.disconnect()}))}class RS{constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowContainer.addEventListener("mouseup",(e=>{e.stopPropagation(),e.stopImmediatePropagation()})),this.domElement.shadowContainer.addEventListener("mousedown",(e=>{e.stopPropagation(),e.stopImmediatePropagation()})),this.domElement.shadowContainer.addEventListener("click",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=()=>{throw new Error("createDOM must be defined in the child component")};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()};bindChildFunctions=(e=[])=>{["createDOM","cleanupDOM",...e].forEach((e=>{this.domElement[e]=this[e]}))}}const OS="rgb(0, 0, 0)",NS="rgb(21, 32, 43)";function DS(e){return e===OS||e===NS}const PS=function(){let e={isDarkMode:DS(document.body.style.backgroundColor)};const{subscribe:t,update:n}=tf(e);let o=new MutationObserver((e=>{e.forEach((e=>{"attributes"===e.type&&"style"===e.attributeName&&n((e=>({...e,isDarkMode:DS(document.body.style.backgroundColor)})))}))}));return o.observe(document.body,{attributes:!0}),setTimeout((()=>{d_((()=>{o.disconnect()}))})),{subscribe:t}}();function BS(e){let t,n,o=function(e){let t,n,o,i,r,s,a,l,c,d,u,p,m,g,h,f;const _=[zS,US],v=[];function y(e,t){return e[2]?0:1}return o=y(e),i=v[o]=_[o](e),{c(){t=Wg("div"),n=Wg("div"),i.c(),r=Gg(),s=Wg("div"),s.textContent=`${chrome.i18n.getMessage("twitter_web_alternatives_link")}`,l=Gg(),c=Wg("button"),d=jg("svg"),u=jg("path"),Xg(s,"class","show-alternatives svelte-t50unb"),ih(s,"dark",e[4]),Xg(n,"dir",a=Bt(e[3].selectedTargetLanguage)),Xg(u,"d","M3 9L9 3M3 3L9 9"),Xg(u,"stroke",p=e[4]?"white":"#037171"),Xg(u,"stroke-width","1.5"),Xg(u,"stroke-linecap","round"),Xg(u,"stroke-linejoin","round"),Xg(d,"width","12"),Xg(d,"height","12"),Xg(d,"viewBox","0 0 12 12"),Xg(d,"fill","none"),Xg(d,"xmlns","http://www.w3.org/2000/svg"),Xg(c,"class","svelte-t50unb"),Xg(t,"class","container svelte-t50unb"),Xg(t,"dir",Bt()),ih(t,"dark",e[4])},m(i,a){zg(i,t,a),Pg(t,n),v[o].m(n,null),Pg(n,r),Pg(n,s),Pg(t,l),Pg(t,c),Pg(c,d),Pg(d,u),g=!0,h||(f=[Yg(s,"click",e[5]),Yg(c,"click",(function(){vg(e[1])&&e[1].apply(this,arguments)}))],h=!0)},p(l,c){let d=o;o=y(e=l),o===d?v[o].p(e,c):(Uh(),Fh(v[d],1,1,(()=>{v[d]=null})),zh(),i=v[o],i?i.p(e,c):(i=v[o]=_[o](e),i.c()),Hh(i,1),i.m(n,r)),(!g||16&c)&&ih(s,"dark",e[4]),(!g||8&c&&a!==(a=Bt(e[3].selectedTargetLanguage)))&&Xg(n,"dir",a),(!g||16&c&&p!==(p=e[4]?"white":"#037171"))&&Xg(u,"stroke",p),(!g||16&c)&&ih(t,"dark",e[4])},i(e){g||(Hh(i),m||kh((()=>{m=jh(t,Of,{y:-10,duration:200}),m.start()})),g=!0)},o(e){Fh(i),g=!1},d(e){e&&Hg(t),v[o].d(),h=!1,_g(f)}}}(e);return{c(){o&&o.c(),t=Vg()},m(e,i){o&&o.m(e,i),zg(e,t,i),n=!0},p(e,t){o.p(e,t)},i(e){n||(Hh(o),n=!0)},o(e){Fh(o),n=!1},d(e){e&&Hg(t),o&&o.d(e)}}}function US(e){let t,n;return{c(){t=Wg("span"),n=qg(e[0]),Xg(t,"class","translatedText svelte-t50unb")},m(e,o){zg(e,t,o),Pg(t,n)},p(e,t){1&t&&Jg(n,e[0])},i:mg,o:mg,d(e){e&&Hg(t)}}}function zS(e){let t,n;return t=new Cy({props:{error:e[2]}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.error=e[2]),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function HS(e){let t,n,o=e[3]&&e[3].isTwitterEnabled&&BS(e);return{c(){o&&o.c(),t=Vg()},m(e,i){o&&o.m(e,i),zg(e,t,i),n=!0},p(e,[n]){e[3]&&e[3].isTwitterEnabled?o?(o.p(e,n),8&n&&Hh(o,1)):(o=BS(e),o.c(),Hh(o,1),o.m(t.parentNode,t)):o&&(Uh(),Fh(o,1,1,(()=>{o=null})),zh())},i(e){n||(Hh(o),n=!0)},o(e){Fh(o),n=!1},d(e){e&&Hg(t),o&&o.d(e)}}}function FS(e,n,o){let i,r,s;bg(e,nf,(e=>o(3,r=e))),bg(e,PS,(e=>o(7,s=e))),vh("text_direction",Bt());let a,l,{translatedText:c}=n,{sourceText:d}=n,{onClose:u}=n,{error:p}=n;return e.$$set=e=>{"translatedText"in e&&o(0,c=e.translatedText),"sourceText"in e&&o(6,d=e.sourceText),"onClose"in e&&o(1,u=e.onClose),"error"in e&&o(2,p=e.error)},e.$$.update=()=>{128&e.$$.dirty&&o(4,i=s&&s.isDarkMode),64&e.$$.dirty&&Mt(d).then((e=>{a=e})),8&e.$$.dirty&&(l=r.selectedTargetLanguage)},[c,u,p,r,i,function(){t({action:"dlExternalURLRedirect",payload:{destination:cv,sourceLang:a,targetLang:l,textToShare:d}})},d,s]}class WS extends Qh{constructor(e){super(),Jh(this,e,FS,HS,yg,{translatedText:0,sourceText:6,onClose:1,error:2})}}class jS extends RS{static HTML_TAG_NAME="deepl-twitter-translated-tweet";constructor(e){super(e),this.bindChildFunctions()}static createElement=(e=document)=>{const t=e.createElement(jS.HTML_TAG_NAME);return new jS(t),t};createDOM=(e,t,n,o)=>{this.domElement.mainComponent=new WS({target:this.domElement.shadowContainer,props:{translatedText:e,onClose:n,sourceText:t,error:o}})}}function qS(e){let t,n,o,i;const r=[VS,GS],s=[];function a(e,t){return e[2]?0:e[3]?1:-1}return~(n=a(e))&&(o=s[n]=r[n](e)),{c(){t=Wg("div"),o&&o.c(),Xg(t,"dir",Bt())},m(e,o){zg(e,t,o),~n&&s[n].m(t,null),i=!0},p(e,i){let l=n;n=a(e),n===l?~n&&s[n].p(e,i):(o&&(Uh(),Fh(s[l],1,1,(()=>{s[l]=null})),zh()),~n?(o=s[n],o?o.p(e,i):(o=s[n]=r[n](e),o.c()),Hh(o,1),o.m(t,null)):o=null)},i(e){i||(Hh(o),i=!0)},o(e){Fh(o),i=!1},d(e){e&&Hg(t),~n&&s[n].d()}}}function GS(e){let t,n,o,i,r,s,a,l,c,d,u,p,m,g;return{c(){t=Wg("button"),n=Wg("div"),n.textContent=`${chrome.i18n.getMessage("twitter_web_translate_tweet_link")}`,o=Gg(),i=jg("svg"),r=jg("g"),s=jg("path"),a=jg("path"),l=jg("path"),c=jg("defs"),d=jg("clipPath"),u=jg("rect"),Xg(n,"class","copy svelte-qovtib"),Xg(s,"d","M1.85295 4.86015V12.4035C1.85295 12.7953 2.05334 13.1545 2.38029 13.3504L8.70832 17.1167C8.72427 17.1262 8.7404 17.1353 8.75668 17.1439L11.8727 19L11.8621 17.3672L11.8685 16.4605L11.8717 16.4747V16.1699C11.8717 15.9893 11.9613 15.8272 12.0993 15.7262L12.3015 15.6059L12.3991 15.5494L12.394 15.5508L16.091 13.3504C16.418 13.1545 16.6184 12.7953 16.6184 12.4035V4.86015C16.6184 4.46829 16.418 4.10909 16.091 3.91316L9.76299 0.146947C9.43604 -0.0489825 9.03527 -0.0489825 8.70832 0.146947L2.38029 3.92404C2.05334 4.11997 1.85295 4.47918 1.85295 4.86015Z"),Xg(s,"class","deepl-icon svelte-qovtib"),Xg(a,"d","M6.68257 5.19787C7.10444 4.77336 7.77943 4.77336 8.2013 5.19787C8.50446 5.49621 8.60497 5.92588 8.50281 6.3113L11.4143 8.05411C11.4193 8.04902 11.4243 8.04396 11.4294 8.03894C11.8513 7.61442 12.5263 7.61442 12.9481 8.03894C13.4017 8.48522 13.4017 9.2254 12.9481 9.67168C12.5263 10.0962 11.8513 10.0962 11.4294 9.67168C11.111 9.35838 11.0162 8.90024 11.1448 8.50062L11.1341 8.50683L8.24372 6.78659C8.23005 6.80156 8.21591 6.81624 8.2013 6.83062C7.77943 7.25514 7.10444 7.25514 6.68257 6.83062C6.22906 6.38434 6.22906 5.64416 6.68257 5.19787Z"),Xg(a,"fill","white"),Xg(l,"d","M8.50819 11.5811L11.3455 9.88917L10.8182 9.58439L8.2574 11.1016C8.23971 11.0816 8.2212 11.062 8.20187 11.043C7.78 10.6185 7.10501 10.6185 6.68314 11.043C6.22963 11.4893 6.22963 12.2295 6.68314 12.6757C7.10501 13.1003 7.78 13.1003 8.20187 12.6757C8.50012 12.3822 8.60222 11.9616 8.50819 11.5811Z"),Xg(l,"fill","white"),Xg(r,"clip-path","url(#clip0)"),Xg(u,"width","18.5294"),Xg(u,"height","19"),Xg(u,"fill","white"),Xg(u,"transform","matrix(-1 0 0 1 18.5294 0)"),Xg(d,"id","clip0"),Xg(i,"width","15"),Xg(i,"height","15"),Xg(i,"viewBox","0 0 19 19"),Xg(i,"fill","none"),Xg(i,"xmlns","http://www.w3.org/2000/svg"),Xg(i,"class","svelte-qovtib"),Xg(t,"class","tweetLink svelte-qovtib"),t.disabled=p=!!e[1],ih(t,"dark",e[4])},m(p,h){zg(p,t,h),Pg(t,n),Pg(t,o),Pg(t,i),Pg(i,r),Pg(r,s),Pg(r,a),Pg(r,l),Pg(i,c),Pg(c,d),Pg(d,u),m||(g=[Yg(t,"keydown",e[5]),Yg(t,"click",e[5])],m=!0)},p(e,n){2&n&&p!==(p=!!e[1])&&(t.disabled=p),16&n&&ih(t,"dark",e[4])},i:mg,o:mg,d(e){e&&Hg(t),m=!1,_g(g)}}}function VS(e){let t,n;return t=new eS({props:{small:!0}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p:mg,i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function YS(e){let t,n,o=e[0]&&e[0].isTwitterEnabled&&qS(e);return{c(){o&&o.c(),t=Vg()},m(e,i){o&&o.m(e,i),zg(e,t,i),n=!0},p(e,[n]){e[0]&&e[0].isTwitterEnabled?o?(o.p(e,n),1&n&&Hh(o,1)):(o=qS(e),o.c(),Hh(o,1),o.m(t.parentNode,t)):o&&(Uh(),Fh(o,1,1,(()=>{o=null})),zh())},i(e){n||(Hh(o),n=!0)},o(e){Fh(o),n=!1},d(e){e&&Hg(t),o&&o.d(e)}}}function ZS(e,n,o){let i,r,s;bg(e,nf,(e=>o(0,r=e))),bg(e,PS,(e=>o(7,s=e))),vh("deepl_settings",nf),vh("deepl_website_settings",yw),vh("text_direction",Bt());let a,l,{tweetTextNode:c}=n,d=!1;return e.$$set=e=>{"tweetTextNode"in e&&o(6,c=e.tweetTextNode)},e.$$.update=()=>{if(128&e.$$.dirty&&o(4,i=s&&s.isDarkMode),1&e.$$.dirty){r.blacklistDomainsForReading.includes(window.location.hostname)?o(3,l=!1):r.selectedTargetLanguage&&async function(){const e=c.innerText;if(e.length<20)return!1;const t=await Mt(e);return At(chrome.i18n.getUILanguage())!==t&&At(r.selectedTargetLanguage)!==t}().then((e=>o(3,l=e))).catch((()=>o(3,l=!1)))}},[r,a,d,l,i,async function(){if(a)return;o(2,d=!0);let e,n,i="";try{i=await Mt(c.innerText),i=Ot(i)}catch(e){console.log(e)}try{n=await t({action:"dlRequestTwitterTweetTranslation",payload:{message:c.innerText,messageLang:i,domainName:window.location.hostname}})}catch(t){e=t,console.error(e)}o(1,a=e?"":dt(n)),o(2,d=!1);const r=jS.createElement();r.createDOM(a,c.innerText,(()=>{o(1,a=""),r.cleanupDOM()}),e),c.appendChild(r)},c,s]}class KS extends Qh{constructor(e){super(),Jh(this,e,ZS,YS,yg,{tweetTextNode:6})}}class XS extends RS{static HTML_TAG_NAME="deepl-twitter-tweet-link";static createElement=(e=document)=>{const t=e.createElement(XS.HTML_TAG_NAME);return new XS(t),t};constructor(e){super(e),this.bindChildFunctions()}createDOM=e=>{this.domElement.mainComponent=new KS({target:this.domElement.shadowContainer,props:{tweetTextNode:e}})}}function JS(){console.log("customizing for twitter");let e=new MutationObserver((()=>{!function(){const e=document.body.querySelectorAll("[data-testid='tweetText']");for(let t of e)if("true"!==t.dataset.dlHasMessageTranslator&&(t.dataset.dlHasMessageTranslator="true",t&&t.innerText)){const e=XS.createElement();return e.createDOM(t),void t.appendChild(e)}}()}));e.observe(document.body,{attributes:!0,childList:!0,subtree:!0}),d_((()=>e.disconnect()))}function QS(e){let t,n;return{c(){t=Wg("span"),n=qg(e[0]),Xg(t,"class","translatedText svelte-jkt5fr")},m(e,o){zg(e,t,o),Pg(t,n)},p(e,t){1&t&&Jg(n,e[0])},i:mg,o:mg,d(e){e&&Hg(t)}}}function eT(e){let t,n;return t=new Cy({props:{error:e[2]}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.error=e[2]),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function tT(e){let t,n,o=function(e){let t,n,o,i,r,s,a,l,c,d,u,p;const m=[eT,QS],g=[];function h(e,t){return e[2]?0:1}return o=h(e),i=g[o]=m[o](e),{c(){t=Wg("div"),n=Wg("div"),i.c(),r=Gg(),s=Wg("div"),s.textContent=`${chrome.i18n.getMessage("ui_inline_translation_see_alternatives_v2")}`,a=Gg(),l=Wg("button"),l.innerHTML='<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 9L9 3M3 3L9 9" stroke="#363F4A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',Xg(s,"class","show-alternatives svelte-jkt5fr"),Xg(l,"class","svelte-jkt5fr"),Xg(t,"class","container svelte-jkt5fr"),Xg(t,"dir",Bt())},m(i,c){zg(i,t,c),Pg(t,n),g[o].m(n,null),Pg(n,r),Pg(n,s),Pg(t,a),Pg(t,l),d=!0,u||(p=[Yg(s,"click",e[3]),Yg(l,"click",(function(){vg(e[1])&&e[1].apply(this,arguments)}))],u=!0)},p(t,s){let a=o;o=h(e=t),o===a?g[o].p(e,s):(Uh(),Fh(g[a],1,1,(()=>{g[a]=null})),zh(),i=g[o],i?i.p(e,s):(i=g[o]=m[o](e),i.c()),Hh(i,1),i.m(n,r))},i(e){d||(Hh(i),c||kh((()=>{c=jh(t,Of,{y:-10,duration:200}),c.start()})),d=!0)},o(e){Fh(i),d=!1},d(e){e&&Hg(t),g[o].d(),u=!1,_g(p)}}}(e);return{c(){o&&o.c(),t=Vg()},m(e,i){o&&o.m(e,i),zg(e,t,i),n=!0},p(e,[t]){o.p(e,t)},i(e){n||(Hh(o),n=!0)},o(e){Fh(o),n=!1},d(e){e&&Hg(t),o&&o.d(e)}}}function nT(e,n,o){let i;bg(e,nf,(e=>o(5,i=e))),vh("text_direction",Bt());let r,s,{translatedText:a}=n,{sourceText:l}=n,{onClose:c}=n,{error:d}=n;return e.$$set=e=>{"translatedText"in e&&o(0,a=e.translatedText),"sourceText"in e&&o(4,l=e.sourceText),"onClose"in e&&o(1,c=e.onClose),"error"in e&&o(2,d=e.error)},e.$$.update=()=>{16&e.$$.dirty&&Mt(l).then((e=>{r=e})),32&e.$$.dirty&&(s=i.selectedTargetLanguage)},[a,c,d,function(){t({action:"dlExternalURLRedirect",payload:{destination:cv,sourceLang:r,targetLang:s,textToShare:l}});try{t({action:"dlTrackUiAction",payload:{uiAction:F,nicheIntegration:ie.linkedIn}})}catch(e){console.error(e)}},l,i]}class oT extends Qh{constructor(e){super(),Jh(this,e,nT,tT,yg,{translatedText:0,sourceText:4,onClose:1,error:2})}}class iT{static HTML_TAG_NAME="deepl-linkedin-translated-post";static createElement=(e=document)=>{const t=e.createElement(iT.HTML_TAG_NAME),n=new iT(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent=null;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowContainer.addEventListener("click",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=(e,t,n,o)=>{this.domElement.mainComponent=new oT({target:this.domElement.shadowContainer,props:{translatedText:e,onClose:n,sourceText:t,error:o}})};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}function rT(e){let t,n,o={ctx:e,current:null,token:null,hasCatch:!1,pending:dT,then:aT,catch:sT,value:11,blocks:[,,,]};return function(e,t){const n=t.token={};function o(e,o,i,r){if(t.token!==n)return;t.resolved=r;let s=t.ctx;void 0!==i&&(s=s.slice(),s[i]=r);const a=e&&(t.current=e)(s);let l=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==o&&e&&(Uh(),Fh(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),zh())})):t.block.d(1),a.c(),Hh(a,1),a.m(t.mount(),t.anchor),l=!0),t.block=a,t.blocks&&(t.blocks[o]=a),l&&Rh()}if(!(i=e)||"object"!=typeof i&&"function"!=typeof i||"function"!=typeof i.then){if(t.current!==t.then)return o(t.then,1,t.value,e),!0;t.resolved=e}else{const n=gh();if(e.then((e=>{mh(n),o(t.then,1,t.value,e),mh(null)}),(e=>{if(mh(n),o(t.catch,2,t.error,e),mh(null),!t.hasCatch)throw e})),t.current!==t.pending)return o(t.pending,0),!0}var i}(e[3](),o),{c(){t=Vg(),o.block.c()},m(e,i){zg(e,t,i),o.block.m(e,o.anchor=i),o.mount=()=>t.parentNode,o.anchor=t,n=!0},p(t,n){!function(e,t,n){const o=t.slice(),{resolved:i}=e;e.current===e.then&&(o[e.value]=i),e.current===e.catch&&(o[e.error]=i),e.block.p(o,n)}(o,e=t,n)},i(e){n||(Hh(o.block),n=!0)},o(e){for(let e=0;e<3;e+=1){Fh(o.blocks[e])}n=!1},d(e){e&&Hg(t),o.block.d(e),o.token=null,o=null}}}function sT(e){return{c:mg,m:mg,p:mg,i:mg,o:mg,d:mg}}function aT(e){let t,n,o=e[11]&&function(e){let t,n,o,i;const r=[cT,lT],s=[];function a(e,t){return e[0]?0:1}return n=a(e),o=s[n]=r[n](e),{c(){t=Wg("div"),o.c(),Xg(t,"class","linkedin-link-container svelte-2f58mn"),Xg(t,"dir",Bt())},m(e,o){zg(e,t,o),s[n].m(t,null),i=!0},p(e,i){let l=n;n=a(e),n===l?s[n].p(e,i):(Uh(),Fh(s[l],1,1,(()=>{s[l]=null})),zh(),o=s[n],o?o.p(e,i):(o=s[n]=r[n](e),o.c()),Hh(o,1),o.m(t,null))},i(e){i||(Hh(o),i=!0)},o(e){Fh(o),i=!1},d(e){e&&Hg(t),s[n].d()}}}(e);return{c(){o&&o.c(),t=Vg()},m(e,i){o&&o.m(e,i),zg(e,t,i),n=!0},p(e,t){e[11]&&o.p(e,t)},i(e){n||(Hh(o),n=!0)},o(e){Fh(o),n=!1},d(e){e&&Hg(t),o&&o.d(e)}}}function lT(e){let t,n,o,i;return{c(){t=Wg("button"),n=Wg("div"),n.textContent=`${chrome.i18n.getMessage("linkedin_web_translate_post_link")}`,Xg(n,"class","copy svelte-2f58mn"),ih(n,"active",e[1]),Xg(t,"class","linkedin-link svelte-2f58mn")},m(r,s){zg(r,t,s),Pg(t,n),o||(i=[Yg(t,"keydown",e[4]),Yg(t,"click",e[4])],o=!0)},p(e,t){2&t&&ih(n,"active",e[1])},i:mg,o:mg,d(e){e&&Hg(t),o=!1,_g(i)}}}function cT(e){let t,n,o;return n=new eS({props:{small:!0}}),{c(){t=Wg("div"),Zh(n.$$.fragment),Xg(t,"class","spinner svelte-2f58mn")},m(e,i){zg(e,t,i),Kh(n,t,null),o=!0},p:mg,i(e){o||(Hh(n.$$.fragment,e),o=!0)},o(e){Fh(n.$$.fragment,e),o=!1},d(e){e&&Hg(t),Xh(n)}}}function dT(e){return{c:mg,m:mg,p:mg,i:mg,o:mg,d:mg}}function uT(e){let t,n,o=e[2]&&e[2][ie.linkedIn]&&rT(e);return{c(){o&&o.c(),t=Vg()},m(e,i){o&&o.m(e,i),zg(e,t,i),n=!0},p(e,[n]){e[2]&&e[2][ie.linkedIn]?o?(o.p(e,n),4&n&&Hh(o,1)):(o=rT(e),o.c(),Hh(o,1),o.m(t.parentNode,t)):o&&(Uh(),Fh(o,1,1,(()=>{o=null})),zh())},i(e){n||(Hh(o),n=!0)},o(e){Fh(o),n=!1},d(e){e&&Hg(t),o&&o.d(e)}}}function pT(e,n,o){let i,r,s;bg(e,nf,(e=>o(6,s=e))),vh("deepl_settings",nf),vh("deepl_website_settings",yw),vh("text_direction",Bt());let a,{linkedInPostNode:l}=n,c=!1,d=l.querySelector(".update-components-text").innerText;return e.$$set=e=>{"linkedInPostNode"in e&&o(5,l=e.linkedInPostNode)},e.$$.update=()=>{64&e.$$.dirty&&o(2,r=s.customizationsActiveStates)},o(1,i=!0),[c,i,r,async function(){if(d.length<20)return!1;const e=await Mt(d);return t=e,At(chrome.i18n.getUILanguage())!==t&&(e=>At(s.selectedTargetLanguage)!==e)(e);var t},async function(){if(a)return;o(0,c=!0);let e,n,r="";try{r=await Mt(d),r=Ot(r)}catch(e){console.log(e)}try{n=await t({action:"dlRequestLinkedInPostTranslation",payload:{message:d,messageLang:r,domainName:window.location.hostname,trigger:_}})}catch(t){e=t,console.error(e)}a=e?"":n[0].text,o(0,c=!1);const s=iT.createElement();s.createDOM(a,d,(()=>{a="",o(1,i=!0),s.cleanupDOM(),s.remove()}),e),l.appendChild(s),o(1,i=!1)},l,s]}class mT extends Qh{constructor(e){super(),Jh(this,e,pT,uT,yg,{linkedInPostNode:5})}}class gT{static HTML_TAG_NAME="deepl-linkedin-post-link";static createElement=(e=document)=>{const t=e.createElement(gT.HTML_TAG_NAME),n=new gT(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent=null;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowContainer.addEventListener("click",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=e=>{this.domElement.mainComponent=new mT({target:this.domElement.shadowContainer,props:{linkedInPostNode:e}})};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}const hT=()=>document.body.querySelectorAll(".feed-shared-update-v2__description-wrapper"),fT=e=>{const t=gT.createElement();t.createDOM(e),e.appendChild(t)};function _T(){let e=new MutationObserver((()=>{!function(){const e=hT();for(let t of e)if("true"!==t.dataset.dlHasMessageTranslator&&(t.dataset.dlHasMessageTranslator="true",t&&t.innerText))return void fT(t)}()}));e.observe(document.body,{attributes:!0,childList:!0,subtree:!0}),d_((()=>e.disconnect()))}function vT(){return!!document.documentElement.hasAttribute("dark")}const yT=function(){let e={isDarkMode:vT()};const{subscribe:t,update:n}=tf(e);let o=new MutationObserver((e=>{e.forEach((e=>{"attributes"===e.type&&"style"===e.attributeName&&n((e=>({...e,isDarkMode:vT(document.body.style.backgroundColor)})))}))}));return o.observe(document,{attributes:!0}),setTimeout((()=>{d_((()=>{o.disconnect()}))})),{subscribe:t}}();function wT(e){let t,n,o=function(e){let t,n,o,i,r,s,a,l,c,d,u,p,m,g,h,f;const _=[ET,bT],v=[];function y(e,t){return e[2]?0:1}return o=y(e),i=v[o]=_[o](e),{c(){t=Wg("div"),n=Wg("div"),i.c(),r=Gg(),s=Wg("div"),s.textContent=`${chrome.i18n.getMessage("youtube_alternatives_link")}`,l=Gg(),c=Wg("button"),d=jg("svg"),u=jg("path"),Xg(s,"class","show-alternatives svelte-t50unb"),ih(s,"dark",e[4]),Xg(n,"dir",a=Bt(e[3].selectedTargetLanguage)),Xg(u,"d","M3 9L9 3M3 3L9 9"),Xg(u,"stroke",p=e[4]?"white":"#037171"),Xg(u,"stroke-width","1.5"),Xg(u,"stroke-linecap","round"),Xg(u,"stroke-linejoin","round"),Xg(d,"width","12"),Xg(d,"height","12"),Xg(d,"viewBox","0 0 12 12"),Xg(d,"fill","none"),Xg(d,"xmlns","http://www.w3.org/2000/svg"),Xg(c,"class","svelte-t50unb"),Xg(t,"class","container svelte-t50unb"),Xg(t,"dir",Bt()),ih(t,"dark",e[4])},m(i,a){zg(i,t,a),Pg(t,n),v[o].m(n,null),Pg(n,r),Pg(n,s),Pg(t,l),Pg(t,c),Pg(c,d),Pg(d,u),g=!0,h||(f=[Yg(s,"click",e[5]),Yg(c,"click",(function(){vg(e[1])&&e[1].apply(this,arguments)}))],h=!0)},p(l,c){let d=o;o=y(e=l),o===d?v[o].p(e,c):(Uh(),Fh(v[d],1,1,(()=>{v[d]=null})),zh(),i=v[o],i?i.p(e,c):(i=v[o]=_[o](e),i.c()),Hh(i,1),i.m(n,r)),(!g||16&c)&&ih(s,"dark",e[4]),(!g||8&c&&a!==(a=Bt(e[3].selectedTargetLanguage)))&&Xg(n,"dir",a),(!g||16&c&&p!==(p=e[4]?"white":"#037171"))&&Xg(u,"stroke",p),(!g||16&c)&&ih(t,"dark",e[4])},i(e){g||(Hh(i),m||kh((()=>{m=jh(t,Of,{y:-10,duration:200}),m.start()})),g=!0)},o(e){Fh(i),g=!1},d(e){e&&Hg(t),v[o].d(),h=!1,_g(f)}}}(e);return{c(){o&&o.c(),t=Vg()},m(e,i){o&&o.m(e,i),zg(e,t,i),n=!0},p(e,t){o.p(e,t)},i(e){n||(Hh(o),n=!0)},o(e){Fh(o),n=!1},d(e){e&&Hg(t),o&&o.d(e)}}}function bT(e){let t,n;return{c(){t=Wg("span"),n=qg(e[0]),Xg(t,"class","translatedText svelte-t50unb")},m(e,o){zg(e,t,o),Pg(t,n)},p(e,t){1&t&&Jg(n,e[0])},i:mg,o:mg,d(e){e&&Hg(t)}}}function ET(e){let t,n;return t=new Cy({props:{error:e[2]}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.error=e[2]),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function ST(e){let t,n,o=e[3]&&e[3].isYoutubeEnabled&&wT(e);return{c(){o&&o.c(),t=Vg()},m(e,i){o&&o.m(e,i),zg(e,t,i),n=!0},p(e,[n]){e[3]&&e[3].isYoutubeEnabled?o?(o.p(e,n),8&n&&Hh(o,1)):(o=wT(e),o.c(),Hh(o,1),o.m(t.parentNode,t)):o&&(Uh(),Fh(o,1,1,(()=>{o=null})),zh())},i(e){n||(Hh(o),n=!0)},o(e){Fh(o),n=!1},d(e){e&&Hg(t),o&&o.d(e)}}}function TT(e,n,o){let i,r,s;bg(e,nf,(e=>o(3,r=e))),bg(e,yT,(e=>o(7,s=e)));let a,l,{translatedText:c}=n,{sourceText:d}=n,{onClose:u}=n,{error:p}=n;return e.$$set=e=>{"translatedText"in e&&o(0,c=e.translatedText),"sourceText"in e&&o(6,d=e.sourceText),"onClose"in e&&o(1,u=e.onClose),"error"in e&&o(2,p=e.error)},e.$$.update=()=>{128&e.$$.dirty&&o(4,i=s&&s.isDarkMode),64&e.$$.dirty&&Mt(d).then((e=>{a=e})),8&e.$$.dirty&&(l=r.selectedTargetLanguage)},[c,u,p,r,i,function(){t({action:"dlExternalURLRedirect",payload:{destination:cv,sourceLang:a,targetLang:l,textToShare:d}})},d,s]}class xT extends Qh{constructor(e){super(),Jh(this,e,TT,ST,yg,{translatedText:0,sourceText:6,onClose:1,error:2})}}class $T extends RS{static HTML_TAG_NAME="deepl-youtube-translated-translated";constructor(e){super(e),this.bindChildFunctions()}static createElement=(e=document)=>{const t=e.createElement($T.HTML_TAG_NAME);return new $T(t),t};createDOM=(e,t,n,o)=>{this.domElement.mainComponent=new xT({target:this.domElement.shadowContainer,props:{translatedText:e,onClose:n,sourceText:t,error:o}})}}function CT(e){let t,n,o,i;const r=[LT,kT],s=[];function a(e,t){return e[2]?0:e[3]?1:-1}return~(n=a(e))&&(o=s[n]=r[n](e)),{c(){t=Wg("div"),o&&o.c(),Xg(t,"dir",Bt())},m(e,o){zg(e,t,o),~n&&s[n].m(t,null),i=!0},p(e,i){let l=n;n=a(e),n===l?~n&&s[n].p(e,i):(o&&(Uh(),Fh(s[l],1,1,(()=>{s[l]=null})),zh()),~n?(o=s[n],o?o.p(e,i):(o=s[n]=r[n](e),o.c()),Hh(o,1),o.m(t,null)):o=null)},i(e){i||(Hh(o),i=!0)},o(e){Fh(o),i=!1},d(e){e&&Hg(t),~n&&s[n].d()}}}function kT(e){let t,n,o,i,r,s,a,l,c,d,u,p,m,g;return{c(){t=Wg("button"),n=Wg("div"),n.textContent=`${chrome.i18n.getMessage("youtube_translate_comment_link")}`,o=Gg(),i=jg("svg"),r=jg("g"),s=jg("path"),a=jg("path"),l=jg("path"),c=jg("defs"),d=jg("clipPath"),u=jg("rect"),Xg(n,"class","copy svelte-mtyjwe"),Xg(s,"d","M1.85295 4.86015V12.4035C1.85295 12.7953 2.05334 13.1545 2.38029 13.3504L8.70832 17.1167C8.72427 17.1262 8.7404 17.1353 8.75668 17.1439L11.8727 19L11.8621 17.3672L11.8685 16.4605L11.8717 16.4747V16.1699C11.8717 15.9893 11.9613 15.8272 12.0993 15.7262L12.3015 15.6059L12.3991 15.5494L12.394 15.5508L16.091 13.3504C16.418 13.1545 16.6184 12.7953 16.6184 12.4035V4.86015C16.6184 4.46829 16.418 4.10909 16.091 3.91316L9.76299 0.146947C9.43604 -0.0489825 9.03527 -0.0489825 8.70832 0.146947L2.38029 3.92404C2.05334 4.11997 1.85295 4.47918 1.85295 4.86015Z"),Xg(s,"class","deepl-icon svelte-mtyjwe"),Xg(a,"d","M6.68257 5.19787C7.10444 4.77336 7.77943 4.77336 8.2013 5.19787C8.50446 5.49621 8.60497 5.92588 8.50281 6.3113L11.4143 8.05411C11.4193 8.04902 11.4243 8.04396 11.4294 8.03894C11.8513 7.61442 12.5263 7.61442 12.9481 8.03894C13.4017 8.48522 13.4017 9.2254 12.9481 9.67168C12.5263 10.0962 11.8513 10.0962 11.4294 9.67168C11.111 9.35838 11.0162 8.90024 11.1448 8.50062L11.1341 8.50683L8.24372 6.78659C8.23005 6.80156 8.21591 6.81624 8.2013 6.83062C7.77943 7.25514 7.10444 7.25514 6.68257 6.83062C6.22906 6.38434 6.22906 5.64416 6.68257 5.19787Z"),Xg(a,"fill","white"),Xg(l,"d","M8.50819 11.5811L11.3455 9.88917L10.8182 9.58439L8.2574 11.1016C8.23971 11.0816 8.2212 11.062 8.20187 11.043C7.78 10.6185 7.10501 10.6185 6.68314 11.043C6.22963 11.4893 6.22963 12.2295 6.68314 12.6757C7.10501 13.1003 7.78 13.1003 8.20187 12.6757C8.50012 12.3822 8.60222 11.9616 8.50819 11.5811Z"),Xg(l,"fill","white"),Xg(r,"clip-path","url(#clip0)"),Xg(u,"width","18.5294"),Xg(u,"height","19"),Xg(u,"fill","white"),Xg(u,"transform","matrix(-1 0 0 1 18.5294 0)"),Xg(d,"id","clip0"),Xg(i,"width","15"),Xg(i,"height","15"),Xg(i,"viewBox","0 0 19 19"),Xg(i,"fill","none"),Xg(i,"xmlns","http://www.w3.org/2000/svg"),Xg(i,"class","svelte-mtyjwe"),Xg(t,"class","commentLink svelte-mtyjwe"),t.disabled=p=!!e[1],ih(t,"dark",e[4])},m(p,h){zg(p,t,h),Pg(t,n),Pg(t,o),Pg(t,i),Pg(i,r),Pg(r,s),Pg(r,a),Pg(r,l),Pg(i,c),Pg(c,d),Pg(d,u),m||(g=[Yg(t,"keydown",e[5]),Yg(t,"click",e[5])],m=!0)},p(e,n){2&n&&p!==(p=!!e[1])&&(t.disabled=p),16&n&&ih(t,"dark",e[4])},i:mg,o:mg,d(e){e&&Hg(t),m=!1,_g(g)}}}function LT(e){let t,n;return t=new eS({props:{small:!0}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p:mg,i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function IT(e){let t,n,o=e[0]&&e[0].isYoutubeEnabled&&CT(e);return{c(){o&&o.c(),t=Vg()},m(e,i){o&&o.m(e,i),zg(e,t,i),n=!0},p(e,[n]){e[0]&&e[0].isYoutubeEnabled?o?(o.p(e,n),1&n&&Hh(o,1)):(o=CT(e),o.c(),Hh(o,1),o.m(t.parentNode,t)):o&&(Uh(),Fh(o,1,1,(()=>{o=null})),zh())},i(e){n||(Hh(o),n=!0)},o(e){Fh(o),n=!1},d(e){e&&Hg(t),o&&o.d(e)}}}function AT(e,n,o){let i,r,s;bg(e,nf,(e=>o(0,r=e))),bg(e,yT,(e=>o(7,s=e)));let a,l,{commentNode:c}=n,d=!1;return e.$$set=e=>{"commentNode"in e&&o(6,c=e.commentNode)},e.$$.update=()=>{if(128&e.$$.dirty&&o(4,i=s&&s.isDarkMode),1&e.$$.dirty){r.blacklistDomainsForReading.includes(window.location.hostname)?o(3,l=!1):r.selectedTargetLanguage&&async function(){const e=c.innerText;if(e.length<10)return!1;const t=await Mt(e);return At(chrome.i18n.getUILanguage())!==t&&At(r.selectedTargetLanguage)!==t}().then((e=>o(3,l=e))).catch((()=>o(3,l=!1)))}},[r,a,d,l,i,async function(){if(a)return;o(2,d=!0);let e,n,i="";try{i=await Mt(c.innerText),i=Ot(i)}catch(e){console.log(e)}try{n=await t({action:"dlRequestYouTubeTranslation",payload:{message:c.innerText,messageLang:i,domainName:window.location.hostname}})}catch(t){e=t,console.error(e)}o(1,a=e?"":n[0].text),o(2,d=!1);const r=$T.createElement();r.createDOM(a,c.innerText,(()=>{o(1,a=""),r.cleanupDOM()}),e),c.appendChild(r)},c,s]}class MT extends Qh{constructor(e){super(),Jh(this,e,AT,IT,yg,{commentNode:6})}}class RT extends RS{static HTML_TAG_NAME="deepl-youtube-comment-link";static createElement=(e=document)=>{const t=e.createElement(RT.HTML_TAG_NAME);return new RT(t),t};constructor(e){super(e),this.bindChildFunctions()}createDOM=e=>{this.domElement.mainComponent=new MT({target:this.domElement.shadowContainer,props:{commentNode:e}})}}function OT(){let e=new MutationObserver((()=>{!function(){let e=document.body.querySelector("ytd-comments");if(e||(e=document.body.querySelector("#comments")),!e)return;const t=e.querySelectorAll("#content-text");for(let e of t)if("true"!==e.dataset.dlHasMessageTranslator&&(e.dataset.dlHasMessageTranslator="true",e&&e.innerText)){const t=RT.createElement();return t.createDOM(e),void e.appendChild(t)}}()}));e.observe(document.body,{attributes:!0,childList:!0,subtree:!0}),d_((()=>e.disconnect()))}function NT(e){try{return JSON.parse(atob(e.split(".")[1]))}catch(e){return null}}function DT(e){switch(e){case U.inputTranslationTriggerIcon:return 1;case U.inlineTranslationTriggerIcon:return 2;case U.inlineTranslationSettingPopup:return 3;case U.inputTranslationSettingPopup:return 4;case U.settingsPageFPT:return 5;case U.settingsPageReading:return 6;case U.settingsPageWriting:return 7;case U.fptHideModal:return 8;case U.inputTranslationSettingsIcon:return 9;case U.inlineTranslationSettingsIcon:return 10;case U.inputTranslationReadMoreLink:return 11;case U.inlineTranslationReadMoreLink:return 12;case U.fptTranslationReadMoreLink:return 13;case U.extensionHubToggleSwitch:return 14;case U.hubCustomizeShortcut:return 15;case U.hubLoginButton:return 16;case U.hubUpgradeToProLink:return 17;case U.hubTryProLink:return 18;case U.settingsPageCustomizeShortcutButton:return 19;case U.hubFPTEnableCheckbox:return 20;case U.hubFPTDisableCheckbox:return 21;case U.deeplWriteIcon:return 22;case U.hubViewIntegrations:return 23;case U.hubCloseCustomizationsWidget:return 24;case U.gmailOnboardingPopup:return 25;case U.gmailOnboardingIcon:return 26;case U.gmailCharLimitLogin:return 27;case U.gmailFeedbackSurvey:return 28;case U.gslidesFeedbackSurvey:return 29;case U.gslidesCharLimitLogin:return 30;case U.zendeskTryProLink:return 31;case U.settingsPageIntegrations:return 32;case U.onboardingSignUp:return 33;case U.onboardingSkipSignUp:return 34;case U.onboardingLoginLink:return 35;case U.onboardingSeeAllIntegrations:return 36;case U.inputImproveTriggerIcon:return 37;case U.iconToggleInHubTranslator:return 38;case U.iconToggleInHubWrite:return 39;case U.manageIconSettings:return 40;case U.writeLanguageSwitchedInHub:return 41;case U.writeLanguageSwitchedInSettings:return 42;default:return 0}}function PT(e){switch(e){case J.chrome:return X.chrome;case J.edge:return X.edge;case J.firefox:return X.firefox;case J.local:return X.local;default:return X.unspecified}}function BT(e){switch(e){case we.free:return 1;case we.pro:return 2;case we.none:return 3;default:return 0}}function UT(e){switch(e){case Ne.READING_VIEW_TRANSLATE:return 1;case Ne.COMPOSE_VIEW_TRANSLATE:return 2;case Ne.COMPOSE_VIEW_IMPROVE:return 3;default:return 0}}function zT(e){switch(e){case Ge.none:return 1;case Ge.pro:return 2;case Ge.free:return 3;default:return 0}}const HT=["accountData","domainName"],FT=[60067,60068,60069],WT=(e,t)=>e&&"object"==typeof e?Array.isArray(e)?e.map((e=>WT(e,t))):Object.keys(e).reduce(((n,o)=>(t.includes(o)||(n[o]=WT(e[o],t)),n)),{}):e,jT=(e,t=!1,n=!1)=>e?n&&t?e:!n&&FT.includes(e?.eventId)?null:WT(e,HT):null,qT=(e=!1,t=!1)=>!(!e&&!t)&&(!(!e&&t)&&(!(!e||t)||(!(!e||!t)||void 0)));async function GT(e){let t,n,o,i,r,s,a,l,c,d,u,p=!1;try{const e=await JT(["session","installationId","firefoxAnonPermissionGranted","firefoxPersonalPermissionGranted"]);n=e.session.id,t=e.installationId,d=e.firefoxAnonPermissionGranted,u=e.firefoxPersonalPermissionGranted}catch(e){console.error(`DAP: Failed to fetch settings. Error: ${e.message}`)}try{const e=await async function(){return await chrome.storage.local.get(["isLoggedIn","isProUser","sessionType","translatorServiceType","writeServiceType","apiServiceType","docTranslatorServiceType","accountId","hasTermbaseService"])}();p=!!e.accountId,o=BT(e.translatorServiceType),i=BT(e.apiServiceType),r=BT(e.docTranslatorServiceType),c=BT(e.writeServiceType),a=p?2===o||2===i||2===c||2===r?y.loggedInPro:y.loggedInFree:y.notLoggedIn,l=e.sessionType?zT(e.sessionType):zT(Ge.none)}catch(e){console.error(`DAP: Failed to fetch user information. Error: ${e.message}`)}try{s=await async function(){return(await chrome.storage.local.get(["browserInstanceId"])).browserInstanceId}()}catch(e){console.error(e)}const m=rt(),g=await async function(){let e=[];try{e=await async function(){const e=await async function(e,t){YT||await new Promise(((e,t)=>{let n=indexedDB.open(ZT,1);n.onerror=function(){t(n.error)},n.onsuccess=function(t){YT=t.target.result,e()},n.onupgradeneeded=function(t){YT=t.target.result,YT.objectStoreNames.contains(KT)||YT.createObjectStore(KT,{keyPath:"id"}),e()}}));return new Promise(((n,o)=>{let i=YT.transaction(t,"readonly").objectStore(t).get(e);i.onerror=function(e){o(e)},i.onsuccess=function(){i.result?n(i.result):n(null)}}))}(XT,KT);if(!e||!e.meta)return[];const t=Date.now()-e.meta.createdAt;if(t/6e4>9)return[];if(!e.data||0===e.data.length)return[];return e.data}()}catch(e){}if(!e||0===e.length)return[];const t=e.map((e=>({id:e.id,variant:e.variant,breakout:e.breakout})));return t}();let h;try{h=await QT()}catch(e){console.error(e)}const f={eventId:void 0,extensionVersion:"1.28.2",sessionId:n,sessionType:l,installationId:t,browserInstanceId:s,originStore:PT(chrome.runtime.id),userInfos:{...h&&{accountData:{accountId:h}},userType:a,translatorServiceType:o,apiServiceType:i,docTranslatorServiceType:r,writeServiceType:c},userAgent:m.userAgent,platform:m.platform,browser:m.browser,browserVersion:m.browserVersion,browserLang:m.browserLang,clientExperiments:g};let _=e?e(f):f;if(st()){if(!qT(d,u))return;if(_=jT(_,d,u),!_)return}return fetch("https://s.deepl.com/chrome/statistics",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(_),credentials:"omit"}).then((e=>{e.ok||console.log(`DAP ${_.eventId} request failed: ${e}`)}))}async function VT(){if(!await async function(){const e=await chrome.storage.local.get(["isLoggedIn"]);return!(!e||!e.isLoggedIn)}())return;const e=await QT();return GT((t=>({...t,eventId:60067,accountData:{accountUuid:e}})))}let YT;const ZT="dlBrowserExtension",KT="dlCache",XT="dlexperiments";async function JT(e){if(e.includes("session")){const e=await chrome.storage.sync.get(["session"]);e&&!e.session&&await async function(){const e=tn();await chrome.storage.sync.set({session:{id:e,timestamp:Date.now()}});try{await VT()}catch(e){console.error(e)}}()}return new Promise(((t,n)=>{chrome.storage.sync.get(e,(o=>{o?t(o):n(`Can not get ${e}`)}))}))}async function QT(){const e=await chrome.storage.local.get(["accountId","a_t","i_t"]);if(e&&e.accountId)return e.accountId;if(e&&e.a_t){const t=NT(e.a_t),n=NT(e.i_t);return t.sub||n.sub}}function ex(e){let t,n,o;return{c(){t=Wg("button"),t.textContent=`${chrome.i18n.getMessage("login_widget_login_link")}`,Xg(t,"class","user-action-button svelte-9xsres")},m(i,r){zg(i,t,r),n||(o=[Yg(t,"mousedown",Zg(e[18])),Yg(t,"click",e[19])],n=!0)},p:mg,d(e){e&&Hg(t),n=!1,_g(o)}}}function tx(e){let t,n,o;return{c(){t=Wg("button"),t.textContent=`${chrome.i18n.getMessage("toolbar_upgrade_to_pro_button")}`,Xg(t,"class","user-action-button svelte-9xsres")},m(i,r){zg(i,t,r),n||(o=[Yg(t,"mousedown",Zg(e[17])),Yg(t,"click",e[20])],n=!0)},p:mg,d(e){e&&Hg(t),n=!1,_g(o)}}}function nx(e){let t,n,o;return{c(){t=Wg("div"),Xg(t,"type","button"),Xg(t,"class","dl-menu-icon dl-menu-icon--user svelte-9xsres")},m(i,r){zg(i,t,r),n||(o=Yg(t,"mousedown",Zg(e[16])),n=!0)},d(e){e&&Hg(t),n=!1,o()}}}function ox(e){let t,n,o,i,r,s,a,l,c,d,u,p,m,g=rn();function h(e,t){return!0===e[0].isLoggedIn?rx:ix}let f=h(e),_=f&&f(e),v=g&&function(e){let t,n,o;return{c(){t=Wg("button"),t.textContent="DEV_TOOLS",Xg(t,"class","dl-menu-item svelte-9xsres")},m(i,r){zg(i,t,r),n||(o=Yg(t,"click",e[9]),n=!0)},p:mg,d(e){e&&Hg(t),n=!1,o()}}}(e);return{c(){t=Wg("div"),n=Wg("button"),o=Wg("span"),i=Wg("div"),i.textContent=`${chrome.i18n.getMessage("menu_share_feedback_link")}`,r=Gg(),s=Wg("div"),a=Gg(),l=Wg("button"),l.textContent=`${chrome.i18n.getMessage("menu_settings_label")}`,c=Gg(),_&&_.c(),d=Gg(),v&&v.c(),Xg(s,"class","dl-feedback-icon svelte-9xsres"),Xg(o,"class","dl-menu-link dl-feedback-link svelte-9xsres"),Xg(n,"class","dl-menu-item svelte-9xsres"),Xg(l,"class","dl-menu-item svelte-9xsres"),Xg(t,"class","dl-menu-list svelte-9xsres")},m(u,g){zg(u,t,g),Pg(t,n),Pg(n,o),Pg(o,i),Pg(o,r),Pg(o,s),Pg(t,a),Pg(t,l),Pg(t,c),_&&_.m(t,null),Pg(t,d),v&&v.m(t,null),p||(m=[Yg(n,"click",e[7]),Yg(l,"click",e[10])],p=!0)},p(e,n){f===(f=h(e))&&_?_.p(e,n):(_&&_.d(1),_=f&&f(e),_&&(_.c(),_.m(t,d))),g&&v.p(e,n)},i(e){u||kh((()=>{u=jh(t,Of,{y:-5,duration:500}),u.start()}))},o:mg,d(e){e&&Hg(t),_&&_.d(),v&&v.d(),p=!1,_g(m)}}}function ix(e){let t,n,o,i,r,s,a,l,c;return{c(){t=Wg("div"),t.innerHTML='<div class="divider svelte-9xsres"></div>',n=Gg(),o=Wg("button"),i=Wg("span"),i.textContent=`${chrome.i18n.getMessage("menu_login_label")}`,r=Gg(),s=Wg("button"),a=Wg("span"),a.textContent=`${chrome.i18n.getMessage("menu_trial_label")}`,Xg(t,"class","dl-menu-item dl-menu-item--divider svelte-9xsres"),Xg(o,"class","dl-menu-item svelte-9xsres"),Xg(a,"class","dl-menu-link link svelte-9xsres"),Xg(s,"class","dl-menu-item svelte-9xsres")},m(d,u){zg(d,t,u),zg(d,n,u),zg(d,o,u),Pg(o,i),zg(d,r,u),zg(d,s,u),Pg(s,a),l||(c=[Yg(o,"click",e[5]),Yg(s,"click",e[6])],l=!0)},p:mg,d(e){e&&(Hg(t),Hg(n),Hg(o),Hg(r),Hg(s)),l=!1,_g(c)}}}function rx(e){let t,n,o,i,r,s;return{c(){t=Wg("div"),t.innerHTML='<div class="divider svelte-9xsres"></div>',n=Gg(),o=Wg("button"),i=Wg("span"),i.textContent=`${chrome.i18n.getMessage("menu_logout_label")}`,Xg(t,"class","dl-menu-item dl-menu-item--divider svelte-9xsres"),Xg(o,"class","dl-menu-item svelte-9xsres")},m(a,l){zg(a,t,l),zg(a,n,l),zg(a,o,l),Pg(o,i),r||(s=Yg(o,"click",e[4]),r=!0)},p:mg,d(e){e&&(Hg(t),Hg(n),Hg(o)),r=!1,s()}}}function sx(e){let t,n,o,i,r,s,a,l,c,d,u,p=!e[0].isLoggedIn&&ex(e),m=e[2]&&tx(e),g=!0===e[0].isLoggedIn&&nx(e),h=e[1]&&ox(e);return{c(){t=Wg("div"),n=Wg("div"),p&&p.c(),o=Gg(),m&&m.c(),i=Gg(),g&&g.c(),r=Gg(),s=Wg("button"),a=Gg(),l=Wg("button"),c=Gg(),h&&h.c(),Xg(s,"type","button"),Xg(s,"class","dl-menu-icon dl-menu-icon--settings svelte-9xsres"),Xg(s,"aria-label",chrome.i18n.getMessage("menu_open_settings")),Xg(l,"type","button"),Xg(l,"class","dl-menu-icon dl-menu-icon--hamburger svelte-9xsres"),Xg(l,"aria-label",chrome.i18n.getMessage("menu_open_menu")),ih(l,"isOpen",e[1]),Xg(n,"class","dl-menu-icon-wrapper svelte-9xsres"),Xg(t,"class","dl-container-menu svelte-9xsres")},m(f,_){zg(f,t,_),Pg(t,n),p&&p.m(n,null),Pg(n,o),m&&m.m(n,null),Pg(n,i),g&&g.m(n,null),Pg(n,r),Pg(n,s),Pg(n,a),Pg(n,l),Pg(t,c),h&&h.m(t,null),d||(u=[Yg(s,"mousedown",Zg(e[15])),Yg(s,"click",e[21]),Yg(l,"mousedown",Zg(e[14])),Yg(l,"click",e[22]),Yg(n,"mousedown",Kg(Zg(e[13]))),Lg(c_.call(null,t,{isShadow:!0})),Yg(t,"click_outside",e[8]),Yg(t,"mousedown",Kg(Zg(e[12])))],d=!0)},p(e,[s]){e[0].isLoggedIn?p&&(p.d(1),p=null):p?p.p(e,s):(p=ex(e),p.c(),p.m(n,o)),e[2]?m?m.p(e,s):(m=tx(e),m.c(),m.m(n,i)):m&&(m.d(1),m=null),!0===e[0].isLoggedIn?g||(g=nx(e),g.c(),g.m(n,r)):g&&(g.d(1),g=null),2&s&&ih(l,"isOpen",e[1]),e[1]?h?(h.p(e,s),2&s&&Hh(h,1)):(h=ox(e),h.c(),Hh(h,1),h.m(t,null)):h&&(h.d(1),h=null)},i(e){Hh(h)},o:mg,d(e){e&&Hg(t),p&&p.d(),m&&m.d(),g&&g.d(),h&&h.d(),d=!1,_g(u)}}}function ax(e,n,o){let i,r;const s=yh("deepl_settings");bg(e,s,(e=>o(0,r=e)));let a=!1;function l(){t({action:"dlRequestLogin"}),c()}function c(){o(1,a=!1)}function d(){t({action:"dlOpenInternalPage",payload:{destination:tS.settings_page}}),c()}function u(){t({action:"dlExternalURLRedirect",payload:{destination:Ke(r,ye.TRANSLATOR)?lv:av,utmContent:"menu"}}),c()}return e.$$.update=()=>{1&e.$$.dirty&&o(2,i=r.isLoggedIn&&(!Ke(r,ye.TRANSLATOR)||!Ke(r,ye.WRITE)))},[r,a,i,s,function(){t({action:"dlRequestLogout"}),t({action:"dlTrackUiAction",payload:{uiAction:j}}),c()},l,function(){t({action:"dlExternalURLRedirect",payload:{destination:av,utmContent:"menu"}}),c()},function(){t({action:"dlExternalURLRedirect",payload:{destination:st()?yv:sv}}),c()},c,function(){t({action:"dlOpenInternalPage",payload:{destination:tS.developer_tools}}),c()},d,u,function(t){wh.call(this,e,t)},function(t){wh.call(this,e,t)},function(t){wh.call(this,e,t)},function(t){wh.call(this,e,t)},function(t){wh.call(this,e,t)},function(t){wh.call(this,e,t)},function(t){wh.call(this,e,t)},()=>{l()},()=>{u()},()=>{d()},()=>{o(1,a=!a)}]}class lx extends Qh{constructor(e){super(),Jh(this,e,ax,sx,yg,{})}}function cx(e){let t,n;return{c(){t=Wg("div"),Xg(t,"class",n=Cg(`deepl-shield-icon ${e[0]}`)+" svelte-16nk5mq"),Xg(t,"style",e[2])},m(e,n){zg(e,t,n)},p(e,o){1&o&&n!==(n=Cg(`deepl-shield-icon ${e[0]}`)+" svelte-16nk5mq")&&Xg(t,"class",n)},i:mg,o:mg,d(e){e&&Hg(t)}}}function dx(e){let t,n;return t=new h_({props:{tooltip:e[1],zIndex:"5",$$slots:{default:[ux]},$$scope:{ctx:e}}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};2&n&&(o.tooltip=e[1]),257&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function ux(e){let t,n;return{c(){t=Wg("div"),Xg(t,"class",n=Cg(`deepl-shield-icon ${e[0]}`)+" svelte-16nk5mq"),Xg(t,"style",e[2])},m(e,n){zg(e,t,n)},p(e,o){1&o&&n!==(n=Cg(`deepl-shield-icon ${e[0]}`)+" svelte-16nk5mq")&&Xg(t,"class",n)},d(e){e&&Hg(t)}}}function px(e){let t,n,o,i;const r=[dx,cx],s=[];function a(e,t){return e[1]?0:1}return t=a(e),n=s[t]=r[t](e),{c(){n.c(),o=Vg()},m(e,n){s[t].m(e,n),zg(e,o,n),i=!0},p(e,[i]){let l=t;t=a(e),t===l?s[t].p(e,i):(Uh(),Fh(s[l],1,1,(()=>{s[l]=null})),zh(),n=s[t],n?n.p(e,i):(n=s[t]=r[t](e),n.c()),Hh(n,1),n.m(o.parentNode,o))},i(e){i||(Hh(n),i=!0)},o(e){Fh(n),i=!1},d(e){e&&Hg(o),s[t].d(e)}}}function mx(e,t,n){let o,{write:i=!1}=t,{translator:r=!1}=t,{size:s=20}=t,{marginStart:a=0}=t,{marginEnd:l=0}=t,{alternateColor:c}=t;const d=`height: ${s}px; width: ${s}px; margin-inline-start: ${a}px; margin-inline-end: ${l}px;`;return i?o=chrome.i18n.getMessage("tooltip_write_fully_encrypted"):r&&(o=chrome.i18n.getMessage("tooltip_translator_fully_encrypted")),e.$$set=e=>{"write"in e&&n(3,i=e.write),"translator"in e&&n(4,r=e.translator),"size"in e&&n(5,s=e.size),"marginStart"in e&&n(6,a=e.marginStart),"marginEnd"in e&&n(7,l=e.marginEnd),"alternateColor"in e&&n(0,c=e.alternateColor)},[c,o,d,i,r,s,a,l]}class gx extends Qh{constructor(e){super(),Jh(this,e,mx,px,yg,{write:3,translator:4,size:5,marginStart:6,marginEnd:7,alternateColor:0})}}function hx(e){let t;return{c(){t=Wg("div"),Xg(t,"class","dl-logo svelte-1tthjxl")},m(e,n){zg(e,t,n)},p:mg,d(e){e&&Hg(t)}}}function fx(e){let t,n,o;return{c(){t=Wg("button"),Xg(t,"class","dl-logo dl-logo--clickable svelte-1tthjxl"),Xg(t,"aria-label",chrome.i18n.getMessage("deepl_logo"))},m(i,r){zg(i,t,r),n||(o=Yg(t,"click",e[13]),n=!0)},p:mg,d(e){e&&Hg(t),n=!1,o()}}}function _x(e){let t,n,o=e[6]===re.translate&&vx(),i=e[6]===re.write&&yx();return{c(){o&&o.c(),t=Gg(),i&&i.c(),n=Vg()},m(e,r){o&&o.m(e,r),zg(e,t,r),i&&i.m(e,r),zg(e,n,r)},p(e,r){e[6]===re.translate?o?o.p(e,r):(o=vx(),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null),e[6]===re.write?i?i.p(e,r):(i=yx(),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},d(e){e&&(Hg(t),Hg(n)),o&&o.d(e),i&&i.d(e)}}}function vx(e){let t;return{c(){t=Wg("span"),t.textContent=`${chrome.i18n.getMessage("layout_tab_translator")}`,Xg(t,"class","translator-name svelte-1tthjxl")},m(e,n){zg(e,t,n)},p:mg,d(e){e&&Hg(t)}}}function yx(e){let t;return{c(){t=Wg("span"),t.textContent=`${chrome.i18n.getMessage("layout_tab_write")}`,Xg(t,"class","translator-name svelte-1tthjxl")},m(e,n){zg(e,t,n)},p:mg,d(e){e&&Hg(t)}}}function wx(e){let t,n;return t=new gx({props:{size:24,write:e[6]===re.write,translator:e[6]===re.translate}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};64&n&&(o.write=e[6]===re.write),64&n&&(o.translator=e[6]===re.translate),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function bx(e){let t,n,o,i;return o=new Mw({props:{value:e[10].selectedTargetLanguage,websiteSettings:e[4],customClass:"dropdown__wrapper--header",fontSize:"sm"}}),o.$on("selection",e[17]),{c(){t=Wg("div"),n=Wg("div"),Zh(o.$$.fragment),Xg(n,"class","dl-actions-language-selector__dropdown svelte-1tthjxl"),Xg(t,"class","dl-actions-language-selector svelte-1tthjxl")},m(e,r){zg(e,t,r),Pg(t,n),Kh(o,n,null),i=!0},p(e,t){const n={};1024&t&&(n.value=e[10].selectedTargetLanguage),16&t&&(n.websiteSettings=e[4]),o.$set(n)},i(e){i||(Hh(o.$$.fragment,e),i=!0)},o(e){Fh(o.$$.fragment,e),i=!1},d(e){e&&Hg(t),Xh(o)}}}function Ex(e){let t,n,o;return{c(){t=Wg("button"),Xg(t,"class","dl-settings-icon svelte-1tthjxl"),Xg(t,"data-qa","deepl-layour-header-settings-link")},m(i,r){zg(i,t,r),n||(o=Yg(t,"click",e[14]),n=!0)},p:mg,d(e){e&&Hg(t),n=!1,o()}}}function Sx(e){let t,n;return t=new lx({}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function Tx(e){let t,n,o;return{c(){t=Wg("button"),Xg(t,"type","button"),Xg(t,"class","dl-close-icon svelte-1tthjxl")},m(i,r){zg(i,t,r),n||(o=Yg(t,"click",(function(){vg(e[0])&&e[0].apply(this,arguments)})),n=!0)},p(t,n){e=t},d(e){e&&Hg(t),n=!1,o()}}}function xx(e){let t,n,o,i,r,s,a,l,c,d,u,p,m;let g=function(e,t){return e[13]?fx:hx}(e),h=g(e),f=e[9]&&_x(e),_=e[8]&&wx(e),v=e[6]===re.translate&&e[2]&&e[10]&&e[4]&&bx(e),y=e[7]&&Ex(e),w=e[1]&&Sx(),b=e[0]&&Tx(e);return{c(){t=Wg("div"),n=Wg("div"),h.c(),o=Gg(),f&&f.c(),i=Gg(),_&&_.c(),r=Gg(),s=Wg("div"),v&&v.c(),a=Gg(),y&&y.c(),l=Gg(),w&&w.c(),c=Gg(),b&&b.c(),Xg(n,"class","logo-translator-name-container svelte-1tthjxl"),Xg(s,"class","dl-actions svelte-1tthjxl"),Xg(t,"class",d=Cg("dl-header "+(e[2]?"dl-header--with-lang-selector":""))+" svelte-1tthjxl")},m(d,g){zg(d,t,g),Pg(t,n),h.m(n,null),Pg(n,o),f&&f.m(n,null),Pg(n,i),_&&_.m(n,null),Pg(t,r),Pg(t,s),v&&v.m(s,null),Pg(s,a),y&&y.m(s,null),Pg(s,l),w&&w.m(s,null),Pg(s,c),b&&b.m(s,null),u=!0,p||(m=Yg(t,"mousedown",Kg(Zg(e[16]))),p=!0)},p(e,[o]){h.p(e,o),e[9]?f?f.p(e,o):(f=_x(e),f.c(),f.m(n,i)):f&&(f.d(1),f=null),e[8]?_?(_.p(e,o),256&o&&Hh(_,1)):(_=wx(e),_.c(),Hh(_,1),_.m(n,null)):_&&(Uh(),Fh(_,1,1,(()=>{_=null})),zh()),e[6]===re.translate&&e[2]&&e[10]&&e[4]?v?(v.p(e,o),1108&o&&Hh(v,1)):(v=bx(e),v.c(),Hh(v,1),v.m(s,a)):v&&(Uh(),Fh(v,1,1,(()=>{v=null})),zh()),e[7]?y?y.p(e,o):(y=Ex(e),y.c(),y.m(s,l)):y&&(y.d(1),y=null),e[1]?w?2&o&&Hh(w,1):(w=Sx(),w.c(),Hh(w,1),w.m(s,c)):w&&(Uh(),Fh(w,1,1,(()=>{w=null})),zh()),e[0]?b?b.p(e,o):(b=Tx(e),b.c(),b.m(s,null)):b&&(b.d(1),b=null),(!u||4&o&&d!==(d=Cg("dl-header "+(e[2]?"dl-header--with-lang-selector":""))+" svelte-1tthjxl"))&&Xg(t,"class",d)},i(e){u||(Hh(_),Hh(v),Hh(w),u=!0)},o(e){Fh(_),Fh(v),Fh(w),u=!1},d(e){e&&Hg(t),h.d(),f&&f.d(),_&&_.d(),v&&v.d(),y&&y.d(),w&&w.d(),b&&b.d(),p=!1,m()}}}function $x(e,n,o){let i,r,s=mg,a=()=>(s(),s=wg(f,(e=>o(18,i=e))),f),l=mg,c=()=>(l(),l=wg(g,(e=>o(10,r=e))),g);e.$$.on_destroy.push((()=>s())),e.$$.on_destroy.push((()=>l()));let{closeWindow:u}=n,{showMenu:p=!1}=n,{showLangSelect:m=!1}=n,{settings:g}=n;c();let{websiteSettings:f}=n;a();let{extensionContext:_=0}=n,{platformBehaviour:v=ie.default}=n,{textProcessingMode:y=re.translate}=n,{showSettingsIcon:w=!0}=n,{showProStatus:b=!1}=n,{showServiceName:E=!1}=n;async function S(e){await g.set({selectedTargetLanguage:e.value,isTargetLanguageConfirmed:!0,regionalVariant:e.regionalVariant||""}),f.update({translationState:d.ongoingTranslation}),t({action:"dlRequestInlineTranslation",payload:{requests:[{text:i.originalSnippet}],domainName:window.location.hostname,trigger:h,sourceLang:"auto",websiteLanguage:i.websiteLanguage}}).then((e=>{f.update({translationState:d.none,translatedSnippet:e[0].text,snippetDetectedSourceLang:e[0].detected_source_language,websiteLanguage:e[0].detected_source_language})})).catch((e=>{f.update({translationState:d.none,translatedSnippet:"",snippetDetectedSourceLang:"",error:e.message?e.message:e})}))}async function T(e){await g.set({selectedTargetLanguage:e.value,isTargetLanguageConfirmed:!0,regionalVariant:e.regionalVariant||""});const t=document.getElementsByTagName("deepl-gdocs-icon")[0];t&&t.requestNewTranslation(e.value)}return e.$$set=e=>{"closeWindow"in e&&o(0,u=e.closeWindow),"showMenu"in e&&o(1,p=e.showMenu),"showLangSelect"in e&&o(2,m=e.showLangSelect),"settings"in e&&c(o(3,g=e.settings)),"websiteSettings"in e&&a(o(4,f=e.websiteSettings)),"extensionContext"in e&&o(15,_=e.extensionContext),"platformBehaviour"in e&&o(5,v=e.platformBehaviour),"textProcessingMode"in e&&o(6,y=e.textProcessingMode),"showSettingsIcon"in e&&o(7,w=e.showSettingsIcon),"showProStatus"in e&&o(8,b=e.showProStatus),"showServiceName"in e&&o(9,E=e.showServiceName)},[u,p,m,g,f,v,y,w,b,E,r,S,T,function(){let e=dv;t({action:"dlTrackLogoClickedEvent",payload:{extensionContext:_}}),y===re.write&&(e=uv),t({action:"dlExternalURLRedirect",payload:{destination:e,utmContent:"gdocs_logo"}})},function(){t({action:"dlOpenInternalPage",payload:{destination:tS.settings_page}})},_,function(t){wh.call(this,e,t)},e=>{switch(v){case ie.gdocs:T(e.detail.selectedOption);break;case ie.default:default:S(e.detail.selectedOption)}}]}class Cx extends Qh{constructor(e){super(),Jh(this,e,$x,xx,yg,{closeWindow:0,showMenu:1,showLangSelect:2,settings:3,websiteSettings:4,extensionContext:15,platformBehaviour:5,textProcessingMode:6,showSettingsIcon:7,showProStatus:8,showServiceName:9})}}function kx(e){let t,n;return t=new Cx({props:{websiteSettings:e[5],settings:e[4],showLangSelect:e[2],showMenu:e[1],closeWindow:e[0],extensionContext:e[6],platformBehaviour:e[7],textProcessingMode:e[8],showSettingsIcon:e[9],showProStatus:e[10],showServiceName:e[11]}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};32&n&&(o.websiteSettings=e[5]),16&n&&(o.settings=e[4]),4&n&&(o.showLangSelect=e[2]),2&n&&(o.showMenu=e[1]),1&n&&(o.closeWindow=e[0]),64&n&&(o.extensionContext=e[6]),128&n&&(o.platformBehaviour=e[7]),256&n&&(o.textProcessingMode=e[8]),512&n&&(o.showSettingsIcon=e[9]),1024&n&&(o.showProStatus=e[10]),2048&n&&(o.showServiceName=e[11]),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function Lx(e){let t,n,o,i,r,s=e[3]&&kx(e);const a=e[14].default,l=Eg(a,e,e[13],null);return{c(){t=Wg("div"),s&&s.c(),n=Gg(),o=Wg("div"),l&&l.c(),Xg(o,"class","dl-content svelte-jwy61a"),Xg(t,"class",i=Cg(`dl-layout ${e[2]&&"dl-layout--with-lang-selector"}`)+" svelte-jwy61a"),Xg(t,"translate","no"),Xg(t,"dir",e[12])},m(e,i){zg(e,t,i),s&&s.m(t,null),Pg(t,n),Pg(t,o),l&&l.m(o,null),r=!0},p(e,[o]){e[3]?s?(s.p(e,o),8&o&&Hh(s,1)):(s=kx(e),s.c(),Hh(s,1),s.m(t,n)):s&&(Uh(),Fh(s,1,1,(()=>{s=null})),zh()),l&&l.p&&(!r||8192&o)&&xg(l,a,e,e[13],r?Tg(a,e[13],o,null):$g(e[13]),null),(!r||4&o&&i!==(i=Cg(`dl-layout ${e[2]&&"dl-layout--with-lang-selector"}`)+" svelte-jwy61a"))&&Xg(t,"class",i)},i(e){r||(Hh(s),Hh(l,e),r=!0)},o(e){Fh(s),Fh(l,e),r=!1},d(e){e&&Hg(t),s&&s.d(),l&&l.d(e)}}}function Ix(e,t,n){let{$$slots:o={},$$scope:i}=t;const r=yh("text_direction");let{closeWindow:s}=t,{showMenu:a=!1}=t,{showLangSelect:l=!1}=t,{withHeader:c=!0}=t,{settings:d}=t,{websiteSettings:u}=t,{extensionContext:p}=t,{platformBehaviour:m=ie.default}=t,{textProcessingMode:g=re.translate}=t,{showSettingsIcon:h=!0}=t,{showProStatus:f=!1}=t,{showServiceName:_=!1}=t;return e.$$set=e=>{"closeWindow"in e&&n(0,s=e.closeWindow),"showMenu"in e&&n(1,a=e.showMenu),"showLangSelect"in e&&n(2,l=e.showLangSelect),"withHeader"in e&&n(3,c=e.withHeader),"settings"in e&&n(4,d=e.settings),"websiteSettings"in e&&n(5,u=e.websiteSettings),"extensionContext"in e&&n(6,p=e.extensionContext),"platformBehaviour"in e&&n(7,m=e.platformBehaviour),"textProcessingMode"in e&&n(8,g=e.textProcessingMode),"showSettingsIcon"in e&&n(9,h=e.showSettingsIcon),"showProStatus"in e&&n(10,f=e.showProStatus),"showServiceName"in e&&n(11,_=e.showServiceName),"$$scope"in e&&n(13,i=e.$$scope)},[s,a,l,c,d,u,p,m,g,h,f,_,r,i,o]}class Ax extends Qh{constructor(e){super(),Jh(this,e,Ix,Lx,yg,{closeWindow:0,showMenu:1,showLangSelect:2,withHeader:3,settings:4,websiteSettings:5,extensionContext:6,platformBehaviour:7,textProcessingMode:8,showSettingsIcon:9,showProStatus:10,showServiceName:11})}}function Mx(e){let t,n,o,i,r,s,a,l,c,d;return{c(){t=Wg("div"),n=Wg("input"),o=Gg(),i=Wg("div"),r=Gg(),s=Wg("label"),a=qg(e[3]),Xg(n,"id",e[1]),Xg(n,"name",e[4]),Xg(n,"type","radio"),n.checked=e[2],Xg(n,"data-qa",e[6]),Xg(n,"class","svelte-1jny8vu"),Xg(i,"class","radio-icon svelte-1jny8vu"),Xg(s,"for",e[1]),Xg(s,"class","svelte-1jny8vu"),Xg(t,"class",l=Cg(`radio ${e[5]} ${e[2]?"radio--checked":""}`)+" svelte-1jny8vu")},m(l,u){zg(l,t,u),Pg(t,n),Qg(n,e[0]),Pg(t,o),Pg(t,i),Pg(t,r),Pg(t,s),Pg(s,a),c||(d=[Yg(n,"change",e[10]),Yg(n,"change",e[8]),Yg(n,"mousedown",Kg(Zg(e[9]))),Yg(t,"click",e[7])],c=!0)},p(e,[o]){2&o&&Xg(n,"id",e[1]),16&o&&Xg(n,"name",e[4]),4&o&&(n.checked=e[2]),64&o&&Xg(n,"data-qa",e[6]),1&o&&Qg(n,e[0]),8&o&&Jg(a,e[3]),2&o&&Xg(s,"for",e[1]),36&o&&l!==(l=Cg(`radio ${e[5]} ${e[2]?"radio--checked":""}`)+" svelte-1jny8vu")&&Xg(t,"class",l)},i:mg,o:mg,d(e){e&&Hg(t),c=!1,_g(d)}}}function Rx(e,t,n){let{id:o}=t,{checked:i=!1}=t,{label:r=""}=t,{value:s=""}=t,{name:a=""}=t,{cssClassName:l=""}=t,{dataQa:c="deepl-radio-button"}=t;return e.$$set=e=>{"id"in e&&n(1,o=e.id),"checked"in e&&n(2,i=e.checked),"label"in e&&n(3,r=e.label),"value"in e&&n(0,s=e.value),"name"in e&&n(4,a=e.name),"cssClassName"in e&&n(5,l=e.cssClassName),"dataQa"in e&&n(6,c=e.dataQa)},[s,o,i,r,a,l,c,function(t){wh.call(this,e,t)},function(t){wh.call(this,e,t)},function(t){wh.call(this,e,t)},function(){s=this.value,n(0,s)}]}class Ox extends Qh{constructor(e){super(),Jh(this,e,Rx,Mx,yg,{id:1,checked:2,label:3,value:0,name:4,cssClassName:5,dataQa:6})}}function Nx(e){let t,n,o;return n=new Ax({props:{withHeader:!1,$$slots:{default:[Dx]},$$scope:{ctx:e}}}),{c(){t=Wg("div"),Zh(n.$$.fragment)},m(e,i){zg(e,t,i),Kh(n,t,null),o=!0},p(e,t){const o={};524297&t&&(o.$$scope={dirty:t,ctx:e}),n.$set(o)},i(e){o||(Hh(n.$$.fragment,e),o=!0)},o(e){Fh(n.$$.fragment,e),o=!1},d(e){e&&Hg(t),Xh(n)}}}function Dx(e){let t,n,o,i,r,s,a,l,c,d,u,p,m,g,h,f,_,v,y,w,b=chrome.i18n.getMessage("inline_translation_setting_button_ok")+"";return l=new Ox({props:{name:"disable_inline_translation",id:G.disablePerSite,value:G.disablePerSite,cssClassName:"radio--with-border",checked:e[3]===G.disablePerSite,label:chrome.i18n.getMessage("inline_translation_setting_radio_disable_per_site"),dataQa:"disable-per-site-radio-button"}}),l.$on("change",e[7]),l.$on("click",e[12]),d=new Ox({props:{name:"disable_inline_translation",id:G.disableEverywhere,value:G.disableEverywhere,cssClassName:"radio--with-border",checked:e[3]===G.disableEverywhere,label:chrome.i18n.getMessage("inline_translation_setting_radio_disable_everywhere"),dataQa:"disable-everywhere-radio-button"}}),d.$on("change",e[7]),d.$on("click",e[13]),{c(){t=Wg("div"),n=Wg("button"),o=Gg(),i=Wg("div"),r=Wg("p"),r.textContent=`${chrome.i18n.getMessage("inline_translation_setting_label_title_v2")}`,s=Gg(),a=Wg("div"),Zh(l.$$.fragment),c=Gg(),Zh(d.$$.fragment),u=Gg(),p=Wg("div"),m=Wg("span"),m.textContent=`${chrome.i18n.getMessage("inline_translation_setting_link_cancel")}`,g=Gg(),h=Wg("button"),f=qg(b),Xg(n,"type","button"),Xg(n,"class","close-icon svelte-kj6lw"),Xg(t,"class","header svelte-kj6lw"),Xg(r,"class","font-bold svelte-kj6lw"),Xg(a,"class","option-container svelte-kj6lw"),Xg(m,"class","link svelte-kj6lw"),Xg(m,"data-qa","close-settings-popup-link"),Xg(h,"class",_=Cg("btn btn-primary "+(e[3]?"":"disabled"))+" svelte-kj6lw"),Xg(h,"data-qa","save-settings-change-button"),Xg(p,"class","action-container svelte-kj6lw"),Xg(i,"class","dl-widget svelte-kj6lw")},m(_,b){zg(_,t,b),Pg(t,n),zg(_,o,b),zg(_,i,b),Pg(i,r),Pg(i,s),Pg(i,a),Kh(l,a,null),Pg(a,c),Kh(d,a,null),Pg(i,u),Pg(i,p),Pg(p,m),Pg(p,g),Pg(p,h),Pg(h,f),v=!0,y||(w=[Yg(n,"click",Kg(Zg((function(){vg(e[0])&&e[0].apply(this,arguments)})))),Yg(t,"mousedown",Kg(Zg(e[11]))),Yg(m,"click",(function(){vg(e[0])&&e[0].apply(this,arguments)})),Yg(h,"click",Kg(Zg(e[6]))),Yg(i,"mousedown",Kg(Zg(e[10])))],y=!0)},p(t,n){e=t;const o={};8&n&&(o.checked=e[3]===G.disablePerSite),l.$set(o);const i={};8&n&&(i.checked=e[3]===G.disableEverywhere),d.$set(i),(!v||8&n&&_!==(_=Cg("btn btn-primary "+(e[3]?"":"disabled"))+" svelte-kj6lw"))&&Xg(h,"class",_)},i(e){v||(Hh(l.$$.fragment,e),Hh(d.$$.fragment,e),v=!0)},o(e){Fh(l.$$.fragment,e),Fh(d.$$.fragment,e),v=!1},d(e){e&&(Hg(t),Hg(o),Hg(i)),Xh(l),Xh(d),y=!1,_g(w)}}}function Px(e){let t,n,o,i,r=e[4].enableInlineTranslation&&Nx(e);return{c(){t=Wg("div"),r&&r.c(),Xg(t,"class","tooltip-wrapper tooltip-wrapper--settings svelte-kj6lw"),Xg(t,"data-qa","deepl-inline-settings-tooltip"),Xg(t,"style",e[2]),Xg(t,"dir",Bt())},m(s,a){zg(s,t,a),r&&r.m(t,null),e[14](t),n=!0,o||(i=[Lg(c_.call(null,t,{isShadow:!0})),Yg(t,"click_outside",e[15])],o=!0)},p(e,[o]){e[4].enableInlineTranslation?r?(r.p(e,o),16&o&&Hh(r,1)):(r=Nx(e),r.c(),Hh(r,1),r.m(t,null)):r&&(Uh(),Fh(r,1,1,(()=>{r=null})),zh()),(!n||4&o)&&Xg(t,"style",e[2])},i(e){n||(Hh(r),n=!0)},o(e){Fh(r),n=!1},d(n){n&&Hg(t),r&&r.d(),e[14](null),o=!1,_g(i)}}}function Bx(e,n,o){let i;bg(e,nf,(e=>o(4,i=e))),vh("text_direction",Bt());let r,s,a,{closeTooltip:l}=n,{replaceElement:c}=n,d="visibility: hidden; opacity:0; height:0;",u="";function p(e){o(3,u=e)}hh((()=>{setTimeout((()=>{o(2,d="")}),100),a=f_(r,(({clientHeight:e})=>{o(9,s=e)}))})),fh((()=>{a&&a()}));return e.$$set=e=>{"closeTooltip"in e&&o(0,l=e.closeTooltip),"replaceElement"in e&&o(8,c=e.replaceElement)},e.$$.update=()=>{768&e.$$.dirty&&c(s)},[l,r,d,u,i,p,function(){if(!u)return;switch(u){case G.disableEverywhere:nf.set({enableInlineTranslation:!1}),t({action:"dlTrackSettingChanged",payload:{settingType:G.disableEverywhere,domainName:window.location.hostname,uiFunction:Y,uiLocation:U.inlineTranslationSettingPopup}});break;case G.disablePerSite:!function(){let e=i.blacklistDomainsForReading;e&&!e.includes(window.location.hostname)&&(e.push(window.location.hostname),nf.set({blacklistDomainsForReading:e}),t({action:"dlTrackSettingChanged",payload:{settingType:G.disablePerSite,domainName:window.location.hostname,uiFunction:Y,uiLocation:U.inlineTranslationSettingPopup}}))}()}let e=ME(window.location.hostname,["www."]);l(),t({action:"dlSendNotification",payload:{type:P.inlineTranslation,options:{theme:B.green_theme,currentDomain:e,saveAction:u,settingsPageURL:tS.settings_reading}}})},function(e){o(3,u=e.currentTarget.value)},c,s,function(t){wh.call(this,e,t)},function(t){wh.call(this,e,t)},()=>p(G.disablePerSite),()=>p(G.disableEverywhere),function(e){Eh[e?"unshift":"push"]((()=>{r=e,o(1,r)}))},()=>l()]}class Ux extends Qh{constructor(e){super(),Jh(this,e,Bx,Px,yg,{closeTooltip:0,replaceElement:8})}}class zx{static HTML_TAG_NAME="deepl-inline-translate-settings-tooltip";static createElement=(e=document)=>{const t=e.createElement(zx.HTML_TAG_NAME),n=new zx(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.container=document.createElement("div"),this.domElement.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer)}createDOM=(e,t)=>{const{deepl_inline_ui:n}=D;this.domElement.shadowContainer&&this.domElement.shadowContainer.childElementCount>0&&this.cleanupDOM();const o=300;this.domElement.shadowContainer.appendChild(this.domElement.container);const i=e?.top,r=window.innerHeight-(e?.bottom||0);let s="position: absolute; top: 0px; left: 0px; width: 100%; z-index: "+(n.z_index-100),a=`position: absolute; top: 0px; left: 0px; z-index: ${n.z_index-100};`,l=e.y,c=e.x;this.domElement.shadowContainer.style.cssText=s,this.domElement.container.style.cssText=a,this.domElement.mainComponent=new Ux({target:this.domElement.container,props:{closeTooltip:t,replaceElement:t=>{const d=i>o;r>o?l=e.y+8:d&&(l=e.y-30-t-4),r<o&&i<o&&(s=`position: fixed; top:50%; left:50%; transform:translate(-50%,-50%); z-index: ${n.z_index-100}; max-height:90vh;`,a=`z-index: ${n.z_index-100};`,c=0,l=0),e.right<260?c=e.left-260+60:e.left<260&&(c=e.left),this.domElement.container.style.top=`${parseInt(l)}px`,this.domElement.container.style.left=`${parseInt(c)}px`}}})};cleanupDOM=()=>{this.domElement.container.remove(),this.domElement.shadowContainer.remove(),this.domElement.shadowContainer=document.createElement("div"),this.domElement.container=document.createElement("div"),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}const Hx=e=>({top:e?.selectedTop,bottom:window.innerHeight-e?.selectedBottom,right:e?.selectedRight,left:e?.selectedLeft}),Fx=e=>{const{coords:t,clientHeight:n}=e,o=Hx(t),i={top:{position:t.y-t.height,isPossible:o.top>=0},bottom:{position:t.y-n,isPossible:o.bottom>=0},middle:{position:window.pageYOffset+window.innerHeight/2-n/2,isPossible:!0}};for(const e of Object.values(i))if(e.isPossible)return e.position},Wx=({coords:e,TOOLTIP_WIDTH:t})=>{const n={right:{position:e.x,isPossible:e.x+t<=window.innerWidth},left:{position:e.x+e.selectedWidth-t,isPossible:e.x+e.selectedWidth-t>=0},middle:{position:window.innerWidth/2-t/2,isPossible:!0}};for(const e of Object.values(n))if(e.isPossible)return e.position},jx=(e,t,n)=>{const{coords:o,clientHeight:i,style:r,TOOLTIP_WIDTH:s,TRIGGER_MENU_ICON_HEIGHT:a}=t;switch(e){case"top":r.top=o.y-o.height-i-2-a-n.y+"px",r.left=Wx(t)-n.x+"px";break;case"bottom":r.top=o.y+2+a-n.y+"px",r.left=Wx(t)-n.x+"px";break;case"left":r.top=Fx(t)-n.y+"px",r.left=o.x-s-2-n.x+"px";break;case"right":r.top=Fx(t)-n.y+"px",r.left=o.x+o.selectedWidth+2-n.x+"px";break;default:r.top=window.pageYOffset+window.innerHeight/2-i/2-n.y+"px",r.left=window.innerWidth/2-s/2-n.x+"px"}},qx=(e,t,n)=>{const{coords:o,clientHeight:i,TOOLTIP_WIDTH:r,style:s}=t;switch(s.left=o.x-r-10-n.x+"px",e){case"top":s.top=o.y-i-n.y+"px";break;case"bottom":s.top=o.y-o.height-n.y+"px";break;default:s.top=window.pageYOffset+window.innerHeight/2-i/2-n.y+"px"}},Gx=(e,t)=>{const n=Vx(t);switch(e){case"top":case"bottom":case"left":case"right":return n[e];default:return!0}},Vx=e=>{const{TOOLTIP_WIDTH:t,clientHeight:n,coords:o}=e,i=Hx(o);return{left:i.left>t,right:i.right>t,bottom:i.bottom>n,top:i.top>n}},Yx=e=>{const t=["bottom","top","left","right","middle"];return t.sort(((t,n)=>t===e?-1:n===e?1:0)),[t,["bottom","top","middle"]]};function Zx(e){return e.preventDefault(),!1}function Kx(e,n){e.dataTransfer.setData("text/html","");let o=e.target.getBoundingClientRect(),i={x:0,y:0};const r=e.clientX-o.left,s=e.clientY-o.top;return r>0&&(i.x=r),s>0&&(i.y=s),function(e){try{t({action:"dlTrackInlineDragStart",payload:{nicheIntegration:e}})}catch(e){console.error(e)}}(n),{dragElementRect:o,dragOffset:i}}function Xx({dropEvent:e,document:t,dragConfig:n}){if(e.preventDefault(),0===e.y||0===e.x)return null;const{dragOffset:o,dragElementRect:i,dragBarWidth:r}=n,s=t.body.getBoundingClientRect();let a;return a=e.pageX-o.x>s.width-i.width?s.width-i.width-r>0?s.width-i.width-r:0:e.pageX-o.x,{x:a,y:e.pageY-o.y}}function Jx(e){return e&&function(e){return e.replace(/./gm,(function(e){return e.match(/[a-z0-9\s]+/i)?e:"&#"+e.charCodeAt(0)+";"}))}(e).replaceAll("\n","<br />")}function Qx(e){let t,n,o;return{c(){t=Wg("button"),t.innerHTML='<span class="dl-icon dl-icon-copy svelte-sfmd6f"></span>',Xg(t,"type","button"),Xg(t,"class","dl-btn svelte-sfmd6f"),Xg(t,"data-qa","dl-toolbar-copy-button"),ih(t,"dl-btn-active",e[0])},m(i,r){zg(i,t,r),n||(o=[Yg(t,"click",e[1]),Yg(t,"mouseleave",e[2])],n=!0)},p(e,n){1&n&&ih(t,"dl-btn-active",e[0])},d(e){e&&Hg(t),n=!1,_g(o)}}}function e$(e){let t,n;return t=new h_({props:{zIndex:300,tooltip:chrome.i18n.getMessage(e[0]?"ui_inline_translation_copied":"ui_inline_translation_copy"),$$slots:{default:[Qx]},$$scope:{ctx:e}}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,[n]){const o={};1&n&&(o.tooltip=chrome.i18n.getMessage(e[0]?"ui_inline_translation_copied":"ui_inline_translation_copy")),129&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function t$(e,n,o){let{text:i}=n,{targetLang:r}=n,{platformBehaviour:s=ie.default}=n,a=!1;return e.$$set=e=>{"text"in e&&o(3,i=e.text),"targetLang"in e&&o(4,r=e.targetLang),"platformBehaviour"in e&&o(5,s=e.platformBehaviour)},[a,function(){navigator.clipboard.writeText(i).then((function(){o(0,a=!0)}),(function(e){console.error(e)})),function(e){try{t({action:"dlTrackInlineCopy",payload:e})}catch(e){console.error(e)}}({targetLang:r,targetLength:i.length,nicheIntegration:s})},function(){setTimeout((()=>{o(0,a=!1)}),300)},i,r,s]}class n$ extends Qh{constructor(e){super(),Jh(this,e,t$,e$,yg,{text:3,targetLang:4,platformBehaviour:5})}}function o$(e){let t,n,o,i,r,s,a,l,c;return{c(){t=Wg("div"),n=Wg("button"),n.textContent=`${chrome.i18n.getMessage("ui_inline_translation_listen_to_translation")}`,o=Gg(),i=Wg("button"),i.textContent=`${chrome.i18n.getMessage("ui_inline_translation_listen_to_original")}`,Xg(n,"class","list-entry svelte-o3etn3"),Xg(n,"data-qa","dl-toolbar-listener-button-target-lang"),ih(n,"dl-entry-notAvailable",!e[0]),Xg(i,"class","list-entry svelte-o3etn3"),Xg(i,"data-qa","dl-toolbar-listener-button-source-lang"),ih(i,"dl-entry-notAvailable",!e[1]),Xg(t,"class","listen-list svelte-o3etn3"),Xg(t,"data-qa","dl-toolbar-listener-element-langs")},m(r,s){zg(r,t,s),Pg(t,n),Pg(t,o),Pg(t,i),a=!0,l||(c=[Yg(n,"click",e[7]),Yg(i,"click",(function(){vg(e[6](e[4],e[2]))&&e[6](e[4],e[2]).apply(this,arguments)}))],l=!0)},p(t,[o]){e=t,(!a||1&o)&&ih(n,"dl-entry-notAvailable",!e[0]),(!a||2&o)&&ih(i,"dl-entry-notAvailable",!e[1])},i(e){a||(kh((()=>{a&&(s&&s.end(1),r=jh(t,Of,{y:-5,duration:500}),r.start())})),a=!0)},o(e){r&&r.invalidate(),s=qh(t,Of,{y:-5,duration:500}),a=!1},d(e){e&&Hg(t),e&&s&&s.end(),l=!1,_g(c)}}}function i$(e,t,n){let{isAvailableSelectedTargetLang:o}=t,{isAvailableSourceLang:i}=t,{sourceLang:r}=t,{targetLang:s}=t,{sourceText:a}=t,{targetText:l}=t,{listen:c=(()=>{})}=t;return e.$$set=e=>{"isAvailableSelectedTargetLang"in e&&n(0,o=e.isAvailableSelectedTargetLang),"isAvailableSourceLang"in e&&n(1,i=e.isAvailableSourceLang),"sourceLang"in e&&n(2,r=e.sourceLang),"targetLang"in e&&n(3,s=e.targetLang),"sourceText"in e&&n(4,a=e.sourceText),"targetText"in e&&n(5,l=e.targetText),"listen"in e&&n(6,c=e.listen)},[o,i,r,s,a,l,c,()=>{c(l,s)}]}class r$ extends Qh{constructor(e){super(),Jh(this,e,i$,o$,yg,{isAvailableSelectedTargetLang:0,isAvailableSourceLang:1,sourceLang:2,targetLang:3,sourceText:4,targetText:5,listen:6})}}function s$(e){let t,n,o,i,r;return n=new h_({props:{tooltip:e[8],zIndex:300,$$slots:{default:[l$]},$$scope:{ctx:e}}}),{c(){t=Wg("fragment"),Zh(n.$$.fragment),Xg(t,"role","navigation")},m(s,a){zg(s,t,a),Kh(n,t,null),o=!0,i||(r=[Yg(t,"mouseover",e[11]),Yg(t,"focus",e[11]),Yg(t,"mouseleave",e[13])],i=!0)},p(e,t){const o={};256&t&&(o.tooltip=e[8]),262399&t&&(o.$$scope={dirty:t,ctx:e}),n.$set(o)},i(e){o||(Hh(n.$$.fragment,e),o=!0)},o(e){Fh(n.$$.fragment,e),o=!1},d(e){e&&Hg(t),Xh(n),i=!1,_g(r)}}}function a$(e){let t,n;return t=new r$({props:{isAvailableSelectedTargetLang:e[6],isAvailableSourceLang:e[7],sourceLang:e[0],targetLang:e[1],sourceText:e[2],targetText:e[3],listen:e[9]}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};64&n&&(o.isAvailableSelectedTargetLang=e[6]),128&n&&(o.isAvailableSourceLang=e[7]),1&n&&(o.sourceLang=e[0]),2&n&&(o.targetLang=e[1]),4&n&&(o.sourceText=e[2]),8&n&&(o.targetText=e[3]),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function l$(e){let t,n,o,i,r,s,a=e[5]&&a$(e);return{c(){t=Wg("button"),t.innerHTML='<span class="dl-icon dl-icon-listen svelte-17suwwx"></span>',n=Gg(),a&&a.c(),o=Vg(),Xg(t,"type","button"),Xg(t,"class","dl-btn svelte-17suwwx"),Xg(t,"data-qa","dl-toolbar-listener-button"),ih(t,"dl-btn-active",e[4]),ih(t,"dl-btn-hovered",e[5])},m(l,c){zg(l,t,c),zg(l,n,c),a&&a.m(l,c),zg(l,o,c),i=!0,r||(s=Yg(t,"click",e[10]),r=!0)},p(e,n){(!i||16&n)&&ih(t,"dl-btn-active",e[4]),(!i||32&n)&&ih(t,"dl-btn-hovered",e[5]),e[5]?a?(a.p(e,n),32&n&&Hh(a,1)):(a=a$(e),a.c(),Hh(a,1),a.m(o.parentNode,o)):a&&(Uh(),Fh(a,1,1,(()=>{a=null})),zh())},i(e){i||(Hh(a),i=!0)},o(e){Fh(a),i=!1},d(e){e&&(Hg(t),Hg(n),Hg(o)),a&&a.d(e),r=!1,s()}}}function c$(e){let t,n,o=(e[6]||e[7])&&s$(e);return{c(){o&&o.c(),t=Vg()},m(e,i){o&&o.m(e,i),zg(e,t,i),n=!0},p(e,[n]){e[6]||e[7]?o?(o.p(e,n),192&n&&Hh(o,1)):(o=s$(e),o.c(),Hh(o,1),o.m(t.parentNode,t)):o&&(Uh(),Fh(o,1,1,(()=>{o=null})),zh())},i(e){n||(Hh(o),n=!0)},o(e){Fh(o),n=!1},d(e){e&&Hg(t),o&&o.d(e)}}}function d$(e,n,o){let{platformBehaviour:i=ie.default}=n,{sourceLang:r=""}=n,{targetLang:s=""}=n,{sourceText:a=""}=n,{targetText:l=""}=n,c=!1,d=!1,u=!1,p=!1,m=!1;function g(){t({action:"dlStopSpeech"}),o(4,u=!1)}function h(e){try{t({action:"dlTrackInlineListen",payload:e})}catch(e){console.error(e)}}async function f(e,t,n){if("dlVoiceOverStopped"===e.action)o(4,u=!1),n();return!0}function _(e){try{t({action:"dlTrackVoiceOverStops",payload:e})}catch(e){console.error(e)}}chrome.runtime.onMessage.addListener(f),fh((()=>{u&&_({targetLang:s,targetLength:l.length,triggerType:A,nicheIntegration:i}),g(),chrome.runtime.onMessage.removeListener(f)}));return e.$$set=e=>{"platformBehaviour"in e&&o(12,i=e.platformBehaviour),"sourceLang"in e&&o(0,r=e.sourceLang),"targetLang"in e&&o(1,s=e.targetLang),"sourceText"in e&&o(2,a=e.sourceText),"targetText"in e&&o(3,l=e.targetText)},e.$$.update=()=>{51&e.$$.dirty&&(s&&t({action:"dlGetSupportedVoices"}).then((e=>{o(6,c=e.includes(["EN-US","EN-GB"].includes(s)?"EN":["PT-PT","PT-BR"].includes(s)?"PT":["ZH-CN","ZH-HANT"].includes(s)?"ZH":s)),o(7,d=e.includes(r))})),!p&&u?setTimeout((()=>{o(8,m=chrome.i18n.getMessage("ui_inline_translation_listen_stop"))}),1e3):o(8,m=!1))},[r,s,a,l,u,p,c,d,m,async function(e,n){u||(t({action:"dlTextToSpeech",payload:{text:e,lang:n}}),o(4,u=!0),h({targetLang:s,targetLength:l.length,actionType:Z,nicheIntegration:i}),o(5,p=!1))},function(){u?(g(),o(4,u=!1),_({targetLang:s,targetLength:l.length,triggerType:I,nicheIntegration:i}),h({targetLang:s,targetLength:l.length,actionType:K,nicheIntegration:i})):o(5,p=!0)},function(){u||o(5,p=!0)},i,()=>o(5,p=!1)]}class u$ extends Qh{constructor(e){super(),Jh(this,e,d$,c$,yg,{platformBehaviour:12,sourceLang:0,targetLang:1,sourceText:2,targetText:3})}}function p$(e){let t,n,o,i;return{c(){t=Wg("button"),Xg(t,"type","button"),Xg(t,"class","dl-replace-button svelte-9vlams"),t.disabled=n=e[3]||!e[2]||e[4]},m(n,r){zg(n,t,r),o||(i=Yg(t,"click",Kg(Zg(e[5]))),o=!0)},p(e,o){12&o&&n!==(n=e[3]||!e[2]||e[4])&&(t.disabled=n)},d(e){e&&Hg(t),o=!1,i()}}}function m$(e){let t,n;return t=new h_({props:{tooltip:chrome.i18n.getMessage("ui_gdocs_replace_cta"),multiline:!0,zIndex:"0",isEnabled:!e[3]&&e[2]&&!e[4],$$slots:{default:[p$]},$$scope:{ctx:e}}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,[n]){const o={};12&n&&(o.isEnabled=!e[3]&&e[2]&&!e[4]),524&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function g$(e,n,o){let i,r,s=mg,a=()=>(s(),s=wg(u,(e=>o(7,i=e))),u),l=mg,c=()=>(l(),l=wg(p,(e=>o(8,r=e))),p);e.$$.on_destroy.push((()=>s())),e.$$.on_destroy.push((()=>l()));let{websiteSettings:u}=n;a();let{settings:p}=n;c();let m,{onClose:g}=n,h=!1,f=i.translationState===d.anonymousUserMaxCharExceeded;return hh((()=>{o(2,m=_t())})),e.$$set=e=>{"websiteSettings"in e&&a(o(0,u=e.websiteSettings)),"settings"in e&&c(o(1,p=e.settings)),"onClose"in e&&o(6,g=e.onClose)},[u,p,m,h,f,function(){const e=gt().text;o(3,h=!0);const n=document.querySelector("deepl-gdocs-icon");n&&(n.applyReplacement(),g(),t({action:"dlTrackGDocsReplaceText",payload:{sourceLang:i.websiteLanguage,targetLang:r.selectedTargetLanguage,sourceLength:e.length,targetLength:i.translatedSnippet.length}}))},g]}class h$ extends Qh{constructor(e){super(),Jh(this,e,g$,m$,yg,{websiteSettings:0,settings:1,onClose:6})}}function f$(e){let t,n,o=dt(e[4])+"";return{c(){t=Wg("div"),n=Wg("div"),Xg(t,"class","tooltip-linguee svelte-166oozy")},m(e,i){zg(e,t,i),Pg(t,n),n.innerHTML=o},p(e,t){16&t&&o!==(o=dt(e[4])+"")&&(n.innerHTML=o)},d(e){e&&Hg(t)}}}function _$(e){let t,n;return t=new h$({props:{websiteSettings:e[0],settings:nf,onClose:e[5]}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.websiteSettings=e[0]),32&n&&(o.onClose=e[5]),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function v$(e){let t,n,o,i,r,s,a,l,c,d,u,p,m,g,h,f,_,v,y,w,b,E,S,T,x,$=e[4]&&f$(e);y=new u$({props:{sourceLang:e[7].websiteLanguage,targetLang:e[8].selectedTargetLanguage,sourceText:e[7].originalSnippet,targetText:e[7].translatedSnippet,platformBehaviour:e[6]}}),b=new n$({props:{targetLang:e[8].selectedTargetLanguage,text:e[7].translatedSnippet,platformBehaviour:e[6]}});let C=e[6]===ie.gdocs&&_$(e);return{c(){t=Wg("div"),n=Wg("div"),o=Wg("button"),i=Wg("span"),i.textContent=`${chrome.i18n.getMessage("ui_inline_translation_see_alternatives_v2")}`,r=Gg(),s=Wg("span"),a=Gg(),l=Wg("fragment"),c=Wg("div"),d=Wg("div"),d.textContent=`${chrome.i18n.getMessage("ui_inline_translation_dictionary")}`,u=Gg(),p=Wg("div"),m=Gg(),g=Wg("div"),f=Gg(),$&&$.c(),_=Gg(),v=Wg("div"),Zh(y.$$.fragment),w=Gg(),Zh(b.$$.fragment),E=Gg(),C&&C.c(),Xg(s,"class","icon icon-external-link svelte-166oozy"),Xg(o,"type","button"),Xg(o,"class","link svelte-166oozy"),Xg(n,"class","dl-link-container"),Xg(d,"class","dict-text svelte-166oozy"),Xg(p,"class","img_book svelte-166oozy"),ih(p,"shown-dict",e[2]),Xg(g,"class","img_arrow svelte-166oozy"),ih(g,"shown-dict",e[2]),Xg(c,"class",h="dl-dictionary "+(e[3]?"":"disable")+" "+(e[2]?"shown-dict":"")+" svelte-166oozy"),Xg(c,"data-qa","dl-toolbar-dictionary-button"),eh(l,"position","relative"),Xg(v,"class","dl-btn-group svelte-166oozy"),Xg(t,"class","dl-toolbar svelte-166oozy")},m(h,k){zg(h,t,k),Pg(t,n),Pg(n,o),Pg(o,i),Pg(o,r),Pg(o,s),Pg(t,a),Pg(t,l),Pg(l,c),Pg(c,d),Pg(c,u),Pg(c,p),Pg(c,m),Pg(c,g),Pg(l,f),$&&$.m(l,null),Pg(t,_),Pg(t,v),Kh(y,v,null),Pg(v,w),Kh(b,v,null),Pg(v,E),C&&C.m(v,null),S=!0,T||(x=[Yg(o,"click",e[9]),Yg(c,"click",(function(){vg(e[1])&&e[1].apply(this,arguments)})),Yg(c,"mouseenter",e[10])],T=!0)},p(t,[n]){e=t,(!S||4&n)&&ih(p,"shown-dict",e[2]),(!S||4&n)&&ih(g,"shown-dict",e[2]),(!S||12&n&&h!==(h="dl-dictionary "+(e[3]?"":"disable")+" "+(e[2]?"shown-dict":"")+" svelte-166oozy"))&&Xg(c,"class",h),e[4]?$?$.p(e,n):($=f$(e),$.c(),$.m(l,null)):$&&($.d(1),$=null);const o={};128&n&&(o.sourceLang=e[7].websiteLanguage),256&n&&(o.targetLang=e[8].selectedTargetLanguage),128&n&&(o.sourceText=e[7].originalSnippet),128&n&&(o.targetText=e[7].translatedSnippet),64&n&&(o.platformBehaviour=e[6]),y.$set(o);const i={};256&n&&(i.targetLang=e[8].selectedTargetLanguage),128&n&&(i.text=e[7].translatedSnippet),64&n&&(i.platformBehaviour=e[6]),b.$set(i),e[6]===ie.gdocs?C?(C.p(e,n),64&n&&Hh(C,1)):(C=_$(e),C.c(),Hh(C,1),C.m(v,null)):C&&(Uh(),Fh(C,1,1,(()=>{C=null})),zh())},i(e){S||(Hh(y.$$.fragment,e),Hh(b.$$.fragment,e),Hh(C),S=!0)},o(e){Fh(y.$$.fragment,e),Fh(b.$$.fragment,e),Fh(C),S=!1},d(e){e&&Hg(t),$&&$.d(),Xh(y),Xh(b),C&&C.d(),T=!1,_g(x)}}}function y$(e,n,o){let i,r,s=mg,a=()=>(s(),s=wg(l,(e=>o(7,i=e))),l);bg(e,nf,(e=>o(8,r=e))),e.$$.on_destroy.push((()=>s()));let{websiteSettings:l}=n;a();let{switchVisibilityDictionary:c}=n,{showDictionary:d=!1}=n,{enableDictionaryButton:u}=n,{dictionaryButtonError:p}=n,{onClose:m}=n,{platformBehaviour:g=ie.default}=n;return e.$$set=e=>{"websiteSettings"in e&&a(o(0,l=e.websiteSettings)),"switchVisibilityDictionary"in e&&o(1,c=e.switchVisibilityDictionary),"showDictionary"in e&&o(2,d=e.showDictionary),"enableDictionaryButton"in e&&o(3,u=e.enableDictionaryButton),"dictionaryButtonError"in e&&o(4,p=e.dictionaryButtonError),"onClose"in e&&o(5,m=e.onClose),"platformBehaviour"in e&&o(6,g=e.platformBehaviour)},[l,c,d,u,p,m,g,i,r,function(){const e={};i&&r&&(e.sourceLang=i.websiteLanguage,e.targetLang=r.selectedTargetLanguage,e.textToShare=i.originalSnippet),t({action:"dlExternalURLRedirect",payload:{destination:cv,...e}});try{t({action:"dlTrackUiAction",payload:{uiAction:F,nicheIntegration:g}})}catch(e){console.error(e)}},function(){if(!u)try{t({action:"dlTrackDisabledDictionaryHover",payload:{}})}catch(e){console.log(e)}}]}class w$ extends Qh{constructor(e){super(),Jh(this,e,y$,v$,yg,{websiteSettings:0,switchVisibilityDictionary:1,showDictionary:2,enableDictionaryButton:3,dictionaryButtonError:4,onClose:5,platformBehaviour:6})}}function b$(e){let t,n,o,i,r,s;return{c(){t=Wg("div"),n=Wg("button"),n.textContent=`${chrome.i18n.getMessage("ui_gdocs_write_accept")}`,o=Gg(),i=Wg("button"),i.textContent=`${chrome.i18n.getMessage("ui_gdocs_write_cancel")}`,Xg(n,"class","btn-primary svelte-1ou9pye"),Xg(i,"class","btn-secondary svelte-1ou9pye"),Xg(t,"class","dl-toolbar svelte-1ou9pye")},m(a,l){zg(a,t,l),Pg(t,n),Pg(t,o),Pg(t,i),r||(s=[Yg(n,"click",e[0]),Yg(i,"click",e[1])],r=!0)},p:mg,i:mg,o:mg,d(e){e&&Hg(t),r=!1,_g(s)}}}function E$(e,t,n){let{onClose:o}=t;return e.$$set=e=>{"onClose"in e&&n(2,o=e.onClose)},[()=>{const e=document.getElementsByTagName("deepl-gdocs-icon")[0];e&&(e.applyReplacement(),e.trackDeeplWriteInsertCopy()),o()},()=>{const e=document.getElementsByTagName("deepl-gdocs-icon")[0];e&&e.trackDeeplWriteDiscardCopy(),o()},o]}class S$ extends Qh{constructor(e){super(),Jh(this,e,E$,b$,yg,{onClose:2})}}function T$(e){let t,n,o,i,r,s=JSON.stringify(e[1](),void 0,2)+"";return{c(){t=Wg("p"),n=qg(e[0]),o=Gg(),i=Wg("pre"),r=qg(s),Xg(i,"class","debug-settings svelte-mu7va1")},m(e,s){zg(e,t,s),Pg(t,n),zg(e,o,s),zg(e,i,s),Pg(i,r)},p(e,[t]){1&t&&Jg(n,e[0]),2&t&&s!==(s=JSON.stringify(e[1](),void 0,2)+"")&&Jg(r,s)},i:mg,o:mg,d(e){e&&(Hg(t),Hg(o),Hg(i))}}}function x$(e,t,n){let{headline:o="JSON block"}=t,{jsonData:i=(()=>{})}=t;return e.$$set=e=>{"headline"in e&&n(0,o=e.headline),"jsonData"in e&&n(1,i=e.jsonData)},[o,i]}class $$ extends Qh{constructor(e){super(),Jh(this,e,x$,T$,yg,{headline:0,jsonData:1})}}const C$=new Set(["BG","CS","DA","DE","EL","EN","ES","ET","FI","FR","FR_CA","HU","IT","JA","KO","LT","LV","MT","NL","PL","PT","PT_BR","PT_PT","RO","RU","SK","SL","SV","ZH"]),k$=new Map([["ZH_EN","chinese-english"],["EN_ZH","english-chinese"],["NL_EN","dutch-english"],["EN_NL","english-dutch"],["FR_EN","french-english"],["EN_FR","english-french"],["FR_DE","french-german"],["DE_FR","german-french"],["FR_PT","french-portuguese"],["PT_FR","portuguese-french"],["FR_ES","french-spanish"],["ES_FR","spanish-french"],["DE_EN","german-english"],["EN_DE","english-german"],["DE_PT","german-portuguese"],["PT_DE","portuguese-german"],["DE_ES","german-spanish"],["ES_DE","spanish-german"],["IT_EN","italian-english"],["EN_IT","english-italian"],["JA_EN","japanese-english"],["EN_JA","english-japanese"],["PL_EN","polish-english"],["EN_PL","english-polish"],["PT_EN","portuguese-english"],["EN_PT","english-portuguese"],["PT_ES","portuguese-spanish"],["ES_PT","spanish-portuguese"],["RU_EN","russian-english"],["EN_RU","english-russian"],["ES_EN","spanish-english"],["EN_ES","english-spanish"]]);function L$(e,t){return["EN-GB","EN-US"].includes(e)&&(e="EN"),["EN-GB","EN-US"].includes(t)&&(t="EN"),["PT-PT","PT-BR"].includes(e)&&(e="PT"),["PT-PT","PT-BR"].includes(t)&&(t="PT"),["ZH-CN","ZH-HANT"].includes(e)&&(e="ZH"),["ZH-CN","ZH-HANT"].includes(t)&&(t="ZH"),function(e,t){const n=`${e.toUpperCase()}_${t.toUpperCase()}`;return k$.get(n)}(e,t)}async function I$(e){let{interfaceLang:n,sourceLang:o,targetLang:i,text:r}=e;var s;n&&(s=n,C$.has(s.toUpperCase()))||(n="EN"),n=n.substring(0,2).toUpperCase(),await(Ch(),xh);try{return await t({action:"dlGetDictionary",payload:{interfaceLang:n,sourceLang:o,targetLang:i,text:r}})}catch(e){throw t({action:"dlTrackLingueeErrorData",payload:{lingueeError:e.error}}),e}}function A$(e){let t,n,o,i,r=dt(e[0])+"";return{c(){t=Wg("div"),n=Wg("style"),n.textContent='.lmt__dict {\n  background-color: white;\n  text-align: start;\n  box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  -webkit-box-sizing: border-box;\n  position: relative;\n  font-weight: 400;\n  font-family: system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n  padding: 0 24px;\n  border: 0;\n  width: 100%;\n  font-size: 14px;\n}\n.lmt__dict #dictionary .dict_headline_for_0 {\n  display: none;\n}\n.lmt__dict #dictionary .dict_headline_for_1 {\n  display: none;\n}\n.lmt__dict h1 {\n  font-family: system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n  font-style: normal;\n  font-weight: normal;\n  line-height: 1.1;\n  font-size: 15px;\n}\n.lmt__dict h1.didyoumean {\n  display: none;\n}\n.lmt__dict #spelling_message_pane {\n  display: none;\n}\n.lmt__dict a {\n  text-decoration: none;\n  pointer-events: none;\n  font-family: system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n  color: #333;\n}\n.lmt__dict.lmt--hidden {\n  display: none;\n}\n.lmt__dict .semantic_field,\n.lmt__dict .sem,\n.lmt__dict .othertempora {\n  font-style: italic;\n  color: #999;\n  position: relative;\n  font-size: 12px;\n}\n.lmt__dict noindex:-o-prefocus,\n.lmt__dict .semantic_field,\n.lmt__dict .sem {\n  position: static;\n  z-index: 1;\n}\n.lmt__dict .placeholder {\n  font-size: smaller;\n}\n.lmt__dict #dictionary,\n.lmt__dict .dictionary {\n  font-weight: 400;\n  font-style: italic;\n  font-size: 15px;\n  color: #999;\n  line-height: 1.35em;\n  position: relative;\n}\n.lmt__dict #dictionary .inexact {\n  font-weight: 400;\n  font-style: italic;\n  font-size: 13px;\n  color: #999;\n  margin-top: 18px;\n}\n.lmt__dict .lemma {\n  vertical-align: top;\n  margin: 10px 0 25px 0;\n}\n.lmt__dict .lemma.last {\n  background: none;\n}\n.lmt__dict .lemma_desc {\n  padding: 0 0 10px 0;\n}\n.lmt__dict #dictionary h2.lemma_desc {\n  margin: 0px;\n}\n.lmt__dict .lemma_content {\n  padding: 0 0 0 0;\n  position: relative;\n  margin-bottom: 8px;\n}\n.lmt__dict .translation_group {\n  position: relative;\n  padding-top: 8px;\n}\n.lmt__dict .lemma_content .translation_group_line.with_pie {\n  padding-inline-start: 18px;\n  text-indent: -18px;\n}\n.lmt__dict .exact .translation.featured {\n  margin-bottom: 8px;\n  clear: both;\n}\n.lmt__dict .translation_desc {\n  padding: 2px 0 0 0;\n  display: inline-block;\n}\n.lmt__dict h3.translation_desc {\n  margin: 0;\n  font-weight: 400;\n}\n.lmt__dict #dictionary h3.translation_desc {\n  margin-bottom: 0;\n}\n.lmt__dict .group_line .translation_desc {\n  text-indent: 0;\n  display: inline;\n  padding: 2px 10px 1px 0;\n  padding-inline-start: 0;\n}\n.lmt__dict .comment {\n  margin: 15px 0 15px 0;\n  padding: 0 0 0 10px;\n}\n.lmt__dict .lemma_content {\n  padding-inline-start: 40px;\n}\n.lmt__dict .meaninggroup_description_inner {\n  margin-inline-start: -20px;\n  width: 20px;\n  display: inline-block;\n}\n.lmt__dict .meaninggroup_descriptions {\n  margin-inline-start: -20px;\n  display: inline-block;\n}\n.lmt__dict .tag_t {\n  color: #333;\n  font-style: normal;\n}\n.lmt__dict .tag_s {\n  color: #006494;\n  font-style: normal;\n}\n.lmt__dict .tag_lemma {\n  font-size: 16px;\n  font-weight: 400;\n  color: #006494;\n  font-style: normal;\n}\n.lmt__dict .tag_lemma a {\n  color: #006494;\n}\n.lmt__dict .inexact .tag_lemma {\n  font-size: 14px;\n}\n.lmt__dict .tag_type,\n.lmt__dict .tag_wordtype {\n  font-style: italic;\n  font-size: 14px;\n  margin-inline-end: 2px;\n  color: #999;\n  font-weight: 400;\n}\n.lmt__dict .inexact .tag_type,\n.lmt__dict .inexact .tag_wordtype,\n.lmt__dict .example_lines .tag_type,\n.lmt__dict .example_lines .tag_wordtype,\n.lmt__dict .tag_forms .tag_wordtype {\n  font-size: 14px;\n}\n.lmt__dict .tag_wordtype {\n  font-size: 14px;\n  margin-inline-start: 0;\n}\n.lmt__dict .tag_area,\n.lmt__dict .tag_usage {\n  color: #999;\n  font-style: italic;\n  font-size: 14px;\n  font-weight: 400;\n}\n.lmt__dict .inexact .tag_area,\n.lmt__dict .inexact .tag_usage,\n.lmt__dict .inexact .tag_forms {\n  font-size: 10px;\n}\n.lmt__dict .tag_c {\n  color: #999;\n  font-size: 15px;\n  font-style: italic;\n  font-weight: 400;\n}\n.lmt__dict .inexact .tag_c {\n  font-size: 13px;\n}\n.lmt__dict .tag_forms {\n  font-size: 13px;\n  color: #999;\n  font-weight: 400;\n}\n.lmt__dict .inexact .tag_forms {\n  display: none;\n}\n.lmt__dict .lemma_desc .tag_forms {\n  display: none;\n  padding-inline-start: 3px;\n}\n.lmt__dict .tag_trans_src_context {\n  color: #006494;\n  font-style: normal;\n  padding-inline-end: 10px;\n  font-size: 14px;\n}\n.lmt__dict .tag_trans_src_context:before {\n  content: "(";\n}\n.lmt__dict .tag_trans_src_context:after {\n  content: ")";\n}\n.lmt__dict .tag_lemma_context {\n  padding-inline-start: 5px;\n  padding-inline-end: 5px;\n  font-size: 14px;\n}\n.lmt__dict .inexact .tag_lemma_context {\n  padding-inline-start: 5px;\n  font-size: 13px;\n}\n.lmt__dict .tag_lemma_context .placeholder {\n  font-size: inherit;\n}\n.lmt__dict #dictionary .tag_forms h3 {\n  display: inline;\n  padding-inline-end: 10px;\n  font-size: 12px;\n  margin: 0 0 0 0;\n  color: #999;\n}\n.lmt__dict .tag_formname {\n  color: #999;\n}\n.lmt__dict .tag_c,\n.lmt__dict .tag_t,\n.lmt__dict .tag_s,\n.lmt__dict .tag_area,\n.lmt__dict .tag_usage {\n  font-size: 14px;\n}\n.lmt__dict .tag_trans {\n  font-size: 14px;\n  color: #333;\n  font-style: normal;\n  display: inline-block;\n  min-height: 20px;\n}\n.lmt__dict .inexact .tag_trans {\n  font-size: 14px;\n  color: #333;\n  font-style: normal;\n}\n.lmt__dict .inexact .tag_trans a {\n  color: #333;\n}\n.lmt__dict .exact .tag_trans a.featured {\n  line-height: 24px;\n}\n.lmt__dict .meaninggroup_notfirst {\n  padding-top: 8px;\n}\n.lmt__dict .meaninggroup_editing.meaninggroup_notfirst {\n  padding-top: 20px;\n}\n.lmt__dict .meaning_class_header {\n  padding-inline-start: 5px;\n  padding-top: 5px;\n}\n.lmt__dict .meaninggroup_outer_list {\n  list-style-type: none;\n  padding: 0;\n  margin: 0;\n  display: inline;\n}\n.lmt__dict .meaninggroup_inner_list {\n  list-style-type: none;\n  padding: 0;\n  margin: 0;\n}\n.lmt__dict .meaninggroup_inner_list li {\n  display: inline;\n}\n.lmt__dict .meaninggroup_problematic .meaninggroup_description {\n  color: #e00;\n}\n.lmt__dict .meaninggroup_problematic .meaninggroup_description_index {\n  color: #e00;\n}\n.lmt__dict .isForeignTerm .meaninggroup_synonym,\n.lmt__dict .isForeignTerm .meaninggroup_valency,\n.lmt__dict .isForeignTerm .meaninggroup_valency,\n.lmt__dict .meaninggroup_descriptions {\n  color: #333;\n}\n.lmt__dict .isMainTerm .meaninggroup_synonym,\n.lmt__dict .isMainTerm .meaninggroup_valency,\n.lmt__dict .isMainTerm .meaninggroup_valency,\n.lmt__dict .meaninggroup_descriptions {\n  color: #265182;\n}\n.lmt__dict .meaninggroup_synonym {\n  font-size: 15px;\n  font-weight: 400;\n  font-style: normal;\n}\n.lmt__dict .meaninggroup_preliminary {\n  font-size: 15px;\n  font-weight: 400;\n  font-style: normal;\n  color: green;\n}\n.lmt__dict .meaninggroup_descriptions {\n  font-size: 15px;\n  font-weight: 400;\n  font-style: normal;\n}\n.lmt__dict .meaninggroup_valency {\n  font-size: 15px;\n  font-weight: 400;\n  color: #333;\n  font-style: normal;\n}\n.lmt__dict .meaninggroup_usage {\n  color: #999;\n}\n.lmt__dict .meaninggroup_areas {\n  color: #999;\n  font-style: italic;\n}\n.lmt__dict .meaninggroup_editing .meaninggroup_descriptions,\n.lmt__dict .meaninggroup_editing .meaninggroup_synonym,\n.lmt__dict .meaninggroup_editing .meaninggroup_usage,\n.lmt__dict .meaninggroup_editing .meaninggroup_synonym,\n.lmt__dict .meaninggroup_editing .meaninggroup_description_index,\n.lmt__dict .meaninggroup_editing .meaninggroup_preliminary {\n  font-weight: 600;\n}\n.lmt__dict .meaninggroups_remark {\n  margin-inline-start: -20px;\n}\n.lmt__dict .inflectioninfo,\n.lmt__dict .inflectioninfo .tag_c {\n  color: #006494;\n  font-style: normal;\n  font-size: 13px;\n}\n.lmt__dict .isForeignTerm .inflectioninfo {\n  color: #333;\n}\n.lmt__dict .isForeignTerm .tag_lemma,\n.lmt__dict .isForeignTerm .tag_lemma a,\n.lmt__dict .isForeignTerm .tag_s,\n.lmt__dict .isForeignTerm .tag_s a,\n.lmt__dict .isForeignTerm .tag_trans_src_context {\n  color: #333;\n}\n.lmt__dict .isForeignTerm .tag_trans,\n.lmt__dict .isForeignTerm .tag_trans a,\n.lmt__dict .isForeignTerm .tag_t,\n.lmt__dict .isForeignTerm .tag_t a,\n.lmt__dict .isForeignTerm .tag_trans {\n  color: #006494;\n}\n.lmt__dict .spell_suggestion.isForeignTerm,\n.lmt__dict .spell_suggestion.isForeignTerm .corrected {\n  color: #333;\n}\n.lmt__dict .spell_suggestion,\n.lmt__dict .spell_suggestion .corrected {\n  color: #006494;\n}\n.lmt__dict .line .translation {\n  display: inline-block;\n  line-height: 1em;\n  text-indent: 0;\n}\n.lmt__dict .line.inflectioninfo {\n  display: none;\n}\n.lmt__dict .sep {\n  font-size: 12px;\n  padding-inline-start: 10px;\n  color: #6e6e6e;\n}\n.lmt__dict .tag_forms .sep {\n  padding-inline-start: 5px;\n}\n.lmt__dict .inexact .sep {\n  font-size: 9px;\n}\n.lmt__dict .dash {\n  padding-inline-end: 10px;\n}\n.lmt__dict .exact .lemma_desc .dash {\n  display: none;\n}\n.lmt__dict .lemma_desc .dash {\n  font-size: 14px;\n  font-style: normal;\n  color: #999;\n  padding-inline-start: 7px;\n  padding-inline-end: 7px;\n}\n.lmt__dict .inexact .lemma_desc {\n  padding: 0 0 0 0;\n}\n.lmt__dict .inexact .translation_lines,\n.lmt__dict .inexact .translation_group,\n.lmt__dict .inexact .line {\n  display: inline;\n}\n.lmt__dict .inexact .lemma_content {\n  display: inline;\n}\n.lmt__dict .inexact .lemma_desc,\n.lmt__dict #dictionary .inexact h2.lemma_desc {\n  display: inline-block;\n  padding-inline-end: 0;\n  font-size: 14px;\n  font-style: normal;\n  font-weight: 400;\n}\n.lmt__dict .inexact .lemma_content {\n  padding-inline-start: 0;\n}\n.lmt__dict .inexact .lemma {\n  margin: 1px 0 0 0;\n  text-indent: -10px;\n  padding-inline-start: 20px;\n}\n.lmt__dict .inexact div.singleline {\n  text-indent: 0;\n  padding-inline-start: 0;\n}\n.lmt__dict #dictionary > .expandable > .versionShort > .example_lines {\n  padding-bottom: 15px;\n}\n.lmt__dict #dictionary h3 {\n  margin-bottom: 2px;\n  font-size: 14px;\n}\n.lmt__dict a.audio {\n  display: none;\n  position: relative;\n  cursor: pointer;\n  top: 3px;\n  width: 19px;\n  height: 17px;\n  background-position: -40px -38px;\n  opacity: 0.5;\n}\n.lmt__dict .ie7 a.audio,\n.lmt__dict .ie8 a.audio {\n  filter: alpha(opacity=50);\n  background-position: -120px -92px;\n}\n.lmt__dict .inexact a.audio {\n  display: none;\n}\n.lmt__dict .inexact .lemma_desc a.audio,\n.lmt__dict .inexact .translation.expanded a.audio,\n.lmt__dict .inexact .translation.contracting a.audio {\n  display: inline-block;\n}\n.lmt__dict .exact .tag_lemma a.audio {\n  top: 2px;\n}\n.lmt__dict .mouse_device a.audio {\n  opacity: 0.45;\n}\n.lmt__dict .mouse_device a.audio:hover,\n.lmt__dict .mouse_device a.expand_i:hover {\n  opacity: 1;\n}\n.lmt__dict .grammar_info {\n  position: relative;\n  top: -4px;\n  vertical-align: middle;\n  font-size: 0.7em;\n  color: #999;\n  font-style: italic;\n  margin-inline-start: 1px;\n  display: inline-block;\n  text-indent: 0;\n}\n.lmt__dict .exact .grammar_info {\n  top: -5px;\n  margin-inline-start: 2px;\n}\n.lmt__dict #dictionary h2,\n.lmt__dict #dictionary h3 {\n  color: #333;\n  font-weight: 400;\n}\n.lmt__dict #dictionary h2 {\n  font-size: 20px;\n  margin-bottom: 20px;\n}\n.lmt__dict #dictionary .tag_forms h2 {\n  font-size: 14px;\n}\n.lmt__dict .translation_row.singleline {\n  height: 20px;\n}\n.lmt__dict .singleline {\n  position: relative;\n  padding-inline-end: 20px;\n  height: 20px;\n  overflow: hidden;\n}\n.lmt__dict .singleline > * {\n  line-height: 50px;\n  position: relative;\n  top: -15px;\n}\n.lmt__dict .ie8 .singleline > * {\n  top: -13px;\n  height: 22px;\n}\n.lmt__dict .singleline .tag_s {\n  white-space: nowrap;\n}\n.lmt__dict .expandable {\n  position: relative;\n}\n.lmt__dict .example_lines .expandM,\n.lmt__dict .inexact .expandM {\n  display: block;\n  height: 15px;\n  padding-inline-start: 0px;\n  opacity: 0.7;\n}\n.lmt__dict a.expand_i {\n  width: 17px;\n  height: 17px;\n  position: relative;\n  top: 4px;\n  display: inline-block;\n  background-position: -20px -36px;\n  cursor: pointer;\n  opacity: 0.55;\n  filter: alpha(opacity=55);\n}\n.lmt__dict .translation a.expand_i {\n  background-color: white;\n}\n.lmt__dict .example {\n  padding-inline-start: 45px;\n  margin-top: 8px;\n  margin-bottom: 12px;\n}\n.lmt__dict .expertmode .example {\n  padding-inline-start: 50px;\n}\n.lmt__dict .example .tag_e {\n  display: block;\n  position: relative;\n  max-width: 700px;\n  line-height: 1.1em;\n}\n.lmt__dict .example .tag_s {\n  width: 47%;\n  float: inline-start;\n}\n.lmt__dict .example .tag_t {\n  width: 50%;\n  float: inline-end;\n}\n.lmt__dict .example .tag_e_end {\n  display: block;\n  clear: both;\n}\n.lmt__dict .example .dash {\n  display: none;\n}\n.lmt__dict #soundFlags {\n  display: none;\n}\n.lmt__dict .hidden,\n.lmt__dict #lingueecontent .hidden,\n.lmt__dict #attribution.hidden {\n  display: none;\n}\n.lmt__dict .notascommon {\n  display: block;\n  padding-inline-end: 10px;\n  font-size: 14px;\n  line-height: 1.4em;\n}\n.lmt__dict .tag_wordtype {\n  display: inline-block;\n}\n.lmt__dict .tag_forms {\n  display: inline-block;\n}\n.lmt__dict .inexact .lemma {\n  padding-inline-start: 20px;\n}\n.lmt__dict .example_lines > .expandable > .versionshort > .expandM {\n  margin-inline-start: 0;\n}\n.lmt__dict .source_url_spacer {\n  margin-inline-start: 0;\n}\n.lmt__dict .example {\n  padding-inline-start: 30px;\n}\n.lmt__dict .translation_desc {\n  padding-bottom: 0;\n}\n.lmt__dict .translation a.expand_i,\n.lmt__dict .translation a.audio,\n.lmt__dict .inexact .lemma_desc a.audio,\n.lmt__dict .inexact .translation.expanded a.audio {\n  display: none;\n}\n.lmt__dict .inexact .lemma {\n  padding-inline-start: 20px;\n}\n.lmt__dict .example_lines > .expandable > .versionshort > .expandM {\n  margin-inline-start: 0;\n}\n.lmt__dict .source_url_spacer {\n  margin-inline-start: 0;\n}\n.lmt__dict .example {\n  padding-inline-start: 24px;\n}\n.lmt__dict .lemma_desc {\n  margin: 0;\n}\n.lmt__dict .lemma {\n  margin-top: 0;\n}\n.lmt__dict .source {\n  font-size: 24px;\n  color: #d0d0d0;\n}\n.lmt__dict .source .tag_lemma {\n  font-size: 20px;\n  font-weight: 400;\n}\n.lmt__dict .lemma_content {\n  padding-inline-start: 20px;\n  padding-inline-end: 0px;\n}\n.lmt__dict .source .tag_s,\n.lmt__dict .source .tag_usage,\n.lmt__dict .source .tag_formname,\n.lmt__dict .source .formlink,\n.lmt__dict .source .tag_forms,\n.lmt__dict .source .grammar_info {\n  color: #999 !important;\n}\n.lmt__dict .translation:first-of-type h3 {\n  line-height: 1;\n}\n.lmt__dict .translation:first-of-type h3 .dictlink {\n  font-size: 20px;\n}\n.lmt__dict .source {\n  position: relative;\n}\n.lmt__dict .sourceHint {\n  display: none;\n}\n.lmt__dict .notascommon {\n  color: #aaa;\n}\n.lmt__dict .tag_type,\n.lmt__dict .tag_wordtype,\n.lmt__dict .source .tag_s,\n.lmt__dict .source .tag_usage,\n.lmt__dict .source .tag_formname,\n.lmt__dict .source .tag_wordtype,\n.lmt__dict .source .formlink,\n.lmt__dict .source .tag_forms,\n.lmt__dict .source .grammar_info,\n.lmt__dict .tag_c {\n  font-style: normal;\n}\n.lmt__dict .tag_forms {\n  font-style: normal;\n}\n.lmt__dict .tag_forms .tag_s {\n  padding-inline-start: 0px;\n  margin-inline-end: -19px;\n}\n\n#LMT__dict_right {\n  margin-inline-start: 59px;\n}\n\n@keyframes lmt__dict__appear_animation {\n  0% {\n    transform: scale(0.99) translateY(-5px);\n    opacity: 0;\n  }\n  100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n}\n.lmt__dict.lmt--is-dict-ready {\n  display: block;\n}\n.lmt__dict .lmt__dict__empty_state {\n  display: none;\n  padding: 16px 24px;\n  color: #6e6e6e;\n  font-size: 16px;\n}\n.lmt__dict #result_container,\n.lmt__dict #wikipedia-body,\n.lmt__dict #wikipedia-header,\n.lmt__dict .copyrightLineOuter,\n.lmt__dict .openTriangle,\n.lmt__dict .expandM {\n  display: none !important;\n}',o=Gg(),i=new sh(!1),Xg(n,"lang","scss"),i.a=null},m(e,s){zg(e,t,s),Pg(t,n),Pg(t,o),i.m(r,t)},p(e,[t]){1&t&&r!==(r=dt(e[0])+"")&&i.p(r)},i:mg,o:mg,d(e){e&&Hg(t)}}}function M$(e,t,n){let{html:o}=t;return e.$$set=e=>{"html"in e&&n(0,o=e.html)},[o]}class R$ extends Qh{constructor(e){super(),Jh(this,e,M$,A$,yg,{html:0})}}function O$(e){let t,n,o,i;return n=new R$({props:{html:e[1]}}),{c(){t=Wg("div"),Zh(n.$$.fragment),Xg(t,"class","dl__dictionary svelte-1n7xyu1")},m(e,o){zg(e,t,o),Kh(n,t,null),i=!0},p(e,t){const o={};2&t&&(o.html=e[1]),n.$set(o)},i(e){i||(Hh(n.$$.fragment,e),o||kh((()=>{o=jh(t,Of,{y:-50,duration:700}),o.start()})),i=!0)},o(e){Fh(n.$$.fragment,e),i=!1},d(e){e&&Hg(t),Xh(n)}}}function N$(e){let t,n,o=e[0]&&e[1]&&e[2]&&O$(e);return{c(){t=Wg("div"),o&&o.c()},m(e,i){zg(e,t,i),o&&o.m(t,null),n=!0},p(e,[n]){e[0]&&e[1]&&e[2]?o?(o.p(e,n),7&n&&Hh(o,1)):(o=O$(e),o.c(),Hh(o,1),o.m(t,null)):o&&(Uh(),Fh(o,1,1,(()=>{o=null})),zh())},i(e){n||(Hh(o),n=!0)},o(e){Fh(o),n=!1},d(e){e&&Hg(t),o&&o.d()}}}function D$(e,n,o){let i,r,s,a,l,{originalSnippet:c}=n,{sourceLanguage:d}=n,{targetLanguage:u}=n,{websiteLanguage:p}=n,{showDictionary:m=!1}=n,{setDictionaryLauncherState:g}=n,{resetDictionary:h=(()=>{})}=n,f="",_="",v="";function y(){if(c&&c!==v){v=c;!function(e){const n=e.enabled?M.enabled:M.disabled,o=e.langPair;try{t({action:"dltrackDictionaryStatus",payload:{status:n,langPair:o}})}catch(e){console.log(e)}}({enabled:!!f&&!!r&&a&&l,langPair:r})}}async function w(){o(10,_="");const e={interfaceLang:chrome.i18n.getUILanguage(),sourceLang:p,targetLang:u,text:s};try{o(1,f=await I$(e))}catch(e){o(10,_=function(e,t){let n=chrome.i18n.getMessage("ui_inline_translation_problem_loading_dictionary");return e==ff.ENTRY_NOT_FOUND&&(n=chrome.i18n.getMessage("ui_inline_translation_no_entry_dictionary",t)),n}(e.error,s))}finally{y(),h()}}return e.$$set=e=>{"originalSnippet"in e&&o(3,c=e.originalSnippet),"sourceLanguage"in e&&o(4,d=e.sourceLanguage),"targetLanguage"in e&&o(5,u=e.targetLanguage),"websiteLanguage"in e&&o(6,p=e.websiteLanguage),"showDictionary"in e&&o(0,m=e.showDictionary),"setDictionaryLauncherState"in e&&o(7,g=e.setDictionaryLauncherState),"resetDictionary"in e&&o(8,h=e.resetDictionary)},e.$$.update=()=>{var n;if(8&e.$$.dirty&&(o(12,a=!!(n=c)&&1===n.trim().split(" ").length),o(13,l=function(e){return!!e&&e.trim().length<200}(c))),48&e.$$.dirty&&(u!==d&&d?o(2,r=L$(d,u)):(o(2,r=""),o(9,i=""))),14604&e.$$.dirty&&(c&&c.trim()!==s?(o(11,s=c.trim()),o(10,_=""),r&&a&&l?(o(9,i=r),w()):(o(1,f=""),y(),h())):h()),12804&e.$$.dirty&&r!=i&&r&&a&&l&&(o(10,_=""),w()),5254&e.$$.dirty){let e="";_?e=_:a?r?f||(e=chrome.i18n.getMessage("ui_inline_translation_problem_loading_dictionary")):e=chrome.i18n.getMessage("ui_inline_translation_unavailable_lang_pair"):e=chrome.i18n.getMessage("ui_inline_translation_translate_only_one_word");g({enableDictionaryButton:!!f&&a&&!!r&&!_,dictionaryButtonError:e})}if(1&e.$$.dirty&&m)try{t({action:"dlTrackOpenDictionarySection",payload:{}})}catch(e){console.log(e)}},[m,f,r,c,d,u,p,g,h,i,_,s,a,l]}class P$ extends Qh{constructor(e){super(),Jh(this,e,D$,N$,yg,{originalSnippet:3,sourceLanguage:4,targetLanguage:5,websiteLanguage:6,showDictionary:0,setDictionaryLauncherState:7,resetDictionary:8})}}function B$(e,t,n){const o=e.slice();return o[31]=t[n],o}function U$(e,t,n){const o=e.slice();return o[34]=t[n],o}function z$(e,t,n){const o=e.slice();return o[37]=t[n],o}function H$(e){let t,n,o,i,r,s=!qe.includes(e[4].selectedTargetLanguage),a=e[6]&&W$(e),l=s&&j$(e),c=e[4].gDocsSegmentation===je.SENTENCE&&q$(e),d=e[4].gDocsSegmentation===je.WORD&&Y$(e);return{c(){t=Wg("div"),n=Wg("div"),a&&a.c(),o=Gg(),l&&l.c(),i=Gg(),c&&c.c(),r=Gg(),d&&d.c(),Xg(n,"class","dl-segmentation-selector svelte-fxpmgu")},m(e,s){zg(e,t,s),Pg(t,n),a&&a.m(n,null),Pg(n,o),l&&l.m(n,null),Pg(t,i),c&&c.m(t,null),Pg(t,r),d&&d.m(t,null)},p(e,i){e[6]?a?a.p(e,i):(a=W$(e),a.c(),a.m(n,o)):a&&(a.d(1),a=null),16&i[0]&&(s=!qe.includes(e[4].selectedTargetLanguage)),s?l?l.p(e,i):(l=j$(e),l.c(),l.m(n,null)):l&&(l.d(1),l=null),e[4].gDocsSegmentation===je.SENTENCE?c?c.p(e,i):(c=q$(e),c.c(),c.m(t,r)):c&&(c.d(1),c=null),e[4].gDocsSegmentation===je.WORD?d?d.p(e,i):(d=Y$(e),d.c(),d.m(t,null)):d&&(d.d(1),d=null)},d(e){e&&Hg(t),a&&a.d(),l&&l.d(),c&&c.d(),d&&d.d()}}}function F$(e){let t;return{c(){t=Wg("div"),t.innerHTML='<div class="skeleton-item svelte-fxpmgu"><div class="skeleton-subitem svelte-fxpmgu"></div></div> <div class="skeleton-item svelte-fxpmgu"><div class="skeleton-subitem svelte-fxpmgu"></div></div> <div class="skeleton-item svelte-fxpmgu"><div class="skeleton-subitem svelte-fxpmgu"></div> <div class="skeleton-subitem is-short-line svelte-fxpmgu"></div></div>',Xg(t,"class","dl-alternatives-loading-skeleton svelte-fxpmgu")},m(e,n){zg(e,t,n)},p:mg,d(e){e&&Hg(t)}}}function W$(e){let t,n,o;return{c(){t=Wg("button"),t.textContent=`${chrome.i18n.getMessage("ui_alternatives_segmentation_sentence")}`,Xg(t,"class","segmentation-button sentence svelte-fxpmgu"),ih(t,"active",e[4].gDocsSegmentation===je.SENTENCE)},m(i,r){zg(i,t,r),n||(o=Yg(t,"click",e[22]),n=!0)},p(e,n){16&n[0]&&ih(t,"active",e[4].gDocsSegmentation===je.SENTENCE)},d(e){e&&Hg(t),n=!1,o()}}}function j$(e){let t,n,o;return{c(){t=Wg("button"),t.textContent=`${chrome.i18n.getMessage("ui_alternatives_segmentation_word")}`,Xg(t,"class","segmentation-button word svelte-fxpmgu"),ih(t,"active",e[4].gDocsSegmentation===je.WORD)},m(i,r){zg(i,t,r),n||(o=Yg(t,"click",e[23]),n=!0)},p(e,n){16&n[0]&&ih(t,"active",e[4].gDocsSegmentation===je.WORD)},d(e){e&&Hg(t),n=!1,o()}}}function q$(e){let t,n,o=Vh(e[2]),i=[];for(let t=0;t<o.length;t+=1)i[t]=V$(U$(e,o,t));return{c(){t=Wg("div");for(let e=0;e<i.length;e+=1)i[e].c();Xg(t,"class","alternatives svelte-fxpmgu"),Xg(t,"dir",n=Bt(e[0].targetLang))},m(e,n){zg(e,t,n);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,null)},p(e,r){if(516&r[0]){let n;for(o=Vh(e[2]),n=0;n<o.length;n+=1){const s=U$(e,o,n);i[n]?i[n].p(s,r):(i[n]=V$(s),i[n].c(),i[n].m(t,null))}for(;n<i.length;n+=1)i[n].d(1);i.length=o.length}1&r[0]&&n!==(n=Bt(e[0].targetLang))&&Xg(t,"dir",n)},d(e){e&&Hg(t),Fg(i,e)}}}function G$(e){let t,n,o=Tt(e[37].text)+"";return{c(){t=Wg("span"),n=qg(o),Xg(t,"class","svelte-fxpmgu"),ih(t,"highlighted-text-chunk",e[37].isHighlighted)},m(e,o){zg(e,t,o),Pg(t,n)},p(e,i){4&i[0]&&o!==(o=Tt(e[37].text)+"")&&Jg(n,o),4&i[0]&&ih(t,"highlighted-text-chunk",e[37].isHighlighted)},d(e){e&&Hg(t)}}}function V$(e){let t,n,o,i,r=Vh(e[34].textChunks),s=[];for(let t=0;t<r.length;t+=1)s[t]=G$(z$(e,r,t));function a(){return e[24](e[34])}return{c(){t=Wg("div");for(let e=0;e<s.length;e+=1)s[e].c();n=Gg(),Xg(t,"class","sentence-alternatives alternative svelte-fxpmgu"),Xg(t,"tabindex","-1"),Xg(t,"aria-hidden","true")},m(e,r){zg(e,t,r);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(t,null);Pg(t,n),o||(i=Yg(t,"click",a),o=!0)},p(o,i){if(e=o,4&i[0]){let o;for(r=Vh(e[34].textChunks),o=0;o<r.length;o+=1){const a=z$(e,r,o);s[o]?s[o].p(a,i):(s[o]=G$(a),s[o].c(),s[o].m(t,n))}for(;o<s.length;o+=1)s[o].d(1);s.length=r.length}},d(e){e&&Hg(t),Fg(s,e),o=!1,i()}}}function Y$(e){let t,n,o=Vh(e[3]),i=[];for(let t=0;t<o.length;t+=1)i[t]=Z$(B$(e,o,t));return{c(){t=Wg("div");for(let e=0;e<i.length;e+=1)i[e].c();Xg(t,"class","alternatives svelte-fxpmgu"),Xg(t,"dir",n=Bt(e[0].targetLang))},m(e,n){zg(e,t,n);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,null)},p(e,r){if(1032&r[0]){let n;for(o=Vh(e[3]),n=0;n<o.length;n+=1){const s=B$(e,o,n);i[n]?i[n].p(s,r):(i[n]=Z$(s),i[n].c(),i[n].m(t,null))}for(;n<i.length;n+=1)i[n].d(1);i.length=o.length}1&r[0]&&n!==(n=Bt(e[0].targetLang))&&Xg(t,"dir",n)},d(e){e&&Hg(t),Fg(i,e)}}}function Z$(e){let t,n,o,i,r,s=Tt(e[31].text)+"";function a(){return e[25](e[31])}return{c(){t=Wg("div"),n=qg(s),o=Gg(),Xg(t,"role","button"),Xg(t,"class","word-alternative alternative svelte-fxpmgu"),Xg(t,"tabindex","-1"),Xg(t,"aria-hidden","true")},m(e,s){zg(e,t,s),Pg(t,n),Pg(t,o),i||(r=Yg(t,"click",a),i=!0)},p(t,o){e=t,8&o[0]&&s!==(s=Tt(e[31].text)+"")&&Jg(n,s)},d(e){e&&Hg(t),i=!1,r()}}}function K$(e){let t,n,o,i,r;function s(e,t){return e[5]?F$:e[1]?H$:void 0}let a=s(e),l=a&&a(e);return{c(){t=Wg("div"),n=Wg("button"),n.textContent=`${chrome.i18n.getMessage("ui_alternatives_title")}`,o=Gg(),l&&l.c(),Xg(n,"class","dl-toggle-show-alternatives svelte-fxpmgu"),ih(n,"is-showing",e[1]),Xg(t,"class","dl-alternatives-container svelte-fxpmgu")},m(s,a){zg(s,t,a),Pg(t,n),Pg(t,o),l&&l.m(t,null),i||(r=Yg(n,"click",e[21]),i=!0)},p(e,o){2&o[0]&&ih(n,"is-showing",e[1]),a===(a=s(e))&&l?l.p(e,o):(l&&l.d(1),l=a&&a(e),l&&(l.c(),l.m(t,null)))},i:mg,o:mg,d(e){e&&Hg(t),l&&l.d(),i=!1,r()}}}function X$(e,n,o){let i;const r=yh("deepl_settings");bg(e,r,(e=>o(4,i=e)));let{textProcessingMode:s=re.translate}=n,{contentProcessBuildingBlocks:l}=n,{buildAndSetReplaceData:c}=n,{activeSentence:d}=n,{activeWord:u}=n,{shouldMarkWordOrSentenceAsActive:p}=n,{registerAlternativesCallbacks:m}=n,{clearAlternativesCallbacks:g}=n,h=!1,f=!1,_=[],v=[],y=!0;const w=()=>{if(h)if(i.gDocsSegmentation===je.SENTENCE&&y)d||(o(14,d=0),o(15,u=0)),b(d);else if(i.gDocsSegmentation===je.WORD){u||o(15,u=0),d||o(14,d=0);const e=l.processedSentences[d].text.split(/\s+/)[u],t=xt(l.processedSentences[d].text).find((t=>t.text===e));E(d,u,t)}},b=async e=>{if(i.gDocsSegmentation===je.SENTENCE){o(14,d=e),o(1,h=!0),o(2,_=[]),o(5,f=!0);try{const n=await t({action:"dlRequestGDocsSentenceAlternatives",payload:{mode:s,sourceLang:l.detectedSourceLanguage,targetLang:l.targetLang,sentence:l.sentences[e],contextBefore:e>0&&l.sentences[e-1].text,contextAfter:e<l.sentences.length-1&&l.sentences[e+1].text}});for(const t of n.result.translations[0].beams)t.sentences[0].text!==l.processedSentences[e].text&&_.length<4&&o(2,_=[..._,{text:t.sentences[0].text,textChunks:Hf(t.sentences[0].text,l.processedSentences[e].text)}]);L(je.SENTENCE)}catch(e){console.error(e)}o(5,f=!1)}},E=async(e,n,r)=>{if(i.gDocsSegmentation===je.WORD){o(14,d=e),o(15,u=n),o(1,h=!0),o(3,v=[]),o(5,f=!0);try{const n=await t({action:"dlRequestGDocsWordAlternatives",payload:{mode:s,sourceLang:l.detectedSourceLanguage,targetLang:l.targetLang,sentence:l.sentences[e],contextBefore:e>0&&l.sentences[e-1].text,contextAfter:e<l.sentences.length-1&&l.sentences[e+1].text,partialTranslation:l.processedSentences[e].text.substring(0,r.offsetStartRaw)}});for(const t of n.result.translations[0].beams)if(t.sentences[0].text!==l.processedSentences[e].text.substring(0,r.offsetStartRaw+r.offsetLengthRaw)&&v.length<4){const e=t.sentences[0].text.substring(r.offsetStartRaw);e.trim().length>0&&o(3,v=[...v,{text:`${e}...`,partialTranslation:t.sentences[0].text}])}L(je.WORD)}catch(e){console.error(e)}o(5,f=!1)}},S=e=>{o(0,l.processedSentences[d].text=e,l),o(2,_=[]),c(),k(je.SENTENCE)},T=async e=>{o(0,l.processedSentences[d].text=e,l),o(3,v=[]);try{const n=await t({action:"dlRequestGDocsSentenceFromPartialTranslation",payload:{mode:s,sourceLang:l.detectedSourceLanguage,targetLang:l.targetLang,sentence:l.sentences[d],contextBefore:d>0&&l.sentences[d-1].text,contextAfter:d<l.sentences.length-1&&l.sentences[d+1].text,partialTranslation:e}});o(0,l.processedSentences[d].text=n.result.translations[0].beams[0].sentences[0].text,l),c(),k(je.WORD)}catch(e){console.error(e)}},x=()=>{kg(r,i.gDocsSegmentation=je.SENTENCE,i),d||(o(14,d=0),o(15,u=0)),C(je.SENTENCE)},$=()=>{let e;kg(r,i.gDocsSegmentation=je.WORD,i),u||o(15,u=0),e=l.processedSentences[d].text.split(/\s+/)[u];const t=xt(l.processedSentences[d].text).find((t=>t.text===e));E(d,u,t),C(je.WORD)},C=async e=>await I({eventType:Ae,alternativesSegmentation:e}),k=async e=>await I({eventType:Me,alternativesSegmentation:e}),L=async e=>await I({eventType:Ie,alternativesSegmentation:e}),I=async({eventType:e,alternativesSegmentation:n})=>await t({action:"dlTrackAlternativesEvent",payload:{eventType:e,alternativesMetaData:{sourceLang:l.detectedSourceLanguage,targetLang:l.targetLang,nicheIntegration:ie.gdocs,contentProcessingMode:s,alternativesSegmentation:n}}});hh((()=>{kg(r,i.gDocsSegmentation=je.SENTENCE,i),m({showSentenceAlternatives:b,showWordAlternatives:E})})),fh((()=>{g()}));return e.$$set=e=>{"textProcessingMode"in e&&o(17,s=e.textProcessingMode),"contentProcessBuildingBlocks"in e&&o(0,l=e.contentProcessBuildingBlocks),"buildAndSetReplaceData"in e&&o(18,c=e.buildAndSetReplaceData),"activeSentence"in e&&o(14,d=e.activeSentence),"activeWord"in e&&o(15,u=e.activeWord),"shouldMarkWordOrSentenceAsActive"in e&&o(16,p=e.shouldMarkWordOrSentenceAsActive),"registerAlternativesCallbacks"in e&&o(19,m=e.registerAlternativesCallbacks),"clearAlternativesCallbacks"in e&&o(20,g=e.clearAlternativesCallbacks)},e.$$.update=()=>{16&e.$$.dirty[0]&&a.includes(i.gdocsWriteLang)&&(o(6,y=!1),kg(r,i.gDocsSegmentation=je.WORD,i)),30&e.$$.dirty[0]&&o(16,p=h&&(i.gDocsSegmentation===je.WORD&&v||i.gDocsSegmentation===je.SENTENCE&&_))},[l,h,_,v,i,f,y,r,w,S,T,x,$,L,d,u,p,s,c,m,g,()=>{o(1,h=!h),L(),w()},()=>x(),()=>$(),e=>S(e.text),e=>T(e.partialTranslation)]}class J$ extends Qh{constructor(e){super(),Jh(this,e,X$,K$,yg,{textProcessingMode:17,contentProcessBuildingBlocks:0,buildAndSetReplaceData:18,activeSentence:14,activeWord:15,shouldMarkWordOrSentenceAsActive:16,registerAlternativesCallbacks:19,clearAlternativesCallbacks:20},null,[-1,-1])}}function Q$(e,t,n){const o=e.slice();return o[25]=t[n],o}function eC(e,t,n){const o=e.slice();return o[28]=t[n],o}function tC(e,t,n){const o=e.slice();return o[31]=t[n],o[33]=n,o}function nC(e){let t,n,o=Vh(e[8].contentReference),i=[];for(let t=0;t<o.length;t+=1)i[t]=uC(Q$(e,o,t));return{c(){t=Wg("div");for(let e=0;e<i.length;e+=1)i[e].c();Xg(t,"class","preview-text-scroller svelte-t9u7lm"),Xg(t,"dir",n=Bt(e[7].selectedTargetLanguage))},m(e,n){zg(e,t,n);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,null)},p(e,r){if(16256&r[0]){let n;for(o=Vh(e[8].contentReference),n=0;n<o.length;n+=1){const s=Q$(e,o,n);i[n]?i[n].p(s,r):(i[n]=uC(s),i[n].c(),i[n].m(t,null))}for(;n<i.length;n+=1)i[n].d(1);i.length=o.length}128&r[0]&&n!==(n=Bt(e[7].selectedTargetLanguage))&&Xg(t,"dir",n)},d(e){e&&Hg(t),Fg(i,e)}}}function oC(e){let t;return{c(){t=Wg("div"),Xg(t,"class","dl-untranslatable-line svelte-t9u7lm")},m(e,n){zg(e,t,n)},p:mg,d(e){e&&Hg(t)}}}function iC(e){let t,n,o=Vh(e[8].textLinesComponents[e[25].index]),i=[];for(let t=0;t<o.length;t+=1)i[t]=dC(eC(e,o,t));return{c(){t=Wg("div");for(let e=0;e<i.length;e+=1)i[e].c();n=Gg(),Xg(t,"class","dl-translatable-line svelte-t9u7lm"),ih(t,"is-sentence-segmentation",e[7].gDocsSegmentation===je.SENTENCE),ih(t,"is-word-segmentation",e[7].gDocsSegmentation===je.WORD)},m(e,o){zg(e,t,o);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,null);Pg(t,n)},p(e,r){if(16256&r[0]){let s;for(o=Vh(e[8].textLinesComponents[e[25].index]),s=0;s<o.length;s+=1){const a=eC(e,o,s);i[s]?i[s].p(a,r):(i[s]=dC(a),i[s].c(),i[s].m(t,n))}for(;s<i.length;s+=1)i[s].d(1);i.length=o.length}128&r[0]&&ih(t,"is-sentence-segmentation",e[7].gDocsSegmentation===je.SENTENCE),128&r[0]&&ih(t,"is-word-segmentation",e[7].gDocsSegmentation===je.WORD)},d(e){e&&Hg(t),Fg(i,e)}}}function rC(e){let t,n=Tt(e[8].processedSentences[e[28]].text)+"";return{c(){t=qg(n)},m(e,n){zg(e,t,n)},p(e,o){256&o[0]&&n!==(n=Tt(e[8].processedSentences[e[28]].text)+"")&&Jg(t,n)},d(e){e&&Hg(t)}}}function sC(e){let t,n=Vh(xt(e[8].processedSentences[e[28]].text)),o=[];for(let t=0;t<n.length;t+=1)o[t]=cC(tC(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=Vg()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);zg(e,t,n)},p(e,i){if(12032&i[0]){let r;for(n=Vh(xt(e[8].processedSentences[e[28]].text)),r=0;r<n.length;r+=1){const s=tC(e,n,r);o[r]?o[r].p(s,i):(o[r]=cC(s),o[r].c(),o[r].m(t.parentNode,t))}for(;r<o.length;r+=1)o[r].d(1);o.length=n.length}},d(e){e&&Hg(t),Fg(o,e)}}}function aC(e){let t,n,o=e[31].text+"";return{c(){t=Wg("span"),n=qg(o)},m(e,o){zg(e,t,o),Pg(t,n)},p(e,t){256&t[0]&&o!==(o=e[31].text+"")&&Jg(n,o)},d(e){e&&Hg(t)}}}function lC(e){let t,n,o,i,r=e[31].text+"";function s(){return e[18](e[28],e[33],e[31])}return{c(){t=Wg("span"),n=qg(r),Xg(t,"class","word-text svelte-t9u7lm"),Xg(t,"tabindex","-1"),Xg(t,"aria-hidden","true"),ih(t,"active-word",e[28]===e[9]&&e[10]===e[33]&&e[11])},m(e,r){zg(e,t,r),Pg(t,n),o||(i=Yg(t,"click",s),o=!0)},p(o,i){e=o,256&i[0]&&r!==(r=e[31].text+"")&&Jg(n,r),3840&i[0]&&ih(t,"active-word",e[28]===e[9]&&e[10]===e[33]&&e[11])},d(e){e&&Hg(t),o=!1,i()}}}function cC(e){let t;function n(e,t){return e[31].isWord?lC:aC}let o=n(e),i=o(e);return{c(){i.c(),t=Vg()},m(e,n){i.m(e,n),zg(e,t,n)},p(e,r){o===(o=n(e))&&i?i.p(e,r):(i.d(1),i=o(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){e&&Hg(t),i.d(e)}}}function dC(e){let t,n,o,i,r,s,a,l=e[8].processedSentences[e[28]].prefix+"",c=e[7].gDocsSegmentation===je.SENTENCE&&rC(e),d=e[7].gDocsSegmentation===je.WORD&&sC(e);function u(){return e[19](e[28])}return{c(){t=Wg("span"),n=qg(l),o=Gg(),i=Wg("span"),c&&c.c(),r=Gg(),d&&d.c(),Xg(t,"class","sentence-prefix"),Xg(i,"class","sentence-text svelte-t9u7lm"),Xg(i,"tabindex","-1"),Xg(i,"aria-hidden","true"),ih(i,"active-sentence",e[9]===e[28]&&e[11])},m(e,l){zg(e,t,l),Pg(t,n),zg(e,o,l),zg(e,i,l),c&&c.m(i,null),Pg(i,r),d&&d.m(i,null),s||(a=Yg(i,"click",u),s=!0)},p(t,o){e=t,256&o[0]&&l!==(l=e[8].processedSentences[e[28]].prefix+"")&&Jg(n,l),e[7].gDocsSegmentation===je.SENTENCE?c?c.p(e,o):(c=rC(e),c.c(),c.m(i,r)):c&&(c.d(1),c=null),e[7].gDocsSegmentation===je.WORD?d?d.p(e,o):(d=sC(e),d.c(),d.m(i,null)):d&&(d.d(1),d=null),2816&o[0]&&ih(i,"active-sentence",e[9]===e[28]&&e[11])},d(e){e&&(Hg(t),Hg(o),Hg(i)),c&&c.d(),d&&d.d(),s=!1,a()}}}function uC(e){let t;function n(e,t){return e[25].isTranslatable?iC:oC}let o=n(e),i=o(e);return{c(){i.c(),t=Vg()},m(e,n){i.m(e,n),zg(e,t,n)},p(e,r){o===(o=n(e))&&i?i.p(e,r):(i.d(1),i=o(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){e&&Hg(t),i.d(e)}}}function pC(e){let t,n,o;return n=new w$({props:{platformBehaviour:ie.gdocs,websiteSettings:e[1],showDictionary:e[2],switchVisibilityDictionary:e[3],enableDictionaryButton:e[4],dictionaryButtonError:e[5],onClose:e[6]}}),{c(){t=Wg("div"),Zh(n.$$.fragment),Xg(t,"class","dl-inline-translate-toolbar-frame svelte-t9u7lm")},m(e,i){zg(e,t,i),Kh(n,t,null),o=!0},p(e,t){const o={};2&t[0]&&(o.websiteSettings=e[1]),4&t[0]&&(o.showDictionary=e[2]),8&t[0]&&(o.switchVisibilityDictionary=e[3]),16&t[0]&&(o.enableDictionaryButton=e[4]),32&t[0]&&(o.dictionaryButtonError=e[5]),64&t[0]&&(o.onClose=e[6]),n.$set(o)},i(e){o||(Hh(n.$$.fragment,e),o=!0)},o(e){Fh(n.$$.fragment,e),o=!1},d(e){e&&Hg(t),Xh(n)}}}function mC(e){let t,n;return t=new S$({props:{onClose:e[6]}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};64&n[0]&&(o.onClose=e[6]),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function gC(e){let t,n,o,i,r,s;function a(t){e[20](t)}function l(t){e[21](t)}function c(t){e[22](t)}function d(t){e[23](t)}let u={textProcessingMode:e[0],buildAndSetReplaceData:e[15],registerAlternativesCallbacks:e[16],clearAlternativesCallbacks:e[17]};return void 0!==e[8]&&(u.contentProcessBuildingBlocks=e[8]),void 0!==e[9]&&(u.activeSentence=e[9]),void 0!==e[10]&&(u.activeWord=e[10]),void 0!==e[11]&&(u.shouldMarkWordOrSentenceAsActive=e[11]),t=new J$({props:u}),Eh.push((()=>Yh(t,"contentProcessBuildingBlocks",a))),Eh.push((()=>Yh(t,"activeSentence",l))),Eh.push((()=>Yh(t,"activeWord",c))),Eh.push((()=>Yh(t,"shouldMarkWordOrSentenceAsActive",d))),{c(){Zh(t.$$.fragment)},m(e,n){Kh(t,e,n),s=!0},p(e,s){const a={};1&s[0]&&(a.textProcessingMode=e[0]),!n&&256&s[0]&&(n=!0,a.contentProcessBuildingBlocks=e[8],Lh((()=>n=!1))),!o&&512&s[0]&&(o=!0,a.activeSentence=e[9],Lh((()=>o=!1))),!i&&1024&s[0]&&(i=!0,a.activeWord=e[10],Lh((()=>i=!1))),!r&&2048&s[0]&&(r=!0,a.shouldMarkWordOrSentenceAsActive=e[11],Lh((()=>r=!1))),t.$set(a)},i(e){s||(Hh(t.$$.fragment,e),s=!0)},o(e){Fh(t.$$.fragment,e),s=!1},d(e){Xh(t,e)}}}function hC(e){let t,n,o,i,r,s,a=e[8]&&e[8].contentReference&&nC(e),l=e[0]===re.translate&&pC(e),c=e[0]===re.write&&mC(e),d=e[8]&&gC(e);return{c(){t=Wg("div"),a&&a.c(),n=Gg(),l&&l.c(),o=Gg(),c&&c.c(),i=Gg(),r=Wg("div"),d&&d.c(),Xg(r,"class","dl-alternatives-frame svelte-t9u7lm")},m(e,u){zg(e,t,u),a&&a.m(t,null),Pg(t,n),l&&l.m(t,null),Pg(t,o),c&&c.m(t,null),Pg(t,i),Pg(t,r),d&&d.m(r,null),s=!0},p(e,s){e[8]&&e[8].contentReference?a?a.p(e,s):(a=nC(e),a.c(),a.m(t,n)):a&&(a.d(1),a=null),e[0]===re.translate?l?(l.p(e,s),1&s[0]&&Hh(l,1)):(l=pC(e),l.c(),Hh(l,1),l.m(t,o)):l&&(Uh(),Fh(l,1,1,(()=>{l=null})),zh()),e[0]===re.write?c?(c.p(e,s),1&s[0]&&Hh(c,1)):(c=mC(e),c.c(),Hh(c,1),c.m(t,i)):c&&(Uh(),Fh(c,1,1,(()=>{c=null})),zh()),e[8]?d?(d.p(e,s),256&s[0]&&Hh(d,1)):(d=gC(e),d.c(),Hh(d,1),d.m(r,null)):d&&(Uh(),Fh(d,1,1,(()=>{d=null})),zh())},i(e){s||(Hh(l),Hh(c),Hh(d),s=!0)},o(e){Fh(l),Fh(c),Fh(d),s=!1},d(e){e&&Hg(t),a&&a.d(),l&&l.d(),c&&c.d(),d&&d.d()}}}function fC(e,t,n){let o;const i=yh("deepl_settings");bg(e,i,(e=>n(7,o=e)));let r,s,a,l,{textProcessingMode:c=re.translate}=t,{websiteSettings:d}=t,{showDictionary:u}=t,{switchVisibilityDictionary:p}=t,{enableDictionaryButton:m}=t,{dictionaryButtonError:g}=t,{onClose:h}=t,f=!1,_=()=>{},v=()=>{};const y=()=>{if(s)try{const{processedText:e,processedEntities:t}=St({textLines:s.textLinesComponents.map((e=>e.map((e=>s.processedSentences[e].prefix+s.processedSentences[e].text)))),entities:s.entities,contentReference:s.contentReference});d.update({translatedSnippet:e}),r&&r.setReplaceData({entities:t,text:e,originalObject:s.originalObject})}catch(e){console.error(e)}};hh((()=>{r=document.querySelector("deepl-gdocs-icon"),n(8,s=r.getContentProcessBuildingBlocks()),y()}));return e.$$set=e=>{"textProcessingMode"in e&&n(0,c=e.textProcessingMode),"websiteSettings"in e&&n(1,d=e.websiteSettings),"showDictionary"in e&&n(2,u=e.showDictionary),"switchVisibilityDictionary"in e&&n(3,p=e.switchVisibilityDictionary),"enableDictionaryButton"in e&&n(4,m=e.enableDictionaryButton),"dictionaryButtonError"in e&&n(5,g=e.dictionaryButtonError),"onClose"in e&&n(6,h=e.onClose)},e.$$.update=()=>{128&e.$$.dirty[0]&&qe.includes(o.selectedTargetLanguage)&&kg(i,o.gDocsSegmentation=je.SENTENCE,o)},[c,d,u,p,m,g,h,o,s,a,l,f,_,v,i,y,e=>{n(12,_=e.showSentenceAlternatives),n(13,v=e.showWordAlternatives)},()=>{n(12,_=()=>{}),n(13,v=()=>{})},(e,t,n)=>v(e,t,n),e=>_(e),function(e){s=e,n(8,s)},function(e){a=e,n(9,a)},function(e){l=e,n(10,l)},function(e){f=e,n(11,f)}]}class _C extends Qh{constructor(e){super(),Jh(this,e,fC,hC,yg,{textProcessingMode:0,websiteSettings:1,showDictionary:2,switchVisibilityDictionary:3,enableDictionaryButton:4,dictionaryButtonError:5,onClose:6},null,[-1,-1])}}function vC(e){let t,n,o,i;return t=new $$({props:{headline:"Response - Translated DOM",jsonData:e[18]}}),o=new $$({props:{headline:"Request - Original DOM",jsonData:e[19]}}),{c(){Zh(t.$$.fragment),n=Gg(),Zh(o.$$.fragment)},m(e,r){Kh(t,e,r),zg(e,n,r),Kh(o,e,r),i=!0},p(e,n){const i={};16&n&&(i.jsonData=e[18]),t.$set(i);const r={};16&n&&(r.jsonData=e[19]),o.$set(r)},i(e){i||(Hh(t.$$.fragment,e),Hh(o.$$.fragment,e),i=!0)},o(e){Fh(t.$$.fragment,e),Fh(o.$$.fragment,e),i=!1},d(e){e&&Hg(n),Xh(t,e),Xh(o,e)}}}function yC(e){let t,n,o,i,r,s,a=dt(Jx(e[4].translatedSnippet))+"",l=e[3]===re.translate&&TC(e),c=e[3]===re.write&&xC(e);return{c(){t=Wg("div"),o=Gg(),l&&l.c(),i=Gg(),c&&c.c(),r=Vg(),Xg(t,"class","result-frame svelte-1qr4p6b"),Xg(t,"dir",n=Bt(e[5].selectedTargetLanguage))},m(e,n){zg(e,t,n),t.innerHTML=a,zg(e,o,n),l&&l.m(e,n),zg(e,i,n),c&&c.m(e,n),zg(e,r,n),s=!0},p(e,o){(!s||16&o)&&a!==(a=dt(Jx(e[4].translatedSnippet))+"")&&(t.innerHTML=a),(!s||32&o&&n!==(n=Bt(e[5].selectedTargetLanguage)))&&Xg(t,"dir",n),e[3]===re.translate?l?(l.p(e,o),8&o&&Hh(l,1)):(l=TC(e),l.c(),Hh(l,1),l.m(i.parentNode,i)):l&&(Uh(),Fh(l,1,1,(()=>{l=null})),zh()),e[3]===re.write?c?(c.p(e,o),8&o&&Hh(c,1)):(c=xC(e),c.c(),Hh(c,1),c.m(r.parentNode,r)):c&&(Uh(),Fh(c,1,1,(()=>{c=null})),zh())},i(e){s||(Hh(l),Hh(c),s=!0)},o(e){Fh(l),Fh(c),s=!1},d(e){e&&(Hg(t),Hg(o),Hg(i),Hg(r)),l&&l.d(e),c&&c.d(e)}}}function wC(e){let t,n;return t=new _C({props:{textProcessingMode:e[3],websiteSettings:e[1],showDictionary:e[7],switchVisibilityDictionary:e[13],enableDictionaryButton:e[9],dictionaryButtonError:e[8],onClose:e[0]}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};8&n&&(o.textProcessingMode=e[3]),2&n&&(o.websiteSettings=e[1]),128&n&&(o.showDictionary=e[7]),512&n&&(o.enableDictionaryButton=e[9]),256&n&&(o.dictionaryButtonError=e[8]),1&n&&(o.onClose=e[0]),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function bC(e){let t,n;return t=new Cy({props:{error:e[4].error}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};16&n&&(o.error=e[4].error),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function EC(e){let t,n,o,i,r,s,a,l,c,d,u;function p(e,t){return e[3]===re.translate?CC:$C}let m=p(e),g=m(e);function h(e,t){return e[3]===re.translate?LC:kC}let f=h(e),_=f(e);function v(e,t){return e[3]===re.translate?AC:IC}let y=v(e),w=y(e);return{c(){t=Wg("div"),n=Wg("p"),g.c(),o=Gg(),i=Wg("div"),r=Wg("h2"),_.c(),s=Gg(),w.c(),a=Gg(),l=Wg("div"),c=Wg("button"),c.textContent=`${chrome.i18n.getMessage("link_try_deepl")}`,Xg(n,"class","counter svelte-1qr4p6b"),Xg(r,"class","svelte-1qr4p6b"),Xg(c,"class","svelte-1qr4p6b"),Xg(l,"class","button-row svelte-1qr4p6b"),Xg(i,"class","box svelte-1qr4p6b"),Xg(t,"class","anonymous-user-max-char-exceeded svelte-1qr4p6b")},m(p,m){zg(p,t,m),Pg(t,n),g.m(n,null),Pg(t,o),Pg(t,i),Pg(i,r),_.m(r,null),Pg(i,s),w.m(i,null),Pg(i,a),Pg(i,l),Pg(l,c),d||(u=Yg(c,"click",e[15]),d=!0)},p(e,t){m===(m=p(e))&&g?g.p(e,t):(g.d(1),g=m(e),g&&(g.c(),g.m(n,null))),f===(f=h(e))&&_?_.p(e,t):(_.d(1),_=f(e),_&&(_.c(),_.m(r,null))),y===(y=v(e))&&w?w.p(e,t):(w.d(1),w=y(e),w&&(w.c(),w.m(i,a)))},i:mg,o:mg,d(e){e&&Hg(t),g.d(),_.d(),w.d(),d=!1,u()}}}function SC(e){let t,n,o;return n=new eS({}),{c(){t=Wg("div"),Zh(n.$$.fragment),Xg(t,"class","loading-spinner-container svelte-1qr4p6b")},m(e,i){zg(e,t,i),Kh(n,t,null),o=!0},p:mg,i(e){o||(Hh(n.$$.fragment,e),o=!0)},o(e){Fh(n.$$.fragment,e),o=!1},d(e){e&&Hg(t),Xh(n)}}}function TC(e){let t,n;return t=new w$({props:{platformBehaviour:e[2],websiteSettings:e[1],showDictionary:e[7],switchVisibilityDictionary:e[13],enableDictionaryButton:e[9],dictionaryButtonError:e[8],onClose:e[0]}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.platformBehaviour=e[2]),2&n&&(o.websiteSettings=e[1]),128&n&&(o.showDictionary=e[7]),512&n&&(o.enableDictionaryButton=e[9]),256&n&&(o.dictionaryButtonError=e[8]),1&n&&(o.onClose=e[0]),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function xC(e){let t,n;return t=new S$({props:{onClose:e[0]}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.onClose=e[0]),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function $C(e){let t,n,o=e[4].originalSnippet.length+"";return{c(){t=qg(o),n=qg("/2000")},m(e,o){zg(e,t,o),zg(e,n,o)},p(e,n){16&n&&o!==(o=e[4].originalSnippet.length+"")&&Jg(t,o)},d(e){e&&(Hg(t),Hg(n))}}}function CC(e){let t,n,o=e[4].originalSnippet.length+"";return{c(){t=qg(o),n=qg("/5000")},m(e,o){zg(e,t,o),zg(e,n,o)},p(e,n){16&n&&o!==(o=e[4].originalSnippet.length+"")&&Jg(t,o)},d(e){e&&(Hg(t),Hg(n))}}}function kC(e){let t,n=chrome.i18n.getMessage("inline_gdocs_max_chars_exceeded_improvement_title")+"";return{c(){t=qg(n)},m(e,n){zg(e,t,n)},p:mg,d(e){e&&Hg(t)}}}function LC(e){let t,n=chrome.i18n.getMessage("inline_gdocs_max_chars_exceeded_title")+"";return{c(){t=qg(n)},m(e,n){zg(e,t,n)},p:mg,d(e){e&&Hg(t)}}}function IC(e){let t;return{c(){t=Wg("p"),t.textContent=`${chrome.i18n.getMessage("inline_gdocs_max_chars_exceeded_body_write")}`},m(e,n){zg(e,t,n)},p:mg,d(e){e&&Hg(t)}}}function AC(e){let t;return{c(){t=Wg("p"),t.textContent=`${chrome.i18n.getMessage("inline_gdocs_max_chars_exceeded_body")}`},m(e,n){zg(e,t,n)},p:mg,d(e){e&&Hg(t)}}}function MC(e){let t,n,o,i,r,s,a,l,c,u=!!at();const p=[SC,EC,bC,wC,yC,vC],m=[];function g(e,t){return 16&t&&(n=null),null==e[4]||e[4].translationState===d.ongoingTranslation?0:e[4].translationState===d.anonymousUserMaxCharExceeded?1:e[4].error?2:e[2]===ie.gdocs?3:e[4].translatedSnippet?4:(null==n&&(n=!(!rn()||!e[4].translatedDOMSnippet)),n?5:-1)}~(o=g(e,-1))&&(i=m[o]=p[o](e)),s=new P$({props:{originalSnippet:e[4].originalSnippet,sourceLanguage:e[4].snippetDetectedSourceLang,targetLanguage:e[5].selectedTargetLanguage,websiteLanguage:e[4].websiteLanguage,showDictionary:e[7],setDictionaryLauncherState:e[12],resetDictionary:e[14]}});let h=u&&function(e){let t,n,o,i,r,s,a,l,c=chrome.i18n.getMessage("inline_translation_ads_ms_office")+"";return{c(){t=Wg("div"),n=Wg("div"),o=Gg(),i=Wg("div"),i.textContent=`${chrome.i18n.getMessage("inline_translation_ads_ms_office_discover")}`,r=Gg(),s=Wg("div"),Xg(n,"class","text-banner svelte-1qr4p6b"),Xg(i,"class","button-banner svelte-1qr4p6b"),Xg(s,"class","icon svelte-1qr4p6b"),Xg(t,"class","dl-ms-addin-banner svelte-1qr4p6b")},m(d,u){zg(d,t,u),Pg(t,n),n.innerHTML=c,Pg(t,o),Pg(t,i),Pg(t,r),Pg(t,s),a||(l=Yg(i,"click",e[16]),a=!0)},p:mg,d(e){e&&Hg(t),a=!1,l()}}}(e);return{c(){t=Wg("div"),i&&i.c(),r=Gg(),Zh(s.$$.fragment),a=Gg(),h&&h.c(),l=Vg(),Xg(t,"class","tooltip-container svelte-1qr4p6b"),Xg(t,"data-qa","deepl-inline-translation-result-container"),ih(t,"error",e[4].error)},m(e,n){zg(e,t,n),~o&&m[o].m(t,null),zg(e,r,n),Kh(s,e,n),zg(e,a,n),h&&h.m(e,n),zg(e,l,n),c=!0},p(e,n){let r=o;o=g(e,n),o===r?~o&&m[o].p(e,n):(i&&(Uh(),Fh(m[r],1,1,(()=>{m[r]=null})),zh()),~o?(i=m[o],i?i.p(e,n):(i=m[o]=p[o](e),i.c()),Hh(i,1),i.m(t,null)):i=null),(!c||16&n)&&ih(t,"error",e[4].error);const a={};16&n&&(a.originalSnippet=e[4].originalSnippet),16&n&&(a.sourceLanguage=e[4].snippetDetectedSourceLang),32&n&&(a.targetLanguage=e[5].selectedTargetLanguage),16&n&&(a.websiteLanguage=e[4].websiteLanguage),128&n&&(a.showDictionary=e[7]),s.$set(a),u&&h.p(e,n)},i(e){c||(Hh(i),Hh(s.$$.fragment,e),c=!0)},o(e){Fh(i),Fh(s.$$.fragment,e),c=!1},d(e){e&&(Hg(t),Hg(r),Hg(a),Hg(l)),~o&&m[o].d(),Xh(s,e),h&&h.d(e)}}}function RC(e){let t,n,o;return n=new Ax({props:{closeWindow:e[11],showLangSelect:!e[4].error,settings:nf,websiteSettings:e[1],extensionContext:e[10],platformBehaviour:e[2],textProcessingMode:e[3],showProStatus:e[6],showServiceName:!0,showSettingsIcon:!0,$$slots:{default:[MC]},$$scope:{ctx:e}}}),{c(){t=Wg("div"),Zh(n.$$.fragment)},m(e,i){zg(e,t,i),Kh(n,t,null),o=!0},p(e,[t]){const o={};16&t&&(o.showLangSelect=!e[4].error),2&t&&(o.websiteSettings=e[1]),4&t&&(o.platformBehaviour=e[2]),8&t&&(o.textProcessingMode=e[3]),64&t&&(o.showProStatus=e[6]),2098111&t&&(o.$$scope={dirty:t,ctx:e}),n.$set(o)},i(e){o||(Hh(n.$$.fragment,e),o=!0)},o(e){Fh(n.$$.fragment,e),o=!1},d(e){e&&Hg(t),Xh(n)}}}function OC(e,n,o){let i,r,s=mg,a=()=>(s(),s=wg(c,(e=>o(4,i=e))),c);bg(e,nf,(e=>o(5,r=e))),e.$$.on_destroy.push((()=>s()));let{closeTooltip:l}=n,{websiteSettings:c}=n;a();let u,{platformBehaviour:p=ie.default}=n,{textProcessingMode:m=re.translate}=n,{setPositioningStatus:g}=n,h=!1,f="",_=!1,v=x;async function y(e){switch(m){case re.translate:{const n=await Mt(i.originalSnippet);let o;e===Re&&(o="dlTrackGdocsMaxCharExceededShown"),e===Oe&&(o="dlTrackGDocsMaxCharExceededTryProClicked"),t({action:o,payload:{sourceLang:n,targetLang:r.selectedTargetLanguage,sourceLength:i.originalSnippet.length}})}break;case re.write:{const t=document.getElementsByTagName("deepl-gdocs-icon")[0];t&&t.trackMaxCharExceeded(e)}}}return e.$$set=e=>{"closeTooltip"in e&&o(0,l=e.closeTooltip),"websiteSettings"in e&&a(o(1,c=e.websiteSettings)),"platformBehaviour"in e&&o(2,p=e.platformBehaviour),"textProcessingMode"in e&&o(3,m=e.textProcessingMode),"setPositioningStatus"in e&&o(17,g=e.setPositioningStatus)},e.$$.update=()=>{20&e.$$.dirty&&p===ie.gdocs&&i.translationState===d.anonymousUserMaxCharExceeded&&i.originalSnippet.length>0&&y(Re),17&e.$$.dirty&&i&&(!i.isTranslationTooltipInjected||i.translationState!==d.none||i.translatedSnippet||i.error||i.translatedDOMSnippet||l()),131092&e.$$.dirty&&!i.translationState&&p===ie.default&&g&&(g(!0),setTimeout((()=>{g(!1)}),600)),40&e.$$.dirty&&o(6,u=Ke(r,ye.TRANSLATOR)&&m===re.translate||Ke(r,ye.WRITE)&&m===re.write)},[l,c,p,m,i,r,u,h,f,_,v,function(){t({action:"dlTrackUiAction",payload:{uiAction:W,nicheIntegration:p}}),l()},function(e){o(8,f=e.dictionaryButtonError),o(9,_=e.enableDictionaryButton)},function(){_&&o(7,h=!h)},function(){o(7,h=!1)},function(){y(Oe),t({action:"dlExternalURLRedirect",payload:{destination:m===re.translate?av:lv,utmContent:m===re.translate?"gdocs_customization":"gdocs_customization_write"}})},()=>{t({action:"dlExternalURLRedirect",payload:{destination:Sv,utmContent:"msaddin_ads_banner"}});try{t({action:"dlTrackClicksOnAdsButton"})}catch(e){console.error(e)}},g,()=>i.translatedDOMSnippet,()=>i.originalSnippet]}class NC extends Qh{constructor(e){super(),Jh(this,e,OC,RC,yg,{closeTooltip:0,websiteSettings:1,platformBehaviour:2,textProcessingMode:3,setPositioningStatus:17})}}function DC(e){let t,n,o,i,r,s,a,l;return r=new NC({props:{closeTooltip:e[0],websiteSettings:e[1],platformBehaviour:e[2],textProcessingMode:e[3],setPositioningStatus:e[7]}}),{c(){t=Wg("div"),n=Wg("div"),o=Gg(),i=Wg("div"),Zh(r.$$.fragment),Xg(n,"class","tooltip-drag-handle svelte-un7ezn"),Xg(i,"class","tooltip-body svelte-un7ezn"),Xg(t,"data-qa","inline-translate-tooltip"),Xg(t,"class","tooltip-wrapper svelte-un7ezn"),Xg(t,"role","dialog"),Xg(t,"style",e[6]),Xg(t,"draggable",e[5]),Xg(t,"dir",Bt())},m(c,d){zg(c,t,d),Pg(t,n),Pg(t,o),Pg(t,i),Kh(r,i,null),e[18](t),s=!0,a||(l=[Yg(n,"mouseover",e[8]),Yg(n,"mouseout",e[9]),Lg(c_.call(null,t,{isShadow:!0})),Yg(t,"click_outside",e[17]),Yg(t,"dragstart",e[10])],a=!0)},p(e,[n]){const o={};1&n&&(o.closeTooltip=e[0]),2&n&&(o.websiteSettings=e[1]),4&n&&(o.platformBehaviour=e[2]),8&n&&(o.textProcessingMode=e[3]),r.$set(o),(!s||64&n)&&Xg(t,"style",e[6]),(!s||32&n)&&Xg(t,"draggable",e[5])},i(e){s||(Hh(r.$$.fragment,e),s=!0)},o(e){Fh(r.$$.fragment,e),s=!1},d(n){n&&Hg(t),Xh(r),e[18](null),a=!1,_g(l)}}}function PC(e,t,n){let o;bg(e,nf,(e=>n(16,o=e))),vh("deepl_settings",nf),vh("text_direction",Bt());let i,r,s,a,l,{closeTooltip:c}=t,{websiteSettings:d}=t,{replaceElement:u}=t,{actualPosition:p}=t,{dragContainerTo:m}=t,{platformBehaviour:g=ie.default}=t,{textProcessingMode:h=re.translate}=t,f=!1,_=!1,v="visibility: hidden; opacity:0; height:0;";let y={x:0,y:0};function w(e){let t=Xx({dropEvent:e,document:document,dragConfig:{dragOffset:y,dragElementRect:a,dragBarWidth:16}});t&&m(t)}hh((()=>{n(15,l=o.isLoggedIn),setTimeout((()=>{n(6,v="")}),100),document.addEventListener("dragover",Zx),document.addEventListener("drop",w),s=f_(i,(({clientHeight:e})=>{n(14,r=e)}))})),fh((()=>{document.removeEventListener("dragover",Zx),document.removeEventListener("drop",w),s&&s()}));return e.$$set=e=>{"closeTooltip"in e&&n(0,c=e.closeTooltip),"websiteSettings"in e&&n(1,d=e.websiteSettings),"replaceElement"in e&&n(12,u=e.replaceElement),"actualPosition"in e&&n(11,p=e.actualPosition),"dragContainerTo"in e&&n(13,m=e.dragContainerTo),"platformBehaviour"in e&&n(2,g=e.platformBehaviour),"textProcessingMode"in e&&n(3,h=e.textProcessingMode)},e.$$.update=()=>{var t,i;98305&e.$$.dirty&&!1===l&&!0===o.isLoggedIn&&c(),65536&e.$$.dirty&&n(11,(t=o.inlineTranslateTooltipPosition,p=u(r,t))),16384&e.$$.dirty&&n(11,(i=r,p=_||g===ie.gdocs?u(i,o.inlineTranslateTooltipPosition):p))},[c,d,g,h,i,f,v,e=>{_=e},function(){n(5,f=!0)},function(){n(5,f=!1)},function(e){const t=Kx(e,g);y=t.dragOffset,a=t.dragElementRect},p,u,m,r,l,o,()=>c(),function(e){Eh[e?"unshift":"push"]((()=>{i=e,n(4,i)}))}]}class BC extends Qh{constructor(e){super(),Jh(this,e,PC,DC,yg,{closeTooltip:0,websiteSettings:1,replaceElement:12,actualPosition:11,dragContainerTo:13,platformBehaviour:2,textProcessingMode:3})}}class UC{static HTML_TAG_NAME="deepl-inline-translate-tooltip";static createElement=(e=document)=>{const t=e.createElement(UC.HTML_TAG_NAME),n=new UC(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t.dragContainerTo=n.dragContainerTo,t};#e=void 0;constructor(e){this.domElement=e,this.domElement.platformBehaviour=ie.default,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.container=document.createElement("div"),this.domElement.mainComponent,this.domElement.selectionRange;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer)}createDOM=(e,t,n)=>{const{deepl_inline_ui:o}=D;this.domElement.shadowContainer&&this.domElement.shadowContainer.childElementCount>0&&this.cleanupDOM(),this.domElement.platformBehaviour===ie.default&&(this.domElement.selectionRange=window.getSelection().getRangeAt(0));let i=e(this.domElement.selectionRange);this.domElement.shadowContainer.appendChild(this.domElement.container);let r="visibility: initial !important; position: absolute; top: 0px; left: 0px; width: 100%; z-index: "+(o.z_index-100),s=`position: absolute; top: ${i.y}px; left: ${i.x-200}px; z-index: ${o.z_index-100};`;switch(this.domElement.platformBehaviour){case ie.gdocs:s+="top: 600px; left: 10px;";break;case ie.default:default:s+=""}this.domElement.shadowContainer.style.cssText=r,this.domElement.container.style.cssText=s,this.domElement.mainComponent=new BC({target:this.domElement.container,props:{closeTooltip:t,websiteSettings:n,replaceElement:(t,n)=>{i=e(this.domElement.selectionRange);const o={coords:i,clientHeight:t,TOOLTIP_WIDTH:550,TRIGGER_MENU_ICON_HEIGHT:30,style:this.domElement.container.style};let r=n;const s=Vx(o),[a,l]=Yx(n),c=this.#e??{x:0,y:0};if(this.domElement.platformBehaviour===ie.gdocs){for(const e of l)if(Gx(e,o)){qx(e,o,c);break}}else for(const e of a)if(Gx(e,o)){r="middle"!==e?e:void 0,jx(e,o,c);break}return{...s,current:r}},platformBehaviour:this.domElement.platformBehaviour,textProcessingMode:this.domElement.textProcessingMode,dragContainerTo:this.dragContainerTo}})};dragContainerTo=e=>{this.#e={y:parseInt(this.domElement.container.style.top)-e.y+(this.#e?.y??0),x:parseInt(this.domElement.container.style.left)-e.x+(this.#e?.x??0)},this.domElement.container.style.top=`${e.y}px`,this.domElement.container.style.left=`${e.x}px`};cleanupDOM=()=>{this.domElement.container.remove(),this.domElement.shadowContainer.remove(),this.domElement.shadowContainer=document.createElement("div"),this.domElement.container=document.createElement("div"),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}function zC(e){let t,n,o,i,r,s,a,l,c,d,u,p,m,g,h,f;return{c(){t=Wg("div"),n=Wg("div"),o=Wg("div"),i=Wg("div"),r=Wg("div"),r.textContent=`${chrome.i18n.getMessage("inline_translation_highlighter_tooltip_headline")}`,s=Gg(),a=Wg("div"),a.textContent=`${chrome.i18n.getMessage("inline_translation_highlighter_tooltip_text")}`,l=Gg(),c=Wg("button"),Xg(r,"class","headline svelte-150jdi1"),Xg(a,"class","text svelte-150jdi1"),Xg(i,"class","text-wrapper svelte-150jdi1"),Xg(o,"class","content svelte-150jdi1"),Xg(c,"class","close-icon svelte-150jdi1"),Xg(n,"class",d=Cg(`body body__${e[1]}`)+" svelte-150jdi1"),Xg(t,"class",u=Cg(`container container__${e[1]}`)+" svelte-150jdi1")},m(d,u){zg(d,t,u),Pg(t,n),Pg(n,o),Pg(o,i),Pg(i,r),Pg(i,s),Pg(i,a),Pg(n,l),Pg(n,c),g=!0,h||(f=Yg(c,"click",e[3]),h=!0)},p(e,[o]){(!g||2&o&&d!==(d=Cg(`body body__${e[1]}`)+" svelte-150jdi1"))&&Xg(n,"class",d),(!g||2&o&&u!==(u=Cg(`container container__${e[1]}`)+" svelte-150jdi1"))&&Xg(t,"class",u)},i(e){g||(kh((()=>{g&&(m&&m.end(1),p=jh(t,Of,{x:100,duration:1e3}),p.start())})),g=!0)},o(e){p&&p.invalidate(),m=qh(t,Of,{x:100,duration:1e3}),g=!1},d(e){e&&Hg(t),e&&m&&m.end(),h=!1,f()}}}function HC(n,o,i){let{closeInlineHighlighter:r=(()=>{})}=o,{el:s}=o,a="topLeft";hh((async()=>{try{t({action:"dltrackOpenInlineHighlighter",payload:{domainName:e.websiteData.hostname}})}catch(e){console.error(e)}}));return n.$$set=e=>{"closeInlineHighlighter"in e&&i(0,r=e.closeInlineHighlighter),"el"in e&&i(2,s=e.el)},n.$$.update=()=>{if(4&n.$$.dirty&&s){const e=s.getBoundingClientRect();let t=e.x>305,n=window.innerWidth-e.right>305,o=window.innerHeight-e.bottom>190,r=e.y>190;r&&t?i(1,a="topLeft"):r&&n?i(1,a="topRight"):o&&t?i(1,a="bottomLeft"):o&&n&&i(1,a="bottomRight")}},[r,a,s,()=>r(oe.close_icon)]}class FC extends Qh{constructor(e){super(),Jh(this,e,HC,zC,yg,{closeInlineHighlighter:0,el:2})}}function WC(e){let t,n,o,i,r,s,a,l,c,d,u,p=e[3]&&!e[1].isInlineHighlighterShown&&jC(e);return r=new h_({props:{tooltip:e[2],showProShield:Ke(e[1],ye.WRITE),$$slots:{default:[qC]},$$scope:{ctx:e}}}),a=new h_({props:{tooltip:chrome.i18n.getMessage("inline_translation_tooltip_turnoff"),$$slots:{default:[GC]},$$scope:{ctx:e}}}),{c(){t=Wg("div"),p&&p.c(),n=Gg(),o=Wg("div"),i=Wg("div"),Zh(r.$$.fragment),s=Gg(),Zh(a.$$.fragment),Xg(i,"class","icon-container svelte-thfl2z"),Xg(i,"data-qa","deepl-inline-translate-icon-container"),Xg(o,"class","layout-container svelte-thfl2z"),Xg(t,"dir",Bt())},m(l,m){zg(l,t,m),p&&p.m(t,null),Pg(t,n),Pg(t,o),Pg(o,i),Kh(r,i,null),Pg(i,s),Kh(a,i,null),e[24](i),c=!0,d||(u=[Yg(i,"blur",e[15]),Yg(i,"mouseenter",e[7]),Yg(i,"mouseleave",e[8])],d=!0)},p(e,o){e[3]&&!e[1].isInlineHighlighterShown?p?(p.p(e,o),10&o&&Hh(p,1)):(p=jC(e),p.c(),Hh(p,1),p.m(t,n)):p&&(Uh(),Fh(p,1,1,(()=>{p=null})),zh());const i={};4&o&&(i.tooltip=e[2]),2&o&&(i.showProShield=Ke(e[1],ye.WRITE)),134217728&o&&(i.$$scope={dirty:o,ctx:e}),r.$set(i);const s={};134217744&o&&(s.$$scope={dirty:o,ctx:e}),a.$set(s)},i(e){c||(Hh(p),Hh(r.$$.fragment,e),Hh(a.$$.fragment,e),l||kh((()=>{l=jh(i,Of,{x:-5,duration:300}),l.start()})),c=!0)},o(e){Fh(p),Fh(r.$$.fragment,e),Fh(a.$$.fragment,e),c=!1},d(n){n&&Hg(t),p&&p.d(),Xh(r),Xh(a),e[24](null),d=!1,_g(u)}}}function jC(e){let t,n;return t=new FC({props:{closeInlineHighlighter:e[11],el:e[3]}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};8&n&&(o.el=e[3]),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function qC(e){let t,n,o;return{c(){t=Wg("div"),Xg(t,"class","dl-logo svelte-thfl2z"),Xg(t,"data-qa","deepl-inline-translate-menu-icon")},m(i,r){zg(i,t,r),n||(o=[Yg(t,"click",Kg(Zg(e[6]))),Yg(t,"focus",e[19]),Yg(t,"mouseup",Kg(Zg(e[20]))),Yg(t,"mousedown",Kg(Zg(e[21]))),Yg(t,"mouseenter",e[22])],n=!0)},p:mg,d(e){e&&Hg(t),n=!1,_g(o)}}}function GC(e){let t,n,o,i,r;return{c(){t=Wg("div"),Xg(t,"data-qa","deepl-inline-translate-turnoff-icon"),Xg(t,"class",n=Cg(`dl-turnoff-inline-icon ${e[4]?"":"hidden"} `)+" svelte-thfl2z")},m(n,o){zg(n,t,o),i||(r=[Yg(t,"click",Kg(Zg(e[9]))),Yg(t,"focus",e[16]),Yg(t,"mousedown",Kg(Zg(e[17]))),Yg(t,"mouseup",Kg(Zg(e[18]))),Yg(t,"mouseenter",e[23])],i=!0)},p(e,o){16&o&&n!==(n=Cg(`dl-turnoff-inline-icon ${e[4]?"":"hidden"} `)+" svelte-thfl2z")&&Xg(t,"class",n)},i(e){o||kh((()=>{o=jh(t,Of,{x:-5,duration:300}),o.start()}))},o:mg,d(e){e&&Hg(t),i=!1,_g(r)}}}function VC(e){let t,n,o=!e[5]&&WC(e);return{c(){o&&o.c(),t=Vg()},m(e,i){o&&o.m(e,i),zg(e,t,i),n=!0},p(e,[n]){e[5]?o&&(Uh(),Fh(o,1,1,(()=>{o=null})),zh()):o?(o.p(e,n),32&n&&Hh(o,1)):(o=WC(e),o.c(),Hh(o,1),o.m(t.parentNode,t))},i(e){n||(Hh(o),n=!0)},o(e){Fh(o),n=!1},d(e){e&&Hg(t),o&&o.d(e)}}}function YC(e,o,i){let r,s,a,l=mg,c=()=>(l(),l=wg(d,(e=>i(14,a=e))),d);bg(e,nf,(e=>i(1,s=e))),e.$$.on_destroy.push((()=>l())),vh("deepl_settings",nf),vh("text_direction",Bt());let{websiteSettings:d}=o;c();let u,p,{platformBehaviour:m=ie.default}=o,g="",h=[],f=!1;function _(){bN(),y(),t({action:"dlTriggerTranslateInline"}),g||n(P.hintKeyboardShortcut),b(oe.deepl_icon)}async function v(e,n,o){if("dlTriggerTranslationShortcut"===e.action)_(),t({action:"dlTrackUseOfShortcut",payload:{shortcutType:z,location:U.inlineTranslationTriggerIcon,nicheIntegration:m}}),o();return!0}function y(){a&&a.isInlineTranslateSettingsTooltipInjected||i(4,f=!1)}function w(e){h.includes(e)||(t({action:"dlTrackIconHover",payload:{uiLocation:e,domainName:window.location.host,nicheIntegration:m}}),h.push(e))}function b(e){if(!s.isInlineHighlighterShown){nf.set({isInlineHighlighterShown:!0});try{t({action:"dltrackCloseInlineHighlighter",payload:{trigger:e}})}catch(e){console.error(e)}}}t({action:"dlCheckCommandShortcuts"}).then((e=>i(13,g=e?e.filter((e=>e.name==z))[0].shortcut:""))),chrome.runtime.onMessage.addListener(v),fh((()=>{chrome.runtime.onMessage.removeListener(v)}));return e.$$set=e=>{"websiteSettings"in e&&c(i(0,d=e.websiteSettings)),"platformBehaviour"in e&&i(12,m=e.platformBehaviour)},e.$$.update=()=>{if(2&e.$$.dirty&&i(5,r=s.blacklistDomainsForReading&&s.blacklistDomainsForReading.includes(window.location.hostname)||!s.enableInlineTranslation||s.isGmailEnabled&&SE()),24576&e.$$.dirty){let e;e=chrome.i18n.getMessage("context_menus_translate_section"),i(2,u=g?`${e} (${g})`:e),!1===a.isInlineTranslateSettingsTooltipInjected&&i(4,f=!1)}},[d,s,u,p,f,r,_,function(){i(4,f=!0)},y,function(){a&&!a.isInlineTranslateSettingsTooltipInjected&&(i(4,f=!0),wN(m),t({action:"dlTrackInlineSettingOpened",payload:{uiFunction:Y,uiLocation:U.inlineTranslationTriggerIcon,nicheIntegration:m}})),b(oe.deepl_icon)},w,b,m,g,a,function(t){wh.call(this,e,t)},function(t){wh.call(this,e,t)},function(t){wh.call(this,e,t)},function(t){wh.call(this,e,t)},function(t){wh.call(this,e,t)},function(t){wh.call(this,e,t)},function(t){wh.call(this,e,t)},()=>w(U.inlineTranslationTriggerIcon),()=>w(U.inlineTranslationSettingsIcon),function(e){Eh[e?"unshift":"push"]((()=>{p=e,i(3,p)}))}]}class ZC extends Qh{constructor(e){super(),Jh(this,e,YC,VC,yg,{websiteSettings:0,platformBehaviour:12})}}const KC={TRIGGER_HEIGHT:25,TRIGGER_WIDTH:25,TRIGGER_EXPENDED_WIDTH:60};function XC(e,t){let n={containerStyleTop:t.y>0?t.y:0,containerStyleLeft:t.x>0?t.x:0};if(!e||!t)return n;const{TRIGGER_EXPENDED_WIDTH:o,TRIGGER_WIDTH:i,TRIGGER_HEIGHT:r}=KC,s=e?.detail;if(1===s){if(e.isOutsideOfView)return n;let s=parseInt(window.getComputedStyle(window.getSelection().anchorNode.parentElement,null).getPropertyValue("font-size"));const a=document.body.parentNode.getBoundingClientRect();let l=e.pageY+.5*s,c=t.selectedTop+t.height-s-a.y;const d=()=>{const e=window.getSelection();if(!e.rangeCount)return;const t=e.getRangeAt(0).getClientRects();if(!t.length)return;return{firstRect:t[0],lastRect:t[t.length-1]}};if(t.height<1.5*s){n.containerStyleLeft=e.clientX;const r=t.x+t.selectedWidth;e.clientX>r?n.containerStyleLeft=t.selectedRight>o?r:r-o:e.clientX-t.x<i&&e.clientX<t.x&&(n.containerStyleLeft=t.selectedLeft>o?t.x:t.x+o)}else if(l>c){const t=d();t&&t.lastRect?n.containerStyleLeft=t.lastRect.right:n.containerStyleLeft=e.clientX}else if(l<c){n.containerStyleTop=t.y-t.height-r-5;const o=d();o&&o.firstRect?n.containerStyleLeft=o.firstRect.x:n.containerStyleLeft=e.clientX}}else if(2===s){n.containerStyleLeft=t.x+t.selectedWidth-i;let e=parseInt(window.getComputedStyle(window.getSelection().anchorNode.parentElement,null).getPropertyValue("font-size"));parseInt(t.height/2)>e&&(n.containerStyleTop=t.y-t.height+e+2)}const a=window.innerWidth||document.documentElement.innerWidth,l=window.scrollHeight||document.documentElement.scrollHeight;return n.containerStyleLeft+o>a&&(n.containerStyleLeft=n.containerStyleLeft-o),(n.containerStyleTop+r>l||n.containerStyleTop<0)&&(n.containerStyleTop=t.y-r),n}class JC{static HTML_TAG_NAME="deepl-inline-trigger";static createElement=(e=document)=>{const t=e.createElement(JC.HTML_TAG_NAME),n=new JC(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t.addChangeEvents=n.addChangeEvents,t.removeChangeEvents=n.removeChangeEvents,t.repositionContainer=n.repositionContainer,t.cachedReposition=n.cachedReposition,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.container=document.createElement("div"),this.domElement.mainComponent,this.domElement.cachedMouseEvent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowRoot.addEventListener("mouseup",(e=>{e.stopPropagation(),e.stopImmediatePropagation()})),this.domElement.shadowRoot.addEventListener("click",(e=>{e.stopPropagation(),e.stopImmediatePropagation()})),this.domElement.shadowRoot.addEventListener("mousedown",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=(e,t)=>{this.domElement.shadowContainer&&this.domElement.shadowContainer.childElementCount>0&&this.domElement.cleanupDOM(),this.domElement.repositionContainer(t),this.domElement.shadowContainer.appendChild(this.domElement.container),this.domElement.mainComponent=new ZC({target:this.domElement.container,props:{websiteSettings:e}}),this.domElement.addChangeEvents(),this.domElement.cachedMouseEvent=t};repositionContainer=e=>{if(window.getSelection()&&!window.getSelection().toString())return void this.domElement.cleanupDOM();const{deepl_inline_ui:t}=D,n=t.z_index-500,o=NE();let i=`position: absolute; top: 0px; left: 0px; width: 100%; z-index: ${n}; visibility: initial !important;`,r=`position: absolute; z-index: ${n};`;this.domElement.shadowContainer.style.cssText=i,this.domElement.container.style.cssText=r;const s=XC(e,o);this.domElement.container.style.top=`${parseInt(s.containerStyleTop)}px`,this.domElement.container.style.left=`${parseInt(s.containerStyleLeft)}px`};cachedReposition=()=>this.domElement.repositionContainer(this.domElement.cachedMouseEvent);addChangeEvents=()=>{window.addEventListener("scroll",this.domElement.cachedReposition),window.addEventListener("resize",this.domElement.cachedReposition)};removeChangeEvents=()=>{window.removeEventListener("scroll",this.domElement.cachedReposition),window.removeEventListener("resize",this.domElement.cachedReposition)};cleanupDOM=()=>{this.domElement.container.remove(),this.domElement.shadowContainer.remove(),this.domElement.shadowContainer=document.createElement("div"),this.domElement.container=document.createElement("div"),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy(),this.domElement.removeChangeEvents()}}const QC={TRANSLATE:"translate",WRITE:"write"},ek=QC,tk=async e=>{const t=st();let n,o=e.ownerDocument,i=Wf(e).getSelection();n=t?i&&i.anchorNode&&"#text"==i.anchorNode.nodeName&&"Range"==i.type&&e.contains(i.anchorNode):i&&i.baseNode&&"#text"==i.baseNode.nodeName&&"Range"==i.type&&(e.contains(i.baseNode)||function(e,t){return"IFRAME"===e.nodeName.toUpperCase()&&Gf(e)===t.ownerDocument}(e,i.baseNode)),n||(e.focus(),await Zf(e)),i=Wf(e).getSelection();const{domElements:r,strings:s,container:a}=function({thisDocument:e,selection:t}){let n;t.getRangeAt?n=t.getRangeAt(0):(n=e.createRange(),n.setStart(t.anchorNode,t.anchorOffset),n.setEnd(t.focusNode,t.focusOffset));const o=n.cloneContents(),i=document.createElement("div");i.appendChild(o),i.style.display="block",i.style.position="fixed",i.style.height="0px",i.style.width="0px",i.style.top="-500px",i.style.left="-500px",i.style.overflow="hidden",document.body.appendChild(i);const{domElements:r,strings:s}=zE(i);return{domElements:r,strings:s,container:i}}({thisDocument:o,selection:i});return{domElements:r,strings:s,container:a,isSubtextSelected:n}};const nk=e=>{const{domElements:t,strings:n,cloneContainer:o}=function(e){const t=e.cloneNode(!0),n=document.createElement("div");n.appendChild(t),n.style.display="none",document.body.appendChild(n);const{domElements:o,strings:i}=zE(n);return{domElements:o,strings:i,cloneContainer:n}}(e);return{domElements:t,strings:n,cloneContainer:o}};const ok=new DOMParser,ik=(e,t)=>{const n=document.createElement(t),o=Array.from(e.attributes),i=e.tagName;for(;e.firstChild;)n.appendChild(e.firstChild);return e.parentNode?.replaceChild(n,e),{tagName:i.toLowerCase(),attributes:o}},rk=e=>{const t=[],n=new Map;for(let o=0;o<e.length;++o){const i=e[o],r=ok.parseFromString(i,"text/html"),s=Array.from(r.querySelectorAll("body *:not(head):not(html)"));for(let e of s){const t=`a${n.size+1}`,o=ik(e,t);n.set(t,o)}const a=r.body.innerHTML;t.push(a)}return{map:n,simplifiedHtml:t}},sk=(e,t)=>{const n=ok.parseFromString(t,"text/html"),o=Array.from(n.querySelectorAll("body *:not(head):not(html)"));for(const t of o){const n=e.get(t.tagName.toLowerCase());if(!n)continue;const o=document.createElement(n.tagName);for(const e of n.attributes)o.setAttribute(e.name,e.value);for(;t.firstChild;)o.appendChild(t.firstChild);t.parentNode?.replaceChild(o,t)}return n.body.innerHTML};async function ak(e,t,n){!function(){const e=window.getSelection();return e.toString()===e.focusNode.textContent}()?await $E(e,t,n):await t_(e,t)}var lk=Object.freeze({__proto__:null,split:async function(e,t){const n=await tk(e);t&&(n.strings=n.domElements.map((e=>e.innerText)));const o=n.strings.map((e=>({text:e})));return{textConfig:n,requests:o}},reassemble:function(e,t){FE({strings:t[0]?.texts,domElements:e.domElements});const n=new Map;let o=0,i=0;for(const t of e.container.children)1===t.children.length&&"BR"===t.children[0].nodeName?i++:(n.set(o,i),o++);const r={text:t[0]?.texts?t[0]?.texts.map(((e,t)=>{const o=n.get(t+1)??0;return e+"\n".repeat(o)})).join("\n"):"",html:e.container.innerHTML};return e.container.remove(),r},injectContent:async function(e,t,n){await ak(e,t,n)}});var ck=Object.freeze({__proto__:null,injectContent:async function(e,t,n){await ak(e,t,n)}});function dk(e){return e.includes("web.whatsapp.com")?lk:e.includes("facebook.com")?ck:void 0}async function uk(e,n){const{isWriteRequest:o,targetLang:i,nicheIntegration:r,sourceLang:s,isHtml:a,clearInnerHTML:l,removeFormatting:c}={isWriteRequest:!1,targetLang:null,nicheIntegration:null,sourceLang:null,isHtml:null,clearInnerHTML:null,removeFormatting:!1,...n};let d,u={},p=[];const m=!TE(e),g=dk(window.location.host);if(g?.split){const t=await g.split(e,c);u=t.textConfig,p=t.requests}else if(m)u=await tk(e),c&&(u.strings=u.domElements.map((e=>e.innerText))),p=u.strings.map((e=>({text:e})));else{const t=e.value;xE(e)&&(u.isSubtextSelected=!0),d=u.isSubtextSelected?t.substring(e.selectionStart,e.selectionEnd):t,p.push({text:d})}if(0===p.length)return;let h,f;if(s)h=s;else try{h=document.documentElement.lang}catch(e){console.error(e)}const _=rk(p.map((e=>e.text)));f=o?await t({action:"dlRequestImproveWriting",payload:{requests:_.simplifiedHtml.map((e=>({text:e}))),domainName:window.location.hostname,websiteLanguage:h,sourceLang:s,...a&&{isHtml:!0},nicheIntegration:r}}):await t({action:"dlRequestInputTranslation",payload:{requests:_.simplifiedHtml.map((e=>({text:e}))),domainName:window.location.hostname,websiteLanguage:h,targetLang:i,platformBehavior:r}}),f=f.map((e=>({...e,text:sk(_.map,e.text),texts:e.texts.map((e=>sk(_.map,e)))})));let v={text:"",html:""};g?.reassemble?v=g.reassemble(u,f):m?(FE({strings:f[0]?.texts,domElements:u.domElements}),v.text=u.container.innerText,v.html=dt(u.container.innerHTML),u.container.remove()):(v.text=f[0].text,v.html=f[0].text),m&&!u.isSubtextSelected&&l_(e),l&&!u.isSubtextSelected&&(e.innerHTML=""),await $E(e,v,u.isSubtextSelected)}async function pk(e){let n,o={},i=[];if(!TE(e))o=await tk(e),i=o.strings.map((e=>e));else{const t=e.value;xE(e)&&(o.isSubtextSelected=!0),n=o.isSubtextSelected?t.substring(e.selectionStart,e.selectionEnd):t,i.push(n)}return await t({action:"dlSplitTextRequest",payload:{texts:i}})}async function mk(e){const{element:n,mode:o,targetLang:i,style:r,formality:s,writeLang:a}=e;let l,c={},d=[];const u=!TE(n);if(u)c=await tk(n),d=c.strings.map((e=>e));else{const e=n.value;xE(n)&&(c.isSubtextSelected=!0),l=c.isSubtextSelected?e.substring(n.selectionStart,n.selectionEnd):e,d.push(l)}const p=rk(d);let m=await t({action:"dlRequestAlternatives",payload:{texts:p.simplifiedHtml,mode:o,targetLang:i,style:r,formality:s,domainName:window.location.hostname,writeLang:a}});if(u){const e=m.alternativeComponents.map((e=>{const t=e.map((e=>sk(p.map,e)));return FE({strings:t,domElements:c.domElements}),{text:c.container.innerText,html:dt(c.container.innerHTML)}}));m={...m,processedText:sk(p.map,m.processedText.processedText),alternatives:e.map((e=>e.text)),alternativesHtml:e.map((e=>e.html))},c.container.remove()}else m={...m,processedText:sk(p.map,m.processedText.processedText),alternatives:m.alternatives.map((e=>sk(p.map,e)))};return m}async function gk(e,t,n){const o=!TE(t),i={text:"",html:""},r=dk(window.location.host);r?.injectContent?(i.text=e,i.html=n):o?(i.text=e,i.html=n,l_(t)):(i.text=e,i.html=e),r?.injectContent?await r.injectContent(t,i,!0):await $E(t,i,!0)}function hk(e){let t,n,o,i,r;return n=new T_({props:{items:e[1],selectedOption:e[2],alignRight:!1,dataQaButton:"deepl-formality-selection-button",dataQaList:"deepl-formality-selection-list",variant:e[0],autoHeight:!0}}),n.$on("valueselected",e[3]),{c(){t=Wg("div"),Zh(n.$$.fragment)},m(s,a){zg(s,t,a),Kh(n,t,null),o=!0,i||(r=Yg(t,"mousedown",Kg(Zg(e[5]))),i=!0)},p(e,[t]){const o={};2&t&&(o.items=e[1]),4&t&&(o.selectedOption=e[2]),1&t&&(o.variant=e[0]),n.$set(o)},i(e){o||(Hh(n.$$.fragment,e),o=!0)},o(e){Fh(n.$$.fragment,e),o=!1},d(e){e&&Hg(t),Xh(n),i=!1,r()}}}function fk(e,t,n){let o,i;const r=_h();let{value:s}=t,{variant:a}=t;return e.$$set=e=>{"value"in e&&n(4,s=e.value),"variant"in e&&n(0,a=e.variant)},e.$$.update=()=>{18&e.$$.dirty&&n(2,i=s?o.find((e=>e.value===s)):o.find((e=>"auto"===e.value)))},n(1,o=[{value:"auto",label:chrome.i18n.getMessage("ui_formality_automatic"),selectedOptionLabel:chrome.i18n.getMessage("ui_formality_automatic")},{value:"formal",label:chrome.i18n.getMessage("ui_formality_formal"),selectedOptionLabel:chrome.i18n.getMessage("ui_formality_formal")},{value:"informal",label:chrome.i18n.getMessage("ui_formality_informal"),selectedOptionLabel:chrome.i18n.getMessage("ui_formality_informal")}]),[a,o,i,function(e){e.detail.selectedOption.value!==s&&r("selection",e.detail)},s,function(t){wh.call(this,e,t)}]}class _k extends Qh{constructor(e){super(),Jh(this,e,fk,hk,yg,{value:4,variant:0})}}function vk(e,t,n){const o=e.slice();return o[11]=t[n],o}function yk(e,t,n){const o=e.slice();return o[14]=t[n],o}function wk(e){let t,n,o;function i(){return e[8](e[14])}return{c(){t=Wg("button"),t.textContent=`${chrome.i18n.getMessage(`writing_style_${e[14]}`)}`,Xg(t,"class","svelte-i0wtba"),ih(t,"active",e[14]===e[0])},m(e,r){zg(e,t,r),n||(o=Yg(t,"click",i),n=!0)},p(n,o){e=n,1&o&&ih(t,"active",e[14]===e[0])},d(e){e&&Hg(t),n=!1,o()}}}function bk(e){let t,n,o;function i(){return e[9](e[11])}return{c(){t=Wg("button"),t.textContent=`${chrome.i18n.getMessage(`writing_tone_${e[11]}`)}`,Xg(t,"class","svelte-i0wtba"),ih(t,"active",e[11]===e[1])},m(e,r){zg(e,t,r),n||(o=Yg(t,"click",i),n=!0)},p(n,o){e=n,2&o&&ih(t,"active",e[11]===e[1])},d(e){e&&Hg(t),n=!1,o()}}}function Ek(e){let t,n,o,i,r,s,a,l,c,d,u,p,m,g,h,f,_,v,y,w,b,E=Vh(Ve),S=[];for(let t=0;t<E.length;t+=1)S[t]=wk(yk(e,E,t));let T=Vh(Ye),x=[];for(let t=0;t<T.length;t+=1)x[t]=bk(vk(e,T,t));return{c(){t=Wg("div"),n=Wg("div"),o=Wg("div"),o.textContent=`${chrome.i18n.getMessage("write_style_options_headline_style")}`,i=Gg(),r=Wg("div");for(let e=0;e<S.length;e+=1)S[e].c();s=Gg(),a=Wg("div"),a.textContent=`${chrome.i18n.getMessage("write_style_options_description_style")}`,l=Gg(),c=Wg("div"),d=Wg("div"),d.textContent=`${chrome.i18n.getMessage("write_style_options_headline_tone")}`,u=Gg(),p=Wg("div");for(let e=0;e<x.length;e+=1)x[e].c();m=Gg(),g=Wg("div"),g.textContent=`${chrome.i18n.getMessage("write_style_options_description_tone")}`,h=Gg(),f=Wg("div"),_=Wg("button"),_.textContent=`${chrome.i18n.getMessage("write_style_options_cta_reset")}`,v=Gg(),y=Wg("button"),y.textContent=`${chrome.i18n.getMessage("write_style_options_cta_apply")}`,Xg(o,"class","title svelte-i0wtba"),Xg(r,"class","toggles svelte-i0wtba"),Xg(a,"class","explanation svelte-i0wtba"),Xg(n,"class","writing-style svelte-i0wtba"),Xg(d,"class","title svelte-i0wtba"),Xg(p,"class","toggles svelte-i0wtba"),Xg(g,"class","explanation svelte-i0wtba"),Xg(c,"class","tone svelte-i0wtba"),Xg(_,"class","reset svelte-i0wtba"),Xg(y,"class","apply svelte-i0wtba"),ih(y,"enabled",e[0]||e[1]),Xg(f,"class","actions svelte-i0wtba"),Xg(t,"class","container svelte-i0wtba")},m(E,T){zg(E,t,T),Pg(t,n),Pg(n,o),Pg(n,i),Pg(n,r);for(let e=0;e<S.length;e+=1)S[e]&&S[e].m(r,null);Pg(n,s),Pg(n,a),Pg(t,l),Pg(t,c),Pg(c,d),Pg(c,u),Pg(c,p);for(let e=0;e<x.length;e+=1)x[e]&&x[e].m(p,null);Pg(c,m),Pg(c,g),Pg(t,h),Pg(t,f),Pg(f,_),Pg(f,v),Pg(f,y),w||(b=[Yg(_,"click",e[5]),Yg(y,"click",e[4])],w=!0)},p(e,[t]){if(5&t){let n;for(E=Vh(Ve),n=0;n<E.length;n+=1){const o=yk(e,E,n);S[n]?S[n].p(o,t):(S[n]=wk(o),S[n].c(),S[n].m(r,null))}for(;n<S.length;n+=1)S[n].d(1);S.length=E.length}if(10&t){let n;for(T=Vh(Ye),n=0;n<T.length;n+=1){const o=vk(e,T,n);x[n]?x[n].p(o,t):(x[n]=bk(o),x[n].c(),x[n].m(p,null))}for(;n<x.length;n+=1)x[n].d(1);x.length=T.length}3&t&&ih(y,"enabled",e[0]||e[1])},i:mg,o:mg,d(e){e&&Hg(t),Fg(S,e),Fg(x,e),w=!1,_g(b)}}}function Sk(e,t,n){const o=_h();let{writingStyle:i}=t,{tone:r}=t,s=i,a=r;function l(e){n(1,a=void 0),n(0,s=e)}function c(e){n(0,s=void 0),n(1,a=e)}return e.$$set=e=>{"writingStyle"in e&&n(6,i=e.writingStyle),"tone"in e&&n(7,r=e.tone)},[s,a,l,c,function(){n(6,i=s),n(7,r=a),o("apply")},function(){n(1,a=void 0),n(0,s=void 0),n(7,r=void 0),n(6,i=void 0),o("reset")},i,r,e=>l(e),e=>c(e)]}class Tk extends Qh{constructor(e){super(),Jh(this,e,Sk,Ek,yg,{writingStyle:6,tone:7})}}function xk(e){let t,n,o,i,r,s;return{c(){t=Wg("div"),n=Wg("div"),o=Wg("div"),o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M11.25 11.25L11.2915 11.2293C11.8646 10.9427 12.5099 11.4603 12.3545 12.082L11.6455 14.918C11.4901 15.5397 12.1354 16.0573 12.7085 15.7707L12.75 15.75M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12ZM12 8.25H12.0075V8.2575H12V8.25Z" stroke="#0177A9" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',i=Gg(),r=Wg("div"),s=Wg("p"),s.textContent=`${chrome.i18n.getMessage("write_not_supported_language_message")}`,Xg(o,"class","icon svelte-16948va"),Xg(s,"class","svelte-16948va"),Xg(r,"class","text svelte-16948va"),Xg(n,"class","message svelte-16948va"),Xg(t,"class","container svelte-16948va")},m(e,a){zg(e,t,a),Pg(t,n),Pg(n,o),Pg(n,i),Pg(n,r),Pg(r,s)},p:mg,i:mg,o:mg,d(e){e&&Hg(t)}}}class $k extends Qh{constructor(e){super(),Jh(this,e,null,xk,yg,{})}}function Ck(e){let t,n,o;return{c(){t=jg("svg"),n=jg("path"),Xg(n,"d","M19 10C19 14.9706 14.9706 19 10 19M19 10C19 5.02944 14.9706 1 10 1M19 10H1M10 19C5.02944 19 1 14.9706 1 10M10 19C11.6569 19 13 14.9706 13 10C13 5.02944 11.6569 1 10 1M10 19C8.34315 19 7 14.9706 7 10C7 5.02944 8.34315 1 10 1M1 10C1 5.02944 5.02944 1 10 1"),Xg(n,"stroke",o=e[0]?"white":"#242B34"),Xg(n,"stroke-width","1.5"),Xg(n,"stroke-linecap","round"),Xg(n,"stroke-linejoin","round"),Xg(t,"width","20"),Xg(t,"height","20"),Xg(t,"viewBox","0 0 20 20"),Xg(t,"fill","none"),Xg(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){zg(e,t,o),Pg(t,n)},p(e,[t]){1&t&&o!==(o=e[0]?"white":"#242B34")&&Xg(n,"stroke",o)},i:mg,o:mg,d(e){e&&Hg(t)}}}function kk(e,t,n){let{isActive:o}=t;return e.$$set=e=>{"isActive"in e&&n(0,o=e.isActive)},[o]}class Lk extends Qh{constructor(e){super(),Jh(this,e,kk,Ck,yg,{isActive:0})}}function Ik(e){let t,n,o;return{c(){t=jg("svg"),n=jg("path"),Xg(n,"d","M13.2322 3.23223L16.7677 6.76777M14.7322 1.73223C15.7085 0.755922 17.2914 0.755922 18.2677 1.73223C19.244 2.70854 19.244 4.29146 18.2677 5.26777L4.5 19.0355H1V15.4644L14.7322 1.73223Z"),Xg(n,"stroke",o=e[0]?"white":"#242B34"),Xg(n,"stroke-width","1.5"),Xg(n,"stroke-linecap","round"),Xg(n,"stroke-linejoin","round"),Xg(t,"width","20"),Xg(t,"height","20"),Xg(t,"viewBox","0 0 20 20"),Xg(t,"fill","none"),Xg(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){zg(e,t,o),Pg(t,n)},p(e,[t]){1&t&&o!==(o=e[0]?"white":"#242B34")&&Xg(n,"stroke",o)},i:mg,o:mg,d(e){e&&Hg(t)}}}function Ak(e,t,n){let{isActive:o}=t;return e.$$set=e=>{"isActive"in e&&n(0,o=e.isActive)},[o]}class Mk extends Qh{constructor(e){super(),Jh(this,e,Ak,Ik,yg,{isActive:0})}}function Rk(e){let t,n;return{c(){t=jg("svg"),n=jg("path"),Xg(n,"fill-rule","evenodd"),Xg(n,"clip-rule","evenodd"),Xg(n,"d","M7.66109 0.236324C7.85709 0.0735691 8.1429 0.0735693 8.33891 0.236324C10.2777 1.84618 12.7315 2.85723 15.4166 2.98576C15.658 2.99732 15.8641 3.17164 15.8957 3.41119C15.9645 3.93104 16 4.4614 16 5.00004C16 10.1625 12.7401 14.5635 8.16655 16.257C8.05931 16.2967 7.94102 16.2967 7.83378 16.257C3.26004 14.5636 0 10.1625 0 4.99992C0 4.46132 0.0354836 3.93101 0.10424 3.41119C0.135926 3.17165 0.342016 2.99732 0.583373 2.98576C3.2685 2.85723 5.72231 1.84618 7.66109 0.236324ZM11.8566 6.19088C12.1002 5.8559 12.0261 5.38683 11.6911 5.1432C11.3561 4.89958 10.8871 4.97364 10.6434 5.30863L7.15969 10.0988L5.28033 8.21943C4.98744 7.92653 4.51256 7.92653 4.21967 8.21943C3.92678 8.51232 3.92678 8.98719 4.21967 9.28009L6.71967 11.7801C6.87477 11.9352 7.08999 12.0146 7.30867 11.9975C7.52734 11.9803 7.72754 11.8683 7.85655 11.6909L11.8566 6.19088Z"),Xg(n,"fill","#007E5E"),Xg(t,"width","16"),Xg(t,"height","17"),Xg(t,"viewBox","0 0 16 17"),Xg(t,"fill","none"),Xg(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){zg(e,t,o),Pg(t,n)},d(e){e&&Hg(t)}}}function Ok(e){let t,n;return{c(){t=jg("svg"),n=jg("path"),Xg(n,"fill-rule","evenodd"),Xg(n,"clip-rule","evenodd"),Xg(n,"d","M7.66109 0.236324C7.85709 0.0735691 8.1429 0.0735693 8.33891 0.236324C10.2777 1.84618 12.7315 2.85723 15.4166 2.98576C15.658 2.99732 15.8641 3.17164 15.8957 3.41119C15.9645 3.93104 16 4.4614 16 5.00004C16 10.1625 12.7401 14.5635 8.16655 16.257C8.05931 16.2967 7.94102 16.2967 7.83378 16.257C3.26004 14.5636 0 10.1625 0 4.99992C0 4.46132 0.0354836 3.93101 0.10424 3.41119C0.135926 3.17165 0.342016 2.99732 0.583373 2.98576C3.2685 2.85723 5.72231 1.84618 7.66109 0.236324ZM11.8566 6.19088C12.1002 5.8559 12.0261 5.38683 11.6911 5.1432C11.3561 4.89958 10.8871 4.97364 10.6434 5.30863L7.15969 10.0988L5.28033 8.21943C4.98744 7.92653 4.51256 7.92653 4.21967 8.21943C3.92678 8.51232 3.92678 8.98719 4.21967 9.28009L6.71967 11.7801C6.87477 11.9352 7.08999 12.0146 7.30867 11.9975C7.52734 11.9803 7.72754 11.8683 7.85655 11.6909L11.8566 6.19088Z"),Xg(n,"fill","white"),Xg(t,"width","16"),Xg(t,"height","17"),Xg(t,"viewBox","0 0 16 17"),Xg(t,"fill","none"),Xg(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){zg(e,t,o),Pg(t,n)},d(e){e&&Hg(t)}}}function Nk(e){let t;function n(e,t){return e[0]?Ok:Rk}let o=n(e),i=o(e);return{c(){i.c(),t=Vg()},m(e,n){i.m(e,n),zg(e,t,n)},p(e,[r]){o!==(o=n(e))&&(i.d(1),i=o(e),i&&(i.c(),i.m(t.parentNode,t)))},i:mg,o:mg,d(e){e&&Hg(t),i.d(e)}}}function Dk(e,t,n){let{isActive:o}=t;return e.$$set=e=>{"isActive"in e&&n(0,o=e.isActive)},[o]}class Pk extends Qh{constructor(e){super(),Jh(this,e,Dk,Nk,yg,{isActive:0})}}function Bk(e,t,n){const o=e.slice();return o[48]=t[n],o[50]=n,o}function Uk(e){let t,n;return t=new Pk({props:{isActive:e[6]===ek.TRANSLATE}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};64&n[0]&&(o.isActive=e[6]===ek.TRANSLATE),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function zk(e){let t,n;return t=new Pk({props:{isActive:e[6]===ek.WRITE}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};64&n[0]&&(o.isActive=e[6]===ek.WRITE),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function Hk(e){let t,n,o=e[16]&&!e[2]&&Wk(e);return{c(){o&&o.c(),t=Vg()},m(e,i){o&&o.m(e,i),zg(e,t,i),n=!0},p(e,n){e[16]&&!e[2]?o?(o.p(e,n),65540&n[0]&&Hh(o,1)):(o=Wk(e),o.c(),Hh(o,1),o.m(t.parentNode,t)):o&&(Uh(),Fh(o,1,1,(()=>{o=null})),zh())},i(e){n||(Hh(o),n=!0)},o(e){Fh(o),n=!1},d(e){e&&Hg(t),o&&o.d(e)}}}function Fk(e){let t,n,o,i,r=e[18]&&Ke(e[19],ye.TRANSLATOR);n=new Mw({props:{value:e[1],fontSize:"sm",variant:"input-selection-result"}}),n.$on("selection",e[39]);let s=r&&qk(e);return{c(){t=Wg("div"),Zh(n.$$.fragment),o=Gg(),s&&s.c(),Xg(t,"class","translate-options svelte-18oyowk")},m(e,r){zg(e,t,r),Kh(n,t,null),Pg(t,o),s&&s.m(t,null),i=!0},p(e,o){const i={};2&o[0]&&(i.value=e[1]),n.$set(i),786432&o[0]&&(r=e[18]&&Ke(e[19],ye.TRANSLATOR)),r?s?(s.p(e,o),786432&o[0]&&Hh(s,1)):(s=qk(e),s.c(),Hh(s,1),s.m(t,null)):s&&(Uh(),Fh(s,1,1,(()=>{s=null})),zh())},i(e){i||(Hh(n.$$.fragment,e),Hh(s),i=!0)},o(e){Fh(n.$$.fragment,e),Fh(s),i=!1},d(e){e&&Hg(t),Xh(n),s&&s.d()}}}function Wk(e){let t,n,o,i;n=new Mw({props:{onlyShowWriteEnabledLanguages:!0,showChooseLanguageOption:!e[15],value:e[15],fontSize:"sm",variant:"input-selection-result",autoHeight:!0}}),n.$on("selection",e[40]);let r=e[17]&&jk(e);return{c(){t=Wg("div"),Zh(n.$$.fragment),o=Gg(),r&&r.c(),Xg(t,"class","write-options svelte-18oyowk")},m(e,s){zg(e,t,s),Kh(n,t,null),Pg(t,o),r&&r.m(t,null),i=!0},p(e,o){const i={};32768&o[0]&&(i.showChooseLanguageOption=!e[15]),32768&o[0]&&(i.value=e[15]),n.$set(i),e[17]?r?r.p(e,o):(r=jk(e),r.c(),r.m(t,null)):r&&(r.d(1),r=null)},i(e){i||(Hh(n.$$.fragment,e),i=!0)},o(e){Fh(n.$$.fragment,e),i=!1},d(e){e&&Hg(t),Xh(n),r&&r.d()}}}function jk(e){let t,n,o;return{c(){t=Wg("button"),t.textContent=`${chrome.i18n.getMessage("write_style_options_button_label")}`,Xg(t,"class","style-switch svelte-18oyowk"),ih(t,"open",e[10])},m(i,r){zg(i,t,r),n||(o=Yg(t,"click",e[41]),n=!0)},p(e,n){1024&n[0]&&ih(t,"open",e[10])},d(e){e&&Hg(t),n=!1,o()}}}function qk(e){let t,n;return t=new h_({props:{tooltip:chrome.i18n.getMessage("input_selection_alternatives_tone_tooltip"),$$slots:{default:[Gk]},$$scope:{ctx:e}}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};128&n[0]|1048576&n[1]&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function Gk(e){let t,n;return t=new _k({props:{value:e[7],variant:"input-selection-result"}}),t.$on("selection",e[22]),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};128&n[0]&&(o.value=e[7]),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function Vk(e){let t,n,o,i,r;const s=[Xk,Kk,Zk],a=[];function l(e,t){return e[11]?0:e[6]!==ek.WRITE||e[16]?e[0]&&e[0].length>0?2:-1:1}return~(n=l(e))&&(o=a[n]=s[n](e)),{c(){t=Wg("div"),o&&o.c(),Xg(t,"style",i=`height: ${e[14]?e[14]+"px":"auto"}; max-height: 300px; width: 100%; overflow-y: auto`)},m(e,o){zg(e,t,o),~n&&a[n].m(t,null),r=!0},p(e,c){let d=n;n=l(e),n===d?~n&&a[n].p(e,c):(o&&(Uh(),Fh(a[d],1,1,(()=>{a[d]=null})),zh()),~n?(o=a[n],o?o.p(e,c):(o=a[n]=s[n](e),o.c()),Hh(o,1),o.m(t,null)):o=null),(!r||16384&c[0]&&i!==(i=`height: ${e[14]?e[14]+"px":"auto"}; max-height: 300px; width: 100%; overflow-y: auto`))&&Xg(t,"style",i)},i(e){r||(Hh(o),r=!0)},o(e){Fh(o),r=!1},d(e){e&&Hg(t),~n&&a[n].d()}}}function Yk(e){let t,n,o;return n=new Cy({props:{error:e[2]}}),{c(){t=Wg("div"),Zh(n.$$.fragment),Xg(t,"class","error-container svelte-18oyowk")},m(e,i){zg(e,t,i),Kh(n,t,null),o=!0},p(e,t){const o={};4&t[0]&&(o.error=e[2]),n.$set(o)},i(e){o||(Hh(n.$$.fragment,e),o=!0)},o(e){Fh(n.$$.fragment,e),o=!1},d(e){e&&Hg(t),Xh(n)}}}function Zk(e){let t,n,o,i;const r=[Qk,Jk],s=[];function a(e,t){return e[10]?0:1}return n=a(e),o=s[n]=r[n](e),{c(){t=Wg("div"),o.c(),Xg(t,"class","alternatives-container svelte-18oyowk")},m(o,r){zg(o,t,r),s[n].m(t,null),e[46](t),i=!0},p(e,i){let l=n;n=a(e),n===l?s[n].p(e,i):(Uh(),Fh(s[l],1,1,(()=>{s[l]=null})),zh(),o=s[n],o?o.p(e,i):(o=s[n]=r[n](e),o.c()),Hh(o,1),o.m(t,null))},i(e){i||(Hh(o),i=!0)},o(e){Fh(o),i=!1},d(o){o&&Hg(t),s[n].d(),e[46](null)}}}function Kk(e){let t,n,o;return n=new $k({}),{c(){t=Wg("div"),Zh(n.$$.fragment),Xg(t,"class","write-support svelte-18oyowk")},m(e,i){zg(e,t,i),Kh(n,t,null),o=!0},p:mg,i(e){o||(Hh(n.$$.fragment,e),o=!0)},o(e){Fh(n.$$.fragment,e),o=!1},d(e){e&&Hg(t),Xh(n)}}}function Xk(e){let t,n,o,i;return n=new eS({}),{c(){t=Wg("div"),Zh(n.$$.fragment),Xg(t,"style",o=`height: ${e[14]?e[14]+"px":"auto"}; max-height: 300px;`),Xg(t,"class","loading-spinner svelte-18oyowk")},m(e,o){zg(e,t,o),Kh(n,t,null),i=!0},p(e,n){(!i||16384&n[0]&&o!==(o=`height: ${e[14]?e[14]+"px":"auto"}; max-height: 300px;`))&&Xg(t,"style",o)},i(e){i||(Hh(n.$$.fragment,e),i=!0)},o(e){Fh(n.$$.fragment,e),i=!1},d(e){e&&Hg(t),Xh(n)}}}function Jk(e){let t,n,o,i,r=Vh(e[12]),s=[];for(let t=0;t<r.length;t+=1)s[t]=eL(Bk(e,r,t));let a=e[0].length>3&&!e[4]&&tL(e);return{c(){t=Wg("div"),n=Wg("div"),n.textContent=`${chrome.i18n.getMessage("input_selection_alternatives_label")}`,o=Gg();for(let e=0;e<s.length;e+=1)s[e].c();i=Gg(),a&&a.c(),Xg(n,"class","alternative headline svelte-18oyowk"),Xg(t,"class","alternatives svelte-18oyowk")},m(e,r){zg(e,t,r),Pg(t,n),Pg(t,o);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(t,null);Pg(t,i),a&&a.m(t,null)},p(e,n){if(16781312&n[0]){let o;for(r=Vh(e[12]),o=0;o<r.length;o+=1){const a=Bk(e,r,o);s[o]?s[o].p(a,n):(s[o]=eL(a),s[o].c(),s[o].m(t,i))}for(;o<s.length;o+=1)s[o].d(1);s.length=r.length}e[0].length>3&&!e[4]?a?a.p(e,n):(a=tL(e),a.c(),a.m(t,null)):a&&(a.d(1),a=null)},i:mg,o:mg,d(e){e&&Hg(t),Fg(s,e),a&&a.d()}}}function Qk(e){let t,n,o,i,r,s;function a(t){e[42](t)}function l(t){e[43](t)}let c={};return void 0!==e[8]&&(c.writingStyle=e[8]),void 0!==e[9]&&(c.tone=e[9]),n=new Tk({props:c}),Eh.push((()=>Yh(n,"writingStyle",a))),Eh.push((()=>Yh(n,"tone",l))),n.$on("apply",e[23]),n.$on("reset",e[23]),{c(){t=Wg("div"),Zh(n.$$.fragment)},m(e,o){zg(e,t,o),Kh(n,t,null),s=!0},p(e,t){const r={};!o&&256&t[0]&&(o=!0,r.writingStyle=e[8],Lh((()=>o=!1))),!i&&512&t[0]&&(i=!0,r.tone=e[9],Lh((()=>i=!1))),n.$set(r)},i(e){s||(Hh(n.$$.fragment,e),e&&(r||kh((()=>{r=jh(t,Of,{y:-5,duration:500}),r.start()}))),s=!0)},o(e){Fh(n.$$.fragment,e),s=!1},d(e){e&&Hg(t),Xh(n)}}}function eL(e){let t,n,o,i,r=e[48]+"";function s(){return e[44](e[48],e[50])}return{c(){t=Wg("div"),n=qg(r),Xg(t,"class","alternative svelte-18oyowk"),Xg(t,"data-qa","selection-result-view-alternative")},m(e,r){zg(e,t,r),Pg(t,n),o||(i=Yg(t,"click",s),o=!0)},p(t,o){e=t,4096&o[0]&&r!==(r=e[48]+"")&&Jg(n,r)},d(e){e&&Hg(t),o=!1,i()}}}function tL(e){let t,n,o,i;return{c(){t=Wg("div"),n=Wg("span"),n.textContent=`${chrome.i18n.getMessage("input_selection_alternatives_show_more")}`,Xg(t,"class","alternative show-more svelte-18oyowk")},m(r,s){zg(r,t,s),Pg(t,n),o||(i=Yg(t,"click",e[45]),o=!0)},p:mg,d(e){e&&Hg(t),o=!1,i()}}}function nL(e){let t,n,o,i,r,s,a,l,c,d,u,p,m,g,h,f,_,v,y,w,b,E,S,T,x,$,C,k,L,I,A,M,R,O,N=chrome.i18n.getMessage("input_selection_tab_button_translate")+"",D=Ke(e[19],ye.TRANSLATOR),P=chrome.i18n.getMessage("input_selection_tab_button_write")+"",B=Ke(e[19],ye.WRITE);c=new Lk({props:{isActive:e[6]===ek.TRANSLATE}});let U=D&&Uk(e);h=new Mk({props:{isActive:e[6]===ek.WRITE}});let z=B&&zk(e);const H=[Fk,Hk],F=[];function W(e,t){return e[6]===ek.TRANSLATE?0:e[6]===ek.WRITE?1:-1}~($=W(e))&&(C=F[$]=H[$](e));const j=[Yk,Vk],q=[];function G(e,t){return e[2]?0:1}return L=G(e),I=q[L]=j[L](e),{c(){t=Wg("div"),n=Wg("div"),o=Wg("div"),i=Wg("button"),r=Gg(),s=Wg("div"),a=Wg("div"),l=Wg("button"),Zh(c.$$.fragment),d=Gg(),u=qg(N),p=Gg(),U&&U.c(),m=Gg(),g=Wg("button"),Zh(h.$$.fragment),f=Gg(),_=qg(P),v=Gg(),z&&z.c(),y=Gg(),w=Wg("div"),b=Wg("button"),E=Gg(),S=Wg("button"),T=Gg(),x=Wg("div"),C&&C.c(),k=Gg(),I.c(),Xg(i,"class","dl-logo svelte-18oyowk"),Xg(i,"aria-label",chrome.i18n.getMessage("deepl_logo")),Xg(l,"class","svelte-18oyowk"),ih(l,"isActive",e[6]===ek.TRANSLATE),Xg(g,"class","svelte-18oyowk"),ih(g,"isActive",e[6]===ek.WRITE),Xg(a,"class","selector svelte-18oyowk"),Xg(s,"class","selector-container svelte-18oyowk"),Xg(o,"class","tab-container svelte-18oyowk"),Xg(b,"type","button"),Xg(b,"class","dl-settings-icon svelte-18oyowk"),Xg(S,"type","button"),Xg(S,"class","dl-close-icon svelte-18oyowk"),Xg(w,"class","action-container svelte-18oyowk"),Xg(n,"class","header svelte-18oyowk"),Xg(x,"class","ai-options svelte-18oyowk"),eh(x,"min-height","37px"),Xg(t,"style",e[5]),Xg(t,"class","container svelte-18oyowk"),Xg(t,"data-qa","selection-result-view")},m(C,I){zg(C,t,I),Pg(t,n),Pg(n,o),Pg(o,i),Pg(o,r),Pg(o,s),Pg(s,a),Pg(a,l),Kh(c,l,null),Pg(l,d),Pg(l,u),Pg(l,p),U&&U.m(l,null),Pg(a,m),Pg(a,g),Kh(h,g,null),Pg(g,f),Pg(g,_),Pg(g,v),z&&z.m(g,null),Pg(n,y),Pg(n,w),Pg(w,b),Pg(w,E),Pg(w,S),Pg(t,T),Pg(t,x),~$&&F[$].m(x,null),Pg(t,k),q[L].m(t,null),M=!0,R||(O=[Yg(l,"click",e[35]),Yg(g,"click",e[36]),Yg(b,"click",e[37]),Yg(S,"click",e[38]),Yg(t,"mousedown",Kg(Zg(e[34])))],R=!0)},p(e,n){const o={};64&n[0]&&(o.isActive=e[6]===ek.TRANSLATE),c.$set(o),524288&n[0]&&(D=Ke(e[19],ye.TRANSLATOR)),D?U?(U.p(e,n),524288&n[0]&&Hh(U,1)):(U=Uk(e),U.c(),Hh(U,1),U.m(l,null)):U&&(Uh(),Fh(U,1,1,(()=>{U=null})),zh()),(!M||64&n[0])&&ih(l,"isActive",e[6]===ek.TRANSLATE);const i={};64&n[0]&&(i.isActive=e[6]===ek.WRITE),h.$set(i),524288&n[0]&&(B=Ke(e[19],ye.WRITE)),B?z?(z.p(e,n),524288&n[0]&&Hh(z,1)):(z=zk(e),z.c(),Hh(z,1),z.m(g,null)):z&&(Uh(),Fh(z,1,1,(()=>{z=null})),zh()),(!M||64&n[0])&&ih(g,"isActive",e[6]===ek.WRITE);let r=$;$=W(e),$===r?~$&&F[$].p(e,n):(C&&(Uh(),Fh(F[r],1,1,(()=>{F[r]=null})),zh()),~$?(C=F[$],C?C.p(e,n):(C=F[$]=H[$](e),C.c()),Hh(C,1),C.m(x,null)):C=null);let s=L;L=G(e),L===s?q[L].p(e,n):(Uh(),Fh(q[s],1,1,(()=>{q[s]=null})),zh(),I=q[L],I?I.p(e,n):(I=q[L]=j[L](e),I.c()),Hh(I,1),I.m(t,null)),(!M||32&n[0])&&Xg(t,"style",e[5])},i(e){M||(Hh(c.$$.fragment,e),Hh(U),Hh(h.$$.fragment,e),Hh(z),Hh(C),Hh(I),e&&kh((()=>{M&&(A||(A=Gh(t,Nf,{},!0)),A.run(1))})),M=!0)},o(e){Fh(c.$$.fragment,e),Fh(U),Fh(h.$$.fragment,e),Fh(z),Fh(C),Fh(I),e&&(A||(A=Gh(t,Nf,{},!1)),A.run(0)),M=!1},d(e){e&&Hg(t),Xh(c),U&&U.d(),Xh(h),z&&z.d(),~$&&F[$].d(),q[L].d(),e&&A&&A.end(),R=!1,_g(O)}}}function oL(e,n,o){let i,r,a,l;const c=yh("deepl_settings");bg(e,c,(e=>o(19,l=e)));let d,u,p,m,g,h,f,{element:_}=n,{detectedLanguage:v}=n,{isMoreThanOneSentence:y}=n,{alternatives:w}=n,{alternativesHtml:b}=n,{error:E}=n,{mode:S}=n,{close:T}=n,{initialTargetLang:x}=n,{mostSpace:$}=n,C=S,k=!1,L=!1,I=0,A=Dt(v)?Ot(v):void 0;function M(e){o(10,k=!1),o(6,C=e),R()}async function R(){let e,t=x;try{if(!v){const e=await pk(_);o(28,v=e.detected_source_language),o(29,y=e.sentences.length>1)}}catch(e){return void o(2,E=e)}if(C===ek.WRITE){if(!r)return;e=u||p,t=v,A&&(t=A)}o(11,L=!0),o(2,E=null);const n={element:_,mode:C,targetLang:t,style:e,writeLang:A,...C===ek.TRANSLATE&&{formality:d}};try{let e=await mk(n);o(0,w=e.alternatives),o(30,b=e.alternativesHtml)}catch(e){o(2,E=e)}o(11,L=!1)}async function O(e,n){b&&b.length>0?gk(e,_,b[n]):gk(e,_);try{t({action:"dlTrackAlternativeSelected",payload:{numberOfAlternatives:w.length,selectedAlternative:n+1,sourceLang:v,targetLang:x,contentProcessingMode:S,alternativesSegmentation:(o=e,/^[\p{L}\p{M}\p{N}\p{Pc}]+$/u.test(o)?je.WORD:je.SENTENCE)}})}catch(e){console.error(e)}var o}function N(e){o(1,x=e),R()}function D(e){o(15,A=e),R()}function P(){t({action:"dlOpenInternalPage",payload:{destination:tS.settings_page}})}var B;B=()=>{if(k)o(14,I=0);else if(f){const e=f.offsetHeight;e>I&&o(14,I=e)}},gh().$$.after_update.push(B);return e.$$set=e=>{"element"in e&&o(31,_=e.element),"detectedLanguage"in e&&o(28,v=e.detectedLanguage),"isMoreThanOneSentence"in e&&o(29,y=e.isMoreThanOneSentence),"alternatives"in e&&o(0,w=e.alternatives),"alternativesHtml"in e&&o(30,b=e.alternativesHtml),"error"in e&&o(2,E=e.error),"mode"in e&&o(32,S=e.mode),"close"in e&&o(3,T=e.close),"initialTargetLang"in e&&o(1,x=e.initialTargetLang),"mostSpace"in e&&o(33,$=e.mostSpace)},e.$$.update=()=>{2&e.$$.dirty[0]&&o(18,i=Pt(x)),32&e.$$.dirty[0]|4&e.$$.dirty[1]&&(o(5,h=""),"top"===$.vertical?o(5,h="bottom: 35px;"):o(5,h="top: 5px;"),"left"===$.horizontal&&o(5,h=`${h} right: -32px;`),o(5,h=`${h} max-height: ${$.verticalSpaceLeft}px;`)),17&e.$$.dirty[0]&&w&&(w.length<=3&&o(12,m=[...w]),o(12,m=g?[...w]:w.slice(0,3))),268435456&e.$$.dirty[0]&&o(16,r=v&&Dt(v)),268435456&e.$$.dirty[0]&&o(17,a=v&&s.includes(v.substring(0,2).toUpperCase()))},[w,x,E,T,g,h,C,d,u,p,k,L,m,f,I,A,r,a,i,l,c,M,function(e){const t=e.detail.selectedOption.value;o(7,d=t),C===ek.TRANSLATE&&R()},async function(){o(10,k=!1),await R()},O,N,D,P,v,y,b,_,S,$,function(t){wh.call(this,e,t)},()=>M(ek.TRANSLATE),()=>M(ek.WRITE),()=>P(),()=>T(),e=>{N(e.detail.selectedOption.value)},e=>{D(e.detail.selectedOption.value)},()=>o(10,k=!k),function(e){u=e,o(8,u)},function(e){p=e,o(9,p)},(e,t)=>O(e,t),()=>o(4,g=!g),function(e){Eh[e?"unshift":"push"]((()=>{f=e,o(13,f)}))}]}class iL extends Qh{constructor(e){super(),Jh(this,e,oL,nL,yg,{element:31,detectedLanguage:28,isMoreThanOneSentence:29,alternatives:0,alternativesHtml:30,error:2,mode:32,close:3,initialTargetLang:1,mostSpace:33},null,[-1,-1])}}function rL(e){let t,n,o,i,r,s;const a=[aL,sL],l=[];function c(e,t){return e[2]?0:1}n=c(e),o=l[n]=a[n](e);let d=e[7]&&cL(e);return{c(){t=Wg("div"),o.c(),i=Gg(),r=Wg("div"),d&&d.c(),Xg(t,"class","icon-container svelte-1695l6u"),Xg(t,"dir",Bt()),Xg(t,"data-qa","input-selection-trigger"),Xg(r,"class","popup svelte-1695l6u")},m(o,a){zg(o,t,a),l[n].m(t,null),e[18](t),zg(o,i,a),zg(o,r,a),d&&d.m(r,null),s=!0},p(e,i){let s=n;n=c(e),n===s?l[n].p(e,i):(Uh(),Fh(l[s],1,1,(()=>{l[s]=null})),zh(),o=l[n],o?o.p(e,i):(o=l[n]=a[n](e),o.c()),Hh(o,1),o.m(t,null)),e[7]?d?(d.p(e,i),128&i&&Hh(d,1)):(d=cL(e),d.c(),Hh(d,1),d.m(r,null)):d&&(Uh(),Fh(d,1,1,(()=>{d=null})),zh())},i(e){s||(Hh(o),Hh(d),s=!0)},o(e){Fh(o),Fh(d),s=!1},d(o){o&&(Hg(t),Hg(i),Hg(r)),l[n].d(),e[18](null),d&&d.d()}}}function sL(e){let t,n;return t=new h_({props:{tooltip:chrome.i18n.getMessage("input_selection_see_alternatives_icon_trigger"),showProShield:Ke(e[3],ye.WRITE),$$slots:{default:[lL]},$$scope:{ctx:e}}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};8&n&&(o.showProShield=Ke(e[3],ye.WRITE)),524288&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function aL(e){let t,n;return t=new eS({props:{small:!0}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p:mg,i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function lL(e){let t,n,o;return{c(){t=Wg("div"),Xg(t,"class","dl-logo svelte-1695l6u")},m(i,r){zg(i,t,r),n||(o=[Yg(t,"click",Kg(Zg(e[14]))),Yg(t,"mouseup",Kg(Zg(e[16]))),Yg(t,"mousedown",Kg(Zg(e[17])))],n=!0)},p:mg,d(e){e&&Hg(t),n=!1,_g(o)}}}function cL(e){let t,n;return t=new iL({props:{element:e[0],detectedLanguage:e[5],isMoreThanOneSentence:e[6],mode:e[8],alternatives:e[9],alternativesHtml:e[10],mostSpace:e[4],error:e[12],close:e[15],initialTargetLang:e[11]}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.element=e[0]),32&n&&(o.detectedLanguage=e[5]),64&n&&(o.isMoreThanOneSentence=e[6]),256&n&&(o.mode=e[8]),512&n&&(o.alternatives=e[9]),1024&n&&(o.alternativesHtml=e[10]),16&n&&(o.mostSpace=e[4]),4096&n&&(o.error=e[12]),2048&n&&(o.initialTargetLang=e[11]),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function dL(e){let t,n,o=!e[13]&&rL(e);return{c(){o&&o.c(),t=Vg()},m(e,i){o&&o.m(e,i),zg(e,t,i),n=!0},p(e,[n]){e[13]?o&&(Uh(),Fh(o,1,1,(()=>{o=null})),zh()):o?(o.p(e,n),8192&n&&Hh(o,1)):(o=rL(e),o.c(),Hh(o,1),o.m(t.parentNode,t))},i(e){n||(Hh(o),n=!0)},o(e){Fh(o),n=!1},d(e){e&&Hg(t),o&&o.d(e)}}}function uL(e,n,o){let i,r;bg(e,nf,(e=>o(3,r=e))),vh("deepl_settings",nf),vh("text_direction",Bt());let s,a,l,c,d,u,p,{element:m}=n,g={vertical:"bottom",horizontal:"right"},h=!1,f=ek.TRANSLATE,_="EN-GB";return e.$$set=e=>{"element"in e&&o(0,m=e.element)},e.$$.update=()=>{6&e.$$.dirty&&!u&&s&&o(4,g=function(e){if(!e)return void console.error("No element provided");const t=e.getBoundingClientRect(),n=window.innerWidth,o=window.innerHeight,i={top:t.top,right:n-t.right,bottom:o-t.bottom,left:t.left};return{vertical:i.top>i.bottom?"top":"bottom",horizontal:i.left>i.right?"left":"right",verticalSpaceLeft:i.top>i.bottom?i.top:i.bottom}}(s)),8&e.$$.dirty&&o(13,i=!r.enableInputTranslation||IE(window.location.host,window.location.href)||r.blacklistDomainsForWriting.includes(window.location.host))},[m,s,u,r,g,a,l,h,f,c,d,_,p,i,async function(){try{t({action:"dlTrackSeeAlternativesClicked"})}catch(e){console.error(e)}if(!h){o(2,u=!0);try{const e=await pk(m);o(5,a=e.detected_source_language),o(6,l=e.sentences.length>1),o(11,_=r.targetLanguageUserInput?r.targetLanguageUserInput:"EN-GB"),o(8,f=_.substring(0,2).toUpperCase()===a.substring(0,2).toUpperCase()?ek.WRITE:ek.TRANSLATE);const t={element:m,mode:f,targetLang:_},n=await mk(t);o(9,c=n.alternatives),o(10,d=n.alternativesHtml)}catch(e){o(12,p=e)}o(2,u=!1)}o(7,h=!h)},function(){o(7,h=!1)},function(t){wh.call(this,e,t)},function(t){wh.call(this,e,t)},function(e){Eh[e?"unshift":"push"]((()=>{s=e,o(1,s)}))}]}class pL extends Qh{constructor(e){super(),Jh(this,e,uL,dL,yg,{element:0})}}class mL{static HTML_TAG_NAME="deepl-input-selection-trigger";static createElement=(e=document)=>{const t=e.createElement(mL.HTML_TAG_NAME),n=new mL(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t.addChangeEvents=n.addChangeEvents,t.removeChangeEvents=n.removeChangeEvents,t.repositionContainer=n.repositionContainer,t.cachedReposition=n.cachedReposition,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.container=document.createElement("div"),this.domElement.mainComponent,this.domElement.cachedMouseEvent,this.domElement.cachedElement=null;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowRoot.addEventListener("mouseup",(e=>{e.stopPropagation(),e.stopImmediatePropagation()})),this.domElement.shadowRoot.addEventListener("click",(e=>{e.stopPropagation(),e.stopImmediatePropagation()})),this.domElement.shadowRoot.addEventListener("mousedown",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=(e,t)=>{this.domElement.shadowContainer&&this.domElement.shadowContainer.childElementCount>0&&this.domElement.cleanupDOM(),this.domElement.cachedElement=e,this.domElement.repositionContainer(t,e),this.domElement.shadowContainer.appendChild(this.domElement.container),this.domElement.mainComponent=new pL({target:this.domElement.container,props:{element:e}}),this.domElement.addChangeEvents(),this.domElement.cachedMouseEvent=t};repositionContainer=(e,t)=>{if(window.getSelection()&&!window.getSelection().toString())return void this.domElement.cleanupDOM();const{deepl_inline_ui:n}=D,o=n.z_index+500;let i;i="TEXTAREA"===t.tagName?BE(t):NE();let r=`position: absolute; top: 0px; left: 0px; width: 100%; z-index: ${o}`,s=`position: absolute; z-index: ${o};`;this.domElement.shadowContainer.style.cssText=r,this.domElement.container.style.cssText=s;const a=XC(e,i);this.domElement.container.style.top=`${parseInt(a.containerStyleTop)}px`,this.domElement.container.style.left=`${parseInt(a.containerStyleLeft)}px`};cachedReposition=()=>this.domElement.repositionContainer(this.domElement.cachedMouseEvent,this.domElement.cachedElement);addChangeEvents=()=>{window.addEventListener("scroll",this.domElement.cachedReposition),window.addEventListener("resize",this.domElement.cachedReposition)};removeChangeEvents=()=>{window.removeEventListener("scroll",this.domElement.cachedReposition),window.removeEventListener("resize",this.domElement.cachedReposition)};cleanupDOM=()=>{this.domElement.container.remove(),this.domElement.shadowContainer.remove(),this.domElement.shadowContainer=document.createElement("div"),this.domElement.container=document.createElement("div"),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy(),this.domElement.removeChangeEvents()}}function gL(e){let t,n,o,i=dt(e[1])+"";return{c(){t=Wg("div"),Xg(t,"class","container svelte-1dicgbw")},m(r,s){zg(r,t,s),t.innerHTML=i,n||(o=Yg(t,"click",e[0]),n=!0)},p:mg,i:mg,o:mg,d(e){e&&Hg(t),n=!1,o()}}}function hL(e){return[function(){t({action:"dlExternalURLRedirect",payload:{destination:pv}}),t({action:"dlTrackUiAction",payload:{uiAction:H}})},chrome.i18n.getMessage("notification_keyboard_shortcut_hint",`<span style="color: #006494; text-decoration: underline;">${chrome.i18n.getMessage("notification_keyboard_shortcut_hint_placeholder")}</span>`)]}class fL extends Qh{constructor(e){super(),Jh(this,e,hL,gL,yg,{})}}function _L(e){let t,n,o,i=dt(e[0])+"";return{c(){t=Wg("div"),Xg(t,"class","container svelte-1dicgbw"),Xg(t,"data-qa","deepl-notification-open-settings-page-writing-link")},m(r,s){zg(r,t,s),t.innerHTML=i,n||(o=Yg(t,"click",e[1]),n=!0)},p(e,[n]){1&n&&i!==(i=dt(e[0])+"")&&(t.innerHTML=i)},i:mg,o:mg,d(e){e&&Hg(t),n=!1,o()}}}function vL(e,n,o){let{options:i}=n,r=i?.settingsPageURL?i?.settingsPageURL:tS.settings_page;let s="",a=i?.currentDomain?i.currentDomain:"";switch(i.saveAction){case G.disableEverywhere:s=chrome.i18n.getMessage("notification_input_translation_disabled_everywhere",`<span style="text-decoration: underline;">${chrome.i18n.getMessage("notification_input_translation_link_to_settings_placeholder")}</span>`);break;case G.disablePerSite:s=chrome.i18n.getMessage("notification_input_translation_disabled_per_site",[a,`<span style="text-decoration: underline;">${chrome.i18n.getMessage("notification_input_translation_link_to_settings_placeholder")}</span>`])}return e.$$set=e=>{"options"in e&&o(2,i=e.options)},[s,function(){t({action:"dlOpenInternalPage",payload:{destination:r}})},i]}class yL extends Qh{constructor(e){super(),Jh(this,e,vL,_L,yg,{options:2})}}function wL(e){let t,n,o,i=dt(e[0])+"";return{c(){t=Wg("div"),Xg(t,"class","container svelte-1dicgbw"),Xg(t,"data-qa","deepl-notification-open-settings-page-reading-link")},m(r,s){zg(r,t,s),t.innerHTML=i,n||(o=Yg(t,"click",e[1]),n=!0)},p(e,[n]){1&n&&i!==(i=dt(e[0])+"")&&(t.innerHTML=i)},i:mg,o:mg,d(e){e&&Hg(t),n=!1,o()}}}function bL(e,n,o){let{options:i}=n,r=i?.settingsPageURL?i?.settingsPageURL:tS.settings_page;let s="",a=i?.currentDomain?i.currentDomain:"";switch(i.saveAction){case G.disableEverywhere:s=chrome.i18n.getMessage("notification_inline_translation_disabled_everywhere",`<span style="text-decoration: underline;">${chrome.i18n.getMessage("notification_inline_translation_link_to_settings_placeholder")}</span>`);break;case G.disablePerSite:s=chrome.i18n.getMessage("notification_inline_translation_disabled_per_site",[a,`<span style="text-decoration: underline;">${chrome.i18n.getMessage("notification_inline_translation_link_to_settings_placeholder")}</span>`])}return e.$$set=e=>{"options"in e&&o(2,i=e.options)},[s,function(){t({action:"dlOpenInternalPage",payload:{destination:r}})},i]}class EL extends Qh{constructor(e){super(),Jh(this,e,bL,wL,yg,{options:2})}}function SL(e){let t,n,o;return{c(){t=Wg("div"),t.textContent=`${chrome.i18n.getMessage("ui_notification_fpt_hide")}`,Xg(t,"class","container svelte-1dicgbw"),Xg(t,"data-qa","deepl-notification-open-settings-page-reading-link")},m(i,r){zg(i,t,r),n||(o=Yg(t,"click",e[0]),n=!0)},p:mg,i:mg,o:mg,d(e){e&&Hg(t),n=!1,o()}}}function TL(e){return[function(){t({action:"dlOpenInternalPage",payload:{destination:tS.settings_page}})}]}class xL extends Qh{constructor(e){super(),Jh(this,e,TL,SL,yg,{})}}function $L(e){let t;return{c(){t=Wg("div"),t.textContent=`${chrome.i18n.getMessage("onboarding_account_successfully_created")}`,Xg(t,"class","dl-account-created svelte-nuwktw")},m(e,n){zg(e,t,n)},p:mg,i:mg,o:mg,d(e){e&&Hg(t)}}}class CL extends Qh{constructor(e){super(),Jh(this,e,null,$L,yg,{})}}function kL(e){let t;return{c(){t=Wg("div"),t.textContent=`${chrome.i18n.getMessage("onboarding_successful_login_notification")}`,Xg(t,"class","dl-account-created svelte-nuwktw")},m(e,n){zg(e,t,n)},p:mg,i:mg,o:mg,d(e){e&&Hg(t)}}}class LL extends Qh{constructor(e){super(),Jh(this,e,null,kL,yg,{})}}function IL(e){let t,n,o,i;return{c(){t=Wg("div"),n=Wg("span"),n.textContent=`${chrome.i18n.getMessage("ui_gslides_unsaved_asset_warning_main")}`,o=Gg(),i=Wg("span"),i.textContent=`${chrome.i18n.getMessage("ui_gslides_unsaved_asset_warning_explanation")}`,Xg(n,"class","main-text svelte-18of7gm"),Xg(t,"class","dl-notification-gslides-prevent-asset-loss")},m(e,r){zg(e,t,r),Pg(t,n),Pg(t,o),Pg(t,i)},p:mg,i:mg,o:mg,d(e){e&&Hg(t)}}}class AL extends Qh{constructor(e){super(),Jh(this,e,null,IL,yg,{})}}function ML(e){let t,n,o,i,r,s,a,l,c;return{c(){t=Wg("div"),n=Wg("div"),n.textContent=`${chrome.i18n.getMessage("notification_ads_ms_office_headline")}`,o=Gg(),i=Wg("div"),i.textContent=`${chrome.i18n.getMessage("notification_ads_ms_office_text")}`,r=Gg(),s=Wg("div"),a=Wg("div"),a.textContent=`${chrome.i18n.getMessage("notification_ads_ms_office_learn_more")}`,Xg(n,"class","dl-ads-for-addins_headline svelte-drhmpk"),Xg(i,"class","dl-ads-for-addins_text"),Xg(a,"class","dl-ads-for-addins_button svelte-drhmpk"),Xg(s,"class","dl-ads-for-addins_wrapper svelte-drhmpk"),Xg(t,"class","dl-ads-for-addins svelte-drhmpk")},m(d,u){zg(d,t,u),Pg(t,n),Pg(t,o),Pg(t,i),Pg(t,r),Pg(t,s),Pg(s,a),l||(c=Yg(s,"click",e[0]),l=!0)},p:mg,i:mg,o:mg,d(e){e&&Hg(t),l=!1,c()}}}function RL(e){return[()=>{t({action:"dlExternalURLRedirect",payload:{destination:Sv,utmContent:"msaddin_ads_notification"}}),t({action:"dlTrackClicksOnAdsButton"})}]}class OL extends Qh{constructor(e){super(),Jh(this,e,RL,ML,yg,{})}}function NL(e){let t,n,o,i,r,s,a,l,c,d,u,p,m,g,h,f=e[4]==B.warning_theme&&DL();var _=e[5];function v(e,t){return{props:{options:e[1]}}}return _&&(l=ah(_,v(e))),{c(){t=Wg("div"),n=Wg("div"),o=Wg("button"),r=Gg(),s=Wg("div"),f&&f.c(),a=Gg(),l&&Zh(l.$$.fragment),Xg(o,"class",i="dl-close-icon "+e[4]+" svelte-np3z9s"),Xg(n,"class","header"),Xg(n,"notificationtheme",e[4]),Xg(s,"class",c="body "+e[4]+" svelte-np3z9s"),Xg(t,"class",d="container "+e[4]+" svelte-np3z9s"),Xg(t,"dir",Bt()),ih(t,"success",e[0]===P.accountSuccessfullyCreated||e[0]===P.successfullyLoggedIn)},m(i,c){zg(i,t,c),Pg(t,n),Pg(n,o),Pg(t,r),Pg(t,s),f&&f.m(s,null),Pg(s,a),l&&Kh(l,s,null),m=!0,g||(h=Yg(o,"click",(function(){vg(e[2])&&e[2].apply(this,arguments)})),g=!0)},p(r,u){if(e=r,(!m||16&u&&i!==(i="dl-close-icon "+e[4]+" svelte-np3z9s"))&&Xg(o,"class",i),(!m||16&u)&&Xg(n,"notificationtheme",e[4]),e[4]==B.warning_theme?f||(f=DL(),f.c(),f.m(s,a)):f&&(f.d(1),f=null),32&u&&_!==(_=e[5])){if(l){Uh();const e=l;Fh(e.$$.fragment,1,0,(()=>{Xh(e,1)})),zh()}_?(l=ah(_,v(e)),Zh(l.$$.fragment),Hh(l.$$.fragment,1),Kh(l,s,null)):l=null}else if(_){const t={};2&u&&(t.options=e[1]),l.$set(t)}(!m||16&u&&c!==(c="body "+e[4]+" svelte-np3z9s"))&&Xg(s,"class",c),(!m||16&u&&d!==(d="container "+e[4]+" svelte-np3z9s"))&&Xg(t,"class",d),(!m||17&u)&&ih(t,"success",e[0]===P.accountSuccessfullyCreated||e[0]===P.successfullyLoggedIn)},i(e){m||(l&&Hh(l.$$.fragment,e),kh((()=>{m&&(p&&p.end(1),u=jh(t,Of,{x:100,duration:1e3}),u.start())})),m=!0)},o(e){l&&Fh(l.$$.fragment,e),u&&u.invalidate(),p=qh(t,Of,{x:100,duration:1e3}),m=!1},d(e){e&&Hg(t),f&&f.d(),l&&Xh(l),e&&p&&p.end(),g=!1,h()}}}function DL(e){let t;return{c(){t=Wg("div"),t.innerHTML='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 6V10M10 14H10.01M19 10C19 14.9706 14.9706 19 10 19C5.02944 19 1 14.9706 1 10C1 5.02944 5.02944 1 10 1C14.9706 1 19 5.02944 19 10Z" stroke="#ECBA82" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',Xg(t,"class","icon-container")},m(e,n){zg(e,t,n)},d(e){e&&Hg(t)}}}function PL(e){let t,n,o=e[3]&&NL(e);return{c(){o&&o.c(),t=Vg()},m(e,i){o&&o.m(e,i),zg(e,t,i),n=!0},p(e,[n]){e[3]?o?(o.p(e,n),8&n&&Hh(o,1)):(o=NL(e),o.c(),Hh(o,1),o.m(t.parentNode,t)):o&&(Uh(),Fh(o,1,1,(()=>{o=null})),zh())},i(e){n||(Hh(o),n=!0)},o(e){Fh(o),n=!1},d(e){e&&Hg(t),o&&o.d(e)}}}function BL(e,t,n){let o,i;vh("text_direction",Bt());let{type:r}=t,{options:s}=t,{close:a}=t,l=!1;const c={[P.hintKeyboardShortcut]:fL,[P.inputTranslation]:yL,[P.inlineTranslation]:EL,[P.fullPageTranslation]:xL,[P.accountSuccessfullyCreated]:CL,[P.successfullyLoggedIn]:LL,[P.glidesPreventAssetLoss]:AL,[P.showAdsForMSAddins]:OL};return hh((()=>{setTimeout((()=>n(3,l=!0)),100),setTimeout((()=>n(3,l=!1)),10100),setTimeout((()=>a()),11100)})),e.$$set=e=>{"type"in e&&n(0,r=e.type),"options"in e&&n(1,s=e.options),"close"in e&&n(2,a=e.close)},e.$$.update=()=>{1&e.$$.dirty&&n(5,o=c[r]),2&e.$$.dirty&&n(4,i=B[s?.theme]?B[s?.theme]:"")},[r,s,a,l,i,o]}class UL extends Qh{constructor(e){super(),Jh(this,e,BL,PL,yg,{type:0,options:1,close:2})}}class zL{static HTML_TAG_NAME="deepl-notification";static createElement=(e=document)=>{const t=e.createElement(zL.HTML_TAG_NAME),n=new zL(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowContainer.addEventListener("click",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=(e,t)=>{const n="rtl"===Bt()?"left":"right";this.domElement.shadowContainer.style.cssText=`position: fixed; top: 20px; ${n}: 20px; z-index: ${D.deepl_inline_ui.z_index}`,this.domElement.mainComponent=new UL({target:this.domElement.shadowContainer,props:{type:e,options:t,close:this.cleanupDOM}})};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy(),this.domElement.remove()}}function HL(e){let t,n,o,i;return{c(){t=Wg("div"),n=Wg("div"),Xg(n,"class","close-button svelte-2cst7"),Xg(t,"class","close-button-container svelte-2cst7")},m(r,s){zg(r,t,s),Pg(t,n),o||(i=Yg(n,"click",(function(){vg(e[0])&&e[0].apply(this,arguments)})),o=!0)},p(t,n){e=t},d(e){e&&Hg(t),o=!1,i()}}}function FL(e){let t,n,o,i,r,s=e[0]&&HL(e);const a=e[2].default,l=Eg(a,e,e[1],null);return{c(){s&&s.c(),t=Gg(),n=Wg("div"),o=Wg("div"),i=Gg(),l&&l.c(),Xg(o,"class","logo svelte-2cst7"),Xg(n,"class","body svelte-2cst7")},m(e,a){s&&s.m(e,a),zg(e,t,a),zg(e,n,a),Pg(n,o),Pg(n,i),l&&l.m(n,null),r=!0},p(e,[n]){e[0]?s?s.p(e,n):(s=HL(e),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null),l&&l.p&&(!r||2&n)&&xg(l,a,e,e[1],r?Tg(a,e[1],n,null):$g(e[1]),null)},i(e){r||(Hh(l,e),r=!0)},o(e){Fh(l,e),r=!1},d(e){e&&(Hg(t),Hg(n)),s&&s.d(e),l&&l.d(e)}}}function WL(e,t,n){let{$$slots:o={},$$scope:i}=t,{onClose:r}=t;return e.$$set=e=>{"onClose"in e&&n(0,r=e.onClose),"$$scope"in e&&n(1,i=e.$$scope)},[r,i,o]}class jL extends Qh{constructor(e){super(),Jh(this,e,WL,FL,yg,{onClose:0})}}function qL(e){let t,n;return{c(){t=Wg("div"),n=qg(e[0]),Xg(t,"class","info-msg svelte-17qaccl")},m(e,o){zg(e,t,o),Pg(t,n)},p(e,[t]){1&t&&Jg(n,e[0])},i:mg,o:mg,d(e){e&&Hg(t)}}}function GL(e,t,n){let{message:o}=t;return e.$$set=e=>{"message"in e&&n(0,o=e.message)},[o]}class VL extends Qh{constructor(e){super(),Jh(this,e,GL,qL,yg,{message:0})}}function YL(e){let t,n,o,i,r;const s=e[7].default,a=Eg(s,e,e[6],null);return{c(){t=Wg("button"),a&&a.c(),Xg(t,"type","button"),Xg(t,"class",n=Cg(e[0])+" svelte-1wkb4xl"),t.disabled=e[1],Xg(t,"id",e[5]),Xg(t,"data-qa",e[4]),ih(t,"disabled",e[1]),ih(t,"font-size-sm","sm"===e[2]),ih(t,"padding-x-md","md"===e[3]),ih(t,"padding-x-none","none"===e[3])},m(n,s){zg(n,t,s),a&&a.m(t,null),o=!0,i||(r=[Yg(t,"click",e[8]),Yg(t,"mousedown",Kg(Zg(e[9])))],i=!0)},p(e,[i]){a&&a.p&&(!o||64&i)&&xg(a,s,e,e[6],o?Tg(s,e[6],i,null):$g(e[6]),null),(!o||1&i&&n!==(n=Cg(e[0])+" svelte-1wkb4xl"))&&Xg(t,"class",n),(!o||2&i)&&(t.disabled=e[1]),(!o||32&i)&&Xg(t,"id",e[5]),(!o||16&i)&&Xg(t,"data-qa",e[4]),(!o||3&i)&&ih(t,"disabled",e[1]),(!o||5&i)&&ih(t,"font-size-sm","sm"===e[2]),(!o||9&i)&&ih(t,"padding-x-md","md"===e[3]),(!o||9&i)&&ih(t,"padding-x-none","none"===e[3])},i(e){o||(Hh(a,e),o=!0)},o(e){Fh(a,e),o=!1},d(e){e&&Hg(t),a&&a.d(e),i=!1,_g(r)}}}function ZL(e,t,n){let{$$slots:o={},$$scope:i}=t,{className:r="button-primary"}=t,{disabled:s=!1}=t,{fontSize:a="default"}=t,{paddingX:l}=t,{dataQa:c="dl-button"}=t,{id:d=""}=t;return e.$$set=e=>{"className"in e&&n(0,r=e.className),"disabled"in e&&n(1,s=e.disabled),"fontSize"in e&&n(2,a=e.fontSize),"paddingX"in e&&n(3,l=e.paddingX),"dataQa"in e&&n(4,c=e.dataQa),"id"in e&&n(5,d=e.id),"$$scope"in e&&n(6,i=e.$$scope)},[r,s,a,l,c,d,i,o,function(t){wh.call(this,e,t)},function(t){wh.call(this,e,t)}]}class KL extends Qh{constructor(e){super(),Jh(this,e,ZL,YL,yg,{className:0,disabled:1,fontSize:2,paddingX:3,dataQa:4,id:5})}}function XL(e){let t,n=chrome.i18n.getMessage("ui_fpt_hide_cancel")+"";return{c(){t=qg(n)},m(e,n){zg(e,t,n)},p:mg,d(e){e&&Hg(t)}}}function JL(e){let t,n=chrome.i18n.getMessage("ui_fpt_hide_confirm")+"";return{c(){t=qg(n)},m(e,n){zg(e,t,n)},p:mg,d(e){e&&Hg(t)}}}function QL(e){let t,n,o,i,r,s,a,l,c,d,u,p,m,g,h,f,_,v,y,w,b,E,S,T,x,$,C,k,L,I,A,M,R;return C=new KL({props:{className:"button-link",paddingX:"none",$$slots:{default:[XL]},$$scope:{ctx:e}}}),C.$on("click",(function(){vg(e[0])&&e[0].apply(this,arguments)})),L=new KL({props:{className:"button-primary",$$slots:{default:[JL]},$$scope:{ctx:e}}}),L.$on("click",e[4]),A=function(e){let t;return{p(...n){t=n,t.forEach((t=>e.push(t)))},r(){t.forEach((t=>e.splice(e.indexOf(t),1)))}}}(e[7][0]),{c(){t=Wg("div"),n=Wg("p"),n.textContent=`${chrome.i18n.getMessage("ui_fpt_hide_heading")}`,o=Gg(),i=Wg("div"),r=Wg("div"),s=Wg("label"),a=Wg("span"),l=Wg("input"),c=Gg(),d=Wg("span"),d.textContent=`${chrome.i18n.getMessage("ui_fpt_hide_option_domain")}`,u=Gg(),p=Wg("div"),m=Wg("label"),g=Wg("span"),h=Wg("input"),f=Gg(),_=Wg("span"),_.textContent=`${chrome.i18n.getMessage("ui_fpt_hide_option_lang")}`,v=Gg(),y=Wg("div"),w=Wg("label"),b=Wg("span"),E=Wg("input"),S=Gg(),T=Wg("span"),T.textContent=`${chrome.i18n.getMessage("ui_fpt_hide_option_fpt")}`,x=Gg(),$=Wg("div"),Zh(C.$$.fragment),k=Gg(),Zh(L.$$.fragment),Xg(n,"class","font-bold svelte-1vpv55x"),Xg(l,"id","option-website"),Xg(l,"name","option"),Xg(l,"type","radio"),l.__value="website",Qg(l,l.__value),Xg(l,"class","svelte-1vpv55x"),Xg(d,"class","label svelte-1vpv55x"),Xg(s,"for","option-website"),Xg(s,"class","svelte-1vpv55x"),Xg(r,"class","option svelte-1vpv55x"),Xg(h,"id","option-lang"),Xg(h,"type","radio"),Xg(h,"name","option"),h.__value="lang",Qg(h,h.__value),Xg(h,"class","svelte-1vpv55x"),Xg(_,"class","label svelte-1vpv55x"),Xg(m,"for","option-lang"),Xg(m,"class","svelte-1vpv55x"),Xg(p,"class","option svelte-1vpv55x"),Xg(E,"id","option-fpt"),Xg(E,"type","radio"),Xg(E,"name","option"),E.__value="fpt",Qg(E,E.__value),Xg(E,"class","svelte-1vpv55x"),Xg(T,"class","label svelte-1vpv55x"),Xg(w,"for","option-fpt"),Xg(w,"class","svelte-1vpv55x"),Xg(y,"class","option svelte-1vpv55x"),Xg(i,"class","cancel-container svelte-1vpv55x"),Xg(t,"class","cancel-translation-body svelte-1vpv55x"),Xg($,"class","cancel-translation-footer svelte-1vpv55x"),A.p(l,h,E)},m(A,O){zg(A,t,O),Pg(t,n),Pg(t,o),Pg(t,i),Pg(i,r),Pg(r,s),Pg(s,a),Pg(a,l),l.checked=l.__value===e[1],Pg(s,c),Pg(s,d),Pg(i,u),Pg(i,p),Pg(p,m),Pg(m,g),Pg(g,h),h.checked=h.__value===e[1],Pg(m,f),Pg(m,_),Pg(i,v),Pg(i,y),Pg(y,w),Pg(w,b),Pg(b,E),E.checked=E.__value===e[1],Pg(w,S),Pg(w,T),zg(A,x,O),zg(A,$,O),Kh(C,$,null),Pg($,k),Kh(L,$,null),I=!0,M||(R=[Yg(l,"change",e[6]),Yg(h,"change",e[8]),Yg(E,"change",e[9])],M=!0)},p(t,[n]){e=t,2&n&&(l.checked=l.__value===e[1]),2&n&&(h.checked=h.__value===e[1]),2&n&&(E.checked=E.__value===e[1]);const o={};65536&n&&(o.$$scope={dirty:n,ctx:e}),C.$set(o);const i={};65536&n&&(i.$$scope={dirty:n,ctx:e}),L.$set(i)},i(e){I||(Hh(C.$$.fragment,e),Hh(L.$$.fragment,e),I=!0)},o(e){Fh(C.$$.fragment,e),Fh(L.$$.fragment,e),I=!1},d(e){e&&(Hg(t),Hg(x),Hg($)),Xh(C),Xh(L),A.r(),M=!1,_g(R)}}}function eI(e,n,o){let i,r;const s=yh("deepl_settings");bg(e,s,(e=>o(11,r=e)));const a=yh("deepl_website_settings");bg(e,a,(e=>o(10,i=e)));let{onClose:l}=n,{onCancel:d}=n,u="fpt";return e.$$set=e=>{"onClose"in e&&o(5,l=e.onClose),"onCancel"in e&&o(0,d=e.onCancel)},[d,u,s,a,()=>{const e={hideOption:void 0,sourceLang:i.websiteLanguage,domainName:i.hostname,uiLocation:DT(U.fptHideModal)};switch(u){case"website":kg(s,r.blacklistDomains=[...r.blacklistDomains,i.hostname],r),e.hideOption=C;break;case"lang":n=i.websiteLanguage,o=c,"EN"===n?(kg(s,r.languagesForTranslation={...r.languagesForTranslation,"EN-GB":o},r),kg(s,r.languagesForTranslation={...r.languagesForTranslation,"EN-US":o},r)):"PT"===n?(kg(s,r.languagesForTranslation={...r.languagesForTranslation,"PT-PT":o},r),kg(s,r.languagesForTranslation={...r.languagesForTranslation,"PT-BR":o},r)):"ZH"===n?(kg(s,r.languagesForTranslation={...r.languagesForTranslation,"ZH-CN":o},r),kg(s,r.languagesForTranslation={...r.languagesForTranslation,"ZH-HANT":o},r)):kg(s,r.languagesForTranslation={...r.languagesForTranslation,[n]:o},r),e.hideOption=k;break;default:e.hideOption=L,s.set({enableFullPageTranslation:!1})}var n,o;t({action:"dlSendNotification",payload:{type:P.fullPageTranslation,options:{theme:B.green_theme}}}),t({action:"dlTrackFptHide",payload:e}),l()},l,function(){u=this.__value,o(1,u)},[[]],function(){u=this.__value,o(1,u)},function(){u=this.__value,o(1,u)}]}class tI extends Qh{constructor(e){super(),Jh(this,e,eI,QL,yg,{onClose:5,onCancel:0})}}function nI(e,t,n){const o=e.slice();return o[17]=t[n],o}function oI(e,t,n){const o=e.slice();return o[17]=t[n],o}function iI(e,t,n){const o=e.slice();return o[17]=t[n],o}function rI(e,t,n){const o=e.slice();return o[17]=t[n],o}function sI(e,t,n){const o=e.slice();return o[17]=t[n],o}function aI(e){let t,n,o,i,r,s,a,l,c,d,u,p=chrome.i18n.getMessage("ui_fpt_hide_checkbox")+"";t=new jL({props:{onClose:e[0],$$slots:{default:[_I]},$$scope:{ctx:e}}});let m=e[6]&&vI(e);return{c(){Zh(t.$$.fragment),n=Gg(),m&&m.c(),o=Gg(),i=Wg("div"),r=Wg("label"),s=Wg("input"),a=Gg(),l=qg(p),Xg(s,"type","checkbox"),s.disabled=e[6],Xg(s,"class","svelte-6tzge"),Xg(r,"class","svelte-6tzge"),Xg(i,"class","footer svelte-6tzge"),ih(i,"hasError",e[6])},m(p,g){Kh(t,p,g),zg(p,n,g),m&&m.m(p,g),zg(p,o,g),zg(p,i,g),Pg(i,r),Pg(r,s),Pg(r,a),Pg(r,l),c=!0,d||(u=Yg(r,"click",e[15]),d=!0)},p(e,n){const r={};1&n&&(r.onClose=e[0]),268435476&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r),e[6]?m?(m.p(e,n),64&n&&Hh(m,1)):(m=vI(e),m.c(),Hh(m,1),m.m(o.parentNode,o)):m&&(Uh(),Fh(m,1,1,(()=>{m=null})),zh()),(!c||64&n)&&(s.disabled=e[6]),(!c||64&n)&&ih(i,"hasError",e[6])},i(e){c||(Hh(t.$$.fragment,e),Hh(m),c=!0)},o(e){Fh(t.$$.fragment,e),Fh(m),c=!1},d(e){e&&(Hg(n),Hg(o),Hg(i)),Xh(t,e),m&&m.d(e),d=!1,u()}}}function lI(e){let t,n,o,i;return t=new jL({props:{onClose:e[0]}}),o=new tI({props:{onClose:e[0],onCancel:e[13]}}),{c(){Zh(t.$$.fragment),n=Gg(),Zh(o.$$.fragment)},m(e,r){Kh(t,e,r),zg(e,n,r),Kh(o,e,r),i=!0},p(e,n){const i={};1&n&&(i.onClose=e[0]),t.$set(i);const r={};1&n&&(r.onClose=e[0]),8&n&&(r.onCancel=e[13]),o.$set(r)},i(e){i||(Hh(t.$$.fragment,e),Hh(o.$$.fragment,e),i=!0)},o(e){Fh(t.$$.fragment,e),Fh(o.$$.fragment,e),i=!1},d(e){e&&Hg(n),Xh(t,e),Xh(o,e)}}}function cI(e){let t,n;return t=new jL({props:{$$slots:{default:[NI]},$$scope:{ctx:e}}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};268435510&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function dI(e){let t,n;return t=new jL({props:{$$slots:{default:[zI]},$$scope:{ctx:e}}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};268435472&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function uI(e){let t,n;return t=new jL({props:{$$slots:{default:[HI]},$$scope:{ctx:e}}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};268435456&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function pI(e){let t,n;return t=new jL({props:{$$slots:{default:[FI]},$$scope:{ctx:e}}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};268435456&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function mI(e){let t,n;return t=new jL({props:{$$slots:{default:[WI]},$$scope:{ctx:e}}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};268435456&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function gI(e){let t,n;return t=new jL({props:{$$slots:{default:[jI]},$$scope:{ctx:e}}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};268435456&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function hI(e){let t,n;return t=new jL({props:{$$slots:{default:[qI]},$$scope:{ctx:e}}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};268435456&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function fI(e){let t;return{c(){t=Wg("span"),t.textContent=`${chrome.i18n.getMessage("ui_fpt_translate_button")}`,Xg(t,"class","svelte-6tzge")},m(e,n){zg(e,t,n)},p:mg,d(e){e&&Hg(t)}}}function _I(e){let t,n,o,i,r,s,a,l,c,d,u,p;return l=new Mw({props:{value:e[2].selectedTargetLanguage,variant:"alternate",alignRight:!1}}),l.$on("selection",e[14]),u=new KL({props:{className:"btn-primary",paddingX:"md",dataQa:"dl-button-translate-page",$$slots:{default:[fI]},$$scope:{ctx:e}}}),u.$on("click",e[10]),{c(){t=Wg("div"),n=Wg("div"),o=qg(e[4]),i=Gg(),r=Wg("div"),s=Gg(),a=Wg("div"),Zh(l.$$.fragment),c=Gg(),d=Wg("div"),Zh(u.$$.fragment),Xg(n,"class","website-lang svelte-6tzge"),Xg(r,"class","translate-to-arrow svelte-6tzge"),Xg(a,"class","language-switch svelte-6tzge"),Xg(t,"class","language-selection svelte-6tzge"),Xg(t,"dir",Bt()),Xg(d,"class","translate-button svelte-6tzge")},m(e,m){zg(e,t,m),Pg(t,n),Pg(n,o),Pg(t,i),Pg(t,r),Pg(t,s),Pg(t,a),Kh(l,a,null),zg(e,c,m),zg(e,d,m),Kh(u,d,null),p=!0},p(e,t){(!p||16&t)&&Jg(o,e[4]);const n={};4&t&&(n.value=e[2].selectedTargetLanguage),l.$set(n);const i={};268435456&t&&(i.$$scope={dirty:t,ctx:e}),u.$set(i)},i(e){p||(Hh(l.$$.fragment,e),Hh(u.$$.fragment,e),p=!0)},o(e){Fh(l.$$.fragment,e),Fh(u.$$.fragment,e),p=!1},d(e){e&&(Hg(t),Hg(c),Hg(d)),Xh(l),Xh(u)}}}function vI(e){let t,n,o;return n=new Cy({props:{error:e[1].error}}),{c(){t=Wg("div"),Zh(n.$$.fragment),Xg(t,"class","error-container svelte-6tzge")},m(e,i){zg(e,t,i),Kh(n,t,null),o=!0},p(e,t){const o={};2&t&&(o.error=e[1].error),n.$set(o)},i(e){o||(Hh(n.$$.fragment,e),o=!0)},o(e){Fh(n.$$.fragment,e),o=!1},d(e){e&&Hg(t),Xh(n)}}}function yI(e){let t,n=Vh(Bf(chrome.i18n.getMessage("ui_notice_no_translate_language",e[4]),["strong"])),o=[];for(let t=0;t<n.length;t+=1)o[t]=SI(oI(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=Vg()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);zg(e,t,n)},p(e,i){if(16&i){let r;for(n=Vh(Bf(chrome.i18n.getMessage("ui_notice_no_translate_language",e[4]),["strong"])),r=0;r<n.length;r+=1){const s=oI(e,n,r);o[r]?o[r].p(s,i):(o[r]=SI(s),o[r].c(),o[r].m(t.parentNode,t))}for(;r<o.length;r+=1)o[r].d(1);o.length=n.length}},d(e){e&&Hg(t),Fg(o,e)}}}function wI(e){let t;function n(e,t){return e[5]?xI:TI}let o=n(e),i=o(e);return{c(){i.c(),t=Vg()},m(e,n){i.m(e,n),zg(e,t,n)},p(e,r){o===(o=n(e))&&i?i.p(e,r):(i.d(1),i=o(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){e&&Hg(t),i.d(e)}}}function bI(e){let t,n=e[17].text+"";return{c(){t=qg(n)},m(e,n){zg(e,t,n)},p(e,o){16&o&&n!==(n=e[17].text+"")&&Jg(t,n)},d(e){e&&Hg(t)}}}function EI(e){let t,n,o=e[17].text+"";return{c(){t=Wg("strong"),n=qg(o),Xg(t,"class","svelte-6tzge")},m(e,o){zg(e,t,o),Pg(t,n)},p(e,t){16&t&&o!==(o=e[17].text+"")&&Jg(n,o)},d(e){e&&Hg(t)}}}function SI(e){let t;function n(e,t){return"strong"===e[17].block?EI:bI}let o=n(e),i=o(e);return{c(){i.c(),t=Vg()},m(e,n){i.m(e,n),zg(e,t,n)},p(e,r){o===(o=n(e))&&i?i.p(e,r):(i.d(1),i=o(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){e&&Hg(t),i.d(e)}}}function TI(e){let t,n=Vh(Bf(chrome.i18n.getMessage("ui_notice_no_translate_website",e[1].hostname),["strong"])),o=[];for(let t=0;t<n.length;t+=1)o[t]=kI(iI(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=Vg()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);zg(e,t,n)},p(e,i){if(2&i){let r;for(n=Vh(Bf(chrome.i18n.getMessage("ui_notice_no_translate_website",e[1].hostname),["strong"])),r=0;r<n.length;r+=1){const s=iI(e,n,r);o[r]?o[r].p(s,i):(o[r]=kI(s),o[r].c(),o[r].m(t.parentNode,t))}for(;r<o.length;r+=1)o[r].d(1);o.length=n.length}},d(e){e&&Hg(t),Fg(o,e)}}}function xI(e){let t,n=Vh(Bf(chrome.i18n.getMessage("ui_notice_no_translate_website_and_language",[e[1].hostname,e[4]]),["strong"])),o=[];for(let t=0;t<n.length;t+=1)o[t]=AI(rI(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=Vg()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);zg(e,t,n)},p(e,i){if(18&i){let r;for(n=Vh(Bf(chrome.i18n.getMessage("ui_notice_no_translate_website_and_language",[e[1].hostname,e[4]]),["strong"])),r=0;r<n.length;r+=1){const s=rI(e,n,r);o[r]?o[r].p(s,i):(o[r]=AI(s),o[r].c(),o[r].m(t.parentNode,t))}for(;r<o.length;r+=1)o[r].d(1);o.length=n.length}},d(e){e&&Hg(t),Fg(o,e)}}}function $I(e){let t,n=e[17].text+"";return{c(){t=qg(n)},m(e,n){zg(e,t,n)},p(e,o){2&o&&n!==(n=e[17].text+"")&&Jg(t,n)},d(e){e&&Hg(t)}}}function CI(e){let t,n,o=e[17].text+"";return{c(){t=Wg("strong"),n=qg(o),Xg(t,"class","svelte-6tzge")},m(e,o){zg(e,t,o),Pg(t,n)},p(e,t){2&t&&o!==(o=e[17].text+"")&&Jg(n,o)},d(e){e&&Hg(t)}}}function kI(e){let t;function n(e,t){return"strong"===e[17].block?CI:$I}let o=n(e),i=o(e);return{c(){i.c(),t=Vg()},m(e,n){i.m(e,n),zg(e,t,n)},p(e,r){o===(o=n(e))&&i?i.p(e,r):(i.d(1),i=o(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){e&&Hg(t),i.d(e)}}}function LI(e){let t,n=e[17].text+"";return{c(){t=qg(n)},m(e,n){zg(e,t,n)},p(e,o){18&o&&n!==(n=e[17].text+"")&&Jg(t,n)},d(e){e&&Hg(t)}}}function II(e){let t,n,o=e[17].text+"";return{c(){t=Wg("strong"),n=qg(o),Xg(t,"class","svelte-6tzge")},m(e,o){zg(e,t,o),Pg(t,n)},p(e,t){18&t&&o!==(o=e[17].text+"")&&Jg(n,o)},d(e){e&&Hg(t)}}}function AI(e){let t;function n(e,t){return"strong"===e[17].block?II:LI}let o=n(e),i=o(e);return{c(){i.c(),t=Vg()},m(e,n){i.m(e,n),zg(e,t,n)},p(e,r){o===(o=n(e))&&i?i.p(e,r):(i.d(1),i=o(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){e&&Hg(t),i.d(e)}}}function MI(e){let t,n=e[17].text+"";return{c(){t=qg(n)},m(e,n){zg(e,t,n)},p:mg,d(e){e&&Hg(t)}}}function RI(e){let t,n,o;return{c(){t=Wg("span"),t.textContent=`${e[17].text}`,Xg(t,"class","link svelte-6tzge")},m(i,r){zg(i,t,r),n||(o=Yg(t,"click",e[9]),n=!0)},p:mg,d(e){e&&Hg(t),n=!1,o()}}}function OI(e){let t;let n=function(e,t){return"settingsLink"===e[17].block?RI:MI}(e),o=n(e);return{c(){o.c(),t=Vg()},m(e,n){o.m(e,n),zg(e,t,n)},p(e,t){o.p(e,t)},d(e){e&&Hg(t),o.d(e)}}}function NI(e){let t,n,o,i,r;function s(e,t){return 6&t&&(o=null),null==o&&(o=!!e[2].blacklistDomains.includes(e[1].hostname)),o?wI:e[5]?yI:void 0}let a=s(e,-1),l=a&&a(e),c=Vh(Bf(chrome.i18n.getMessage("ui_notice_no_translate_change_option"),["settingsLink"])),d=[];for(let t=0;t<c.length;t+=1)d[t]=OI(nI(e,c,t));return{c(){t=Wg("div"),n=Wg("p"),l&&l.c(),i=Gg(),r=Wg("p");for(let e=0;e<d.length;e+=1)d[e].c();Xg(n,"class","svelte-6tzge"),Xg(r,"class","svelte-6tzge")},m(e,o){zg(e,t,o),Pg(t,n),l&&l.m(n,null),Pg(t,i),Pg(t,r);for(let e=0;e<d.length;e+=1)d[e]&&d[e].m(r,null)},p(e,t){if(a===(a=s(e,t))&&l?l.p(e,t):(l&&l.d(1),l=a&&a(e),l&&(l.c(),l.m(n,null))),512&t){let n;for(c=Vh(Bf(chrome.i18n.getMessage("ui_notice_no_translate_change_option"),["settingsLink"])),n=0;n<c.length;n+=1){const o=nI(e,c,n);d[n]?d[n].p(o,t):(d[n]=OI(o),d[n].c(),d[n].m(r,null))}for(;n<d.length;n+=1)d[n].d(1);d.length=c.length}},d(e){e&&Hg(t),l&&l.d(),Fg(d,e)}}}function DI(e){let t,n=e[17].text+"";return{c(){t=qg(n)},m(e,n){zg(e,t,n)},p(e,o){16&o&&n!==(n=e[17].text+"")&&Jg(t,n)},d(e){e&&Hg(t)}}}function PI(e){let t,n,o=e[17].text+"";return{c(){t=Wg("strong"),n=qg(o),Xg(t,"class","svelte-6tzge")},m(e,o){zg(e,t,o),Pg(t,n)},p(e,t){16&t&&o!==(o=e[17].text+"")&&Jg(n,o)},d(e){e&&Hg(t)}}}function BI(e){let t;function n(e,t){return"strong"===e[17].block?PI:DI}let o=n(e),i=o(e);return{c(){i.c(),t=Vg()},m(e,n){i.m(e,n),zg(e,t,n)},p(e,r){o===(o=n(e))&&i?i.p(e,r):(i.d(1),i=o(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){e&&Hg(t),i.d(e)}}}function UI(e){let t,n=chrome.i18n.getMessage("full_page_translation_show_original")+"";return{c(){t=qg(n)},m(e,n){zg(e,t,n)},p:mg,d(e){e&&Hg(t)}}}function zI(e){let t,n,o,i,r,s,a=Vh(Bf(chrome.i18n.getMessage("ui_translated_automatically",e[4]),["strong"])),l=[];for(let t=0;t<a.length;t+=1)l[t]=BI(sI(e,a,t));return r=new KL({props:{className:"button-reload",$$slots:{default:[UI]},$$scope:{ctx:e}}}),r.$on("click",e[11]),{c(){t=Wg("div"),n=Wg("p");for(let e=0;e<l.length;e+=1)l[e].c();o=Gg(),i=Wg("p"),Zh(r.$$.fragment),Xg(n,"class","mb-none svelte-6tzge"),Xg(i,"class","svelte-6tzge")},m(e,a){zg(e,t,a),Pg(t,n);for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(n,null);Pg(t,o),Pg(t,i),Kh(r,i,null),s=!0},p(e,t){if(16&t){let o;for(a=Vh(Bf(chrome.i18n.getMessage("ui_translated_automatically",e[4]),["strong"])),o=0;o<a.length;o+=1){const i=sI(e,a,o);l[o]?l[o].p(i,t):(l[o]=BI(i),l[o].c(),l[o].m(n,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=a.length}const o={};268435456&t&&(o.$$scope={dirty:t,ctx:e}),r.$set(o)},i(e){s||(Hh(r.$$.fragment,e),s=!0)},o(e){Fh(r.$$.fragment,e),s=!1},d(e){e&&Hg(t),Fg(l,e),Xh(r)}}}function HI(e){let t;return{c(){t=Wg("p"),t.textContent=`${chrome.i18n.getMessage("full_page_translation_ongoing_translation")}`,Xg(t,"class","translation-in-progress svelte-6tzge")},m(e,n){zg(e,t,n)},p:mg,d(e){e&&Hg(t)}}}function FI(e){let t;return{c(){t=Wg("p"),t.textContent=`${chrome.i18n.getMessage("full_page_translation_auto_detect_lang")}`,Xg(t,"class","translation-in-progress svelte-6tzge")},m(e,n){zg(e,t,n)},p:mg,d(e){e&&Hg(t)}}}function WI(e){let t,n;return t=new VL({props:{message:chrome.i18n.getMessage("full_page_translation_info_google_translate")}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p:mg,i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function jI(e){let t,n;return t=new VL({props:{message:chrome.i18n.getMessage("full_page_translation_no_website_data")}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p:mg,i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function qI(e){let t,n,o;return n=new eS({}),{c(){t=Wg("div"),Zh(n.$$.fragment),Xg(t,"class","translation-in-progress svelte-6tzge")},m(e,i){zg(e,t,i),Kh(n,t,null),o=!0},p:mg,i(e){o||(Hh(n.$$.fragment,e),o=!0)},o(e){Fh(n.$$.fragment,e),o=!1},d(e){e&&Hg(t),Xh(n)}}}function GI(e){let t,n,o,i,r,s;const a=[hI,gI,mI,pI,uI,dI,cI,lI,aI],l=[];function c(e,t){return 2&t&&(n=null),38&t&&(o=null),null==e[1]?0:(null==n&&(n=!(0!==Object.keys(e[1]).length)),n?1:e[1].isGoogleTranslatedActive?2:e[1].translationState===d.ongoingAutoDetection?3:e[1].translationState===d.ongoingTranslation?4:e[1].translationState===d.isTranslationComplete?5:(null==o&&(o=!(!e[2].blacklistDomains.includes(e[1].hostname)&&!e[5])),o?6:e[3]?7:e[1].websiteLanguage?8:-1))}return~(i=c(e,-1))&&(r=l[i]=a[i](e)),{c(){t=Wg("div"),r&&r.c(),Xg(t,"class","full-page-translation svelte-6tzge")},m(e,n){zg(e,t,n),~i&&l[i].m(t,null),s=!0},p(e,[n]){let o=i;i=c(e,n),i===o?~i&&l[i].p(e,n):(r&&(Uh(),Fh(l[o],1,1,(()=>{l[o]=null})),zh()),~i?(r=l[i],r?r.p(e,n):(r=l[i]=a[i](e),r.c()),Hh(r,1),r.m(t,null)):r=null)},i(e){s||(Hh(r),s=!0)},o(e){Fh(r),s=!1},d(e){e&&Hg(t),~i&&l[i].d()}}}function VI(e,n,o){let i,r,s,a;const l=yh("deepl_settings");bg(e,l,(e=>o(2,a=e)));const u=yh("deepl_website_settings");bg(e,u,(e=>o(1,s=e)));let p=T,{onClose:m}=n;let g,h,f=!1;return e.$$set=e=>{"onClose"in e&&o(0,m=e.onClose)},e.$$.update=()=>{2&e.$$.dirty&&o(6,i=s&&s.error),6&e.$$.dirty&&o(5,r=Nt(s.websiteLanguage,a.languagesForTranslation,c)),2&e.$$.dirty&&s&&(s.isSupportedLanguage?o(4,g=chrome.i18n.getMessage(`supported_languages_${s.websiteLanguage}`)):o(4,g=chrome.i18n.getMessage("supported_languages_EN"))),4098&e.$$.dirty&&s&&s.hostname&&s.hostname!==h&&(o(12,h=s.hostname),t({action:"dlTrackExtensionOpenedEvent",payload:{domainName:h,extensionContext:p}}))},[m,s,a,f,g,r,i,l,u,function(){t({action:"dlOpenInternalPage",payload:{destination:tS.settings_page}})},function(){0==a.isTargetLanguageConfirmed&&l.set({isTargetLanguageConfirmed:!0}),bP(s.websiteLanguage,_)},()=>{u.update({translationState:d.showOriginal})},h,()=>{o(3,f=!1)},e=>l.set({selectedTargetLanguage:e.detail.selectedOption.value,isTargetLanguageConfirmed:!0,regionalVariant:e.detail.selectedOption.regionalVariant}),()=>{i||o(3,f=!f)}]}class YI extends Qh{constructor(e){super(),Jh(this,e,VI,GI,yg,{onClose:0})}}function ZI(e){let t,n,o;return n=new YI({props:{onClose:e[0]}}),{c(){t=Wg("div"),Zh(n.$$.fragment),Xg(t,"class","app-popup svelte-1x9ra34"),Xg(t,"style",`z-index: ${e[2].z_index}`),Xg(t,"dir",Bt())},m(e,i){zg(e,t,i),Kh(n,t,null),o=!0},p(e,t){const o={};1&t&&(o.onClose=e[0]),n.$set(o)},i(e){o||(Hh(n.$$.fragment,e),o=!0)},o(e){Fh(n.$$.fragment,e),o=!1},d(e){e&&Hg(t),Xh(n)}}}function KI(e){let t,n,o=e[3]()&&e[1]&&e[1].isValidUrlForPopup,i=o&&ZI(e);return{c(){i&&i.c(),t=Vg()},m(e,o){i&&i.m(e,o),zg(e,t,o),n=!0},p(e,[n]){2&n&&(o=e[3]()&&e[1]&&e[1].isValidUrlForPopup),o?i?(i.p(e,n),2&n&&Hh(i,1)):(i=ZI(e),i.c(),Hh(i,1),i.m(t.parentNode,t)):i&&(Uh(),Fh(i,1,1,(()=>{i=null})),zh())},i(e){n||(Hh(i),n=!0)},o(e){Fh(i),n=!1},d(e){e&&Hg(t),i&&i.d(e)}}}function XI(e,t,n){let o,i;bg(e,nf,(e=>n(4,o=e))),bg(e,yw,(e=>n(1,i=e))),vh("deepl_settings",nf),vh("deepl_website_settings",yw),vh("text_direction",Bt());let{onClose:r}=t;const{deepl_inline_ui:s}=D;return e.$$set=e=>{"onClose"in e&&n(0,r=e.onClose)},[r,i,s,function(){return Ke(o,ye.TRANSLATOR)}]}class JI extends Qh{constructor(e){super(),Jh(this,e,XI,KI,yg,{onClose:0})}}class QI{static HTML_TAG_NAME="deepl-page-load-popup";static createElement=(e=document)=>{const t=e.createElement(QI.HTML_TAG_NAME),n=new QI(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowContainer.addEventListener("click",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=()=>{this.domElement.mainComponent=new JI({target:this.domElement.shadowContainer,props:{onClose:this.cleanupDOM}})};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}function eA(e){let t,n,o,i;return{c(){t=Wg("button"),n=Wg("span"),Xg(n,"class","svelte-19tdlik"),Xg(t,"aria-label",e[3]?chrome.i18n.getMessage("toggle_off"):chrome.i18n.getMessage("toggle_on")),Xg(t,"class","switch svelte-19tdlik"),Xg(t,"data-testid","deepl-switch"),Xg(t,"data-qa",e[2]),ih(t,"checked",e[0]),ih(t,"disabled",e[1])},m(r,s){zg(r,t,s),Pg(t,n),o||(i=Yg(t,"click",e[3]),o=!0)},p(e,[n]){4&n&&Xg(t,"data-qa",e[2]),1&n&&ih(t,"checked",e[0]),2&n&&ih(t,"disabled",e[1])},i:mg,o:mg,d(e){e&&Hg(t),o=!1,i()}}}function tA(e,t,n){let{checked:o=!1}=t,{disabled:i=!1}=t,{qaRoot:r="dl-switch"}=t;const s=_h();return e.$$set=e=>{"checked"in e&&n(0,o=e.checked),"disabled"in e&&n(1,i=e.disabled),"qaRoot"in e&&n(2,r=e.qaRoot)},[o,i,r,function(){i||s("change",{checked:!o})}]}class nA extends Qh{constructor(e){super(),Jh(this,e,tA,eA,yg,{checked:0,disabled:1,qaRoot:2})}}function oA(e){let t,n,o,i,r,s,a,l,c,d,u=e[1]&&iA();return a=new nA({props:{checked:e[3].isGDocsEnabled}}),a.$on("change",e[8]),{c(){t=Wg("div"),u&&u.c(),n=Gg(),o=Wg("div"),i=Wg("div"),i.textContent=`${chrome.i18n.getMessage("ui_gdocs_setting_switch")}`,r=Gg(),s=Wg("div"),Zh(a.$$.fragment),Xg(i,"class","legend"),Xg(s,"class","switch svelte-8jz3zx"),Xg(o,"class","turn-on-off-panel svelte-8jz3zx"),Xg(t,"class","dl-gdocs-top-icon-modal svelte-8jz3zx"),eh(t,"left",e[2]+"px"),Xg(t,"dir",Bt())},m(p,m){zg(p,t,m),u&&u.m(t,null),Pg(t,n),Pg(t,o),Pg(o,i),Pg(o,r),Pg(o,s),Kh(a,s,null),l=!0,c||(d=[Lg(c_.call(null,t,{isShadow:!0})),Yg(t,"click_outside",e[9])],c=!0)},p(e,o){e[1]?u?u.p(e,o):(u=iA(),u.c(),u.m(t,n)):u&&(u.d(1),u=null);const i={};8&o&&(i.checked=e[3].isGDocsEnabled),a.$set(i),(!l||4&o)&&eh(t,"left",e[2]+"px")},i(e){l||(Hh(a.$$.fragment,e),l=!0)},o(e){Fh(a.$$.fragment,e),l=!1},d(e){e&&Hg(t),u&&u.d(),Xh(a),c=!1,_g(d)}}}function iA(e){let t,n,o,i,r,s,a,l,c,d,u=chrome.i18n.getMessage("ui_gdocs_welcome_usp1")+"",p=chrome.i18n.getMessage("ui_gdocs_welcome_usp2")+"",m=chrome.i18n.getMessage("ui_gdocs_welcome_usp3")+"";return{c(){t=Wg("div"),n=Wg("div"),o=Wg("p"),o.textContent=`${chrome.i18n.getMessage("ui_gdocs_welcome_title")}`,i=Gg(),r=Wg("div"),s=Wg("div"),a=Gg(),l=Wg("div"),c=Gg(),d=Wg("div"),Xg(o,"class","svelte-8jz3zx"),Xg(n,"class","header svelte-8jz3zx"),Xg(s,"class","ups-item svelte-8jz3zx"),Xg(l,"class","ups-item svelte-8jz3zx"),Xg(d,"class","ups-item svelte-8jz3zx"),Xg(r,"class","ups-list"),Xg(t,"class","onboarding svelte-8jz3zx")},m(e,g){zg(e,t,g),Pg(t,n),Pg(n,o),Pg(t,i),Pg(t,r),Pg(r,s),s.innerHTML=u,Pg(r,a),Pg(r,l),l.innerHTML=p,Pg(r,c),Pg(r,d),d.innerHTML=m},p:mg,d(e){e&&Hg(t)}}}function rA(e){let t,n,o,i,r,s,a=e[0]&&oA(e);return{c(){t=Wg("button"),n=Gg(),a&&a.c(),o=Vg(),Xg(t,"class","dl-gdocs-top-icon svelte-8jz3zx"),eh(t,"left",e[2]+"px"),ih(t,"onboarding-pending",!e[3].isGDocsOnboardingShown)},m(l,c){zg(l,t,c),zg(l,n,c),a&&a.m(l,c),zg(l,o,c),i=!0,r||(s=Yg(t,"click",e[7]),r=!0)},p(e,[n]){(!i||4&n)&&eh(t,"left",e[2]+"px"),(!i||8&n)&&ih(t,"onboarding-pending",!e[3].isGDocsOnboardingShown),e[0]?a?(a.p(e,n),1&n&&Hh(a,1)):(a=oA(e),a.c(),Hh(a,1),a.m(o.parentNode,o)):a&&(Uh(),Fh(a,1,1,(()=>{a=null})),zh())},i(e){i||(Hh(a),i=!0)},o(e){Fh(a),i=!1},d(e){e&&(Hg(t),Hg(n),Hg(o)),a&&a.d(e),r=!1,s()}}}function sA(e,n,o){let i;const r=yh("deepl_settings");bg(e,r,(e=>o(3,i=e)));let s,{registerTopToolbarIconCallbacks:a}=n,{clearTopToolbarIconCallbacks:l}=n,c=!1,d=!1;const u=()=>{const e=document.querySelector(".docs-titlebar-buttons #docs-presence-container"),t=null!=document.querySelector(".docs-titlebar-buttons-rtl");if(e){const n=e.getBoundingClientRect();o(2,s=t?o(2,s=n.left+40-32):n.left-40)}};hh((()=>{u(),a({repositionTopToolbarIcon:u})})),fh((()=>{l()}));return e.$$set=e=>{"registerTopToolbarIconCallbacks"in e&&o(5,a=e.registerTopToolbarIconCallbacks),"clearTopToolbarIconCallbacks"in e&&o(6,l=e.clearTopToolbarIconCallbacks)},e.$$.update=()=>{3&e.$$.dirty&&c&&d&&t({action:"dlTrackOnboardingModalShown",payload:{nicheIntegration:ie.gdocs}})},[c,d,s,i,r,a,l,()=>{o(0,c=!0),i.isGDocsOnboardingShown||(kg(r,i.isGDocsOnboardingShown=!0,i),o(1,d=!0))},e=>kg(r,i.isGDocsEnabled=e.detail.checked,i),()=>{o(1,d=!1),o(0,c=!1)}]}class aA extends Qh{constructor(e){super(),Jh(this,e,sA,rA,yg,{registerTopToolbarIconCallbacks:5,clearTopToolbarIconCallbacks:6})}}function lA(e){let t,n,o,i,r,s,a,l,c,d,u;o=new h_({props:{tooltip:e[4],showProShield:Ke(e[0],ye.TRANSLATOR),zIndex:"10000000000",$$slots:{default:[cA]},$$scope:{ctx:e}}});let p=e[3]&&dA(e);return a=new h_({props:{tooltip:chrome.i18n.getMessage("ui_gdocs_turn_off"),zIndex:"10000000000",$$slots:{default:[pA]},$$scope:{ctx:e}}}),{c(){t=Wg("div"),n=Wg("button"),Zh(o.$$.fragment),i=Gg(),p&&p.c(),r=Gg(),s=Wg("button"),Zh(a.$$.fragment),Xg(n,"class","dl-icon-circle dl-icon svelte-fyt1eq"),Xg(s,"class","dl-icon-circle dl-on-off-icon svelte-fyt1eq"),Xg(s,"data-qa","deepl-inline-translate-menu-icon"),Xg(t,"class","dl-gdocs-icon svelte-fyt1eq"),eh(t,"top",e[5].top),eh(t,"left",e[5].left),Xg(t,"dir",Bt()),ih(t,"has-deepl-write",e[3])},m(l,m){zg(l,t,m),Pg(t,n),Kh(o,n,null),Pg(t,i),p&&p.m(t,null),Pg(t,r),Pg(t,s),Kh(a,s,null),c=!0,d||(u=[Yg(n,"click",e[7]),Yg(n,"mouseenter",e[25]),Yg(s,"click",e[10]),Yg(s,"mouseenter",e[28])],d=!0)},p(e,n){const i={};16&n[0]&&(i.tooltip=e[4]),1&n[0]&&(i.showProShield=Ke(e[0],ye.TRANSLATOR)),33554432&n[1]&&(i.$$scope={dirty:n,ctx:e}),o.$set(i),e[3]?p?(p.p(e,n),8&n[0]&&Hh(p,1)):(p=dA(e),p.c(),Hh(p,1),p.m(t,r)):p&&(Uh(),Fh(p,1,1,(()=>{p=null})),zh());const s={};33554432&n[1]&&(s.$$scope={dirty:n,ctx:e}),a.$set(s),(!c||32&n[0])&&eh(t,"top",e[5].top),(!c||32&n[0])&&eh(t,"left",e[5].left),(!c||8&n[0])&&ih(t,"has-deepl-write",e[3])},i(e){c||(Hh(o.$$.fragment,e),Hh(p),Hh(a.$$.fragment,e),l||kh((()=>{l=jh(t,Rf,{x:-5,duration:300}),l.start()})),c=!0)},o(e){Fh(o.$$.fragment,e),Fh(p),Fh(a.$$.fragment,e),c=!1},d(e){e&&Hg(t),Xh(o),p&&p.d(),Xh(a),d=!1,_g(u)}}}function cA(e){let t;return{c(){t=Wg("span"),Xg(t,"class","svelte-fyt1eq")},m(e,n){zg(e,t,n)},p:mg,d(e){e&&Hg(t)}}}function dA(e){let t,n,o,i,r;return n=new h_({props:{tooltip:chrome.i18n.getMessage("ui_gdocs_deepl_write"),showProShield:Ke(e[0],ye.WRITE),zIndex:"10000000000",$$slots:{default:[uA]},$$scope:{ctx:e}}}),{c(){t=Wg("button"),Zh(n.$$.fragment),Xg(t,"class","dl-icon-circle dl-write-icon svelte-fyt1eq")},m(s,a){zg(s,t,a),Kh(n,t,null),o=!0,i||(r=[Yg(t,"click",e[26]),Yg(t,"mouseenter",e[27])],i=!0)},p(e,t){const o={};1&t[0]&&(o.showProShield=Ke(e[0],ye.WRITE)),33554432&t[1]&&(o.$$scope={dirty:t,ctx:e}),n.$set(o)},i(e){o||(Hh(n.$$.fragment,e),o=!0)},o(e){Fh(n.$$.fragment,e),o=!1},d(e){e&&Hg(t),Xh(n),i=!1,_g(r)}}}function uA(e){let t;return{c(){t=Wg("span"),Xg(t,"class","svelte-fyt1eq")},m(e,n){zg(e,t,n)},p:mg,d(e){e&&Hg(t)}}}function pA(e){let t;return{c(){t=Wg("span"),Xg(t,"class","svelte-fyt1eq")},m(e,n){zg(e,t,n)},p:mg,d(e){e&&Hg(t)}}}function mA(e){let t,n,o,i;t=new aA({props:{registerTopToolbarIconCallbacks:e[11],clearTopToolbarIconCallbacks:e[12]}});let r=e[6]&&!e[1]&&!e[2]&&lA(e);return{c(){Zh(t.$$.fragment),n=Gg(),r&&r.c(),o=Vg()},m(e,s){Kh(t,e,s),zg(e,n,s),r&&r.m(e,s),zg(e,o,s),i=!0},p(e,t){!e[6]||e[1]||e[2]?r&&(Uh(),Fh(r,1,1,(()=>{r=null})),zh()):r?(r.p(e,t),70&t[0]&&Hh(r,1)):(r=lA(e),r.c(),Hh(r,1),r.m(o.parentNode,o))},i(e){i||(Hh(t.$$.fragment,e),Hh(r),i=!0)},o(e){Fh(t.$$.fragment,e),Fh(r),i=!1},d(e){e&&(Hg(n),Hg(o)),Xh(t,e),r&&r.d(e)}}}function gA(e,n,o){let i,r;bg(e,nf,(e=>o(0,r=e))),vh("deepl_settings",nf),vh("deepl_website_settings",yw),vh("text_direction",Bt());let s,a,l,c,d,u,p,{replaceData:m}=n,{contentProcessBuildingBlocks:g}=n,{deeplWriteTrackingData:h={lang:"",sourceLength:0,targetLength:0,nicheIntegration:ie.gdocs,error:""}}=n,f=!0,_=!1,v="",y="",w=!1,b="",E={top:0,left:0};async function S(e,n,o){if("dlTriggerTranslationShortcut"===e.action)x(),t({action:"dlTrackUseOfShortcut",payload:{shortcutType:z,location:U.inlineTranslationTriggerIcon,nicheIntegration:ie.gdocs}}),o();return!0}const T=e=>{c=re.translate,e&&(d=e),mt()},x=()=>{T(r.selectedTargetLanguage)},$=()=>{c=re.write,mt()},C=()=>{const{shouldBeOutOfViewport:e,newPosition:{left:t,top:n}}=ft();e!==_&&o(2,_=e),o(5,E.left=`${Math.round(t)}px`,E),o(5,E.top=`${Math.round(n)}px`,E)};function k(e){t({action:"dlTrackIconHover",payload:{uiLocation:e,domainName:window.location.host,nicheIntegration:ie.gdocs}})}const L=()=>{s=setInterval((()=>{const e=gt(),n=!e.text;!n&&f&&C(),n&&!f&&(()=>{if(!r.isInlineHighlighterShown){nf.set({isInlineHighlighterShown:!0});try{t({action:"dltrackCloseInlineHighlighter",payload:{trigger:oe.outside_click}})}catch(e){console.error(e)}}})(),o(1,f=n),v!==e.text&&o(23,v=e.text)}),300)},I=()=>{const e=document.querySelector("#docs-instant-bubble");l=new MutationObserver((()=>{C()}));return l.observe(e,{attributes:!0,childList:!1,characterData:!1}),()=>l.unobserve()},A=async e=>{if(c&&("ClipboardEvent"===e.constructor.name||e.constructor.toString().includes("ClipboardEvent"))){switch(c){case re.translate:TP({event:e,targetLang:d});break;case re.write:xP({event:e,lang:y})}c=void 0}},M=()=>{L(),(()=>{const e=document.querySelector("#kix-appview");a=new MutationObserver((()=>{document.querySelector("#docs-instant-bubble")&&(C(),I())})),a.observe(e,{attributes:!1,childList:!0,characterData:!1})})(),(()=>{const e=new ResizeObserver((()=>{C(),u&&u()}));e.observe(document.body)})(),document.querySelector("#kix-appview .kix-appview-editor").addEventListener("scroll",C),(()=>{const{editable:e}=pt();e.addEventListener("copy",A)})()},R=()=>{a&&a.disconnect(),l&&l.disconnect(),s&&clearInterval(s),document.querySelector("#kix-appview .kix-appview-editor").removeEventListener("scroll",C),(()=>{const{editable:e}=pt();e.removeEventListener("copy",A)})()};hh((()=>{M(),chrome.runtime.onMessage.addListener(S),t({action:"dlCheckCommandShortcuts"}).then((e=>o(24,b=e?e.filter((e=>e.name==z))[0].shortcut:"")))})),fh((()=>{R()}));return e.$$set=e=>{"replaceData"in e&&o(14,m=e.replaceData),"contentProcessBuildingBlocks"in e&&o(13,g=e.contentProcessBuildingBlocks),"deeplWriteTrackingData"in e&&o(15,h=e.deeplWriteTrackingData)},e.$$.update=()=>{if(1&e.$$.dirty[0]&&o(6,i=r&&r.isGDocsEnabled),8388608&e.$$.dirty[0]&&(async e=>{const t=await Mt(e);y=t,o(3,w=Dt(y)&&!Je(r,ye.WRITE))})(v),16777216&e.$$.dirty[0]){let e=chrome.i18n.getMessage("ui_gdocs_translate_tooltip_2");o(4,p=b?`${e} (${b})`:e)}},[r,f,_,w,p,E,i,x,$,k,()=>{nf.set({isGDocsEnabled:!1}),t({action:"dlTrackCustomizationEnabledEvent",payload:{nicheIntegration:ie.gdocs,uiLocation:U.inlineTranslationTriggerIcon,customizationEnabled:!1}})},e=>{u=e.repositionTopToolbarIcon},()=>{u=void 0},g,m,h,e=>{o(13,g=e)},()=>g,()=>{m&&$t(m)},T,()=>{HP({eventType:Ee,...h})},()=>{HP({eventType:Se,...h})},e=>{switch(e){case Re:HP({eventType:Te,...h});break;case Oe:t({action:"dlTrackGDocsMaxCharExceededTryProClicked",payload:{sourceLang:h.lang,targetLang:h.lang,sourceLength:h.sourceLength}})}},v,b,()=>k(U.inlineTranslationTriggerIcon),()=>$(),()=>k(U.deeplWriteIcon),()=>k(U.inlineTranslationSettingsIcon)]}class hA extends Qh{constructor(e){super(),Jh(this,e,gA,mA,yg,{replaceData:14,contentProcessBuildingBlocks:13,deeplWriteTrackingData:15,setContentProcessBuildingBlocks:16,getContentProcessBuildingBlocks:17,applyReplacement:18,requestTranslation:19,trackDeeplWriteInsertCopy:20,trackDeeplWriteDiscardCopy:21,trackMaxCharExceeded:22},null,[-1,-1])}get setContentProcessBuildingBlocks(){return this.$$.ctx[16]}get getContentProcessBuildingBlocks(){return this.$$.ctx[17]}get applyReplacement(){return this.$$.ctx[18]}get requestTranslation(){return this.$$.ctx[19]}get trackDeeplWriteInsertCopy(){return this.$$.ctx[20]}get trackDeeplWriteDiscardCopy(){return this.$$.ctx[21]}get trackMaxCharExceeded(){return this.$$.ctx[22]}}class fA{static HTML_TAG_NAME="deepl-gdocs-icon";static createElement=(e=document)=>{const t=e.createElement(fA.HTML_TAG_NAME),n=new fA(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t.setReplaceData=n.setReplaceData,t.applyReplacement=n.applyReplacement,t.requestNewTranslation=n.requestNewTranslation,t.setDeeplWriteTrackingData=n.setDeeplWriteTrackingData,t.trackDeeplWriteInsertCopy=n.trackDeeplWriteInsertCopy,t.trackDeeplWriteDiscardCopy=n.trackDeeplWriteDiscardCopy,t.trackMaxCharExceeded=n.trackMaxCharExceeded,t.setContentProcessBuildingBlocks=n.setContentProcessBuildingBlocks,t.getContentProcessBuildingBlocks=n.getContentProcessBuildingBlocks,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowRoot.addEventListener("mouseup",(e=>{e.stopPropagation(),e.stopImmediatePropagation()})),this.domElement.shadowRoot.addEventListener("mousedown",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=()=>{this.domElement.mainComponent=new hA({target:this.domElement.shadowContainer,props:{onClose:this.domElement.cleanupDOM}})};setReplaceData=e=>{this.domElement.mainComponent.$$set({replaceData:e})};setDeeplWriteTrackingData=e=>{this.domElement.mainComponent.$$set({deeplWriteTrackingData:e})};trackDeeplWriteInsertCopy=()=>this.domElement.mainComponent.trackDeeplWriteInsertCopy();trackDeeplWriteDiscardCopy=()=>this.domElement.mainComponent.trackDeeplWriteDiscardCopy();trackMaxCharExceeded=e=>this.domElement.mainComponent.trackMaxCharExceeded(e);applyReplacement=()=>{this.domElement.mainComponent.applyReplacement()};requestNewTranslation=e=>{this.domElement.mainComponent.requestTranslation(e)};setContentProcessBuildingBlocks=e=>this.domElement.mainComponent.setContentProcessBuildingBlocks(e);getContentProcessBuildingBlocks=()=>this.domElement.mainComponent.getContentProcessBuildingBlocks();cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}function _A(e){let t,n;return t=new gx({props:{size:16,marginStart:8,alternateColor:"white"}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function vA(e){let t,n;return t=new gx({props:{size:16,marginStart:8,alternateColor:"white"}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function yA(e){let t,n,o,i,r,s,a,l=chrome.i18n.getMessage("ui_gslides_write_cta")+"",c=Ke(e[4],ye.TRANSLATOR),d=c&&vA();return{c(){t=Wg("button"),n=qg(l),o=Gg(),d&&d.c(),Xg(t,"class","action-button svelte-c2z0h2"),t.disabled=i=!Dt(e[3])||Je(e[4],ye.WRITE)},m(i,l){zg(i,t,l),Pg(t,n),Pg(t,o),d&&d.m(t,null),r=!0,s||(a=Yg(t,"click",(function(){vg(e[1])&&e[1].apply(this,arguments)})),s=!0)},p(n,o){e=n,16&o&&(c=Ke(e[4],ye.TRANSLATOR)),c?d?16&o&&Hh(d,1):(d=vA(),d.c(),Hh(d,1),d.m(t,null)):d&&(Uh(),Fh(d,1,1,(()=>{d=null})),zh()),(!r||24&o&&i!==(i=!Dt(e[3])||Je(e[4],ye.WRITE)))&&(t.disabled=i)},i(e){r||(Hh(d),r=!0)},o(e){Fh(d),r=!1},d(e){e&&Hg(t),d&&d.d(),s=!1,a()}}}function wA(e){let t,n,o,i,r,s,a,l,c,d,u,p,m,g,h,f,_,v,y,w,b,E=chrome.i18n.getMessage("ui_gslides_translate_cta")+"",S=Ke(e[4],ye.TRANSLATOR);s=new Mw({props:{disabled:e[2],websiteSettings:e[6],value:e[3],showSortCode:!1,showRegionalVariants:!1,extraPadding:!0}}),s.$on("selection",e[10]),u=new Mw({props:{disabled:e[2],websiteSettings:e[6],value:e[4].selectedTargetLanguage,extraPadding:!0}}),u.$on("selection",e[11]);let T=S&&_A();return v=new h_({props:{tooltip:Je(e[4],ye.WRITE)?chrome.i18n.getMessage("input_translation_tooltip_improve_disabled_by_admin"):chrome.i18n.getMessage("input_translation_tooltip_improve_supported_lang"),zIndex:"10000000000",multiline:!0,$$slots:{default:[yA]},$$scope:{ctx:e}}}),{c(){t=Wg("div"),n=Wg("div"),o=Wg("p"),o.textContent=`${chrome.i18n.getMessage("ui_gslides_translate_from")}`,i=Gg(),r=Wg("div"),Zh(s.$$.fragment),a=Gg(),l=Wg("p"),l.textContent=`${chrome.i18n.getMessage("ui_gslides_translate_into")}`,c=Gg(),d=Wg("div"),Zh(u.$$.fragment),p=Gg(),m=Wg("button"),g=qg(E),h=Gg(),T&&T.c(),f=Gg(),_=Wg("div"),Zh(v.$$.fragment),Xg(o,"class","svelte-c2z0h2"),Xg(r,"class","dropdown svelte-c2z0h2"),Xg(l,"class","svelte-c2z0h2"),Xg(d,"class","dropdown svelte-c2z0h2"),Xg(m,"class","action-button svelte-c2z0h2"),Xg(n,"class","translate-container svelte-c2z0h2"),Xg(_,"class","write-container svelte-c2z0h2"),Xg(t,"class","dl-gslides-toolbar svelte-c2z0h2")},m(E,S){zg(E,t,S),Pg(t,n),Pg(n,o),Pg(n,i),Pg(n,r),Kh(s,r,null),Pg(n,a),Pg(n,l),Pg(n,c),Pg(n,d),Kh(u,d,null),Pg(n,p),Pg(n,m),Pg(m,g),Pg(m,h),T&&T.m(m,null),Pg(t,f),Pg(t,_),Kh(v,_,null),y=!0,w||(b=Yg(m,"click",(function(){vg(e[0])&&e[0].apply(this,arguments)})),w=!0)},p(t,[n]){e=t;const o={};4&n&&(o.disabled=e[2]),8&n&&(o.value=e[3]),s.$set(o);const i={};4&n&&(i.disabled=e[2]),16&n&&(i.value=e[4].selectedTargetLanguage),u.$set(i),16&n&&(S=Ke(e[4],ye.TRANSLATOR)),S?T?16&n&&Hh(T,1):(T=_A(),T.c(),Hh(T,1),T.m(m,null)):T&&(Uh(),Fh(T,1,1,(()=>{T=null})),zh());const r={};16&n&&(r.tooltip=Je(e[4],ye.WRITE)?chrome.i18n.getMessage("input_translation_tooltip_improve_disabled_by_admin"):chrome.i18n.getMessage("input_translation_tooltip_improve_supported_lang")),4122&n&&(r.$$scope={dirty:n,ctx:e}),v.$set(r)},i(e){y||(Hh(s.$$.fragment,e),Hh(u.$$.fragment,e),Hh(T),Hh(v.$$.fragment,e),y=!0)},o(e){Fh(s.$$.fragment,e),Fh(u.$$.fragment,e),Fh(T),Fh(v.$$.fragment,e),y=!1},d(e){e&&Hg(t),Xh(s),Xh(u),T&&T.d(),Xh(v),w=!1,b()}}}function bA(e,t,n){let o;const i=yh("deepl_settings");bg(e,i,(e=>n(4,o=e)));const r=yh("deepl_website_settings");let{onTranslateSelection:s}=t,{onImproveSelection:a}=t,{isLoading:l}=t,{sourceLang:c}=t,{manualSourceLang:d}=t;const u=e=>{n(9,d=e)},p=e=>{kg(i,o.selectedTargetLanguage=e,o)};return e.$$set=e=>{"onTranslateSelection"in e&&n(0,s=e.onTranslateSelection),"onImproveSelection"in e&&n(1,a=e.onImproveSelection),"isLoading"in e&&n(2,l=e.isLoading),"sourceLang"in e&&n(3,c=e.sourceLang),"manualSourceLang"in e&&n(9,d=e.manualSourceLang)},[s,a,l,c,o,i,r,u,p,d,e=>{u(e.detail.selectedOption.value)},e=>{p(e.detail.selectedOption.value)}]}class EA extends Qh{constructor(e){super(),Jh(this,e,bA,wA,yg,{onTranslateSelection:0,onImproveSelection:1,isLoading:2,sourceLang:3,manualSourceLang:9})}}function SA(e){let t,n,o,i,r,s,a;function l(t){e[12](t)}let c={onTranslateSelection:e[7],onImproveSelection:e[8],isLoading:e[4],sourceLang:e[1]};return void 0!==e[0]&&(c.manualSourceLang=e[0]),n=new EA({props:c}),Eh.push((()=>Yh(n,"manualSourceLang",l))),{c(){t=Wg("div"),Zh(n.$$.fragment),Xg(t,"class","dl-gslides-toolbar svelte-1esuwx"),Xg(t,"dir",Bt())},m(o,i){zg(o,t,i),Kh(n,t,null),r=!0,s||(a=[Lg(c_.call(null,t,{isShadow:!0})),Yg(t,"click_outside",e[13])],s=!0)},p(e,t){const i={};16&t&&(i.isLoading=e[4]),2&t&&(i.sourceLang=e[1]),!o&&1&t&&(o=!0,i.manualSourceLang=e[0],Lh((()=>o=!1))),n.$set(i)},i(e){r||(Hh(n.$$.fragment,e),kh((()=>{r&&(i||(i=Gh(t,Rf,{},!0)),i.run(1))})),r=!0)},o(e){Fh(n.$$.fragment,e),i||(i=Gh(t,Rf,{},!1)),i.run(0),r=!1},d(e){e&&Hg(t),Xh(n),e&&i&&i.end(),s=!1,_g(a)}}}function TA(e){let t,n;return t=new eS({props:{small:!0}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function xA(e){let t,n,o,i,r,s,a,l,c=e[3]&&SA(e),d=e[4]&&TA();return{c(){t=Wg("div"),c&&c.c(),n=Gg(),o=Wg("button"),d&&d.c(),Xg(o,"class","dl-gslides-button svelte-1esuwx"),Xg(o,"title","Translate with DeepL"),ih(o,"is-loading",e[4]),Xg(t,"class","dl-gslides-icon svelte-1esuwx"),Xg(t,"style",r="bottom: "+e[2].bottom+"px; "+e[2].horizonalAlignment+": "+e[2].horizonalOffset+"px;")},m(i,r){zg(i,t,r),c&&c.m(t,null),Pg(t,n),Pg(t,o),d&&d.m(o,null),s=!0,a||(l=Yg(o,"click",e[6]),a=!0)},p(e,[i]){e[3]?c?(c.p(e,i),8&i&&Hh(c,1)):(c=SA(e),c.c(),Hh(c,1),c.m(t,n)):c&&(Uh(),Fh(c,1,1,(()=>{c=null})),zh()),e[4]?d?16&i&&Hh(d,1):(d=TA(),d.c(),Hh(d,1),d.m(o,null)):d&&(Uh(),Fh(d,1,1,(()=>{d=null})),zh()),(!s||16&i)&&ih(o,"is-loading",e[4]),(!s||4&i&&r!==(r="bottom: "+e[2].bottom+"px; "+e[2].horizonalAlignment+": "+e[2].horizonalOffset+"px;"))&&Xg(t,"style",r)},i(e){s||(Hh(c),Hh(d),kh((()=>{s&&(i||(i=Gh(o,Rf,{},!0)),i.run(1))})),s=!0)},o(e){Fh(c),Fh(d),i||(i=Gh(o,Rf,{},!1)),i.run(0),s=!1},d(e){e&&Hg(t),c&&c.d(),d&&d.d(),e&&i&&i.end(),a=!1,l()}}}const $A=16,CA="application/x-vnd.google-docs-drawings-object+wrapped",kA="application/x-vnd.google-docs-document-slice-clip+wrapped";function LA(e,t,o){let i;const r=yh("deepl_settings");bg(e,r,(e=>o(15,i=e)));let s,{registerActionIconCallbacks:a}=t,{clearActionIconCallbacks:l}=t,{sourceLang:c}=t,{manualSourceLang:d}=t,{charLimitError:u}=t,p={bottom:0,right:0},m=!1,g=!1,h=[];const f=()=>{const e=document.querySelector("#canvas-container"),t=Bt(),n="ltr"===t?"right":"left";if(e){const i=e.getBoundingClientRect();let r=$A;r="ltr"===t?i.right>window.innerWidth?0:window.innerWidth-i.right:i.left<0?0:i.left;const s=i.bottom>window.innerHeight?16:window.innerHeight-i.bottom;o(2,p={bottom:s+$A,horizonalOffset:r+$A,horizonalAlignment:n})}else o(2,p={bottom:$A,horizonalOffset:$A,horizonalAlignment:n})},_=async(e,t)=>{try{let r=e.clipboardData.getData(CA),a=e.clipboardData.getData(kA);if(r){if((e=>{let t=e.getData("application/x-vnd.google-docs-image-clip+wrapped");if(!t)return!1;const n=JSON.parse(t),o=JSON.parse(n.data).image_urls,i=Object.keys(o);let r=!1;for(const e of i)if(e.includes("PLACEHOLDER_")&&!h.includes(e)){h.push(e),r=!0;break}return r})(e.clipboardData))return void n(P.glidesPreventAssetLoss,{theme:B.warning_theme});o(4,g=!0);const s=await(async(e,t)=>{const n=JSON.parse(e),o=JSON.parse(n.data),r=o.unresolved,{entities:s,sentencesToTranslate:a}=Wt(r),l=await $P({targetLang:i.selectedTargetLanguage,sourceLang:c,sentences:a,mode:t}),d=[];for(let e=0;e<s.length;e++)jt({entity:s[e],translatedSentences:l,modifiersToDelete:d});return o.unresolved=o.unresolved.filter((e=>!d.includes(e))),n.data=JSON.stringify(o),JSON.stringify(n)})(r,t);s_("keydown",document.querySelector("svg > g > g[pointer-events=visiblePainted]")),v(s),o(4,g=!1)}else if(a){o(4,g=!0);const n=await(async(e,t)=>await CP({event:e,sourceLang:c,targetLang:i.selectedTargetLanguage,mode:t}))(e,t);s_("keydown",document.querySelector("svg > g > g[pointer-events=visiblePainted]")),y(n),o(4,g=!1)}else await Ft(),s=t,o(3,m=!1),mt()}catch(e){console.log("errororr slidews",e),e.name===wf?o(9,u=We.ANONYMOUS):e.name===yf?o(9,u=We.FREE):e.name===Ef?o(9,u=Ef):e.name===Sf&&o(9,u=Sf),console.error(e),o(4,g=!1)}},v=e=>{const{editable:t}=pt();let n;if(st())n=new ClipboardEvent("paste",{dataType:CA,data:e});else{const t=new DataTransfer;t.setData(CA,e),n=new ClipboardEvent("paste",{bubbles:!0,clipboardData:t})}t.dispatchEvent(n)},y=e=>{const{editable:t}=pt();let n;if(st())n=new ClipboardEvent("paste",{dataType:kA,data:e});else{const t=new DataTransfer;t.setData(kA,e),n=new ClipboardEvent("paste",{bubbles:!0,clipboardData:t})}t.dispatchEvent(n)};hh((()=>{setTimeout((()=>{const{editable:e}=pt();e.addEventListener("copy",(e=>{if(s){const t=s;s=void 0,_(e,t)}}))}),2e3),a({repositionActionIcon:f})})),fh((()=>{l()}));return e.$$set=e=>{"registerActionIconCallbacks"in e&&o(10,a=e.registerActionIconCallbacks),"clearActionIconCallbacks"in e&&o(11,l=e.clearActionIconCallbacks),"sourceLang"in e&&o(1,c=e.sourceLang),"manualSourceLang"in e&&o(0,d=e.manualSourceLang),"charLimitError"in e&&o(9,u=e.charLimitError)},[d,c,p,m,g,r,()=>{o(3,m=!m)},()=>{s=re.translate,o(3,m=!1),mt()},()=>{s=re.write,o(3,m=!1),mt()},u,a,l,function(e){d=e,o(0,d)},()=>{o(3,m=!1)}]}class IA extends Qh{constructor(e){super(),Jh(this,e,LA,xA,yg,{registerActionIconCallbacks:10,clearActionIconCallbacks:11,sourceLang:1,manualSourceLang:0,charLimitError:9})}}function AA(e){let t,n,o,i,r,s,a,l,c,d,u=e[1]&&MA();return a=new nA({props:{checked:e[3].isGSlidesEnabled}}),a.$on("change",e[8]),{c(){t=Wg("div"),u&&u.c(),n=Gg(),o=Wg("div"),i=Wg("div"),i.textContent=`${chrome.i18n.getMessage("ui_gslides_toggle_customization")}`,r=Gg(),s=Wg("div"),Zh(a.$$.fragment),Xg(i,"class","legend"),Xg(s,"class","switch svelte-19uh4k2"),Xg(o,"class","turn-on-off-panel svelte-19uh4k2"),Xg(t,"class","dl-gslides-top-icon-modal svelte-19uh4k2"),eh(t,"left",e[2]+"px"),Xg(t,"dir",Bt())},m(p,m){zg(p,t,m),u&&u.m(t,null),Pg(t,n),Pg(t,o),Pg(o,i),Pg(o,r),Pg(o,s),Kh(a,s,null),l=!0,c||(d=[Lg(c_.call(null,t,{isShadow:!0})),Yg(t,"click_outside",e[9])],c=!0)},p(e,o){e[1]?u?u.p(e,o):(u=MA(),u.c(),u.m(t,n)):u&&(u.d(1),u=null);const i={};8&o&&(i.checked=e[3].isGSlidesEnabled),a.$set(i),(!l||4&o)&&eh(t,"left",e[2]+"px")},i(e){l||(Hh(a.$$.fragment,e),l=!0)},o(e){Fh(a.$$.fragment,e),l=!1},d(e){e&&Hg(t),u&&u.d(),Xh(a),c=!1,_g(d)}}}function MA(e){let t,n,o,i,r,s,a,l,c,d;return{c(){t=Wg("div"),n=Wg("div"),o=Wg("p"),o.textContent=`${chrome.i18n.getMessage("ui_gslides_onboarding_title")}`,i=Gg(),r=Wg("div"),r.textContent=`${chrome.i18n.getMessage("ui_gslides_onboarding_label_beta")}`,s=Gg(),a=Wg("div"),l=Wg("div"),l.textContent=`${chrome.i18n.getMessage("ui_gslides_onboarding_ups_1")}`,c=Gg(),d=Wg("div"),d.textContent=`${chrome.i18n.getMessage("ui_gslides_onboarding_ups_2")}`,Xg(o,"class","svelte-19uh4k2"),Xg(r,"class","beta-label svelte-19uh4k2"),Xg(n,"class","header svelte-19uh4k2"),Xg(l,"class","ups-item svelte-19uh4k2"),Xg(d,"class","ups-item svelte-19uh4k2"),Xg(a,"class","ups-list"),Xg(t,"class","onboarding svelte-19uh4k2")},m(e,u){zg(e,t,u),Pg(t,n),Pg(n,o),Pg(n,i),Pg(n,r),Pg(t,s),Pg(t,a),Pg(a,l),Pg(a,c),Pg(a,d)},p:mg,d(e){e&&Hg(t)}}}function RA(e){let t,n,o,i,r,s,a=e[0]&&AA(e);return{c(){t=Wg("button"),n=Gg(),a&&a.c(),o=Vg(),Xg(t,"class","dl-gslides-top-icon svelte-19uh4k2"),eh(t,"left",e[2]+"px"),ih(t,"onboarding-pending",!e[3].isGSlidesOnboardingShown)},m(l,c){zg(l,t,c),zg(l,n,c),a&&a.m(l,c),zg(l,o,c),i=!0,r||(s=Yg(t,"click",e[7]),r=!0)},p(e,[n]){(!i||4&n)&&eh(t,"left",e[2]+"px"),(!i||8&n)&&ih(t,"onboarding-pending",!e[3].isGSlidesOnboardingShown),e[0]?a?(a.p(e,n),1&n&&Hh(a,1)):(a=AA(e),a.c(),Hh(a,1),a.m(o.parentNode,o)):a&&(Uh(),Fh(a,1,1,(()=>{a=null})),zh())},i(e){i||(Hh(a),i=!0)},o(e){Fh(a),i=!1},d(e){e&&(Hg(t),Hg(n),Hg(o)),a&&a.d(e),r=!1,s()}}}function OA(e,n,o){let i;const r=yh("deepl_settings");bg(e,r,(e=>o(3,i=e)));let s,{registerTopIconCallbacks:a}=n,{clearTopIconCallbacks:l}=n,c=!1,d=!1;const u=()=>{const e=document.querySelector(".docs-titlebar-buttons #docs-presence-container"),t=null!=document.querySelector(".docs-titlebar-buttons-rtl");if(e){const n=e.getBoundingClientRect();o(2,s=t?o(2,s=n.left+40-32):n.left-40)}};hh((()=>{u(),a({repositionTopIcon:u})})),fh((()=>{l()}));return e.$$set=e=>{"registerTopIconCallbacks"in e&&o(5,a=e.registerTopIconCallbacks),"clearTopIconCallbacks"in e&&o(6,l=e.clearTopIconCallbacks)},e.$$.update=()=>{3&e.$$.dirty&&c&&d&&t({action:"dlTrackOnboardingModalShown",payload:{nicheIntegration:ie.gslides}})},[c,d,s,i,r,a,l,()=>{o(0,c=!0),i.isGSlidesOnboardingShown||(kg(r,i.isGSlidesOnboardingShown=!0,i),o(1,d=!0))},e=>kg(r,i.isGSlidesEnabled=e.detail.checked,i),()=>{o(1,d=!1),o(0,c=!1)}]}class NA extends Qh{constructor(e){super(),Jh(this,e,OA,RA,yg,{registerTopIconCallbacks:5,clearTopIconCallbacks:6})}}function DA(e){let t,n,o,i,r;function s(e,t){return e[0]===We.FREE?UA:e[0]===We.ANONYMOUS?BA:void 0}let a=s(e),l=a&&a(e);return{c(){t=Wg("button"),n=Gg(),l&&l.c(),o=Vg(),Xg(t,"class","close-button svelte-8x6yh8")},m(s,a){zg(s,t,a),zg(s,n,a),l&&l.m(s,a),zg(s,o,a),i||(r=Yg(t,"click",(function(){vg(e[1])&&e[1].apply(this,arguments)})),i=!0)},p(t,n){a===(a=s(e=t))&&l?l.p(e,n):(l&&l.d(1),l=a&&a(e),l&&(l.c(),l.m(o.parentNode,o)))},i:mg,o:mg,d(e){e&&(Hg(t),Hg(n),Hg(o)),l&&l.d(e),i=!1,r()}}}function PA(e){let t,n;return t=new Cy({props:{error:{error:e[0]},close:e[1],config:{nicheIntegration:ie.gslides}}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.error={error:e[0]}),2&n&&(o.close=e[1]),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function BA(e){let t,n,o,i,r,s,a,l,c,d;return{c(){t=Wg("h2"),t.textContent=`${chrome.i18n.getMessage("ui_gslides_limit_reached_anonymous_title")}`,n=Gg(),o=Wg("p"),o.textContent=`${chrome.i18n.getMessage("ui_gslides_limit_reached_anonymous_content")}`,i=Gg(),r=Wg("div"),s=Wg("button"),s.textContent=`${chrome.i18n.getMessage("ui_gslides_limit_reached_anonymous_cta_login")}`,a=Gg(),l=Wg("button"),l.textContent=`${chrome.i18n.getMessage("ui_gslides_limit_reached_anonymous_cta_signup")}`,Xg(t,"class","svelte-8x6yh8"),Xg(o,"class","svelte-8x6yh8"),Xg(s,"class","btn-secondary svelte-8x6yh8"),Xg(l,"class","btn-primary svelte-8x6yh8"),Xg(r,"class","buttons-row svelte-8x6yh8")},m(u,p){zg(u,t,p),zg(u,n,p),zg(u,o,p),zg(u,i,p),zg(u,r,p),Pg(r,s),Pg(r,a),Pg(r,l),c||(d=[Yg(s,"click",e[4]),Yg(l,"click",e[3])],c=!0)},p:mg,d(e){e&&(Hg(t),Hg(n),Hg(o),Hg(i),Hg(r)),c=!1,_g(d)}}}function UA(e){let t,n,o,i,r,s,a,l;return{c(){t=Wg("h2"),t.textContent=`${chrome.i18n.getMessage("ui_gslides_limit_reached_logged_in_title")}`,n=Gg(),o=Wg("p"),o.textContent=`${chrome.i18n.getMessage("ui_gslides_limit_reached_logged_in_content")}`,i=Gg(),r=Wg("div"),s=Wg("button"),s.textContent=`${chrome.i18n.getMessage("ui_gslides_limit_reached_logged_in_cta")}`,Xg(t,"class","svelte-8x6yh8"),Xg(o,"class","svelte-8x6yh8"),Xg(s,"class","btn-primary svelte-8x6yh8"),Xg(r,"class","buttons-row svelte-8x6yh8")},m(c,d){zg(c,t,d),zg(c,n,d),zg(c,o,d),zg(c,i,d),zg(c,r,d),Pg(r,s),a||(l=Yg(s,"click",e[3]),a=!0)},p:mg,d(e){e&&(Hg(t),Hg(n),Hg(o),Hg(i),Hg(r)),a=!1,l()}}}function zA(e){let t,n,o,i,r,s,a;const l=[PA,DA],c=[];function d(e,t){return e[2]?0:1}return o=d(e),i=c[o]=l[o](e),{c(){t=Wg("div"),n=Wg("div"),i.c(),Xg(n,"class","dl-char-limit-error-container svelte-8x6yh8"),ih(n,"is-translator-limit",!e[2]),Xg(t,"class","dl-char-limit-error-overlay svelte-8x6yh8")},m(i,l){zg(i,t,l),Pg(t,n),c[o].m(n,null),r=!0,s||(a=[Lg(c_.call(null,n,{isShadow:!0})),Yg(n,"click_outside",(function(){vg(e[1])&&e[1].apply(this,arguments)}))],s=!0)},p(t,[s]){let a=o;o=d(e=t),o===a?c[o].p(e,s):(Uh(),Fh(c[a],1,1,(()=>{c[a]=null})),zh(),i=c[o],i?i.p(e,s):(i=c[o]=l[o](e),i.c()),Hh(i,1),i.m(n,null)),(!r||4&s)&&ih(n,"is-translator-limit",!e[2])},i(e){r||(Hh(i),r=!0)},o(e){Fh(i),r=!1},d(e){e&&Hg(t),c[o].d(),s=!1,_g(a)}}}function HA(e,n,o){let i,{charLimitError:r}=n,{closeModal:s}=n;let a=!1;return e.$$set=e=>{"charLimitError"in e&&o(0,r=e.charLimitError),"closeModal"in e&&o(1,s=e.closeModal)},e.$$.update=()=>{1&e.$$.dirty&&o(2,i=r===Ef||r===Sf)},[r,s,i,()=>{t({action:"dlExternalURLRedirect",payload:{destination:av,utmContent:"gslides_customization"}}),s()},()=>{a||(t({action:"dlTrackUILocationClicked",payload:U.gslidesCharLimitLogin}),a=!0,t({action:"dlRequestLogin"}).then((()=>{a=!1,s()})).catch((()=>{a=!1})))}]}class FA extends Qh{constructor(e){super(),Jh(this,e,HA,zA,yg,{charLimitError:0,closeModal:1})}}function WA(e){let t,n;return t=new FA({props:{charLimitError:e[2],closeModal:e[10]}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.charLimitError=e[2]),4&n&&(o.closeModal=e[10]),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function jA(e){let t,n,o,i;function r(t){e[11](t)}function s(t){e[12](t)}let a={registerActionIconCallbacks:e[7],clearActionIconCallbacks:e[8],sourceLang:e[3]};return void 0!==e[0]&&(a.manualSourceLang=e[0]),void 0!==e[2]&&(a.charLimitError=e[2]),t=new IA({props:a}),Eh.push((()=>Yh(t,"manualSourceLang",r))),Eh.push((()=>Yh(t,"charLimitError",s))),{c(){Zh(t.$$.fragment)},m(e,n){Kh(t,e,n),i=!0},p(e,i){const r={};8&i&&(r.sourceLang=e[3]),!n&&1&i&&(n=!0,r.manualSourceLang=e[0],Lh((()=>n=!1))),!o&&4&i&&(o=!0,r.charLimitError=e[2],Lh((()=>o=!1))),t.$set(r)},i(e){i||(Hh(t.$$.fragment,e),i=!0)},o(e){Fh(t.$$.fragment,e),i=!1},d(e){Xh(t,e)}}}function qA(e){let t,n,o,i,r;t=new NA({props:{registerTopIconCallbacks:e[5],clearTopIconCallbacks:e[6]}});let s=e[2]&&WA(e),a=e[4].isGSlidesEnabled&&!e[1]&&jA(e);return{c(){Zh(t.$$.fragment),n=Gg(),s&&s.c(),o=Gg(),a&&a.c(),i=Vg()},m(e,l){Kh(t,e,l),zg(e,n,l),s&&s.m(e,l),zg(e,o,l),a&&a.m(e,l),zg(e,i,l),r=!0},p(e,[t]){e[2]?s?(s.p(e,t),4&t&&Hh(s,1)):(s=WA(e),s.c(),Hh(s,1),s.m(o.parentNode,o)):s&&(Uh(),Fh(s,1,1,(()=>{s=null})),zh()),e[4].isGSlidesEnabled&&!e[1]?a?(a.p(e,t),18&t&&Hh(a,1)):(a=jA(e),a.c(),Hh(a,1),a.m(i.parentNode,i)):a&&(Uh(),Fh(a,1,1,(()=>{a=null})),zh())},i(e){r||(Hh(t.$$.fragment,e),Hh(s),Hh(a),r=!0)},o(e){Fh(t.$$.fragment,e),Fh(s),Fh(a),r=!1},d(e){e&&(Hg(n),Hg(o),Hg(i)),Xh(t,e),s&&s.d(e),a&&a.d(e)}}}function GA(e,t,n){let o,i,r,s,a,l,c;bg(e,nf,(e=>n(4,i=e))),vh("deepl_settings",nf),vh("deepl_website_settings",yw),vh("text_direction",Bt());let d,u,p=!0;const m=async e=>{if("dlChangeActiveTabStatus"===e.action)e.payload.isActive?g():h();return!0},g=()=>{r&&clearInterval(r),r=setInterval(f,800)},h=()=>{clearInterval(r)},f=()=>{s&&s(),a&&a(),c||_()},_=async()=>{n(9,l=await Ht()||"EN-US")};hh((()=>{g(),d=new MutationObserver((()=>{window.document.querySelector(".punch-full-screen-element")?n(1,p=!0):n(1,p=!1)})),d.observe(window.document.body,{attributes:!0,childList:!0,subtree:!0}),d_((()=>d.disconnect())),chrome.runtime.onMessage.addListener(m)})),fh((()=>{r&&h(),chrome.runtime.onMessage.removeListener(m),d.disconnect()}));return e.$$.update=()=>{513&e.$$.dirty&&n(3,o=c||l)},[c,p,u,o,i,e=>{s=e.repositionTopIcon},()=>{s=void 0},e=>{a=e.repositionActionIcon},()=>{a=void 0},l,()=>n(2,u=void 0),function(e){c=e,n(0,c)},function(e){u=e,n(2,u)}]}class VA extends Qh{constructor(e){super(),Jh(this,e,GA,qA,yg,{})}}class YA{static HTML_TAG_NAME="deepl-gslides-controller";static createElement=(e=document)=>{const t=e.createElement(YA.HTML_TAG_NAME),n=new YA(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowRoot.addEventListener("mouseup",(e=>{e.stopPropagation(),e.stopImmediatePropagation()})),this.domElement.shadowRoot.addEventListener("mousedown",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=()=>{this.domElement.mainComponent=new VA({target:this.domElement.shadowContainer,props:{onClose:this.domElement.cleanupDOM}})};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}function ZA(e){let t,n,o;return{c(){t=Wg("p"),t.innerHTML='<strong class="svelte-xhv8yz">Help us improve DeepL for Arabic</strong>',n=Gg(),o=Wg("p"),o.textContent="Take 2 minutes to tell us what we can do better.",Xg(t,"class","svelte-xhv8yz"),Xg(o,"class","svelte-xhv8yz")},m(e,i){zg(e,t,i),zg(e,n,i),zg(e,o,i)},p:mg,d(e){e&&(Hg(t),Hg(n),Hg(o))}}}function KA(e){let t;return{c(){t=Wg("p"),t.textContent=`${chrome.i18n.getMessage("segmentation_survey_copy")}`,Xg(t,"class","svelte-xhv8yz")},m(e,n){zg(e,t,n)},p:mg,d(e){e&&Hg(t)}}}function XA(e){let t,n,o,i;return{c(){t=Wg("p"),n=Wg("strong"),n.textContent=`${chrome.i18n.getMessage("ui_gslides_feedback_title")}`,o=Gg(),i=Wg("p"),i.textContent=`${chrome.i18n.getMessage("ui_gslides_feedback_content")}`,Xg(n,"class","svelte-xhv8yz"),Xg(t,"class","svelte-xhv8yz"),Xg(i,"class","svelte-xhv8yz")},m(e,r){zg(e,t,r),Pg(t,n),zg(e,o,r),zg(e,i,r)},p:mg,d(e){e&&(Hg(t),Hg(o),Hg(i))}}}function JA(e){let t,n,o,i;return{c(){t=Wg("p"),n=Wg("strong"),n.textContent=`${chrome.i18n.getMessage("ui_toaster_gmail_feedback_title")}`,o=Gg(),i=Wg("p"),i.textContent=`${chrome.i18n.getMessage("ui_toaster_gmail_feedback_content")}`,Xg(n,"class","svelte-xhv8yz"),Xg(t,"class","svelte-xhv8yz"),Xg(i,"class","svelte-xhv8yz")},m(e,r){zg(e,t,r),Pg(t,n),zg(e,o,r),zg(e,i,r)},p:mg,d(e){e&&(Hg(t),Hg(o),Hg(i))}}}function QA(e){let t,n,o,i;return{c(){t=Wg("p"),n=Wg("strong"),n.textContent=`${chrome.i18n.getMessage("ui_toaster_feedback_form_line_1")}`,o=Gg(),i=Wg("p"),i.textContent=`${chrome.i18n.getMessage("ui_toaster_feedback_form_line_2")}`,Xg(n,"class","svelte-xhv8yz"),Xg(t,"class","svelte-xhv8yz"),Xg(i,"class","svelte-xhv8yz")},m(e,r){zg(e,t,r),Pg(t,n),zg(e,o,r),zg(e,i,r)},p:mg,d(e){e&&(Hg(t),Hg(o),Hg(i))}}}function eM(e){let t,n,o,i;return{c(){t=Wg("p"),n=Wg("strong"),n.textContent=`${chrome.i18n.getMessage("ui_toaster_write_a_review_line_1")}`,o=Gg(),i=Wg("p"),i.textContent=`${e[3].writeAReview.lineTwo}`,Xg(n,"class","svelte-xhv8yz"),Xg(t,"class","svelte-xhv8yz"),Xg(i,"class","svelte-xhv8yz")},m(e,r){zg(e,t,r),Pg(t,n),zg(e,o,r),zg(e,i,r)},p:mg,d(e){e&&(Hg(t),Hg(o),Hg(i))}}}function tM(e){let t,n,o,i;return{c(){t=Wg("p"),t.textContent=`${e[3].howWasYourExperience.lineOne}`,n=Gg(),o=Wg("p"),i=Wg("strong"),i.textContent=`${e[3].howWasYourExperience.lineTwo}`,Xg(t,"class","svelte-xhv8yz"),Xg(i,"class","svelte-xhv8yz"),Xg(o,"class","svelte-xhv8yz")},m(e,r){zg(e,t,r),zg(e,n,r),zg(e,o,r),Pg(o,i)},p:mg,d(e){e&&(Hg(t),Hg(n),Hg(o))}}}function nM(e){let t,n,o;return{c(){t=Wg("button"),t.innerHTML="<span>Start survey</span>",Xg(t,"class","svelte-xhv8yz")},m(i,r){zg(i,t,r),n||(o=Yg(t,"click",e[10]),n=!0)},p:mg,d(e){e&&Hg(t),n=!1,o()}}}function oM(e){let t,n,o,i;return{c(){t=Wg("button"),n=Wg("span"),n.textContent=`${chrome.i18n.getMessage("segmentation_survey_button")}`,Xg(t,"class","svelte-xhv8yz")},m(r,s){zg(r,t,s),Pg(t,n),o||(i=Yg(t,"click",e[9]),o=!0)},p:mg,d(e){e&&Hg(t),o=!1,i()}}}function iM(e){let t,n,o,i;return{c(){t=Wg("button"),n=Wg("span"),n.textContent=`${chrome.i18n.getMessage("ui_gslides_feedback_cta")}`,Xg(t,"class","svelte-xhv8yz")},m(r,s){zg(r,t,s),Pg(t,n),o||(i=Yg(t,"click",e[8]),o=!0)},p:mg,d(e){e&&Hg(t),o=!1,i()}}}function rM(e){let t,n,o,i;return{c(){t=Wg("button"),n=Wg("span"),n.textContent=`${chrome.i18n.getMessage("ui_toaster_gmail_feedback_button")}`,Xg(t,"class","svelte-xhv8yz")},m(r,s){zg(r,t,s),Pg(t,n),o||(i=Yg(t,"click",e[7]),o=!0)},p:mg,d(e){e&&Hg(t),o=!1,i()}}}function sM(e){let t,n,o,i;return{c(){t=Wg("button"),n=Wg("span"),n.textContent=`${chrome.i18n.getMessage("ui_toaster_write_a_review_cta")}`,Xg(t,"class","svelte-xhv8yz")},m(r,s){zg(r,t,s),Pg(t,n),o||(i=Yg(t,"click",e[6]),o=!0)},p:mg,d(e){e&&Hg(t),o=!1,i()}}}function aM(e){let t,n,o,i,r,s,a,l,c,d,u;return{c(){t=Wg("button"),n=Wg("i"),o=Gg(),i=Wg("span"),i.textContent=`${chrome.i18n.getMessage("ui_toaster_how_was_your_experience_bad")}`,r=Gg(),s=Wg("button"),a=Wg("i"),l=Gg(),c=Wg("span"),c.textContent=`${chrome.i18n.getMessage("ui_toaster_how_was_your_experience_good")}`,Xg(n,"class","icon-bad svelte-xhv8yz"),Xg(t,"class","svelte-xhv8yz"),Xg(a,"class","icon-good svelte-xhv8yz"),Xg(s,"class","svelte-xhv8yz")},m(p,m){zg(p,t,m),Pg(t,n),Pg(t,o),Pg(t,i),zg(p,r,m),zg(p,s,m),Pg(s,a),Pg(s,l),Pg(s,c),d||(u=[Yg(t,"click",e[4]),Yg(s,"click",e[5])],d=!0)},p:mg,d(e){e&&(Hg(t),Hg(r),Hg(s)),d=!1,_g(u)}}}function lM(e){let t,n,o,i,r,s,a,l,c,d,u,p,m;function g(e,t){return e[0]===ne.initial?tM:e[0]===ne.review?eM:e[0]===ne.feedback?QA:e[0]===ne.gmail?JA:e[0]===ne.gslides?XA:e[0]===ne.customer_segmentation?KA:e[0]===ne.arabic_survey?ZA:void 0}let h=g(e),f=h&&h(e),_=e[2]&&function(e){let t;function n(e,t){return e[0]===ne.initial?aM:e[0]===ne.review?sM:e[0]===ne.gmail?rM:e[0]===ne.gslides?iM:e[0]===ne.customer_segmentation?oM:e[0]===ne.arabic_survey?nM:void 0}let o=n(e),i=o&&o(e);return{c(){t=Wg("div"),i&&i.c(),Xg(t,"class","buttons svelte-xhv8yz")},m(e,n){zg(e,t,n),i&&i.m(t,null)},p(e,r){o===(o=n(e))&&i?i.p(e,r):(i&&i.d(1),i=o&&o(e),i&&(i.c(),i.m(t,null)))},d(e){e&&Hg(t),i&&i.d()}}}(e);return{c(){t=Wg("div"),n=Wg("div"),o=Wg("div"),i=Gg(),r=Wg("div"),s=Wg("button"),a=Gg(),f&&f.c(),l=Gg(),_&&_.c(),Xg(o,"class","logo svelte-xhv8yz"),Xg(s,"class","close-icon svelte-xhv8yz"),ih(s,"rtl",!e[11]&&"rtl"===Bt()),Xg(r,"class","content svelte-xhv8yz"),Xg(n,"class","body svelte-xhv8yz"),Xg(t,"class","container svelte-xhv8yz"),Xg(t,"dir",e[11]?"ltr":Bt())},m(c,d){zg(c,t,d),Pg(t,n),Pg(n,o),Pg(n,i),Pg(n,r),Pg(r,s),Pg(r,a),f&&f.m(r,null),Pg(t,l),_&&_.m(t,null),u=!0,p||(m=Yg(s,"click",(function(){vg(e[1])&&e[1].apply(this,arguments)})),p=!0)},p(t,[n]){h===(h=g(e=t))&&f?f.p(e,n):(f&&f.d(1),f=h&&h(e),f&&(f.c(),f.m(r,null))),e[2]&&_.p(e,n)},i(e){u||(kh((()=>{u&&(d&&d.end(1),c=jh(t,Of,{x:100,duration:1e3}),c.start())})),u=!0)},o(e){c&&c.invalidate(),d=qh(t,Of,{x:100,duration:1e3}),u=!1},d(e){e&&Hg(t),f&&f.d(),_&&_.d(),e&&d&&d.end(),p=!1,m()}}}function cM(e,n,o){let i;bg(e,nf,(e=>o(12,i=e))),vh("deepl_settings",nf),vh("deepl_website_settings",yw),vh("text_direction",Bt());let{onClose:r}=n,{reviewStage:s=ne.initial}=n;const a=[ne.initial,ne.review,ne.gmail,ne.gslides,ne.customer_segmentation,ne.arabic_survey].includes(s);let l=(()=>{let e;if(st())e={howWasYourExperience:{lineOne:"ui_toaster_how_was_your_experience_line_1_firefox",lineTwo:"ui_toaster_how_was_your_experience_line_2_firefox"},writeAReview:{lineTwo:"ui_toaster_write_a_review_line_2_firefox"}};else{if(rt().browser===tt.edge)e={howWasYourExperience:{lineOne:"ui_toaster_how_was_your_experience_line_1_edge",lineTwo:"ui_toaster_how_was_your_experience_line_2_edge"},writeAReview:{lineTwo:"ui_toaster_write_a_review_line_2_edge"}};else e={howWasYourExperience:{lineOne:"ui_toaster_how_was_your_experience_line_1",lineTwo:"ui_toaster_how_was_your_experience_line_2"},writeAReview:{lineTwo:"ui_toaster_write_a_review_line_2"}}}return{howWasYourExperience:{lineOne:chrome.i18n.getMessage(e.howWasYourExperience.lineOne),lineTwo:chrome.i18n.getMessage(e.howWasYourExperience.lineTwo)},writeAReview:{lineTwo:chrome.i18n.getMessage(e.writeAReview.lineTwo)}}})();const c=s==ne.arabic_survey;return e.$$set=e=>{"onClose"in e&&o(1,r=e.onClose),"reviewStage"in e&&o(0,s=e.reviewStage)},[s,r,a,l,function(){nf.set({shouldDisplayFeedbackPopup:!0}),t({action:"dlExternalURLRedirect",payload:{destination:st()?yv:rv}}),r()},function(){o(0,s=ne.review)},function(){let e=mv;if(chrome.runtime.id===J.edge)e=gv;else if(st())e=_v;else{if(rt().browser===tt.edge)e=gv;else e=mv}t({action:"dlExternalURLRedirect",payload:{destination:e}}),r()},function(){t({action:"dlTrackUILocationClicked",payload:U.gmailFeedbackSurvey}),t({action:"dlExternalURLRedirect",payload:{destination:hv}}),r()},function(){t({action:"dlTrackUILocationClicked",payload:U.gslidesFeedbackSurvey}),t({action:"dlExternalURLRedirect",payload:{destination:fv}}),r()},function(){(e=>!(!Ke(e,ye.TRANSLATOR)&&!Ke(e,ye.WRITE)))(i)?t({action:"dlExternalURLRedirect",payload:{destination:bv}}):t({action:"dlExternalURLRedirect",payload:{destination:wv}}),r()},function(){t({action:"dlExternalURLRedirect",payload:{destination:Ev}})},c]}class dM extends Qh{constructor(e){super(),Jh(this,e,cM,lM,yg,{onClose:1,reviewStage:0})}}class uM{static HTML_TAG_NAME="deepl-ask-for-review-popup";static createElement=(e=document)=>{const t=e.createElement(uM.HTML_TAG_NAME),n=new uM(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowContainer.addEventListener("click",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=({reviewStage:e})=>{const t="rtl"===Bt()?"left":"right";this.domElement.shadowContainer.style.cssText=`position: fixed; bottom: 32px; ${t}: 32px; z-index: ${D.deepl_inline_ui.z_index}`,this.domElement.mainComponent=new dM({target:this.domElement.shadowContainer,props:{onClose:this.cleanupDOM,reviewStage:e}})};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}function pM(e){let t,n,o,i,r,s,a,l,c,d,u,p,m,g,h,f,_,v=e[2]&&mM(),y=e[3]&&gM();return{c(){t=Wg("div"),n=Wg("button"),o=Wg("div"),i=Gg(),r=Wg("span"),r.textContent=`${chrome.i18n.getMessage("layout_tab_translator")}`,s=Gg(),v&&v.c(),l=Gg(),c=Wg("button"),d=Wg("div"),u=Gg(),p=Wg("span"),p.textContent=`${chrome.i18n.getMessage("layout_tab_write")}`,m=Gg(),y&&y.c(),Xg(o,"class","translate-icon svelte-1f5g1yc"),Xg(n,"class",a=Cg("tab "+(e[1]===re.translate?"active":""))+" svelte-1f5g1yc"),Xg(d,"class","write-icon svelte-1f5g1yc"),Xg(c,"class",g=Cg("tab "+(e[1]===re.write?"active":""))+" svelte-1f5g1yc"),Xg(t,"class","tabs-container svelte-1f5g1yc")},m(a,g){zg(a,t,g),Pg(t,n),Pg(n,o),Pg(n,i),Pg(n,r),Pg(n,s),v&&v.m(n,null),Pg(t,l),Pg(t,c),Pg(c,d),Pg(c,u),Pg(c,p),Pg(c,m),y&&y.m(c,null),h=!0,f||(_=[Yg(n,"click",e[9]),Yg(c,"click",e[10])],f=!0)},p(e,t){e[2]?v?4&t&&Hh(v,1):(v=mM(),v.c(),Hh(v,1),v.m(n,null)):v&&(Uh(),Fh(v,1,1,(()=>{v=null})),zh()),(!h||2&t&&a!==(a=Cg("tab "+(e[1]===re.translate?"active":""))+" svelte-1f5g1yc"))&&Xg(n,"class",a),e[3]?y?8&t&&Hh(y,1):(y=gM(),y.c(),Hh(y,1),y.m(c,null)):y&&(Uh(),Fh(y,1,1,(()=>{y=null})),zh()),(!h||2&t&&g!==(g=Cg("tab "+(e[1]===re.write?"active":""))+" svelte-1f5g1yc"))&&Xg(c,"class",g)},i(e){h||(Hh(v),Hh(y),h=!0)},o(e){Fh(v),Fh(y),h=!1},d(e){e&&Hg(t),v&&v.d(),y&&y.d(),f=!1,_g(_)}}}function mM(e){let t,n;return t=new gx({props:{size:24,translator:!0}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function gM(e){let t,n;return t=new gx({props:{size:24,write:!0}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function hM(e){let t,n,o,i,r,s,a,l,c,d,u,p=e[5]&&pM(e);return{c(){t=Wg("div"),n=Wg("button"),o=Gg(),p&&p.c(),i=Gg(),r=Wg("div"),s=Wg("button"),a=Gg(),l=Wg("button"),Xg(n,"class","dl-logo svelte-1f5g1yc"),Xg(n,"aria-label",chrome.i18n.getMessage("deepl_logo")),Xg(s,"class","dl-settings-icon svelte-1f5g1yc"),Xg(l,"class","dl-close-icon svelte-1f5g1yc"),Xg(r,"class","dl-actions svelte-1f5g1yc"),Xg(t,"class","dl-review-header svelte-1f5g1yc")},m(m,g){zg(m,t,g),Pg(t,n),Pg(t,o),p&&p.m(t,null),Pg(t,i),Pg(t,r),Pg(r,s),Pg(r,a),Pg(r,l),c=!0,d||(u=[Yg(n,"click",e[6]),Yg(s,"click",e[7]),Yg(l,"click",(function(){vg(e[0])&&e[0].apply(this,arguments)}))],d=!0)},p(n,[o]){(e=n)[5]?p?(p.p(e,o),32&o&&Hh(p,1)):(p=pM(e),p.c(),Hh(p,1),p.m(t,i)):p&&(Uh(),Fh(p,1,1,(()=>{p=null})),zh())},i(e){c||(Hh(p),c=!0)},o(e){Fh(p),c=!1},d(e){e&&Hg(t),p&&p.d(),d=!1,_g(u)}}}function fM(e,n,o){let{closeWindow:i}=n,{extensionContext:r=0}=n,{textProcessingMode:s=re.translate}=n,{showProTranslateStatus:a=!0}=n,{showProWriteStatus:l=!0}=n,{onChangeTextProcessingMode:c=(()=>{})}=n,{enableTranslateWriteTabs:d=!0}=n;return e.$$set=e=>{"closeWindow"in e&&o(0,i=e.closeWindow),"extensionContext"in e&&o(8,r=e.extensionContext),"textProcessingMode"in e&&o(1,s=e.textProcessingMode),"showProTranslateStatus"in e&&o(2,a=e.showProTranslateStatus),"showProWriteStatus"in e&&o(3,l=e.showProWriteStatus),"onChangeTextProcessingMode"in e&&o(4,c=e.onChangeTextProcessingMode),"enableTranslateWriteTabs"in e&&o(5,d=e.enableTranslateWriteTabs)},[i,s,a,l,c,d,function(){t({action:"dlTrackLogoClickedEvent",payload:{extensionContext:r}}),t({action:"dlExternalURLRedirect",payload:{destination:s===re.write?uv:dv,utmContent:"review_window_logo"}})},function(){t({action:"dlOpenInternalPage",payload:{destination:s===re.write?tS.settings_writing:tS.settings_reading}})},r,()=>c(re.translate),()=>c(re.write)]}class _M extends Qh{constructor(e){super(),Jh(this,e,fM,hM,yg,{closeWindow:0,extensionContext:8,textProcessingMode:1,showProTranslateStatus:2,showProWriteStatus:3,onChangeTextProcessingMode:4,enableTranslateWriteTabs:5})}}function vM(e){let t,n,o=dt(e[2])+"";return{c(){t=Wg("div"),n=Wg("div"),Xg(t,"class","dictionary-error svelte-15p9vvz")},m(e,i){zg(e,t,i),Pg(t,n),n.innerHTML=o},p(e,t){4&t&&o!==(o=dt(e[2])+"")&&(n.innerHTML=o)},d(e){e&&Hg(t)}}}function yM(e){let t,n,o,i,r,s,a,l,c,d,u,p,m,g,h,f=chrome.i18n.getMessage("ui_inline_translation_dictionary")+"",_=e[2]&&vM(e);return{c(){t=Wg("div"),n=Wg("div"),o=Wg("div"),i=Wg("button"),i.textContent=`${chrome.i18n.getMessage("ui_alternatives_title")}`,r=Gg(),s=Wg("div"),a=Wg("button"),l=Wg("div"),c=Gg(),d=qg(f),m=Gg(),_&&_.c(),Xg(i,"class","svelte-15p9vvz"),Xg(o,"class","tab svelte-15p9vvz"),Xg(l,"class","img_book"),ih(l,"shown-dict",e[0]),Xg(a,"class",u="dictionary-button "+(e[0]?"dict-open":"")+" svelte-15p9vvz"),a.disabled=p=!e[1],Xg(s,"class","tab svelte-15p9vvz"),Xg(n,"class","tabs-container svelte-15p9vvz"),Xg(t,"class","dl-review-footer svelte-15p9vvz")},m(u,p){zg(u,t,p),Pg(t,n),Pg(n,o),Pg(o,i),Pg(n,r),Pg(n,s),Pg(s,a),Pg(a,l),Pg(a,c),Pg(a,d),Pg(s,m),_&&_.m(s,null),g||(h=[Yg(a,"click",(function(){vg(e[3])&&e[3].apply(this,arguments)})),Yg(a,"mouseenter",e[4])],g=!0)},p(t,[n]){e=t,1&n&&ih(l,"shown-dict",e[0]),1&n&&u!==(u="dictionary-button "+(e[0]?"dict-open":"")+" svelte-15p9vvz")&&Xg(a,"class",u),2&n&&p!==(p=!e[1])&&(a.disabled=p),e[2]?_?_.p(e,n):(_=vM(e),_.c(),_.m(s,null)):_&&(_.d(1),_=null)},i:mg,o:mg,d(e){e&&Hg(t),_&&_.d(),g=!1,_g(h)}}}function wM(e,n,o){let{showDictionary:i=!1}=n,{enableDictionaryButton:r=!1}=n,{dictionaryButtonError:s=""}=n,{switchVisibilityDictionary:a=(()=>{})}=n;return e.$$set=e=>{"showDictionary"in e&&o(0,i=e.showDictionary),"enableDictionaryButton"in e&&o(1,r=e.enableDictionaryButton),"dictionaryButtonError"in e&&o(2,s=e.dictionaryButtonError),"switchVisibilityDictionary"in e&&o(3,a=e.switchVisibilityDictionary)},[i,r,s,a,function(){if(!r)try{t({action:"dlTrackDisabledDictionaryHover",payload:{}})}catch(e){console.log(e)}}]}class bM extends Qh{constructor(e){super(),Jh(this,e,wM,yM,yg,{showDictionary:0,enableDictionaryButton:1,dictionaryButtonError:2,switchVisibilityDictionary:3})}}function EM(e){let t,n,o,i;return t=new bM({props:{showDictionary:e[9],switchVisibilityDictionary:e[16],enableDictionaryButton:e[11],dictionaryButtonError:e[10]}}),o=new P$({props:{originalSnippet:e[12].originalSnippet,sourceLanguage:e[12].itaSourceLanguage,targetLanguage:e[13].selectedTargetLanguage,websiteLanguage:e[12].websiteLanguage,showDictionary:e[9],setDictionaryLauncherState:e[15],resetDictionary:e[17]}}),{c(){Zh(t.$$.fragment),n=Gg(),Zh(o.$$.fragment)},m(e,r){Kh(t,e,r),zg(e,n,r),Kh(o,e,r),i=!0},p(e,n){const i={};512&n&&(i.showDictionary=e[9]),2048&n&&(i.enableDictionaryButton=e[11]),1024&n&&(i.dictionaryButtonError=e[10]),t.$set(i);const r={};4096&n&&(r.originalSnippet=e[12].originalSnippet),4096&n&&(r.sourceLanguage=e[12].itaSourceLanguage),8192&n&&(r.targetLanguage=e[13].selectedTargetLanguage),4096&n&&(r.websiteLanguage=e[12].websiteLanguage),512&n&&(r.showDictionary=e[9]),o.$set(r)},i(e){i||(Hh(t.$$.fragment,e),Hh(o.$$.fragment,e),i=!0)},o(e){Fh(t.$$.fragment,e),Fh(o.$$.fragment,e),i=!1},d(e){e&&Hg(n),Xh(t,e),Xh(o,e)}}}function SM(e){let t,n,o,i,r,s;n=new _M({props:{closeWindow:e[2],extensionContext:e[3],textProcessingMode:e[4],showProTranslateStatus:e[5],showProWriteStatus:e[6],onChangeTextProcessingMode:e[7],enableTranslateWriteTabs:!e[8]}});const a=e[19].default,l=Eg(a,e,e[18],null);let c=!e[8]&&EM(e);return{c(){t=Wg("div"),Zh(n.$$.fragment),o=Gg(),i=Wg("div"),l&&l.c(),r=Gg(),c&&c.c(),Xg(i,"class","dl-content svelte-jwy61a"),Xg(t,"class","dl-layout svelte-jwy61a"),Xg(t,"translate","no"),Xg(t,"dir",e[14])},m(e,a){zg(e,t,a),Kh(n,t,null),Pg(t,o),Pg(t,i),l&&l.m(i,null),Pg(t,r),c&&c.m(t,null),s=!0},p(e,[o]){const i={};4&o&&(i.closeWindow=e[2]),8&o&&(i.extensionContext=e[3]),16&o&&(i.textProcessingMode=e[4]),32&o&&(i.showProTranslateStatus=e[5]),64&o&&(i.showProWriteStatus=e[6]),128&o&&(i.onChangeTextProcessingMode=e[7]),256&o&&(i.enableTranslateWriteTabs=!e[8]),n.$set(i),l&&l.p&&(!s||262144&o)&&xg(l,a,e,e[18],s?Tg(a,e[18],o,null):$g(e[18]),null),e[8]?c&&(Uh(),Fh(c,1,1,(()=>{c=null})),zh()):c?(c.p(e,o),256&o&&Hh(c,1)):(c=EM(e),c.c(),Hh(c,1),c.m(t,null))},i(e){s||(Hh(n.$$.fragment,e),Hh(l,e),Hh(c),s=!0)},o(e){Fh(n.$$.fragment,e),Fh(l,e),Fh(c),s=!1},d(e){e&&Hg(t),Xh(n),l&&l.d(e),c&&c.d()}}}function TM(e,t,n){let o,i,r=mg,s=()=>(r(),r=wg(p,(e=>n(12,o=e))),p),a=mg,l=()=>(a(),a=wg(m,(e=>n(13,i=e))),m);e.$$.on_destroy.push((()=>r())),e.$$.on_destroy.push((()=>a()));let{$$slots:c={},$$scope:d}=t;const u=yh("text_direction");let{websiteSettings:p}=t;s();let{settings:m}=t;l();let g,{closeWindow:h}=t,{extensionContext:f}=t,{textProcessingMode:_=re.translate}=t,{showProTranslateStatus:v=!1}=t,{showProWriteStatus:y=!1}=t,{onChangeTextProcessingMode:w=(()=>{})}=t,{error:b}=t,E="",S=!1;return e.$$set=e=>{"websiteSettings"in e&&s(n(0,p=e.websiteSettings)),"settings"in e&&l(n(1,m=e.settings)),"closeWindow"in e&&n(2,h=e.closeWindow),"extensionContext"in e&&n(3,f=e.extensionContext),"textProcessingMode"in e&&n(4,_=e.textProcessingMode),"showProTranslateStatus"in e&&n(5,v=e.showProTranslateStatus),"showProWriteStatus"in e&&n(6,y=e.showProWriteStatus),"onChangeTextProcessingMode"in e&&n(7,w=e.onChangeTextProcessingMode),"error"in e&&n(8,b=e.error),"$$scope"in e&&n(18,d=e.$$scope)},[p,m,h,f,_,v,y,w,b,g,E,S,o,i,u,function(e){n(10,E=e.dictionaryButtonError),n(11,S=e.enableDictionaryButton)},function(){S&&n(9,g=!g)},function(){n(9,g=!1)},d,c]}class xM extends Qh{constructor(e){super(),Jh(this,e,TM,SM,yg,{websiteSettings:0,settings:1,closeWindow:2,extensionContext:3,textProcessingMode:4,showProTranslateStatus:5,showProWriteStatus:6,onChangeTextProcessingMode:7,error:8})}}const $M={ITA_REQUEST_TRANSLATION:"ITA_REQUEST_TRANSLATION",ITA_CLOSE_TRANSLATION_SESSION:"ITA_CLOSE_TRANSLATION_SESSION",ITA_REQUEST_WRITE:"ITA_REQUEST_WRITE",ITA_WRITE_UPDATE_SOURCE_TEXT:"ITA_WRITE_UPDATE_SOURCE_TEXT",ITA_RESTORE_TRANSLATE_SESSION:"ITA_RESTORE_TRANSLATE_SESSION",ITA_SOURCE_LANGUAGE:"ITA_SOURCE_LANGUAGE",ITA_SOURCE_LANGUAGE_IS_AUTO_DETECTED:"ITA_SOURCE_LANGUAGE_IS_AUTO_DETECTED",ITA_TARGET_TEXT_FIELD:"ITA_TARGET_TEXT_FIELD",ITA_WRITE_TARGET_TEXT_FIELD:"ITA_WRITE_TARGET_TEXT_FIELD",ITA_UPDATE_FORMALITY:"ITA_UPDATE_FORMALITY",ITA_UPDATE_TARGET_LANGUAGE:"ITA_UPDATE_TARGET_LANGUAGE",ERROR:"ERROR",ITA_DOCUMENT_STATE:"ITA_DOCUMENT_STATE",ITA_WRITE_DOCUMENT_STATE:"ITA_WRITE_DOCUMENT_STATE",ITA_WRITE_UPDATE_REQUESTED_LANGUAGE:"ITA_WRITE_UPDATE_REQUESTED_LANGUAGE",ITA_WRITE_UPDATE_STYLE_VARIANT:"ITA_WRITE_UPDATE_STYLE_VARIANT",ITA_RESTORE_WRITE_SESSION:"ITA_RESTORE_WRITE_SESSION",ITA_RATE_LIMITED:"ITA_RATE_LIMITED"};function CM(e){yw.update({translationState:d.none,error:e})}let kM;const LM=()=>clearTimeout(kM);function IM(e){yw.update({translationState:d.none,itaRateLimitWarning:{error:e}}),LM(),kM=window.setTimeout((()=>{yw.update({itaRateLimitWarning:void 0})}),15e3)}const AM=()=>{LM(),yw.update({itaRateLimitWarning:void 0}),jM({type:$M.ITA_CLOSE_TRANSLATION_SESSION})},MM=t=>{if(t&&window.getSelection()?.toString()){const n=window.getSelection()?.toString();document.getElementsByTagName("deepl-review-translate-write-window").length||fN({websiteData:yw,onRemove:AM}),yw.update({translationState:d.ongoingTranslation,translatedSnippet:"",snippetDetectedSourceLang:"",translatedDOMSnippet:"",originalSnippet:n,itaSourceLanguage:"",itaSourceLanguageIsAutoDetected:null,itaDocumentState:null}),jM({type:$M.ITA_REQUEST_TRANSLATION,payload:{sourceText:n,targetLanguage:t,domainName:window.location.hostname,trigger:h,websiteLanguage:e.websiteData.websiteLanguage}})}},RM=e=>{e&&yw.update({translationState:d.none,translatedSnippet:e})},OM=e=>{e&&yw.update({writeState:u,improvedSnippet:e})},NM=e=>{e&&yw.update({itaSourceLanguage:e.toUpperCase()})},DM=e=>{e&&yw.update({itaSourceLanguageIsAutoDetected:e})},PM=e=>{e&&yw.update({itaDocumentState:e})},BM=e=>{e&&yw.update({itaWriteDocumentState:e})};function UM(t){e.websiteData.itaDocumentState&&t.postMessage({type:$M.ITA_RESTORE_TRANSLATE_SESSION,payload:{itaDocumentState:e.websiteData.itaDocumentState,domainName:window.location.host}}),e.websiteData.itaWriteDocumentState&&t.postMessage({type:$M.ITA_RESTORE_WRITE_SESSION,payload:{itaWriteDocumentState:e.websiteData.itaWriteDocumentState,domainName:window.location.host}})}async function zM(){const{enableItaDev:e}=await JT(["enableItaDev"]),n=await t({action:"dlGetClientState"});return rn()&&e||(n?.featureSet?.customizations?.includes("itaTranslateEnabled")??!1)}function HM(t,n,o){switch(t.action){case"dlTranslate":t.sourceLang&&bP(t.sourceLang,_),o();break;case"dlShowOriginal":yw.update({translationState:d.showOriginal}),o();break;case"dlDefaultPopUpMounting":e.websiteData.translationState===d.none&&yN(),SN(),o();break;case"dlTabChanged":setTimeout((()=>{MP()}),500),o();break;case"dlTranslateInline":MP().then((async()=>{await zM()?MM(t.targetLang):yP(t)})),o();break;case"dlTranslateSelectionRightClick":MP().then((()=>wP(t.payload))),o();break;case"dlGetWebsiteData":MP().then((()=>o(e.websiteData)));break;case"dlShowNotification":UN(t.payload.type,t.payload.options),o();break;case"dlErrorVisibility":BP(t.payload.state),o();break;case"dlShowAskForAReviewPopup":zN(ne.initial),o();break;case"dlShowCustomerSegmentationSurvey":zN(ne.customer_segmentation),o();break;case"dlShowArabicSurveyPopup":zN(ne.arabic_survey),o();break;case"dlShowAlert":FP(t.payload),o();break;case"dlShowGmailFeedbackPopup":zN(ne.gmail),o();break;case"dlShowSlidesFeedbackPopup":zN(ne.gslides),o()}return!0}let FM;function WM(e){e.onMessage.addListener(qM),FM=e}function jM(e){FM&&(rn()&&console.log(`Sending message to background port:\n type: ${e.type}, payload: ${e.payload}`),FM.postMessage(e))}function qM(e){switch(rn()&&console.log(`Received message from background port - type: ${e.type}, payload: ${Object.toString(e.payload)}`),e.type){case $M.ITA_TARGET_TEXT_FIELD:RM(e.payload.targetText);break;case $M.ITA_WRITE_TARGET_TEXT_FIELD:OM(e.payload.targetText);break;case $M.ITA_SOURCE_LANGUAGE:NM(e.payload.language);break;case $M.ITA_SOURCE_LANGUAGE_IS_AUTO_DETECTED:DM(e.payload.isAutoDetected);break;case $M.ERROR:CM(e.payload);break;case $M.ITA_DOCUMENT_STATE:PM(e.payload.itaDocumentState);break;case $M.ITA_WRITE_DOCUMENT_STATE:BM(e.payload.itaDocumentState);break;case $M.ITA_RATE_LIMITED:IM(e.payload.warning);break;default:rn()&&console.log(`Unrecognised message type:\n ${e.type}`)}}function GM(e){let t,n,o,i,r=chrome.i18n.getMessage(`supported_languages_${e[2].itaSourceLanguage}`)+"",s=e[2].itaSourceLanguageIsAutoDetected&&VM();return{c(){t=Wg("div"),n=Wg("span"),o=qg(r),i=Gg(),s&&s.c(),Xg(n,"class","source-language-label svelte-gpr70l")},m(e,r){zg(e,t,r),Pg(t,n),Pg(n,o),Pg(t,i),s&&s.m(t,null)},p(e,n){4&n&&r!==(r=chrome.i18n.getMessage(`supported_languages_${e[2].itaSourceLanguage}`)+"")&&Jg(o,r),e[2].itaSourceLanguageIsAutoDetected?s||(s=VM(),s.c(),s.m(t,null)):s&&(s.d(1),s=null)},d(e){e&&Hg(t),s&&s.d()}}}function VM(e){let t;return{c(){t=Wg("span"),t.textContent="(detected)"},m(e,n){zg(e,t,n)},d(e){e&&Hg(t)}}}function YM(e){let t,n,o,i;return o=new Mw({props:{value:e[3].selectedTargetLanguage,websiteSettings:e[0],customClass:"dropdown__wrapper--header",fontSize:"sm",autoHeight:!1}}),o.$on("selection",e[4]),{c(){t=Wg("div"),t.innerHTML='<svg width="33" height="32" viewBox="0 0 33 32" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-gpr70l"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.5 15C9.5 14.5858 9.83579 14.25 10.25 14.25L20.8879 14.25L16.7302 10.2906C16.4316 10.0035 16.4223 9.52875 16.7094 9.23017C16.9965 8.93159 17.4713 8.92228 17.7698 9.20937L23.2698 14.4594C23.4169 14.6008 23.5 14.796 23.5 15C23.5 15.204 23.4169 15.3992 23.2698 15.5406L17.7698 20.7906C17.4713 21.0777 16.9965 21.0684 16.7094 20.7698C16.4223 20.4713 16.4316 19.9965 16.7302 19.7094L20.8879 15.75L10.25 15.75C9.83579 15.75 9.5 15.4142 9.5 15Z" fill="#848F9B"></path></svg>',n=Gg(),Zh(o.$$.fragment),Xg(t,"class","arrow-icon svelte-gpr70l")},m(e,r){zg(e,t,r),zg(e,n,r),Kh(o,e,r),i=!0},p(e,t){const n={};8&t&&(n.value=e[3].selectedTargetLanguage),1&t&&(n.websiteSettings=e[0]),o.$set(n)},i(e){i||(Hh(o.$$.fragment,e),i=!0)},o(e){Fh(o.$$.fragment,e),i=!1},d(e){e&&(Hg(t),Hg(n)),Xh(o,e)}}}function ZM(e){let t,n,o,i=e[2].itaSourceLanguage&&GM(e),r=e[3]?.selectedTargetLanguage&&YM(e);return{c(){t=Wg("div"),i&&i.c(),n=Gg(),r&&r.c(),Xg(t,"class","language-selector-container svelte-gpr70l")},m(e,s){zg(e,t,s),i&&i.m(t,null),Pg(t,n),r&&r.m(t,null),o=!0},p(e,[o]){e[2].itaSourceLanguage?i?i.p(e,o):(i=GM(e),i.c(),i.m(t,n)):i&&(i.d(1),i=null),e[3]?.selectedTargetLanguage?r?(r.p(e,o),8&o&&Hh(r,1)):(r=YM(e),r.c(),Hh(r,1),r.m(t,null)):r&&(Uh(),Fh(r,1,1,(()=>{r=null})),zh())},i(e){o||(Hh(r),o=!0)},o(e){Fh(r),o=!1},d(e){e&&Hg(t),i&&i.d(),r&&r.d()}}}function KM(e,t,n){let o,i,r=mg,s=()=>(r(),r=wg(c,(e=>n(2,o=e))),c),a=mg,l=()=>(a(),a=wg(u,(e=>n(3,i=e))),u);e.$$.on_destroy.push((()=>r())),e.$$.on_destroy.push((()=>a()));let{websiteSettings:c}=t;s();let{settings:u}=t;return l(),e.$$set=e=>{"websiteSettings"in e&&s(n(0,c=e.websiteSettings)),"settings"in e&&l(n(1,u=e.settings))},[c,u,o,i,async function(e){const t=e.detail.selectedOption;await u.set({selectedTargetLanguage:t.value,isTargetLanguageConfirmed:!0,regionalVariant:t.regionalVariant||""}),c.update({translationState:d.ongoingTranslation}),jM({type:$M.ITA_UPDATE_TARGET_LANGUAGE,payload:{language:t.value}})}]}class XM extends Qh{constructor(e){super(),Jh(this,e,KM,ZM,yg,{websiteSettings:0,settings:1})}}function JM(e){let t,n,o,i;return{c(){t=Wg("button"),n=Wg("div"),Xg(n,"class","glossary-icon svelte-q1f4m0"),Xg(t,"class","glossary-button svelte-q1f4m0"),Xg(t,"aria-label",chrome.i18n.getMessage("glossary_label"))},m(r,s){zg(r,t,s),Pg(t,n),o||(i=Yg(t,"click",e[0]),o=!0)},p:mg,d(e){e&&Hg(t),o=!1,i()}}}function QM(e){let t,n,o;return n=new h_({props:{tooltip:chrome.i18n.getMessage("glossary_label"),zIndex:"10000000000",isEnabled:!0,$$slots:{default:[JM]},$$scope:{ctx:e}}}),{c(){t=Wg("div"),Zh(n.$$.fragment),Xg(t,"class","customisations-toolbar svelte-q1f4m0")},m(e,i){zg(e,t,i),Kh(n,t,null),o=!0},p(e,[t]){const o={};2&t&&(o.$$scope={dirty:t,ctx:e}),n.$set(o)},i(e){o||(Hh(n.$$.fragment,e),o=!0)},o(e){Fh(n.$$.fragment,e),o=!1},d(e){e&&Hg(t),Xh(n)}}}function eR(e){return[function(){t({action:"dlOpenInternalPage",payload:{destination:tS.settings_glossary}})}]}class tR extends Qh{constructor(e){super(),Jh(this,e,eR,QM,yg,{})}}function nR(e,t,n){const o=e.slice();return o[32]=t[n],o[34]=n,o}function oR(e){let t;let n=function(e,t){return e[15]()?rR:iR}(e),o=n(e);return{c(){o.c(),t=Vg()},m(e,n){o.m(e,n),zg(e,t,n)},p(e,t){o.p(e,t)},i(e){Hh(o)},o:mg,d(e){e&&Hg(t),o.d(e)}}}function iR(e){let t,n,o,i,r,s,a,l,c,d,u,p,m,g,h,f,_;return{c(){t=Wg("ul"),n=Wg("li"),o=Wg("span"),o.textContent=`${chrome.i18n.getMessage("ui_formality_formal")}`,i=Gg(),r=Wg("span"),r.textContent=`${chrome.i18n.getMessage("login_translate_pages_pro_badge")}`,s=Gg(),a=Wg("li"),l=Wg("span"),l.textContent=`${chrome.i18n.getMessage("ui_formality_informal")}`,c=Gg(),d=Wg("span"),d.textContent=`${chrome.i18n.getMessage("login_translate_pages_pro_badge")}`,u=Gg(),p=Wg("li"),p.textContent=`${chrome.i18n.getMessage("ui_formality_automatic")}`,m=Gg(),g=Wg("li"),h=Wg("button"),h.textContent=`${chrome.i18n.getMessage("link_try_deepl")}`,Xg(r,"class","pro-label svelte-mfqqj4"),Xg(n,"disabled",""),Xg(n,"class","svelte-mfqqj4"),Xg(d,"class","pro-label svelte-mfqqj4"),Xg(a,"disabled",""),Xg(a,"class","svelte-mfqqj4"),Xg(p,"class","selected svelte-mfqqj4"),Xg(h,"class","svelte-mfqqj4"),Xg(g,"class","svelte-mfqqj4"),Xg(t,"id","dropdown_list"),Xg(t,"class","alternate-dropdown-list svelte-mfqqj4"),Xg(t,"role","listbox"),Xg(t,"aria-labelledby","dropdown_option"),Xg(t,"tabindex","-1"),ih(t,"pro-dropdown",!0)},m(v,y){zg(v,t,y),Pg(t,n),Pg(n,o),Pg(n,i),Pg(n,r),Pg(t,s),Pg(t,a),Pg(a,l),Pg(a,c),Pg(a,d),Pg(t,u),Pg(t,p),Pg(t,m),Pg(t,g),Pg(g,h),f||(_=Yg(h,"click",e[16]),f=!0)},p:mg,i:mg,o:mg,d(e){e&&Hg(t),f=!1,_()}}}function rR(e){let t,n,o=Vh(e[3]),i=[];for(let t=0;t<o.length;t+=1)i[t]=sR(nR(e,o,t));return{c(){t=Wg("ul");for(let e=0;e<i.length;e+=1)i[e].c();Xg(t,"id","dropdown_list"),Xg(t,"class","alternate-dropdown-list svelte-mfqqj4"),Xg(t,"role","listbox"),Xg(t,"aria-labelledby","dropdown_option"),Xg(t,"tabindex","-1"),Xg(t,"style",`height: ${e[12].height}; top: ${e[12].top};`),Xg(t,"data-qa",e[2])},m(n,o){zg(n,t,o);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,null);e[24](t)},p(e,n){if(281&n[0]){let r;for(o=Vh(e[3]),r=0;r<o.length;r+=1){const s=nR(e,o,r);i[r]?i[r].p(s,n):(i[r]=sR(s),i[r].c(),i[r].m(t,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=o.length}4&n[0]&&Xg(t,"data-qa",e[2])},i(e){n||kh((()=>{n=jh(t,Of,{y:-5,duration:500}),n.start()}))},o:mg,d(n){n&&Hg(t),Fg(i,n),e[24](null)}}}function sR(e){let t,n,o,i,r,s,a,l=e[32].label+"";function c(){return e[23](e[32])}return{c(){t=Wg("li"),n=qg(l),o=Gg(),Xg(t,"role","option"),Xg(t,"data-option-value",i=e[32].value),Xg(t,"aria-selected",r=e[4]===e[32]),Xg(t,"class","svelte-mfqqj4"),ih(t,"selected",e[4]===e[32]),ih(t,"keyboardSelected",e[34]===e[8])},m(i,r){zg(i,t,r),Pg(t,n),Pg(t,o),s||(a=[Yg(t,"click",c),Yg(t,"mousedown",Kg(Zg(e[20])))],s=!0)},p(o,s){e=o,8&s[0]&&l!==(l=e[32].label+"")&&Jg(n,l),8&s[0]&&i!==(i=e[32].value)&&Xg(t,"data-option-value",i),24&s[0]&&r!==(r=e[4]===e[32])&&Xg(t,"aria-selected",r),24&s[0]&&ih(t,"selected",e[4]===e[32]),256&s[0]&&ih(t,"keyboardSelected",e[34]===e[8])},d(e){e&&Hg(t),s=!1,_g(a)}}}function aR(e){let t,n,o,i,r,s,a=e[0]&&oR(e);return{c(){t=Wg("div"),n=Wg("button"),o=qg(e[6]),i=Gg(),a&&a.c(),Xg(n,"aria-haspopup","listbox"),Xg(n,"id","dropdown_button"),Xg(n,"aria-labelledby","dropdown_option dropdown_button"),Xg(n,"aria-expanded",e[0]),Xg(n,"data-qa",e[1]),Xg(n,"class","dropdown-label svelte-mfqqj4"),Xg(t,"class","dropdown__wrapper svelte-mfqqj4"),Xg(t,"style",e[10])},m(l,c){zg(l,t,c),Pg(t,n),Pg(n,o),e[22](n),Pg(t,i),a&&a.m(t,null),e[26](t),r||(s=[Yg(n,"click",e[13]),Yg(n,"mousedown",Kg(Zg(e[21]))),Yg(n,"keydown",e[14]),Lg(c_.call(null,t,{isShadow:!0})),Yg(t,"click_outside",e[25])],r=!0)},p(e,i){64&i[0]&&Jg(o,e[6]),1&i[0]&&Xg(n,"aria-expanded",e[0]),2&i[0]&&Xg(n,"data-qa",e[1]),e[0]?a?(a.p(e,i),1&i[0]&&Hh(a,1)):(a=oR(e),a.c(),Hh(a,1),a.m(t,null)):a&&(a.d(1),a=null),1024&i[0]&&Xg(t,"style",e[10])},i(e){Hh(a)},o:mg,d(n){n&&Hg(t),e[22](null),a&&a.d(),e[26](null),r=!1,_g(s)}}}function lR(e,n,o){let i,r,s,{isOpen:a=!1}=n,{dataQaButton:l="dl-dropdown-button"}=n,{dataQaList:c="dl-dropdown-list"}=n,{handleSelect:d}=n;const u=yh("deepl_settings");bg(e,u,(e=>o(29,s=e)));let p,m,g,h,f,_=0,v={},y=-1,w="visibility: hidden; opacity:0; height:0;";hh((()=>{setTimeout((()=>{o(10,w="")}),100),h=f_(g,(({clientWidth:e})=>{o(18,_=e)}))})),fh((()=>{h&&h()}));return e.$$set=e=>{"isOpen"in e&&o(0,a=e.isOpen),"dataQaButton"in e&&o(1,l=e.dataQaButton),"dataQaList"in e&&o(2,c=e.dataQaList),"handleSelect"in e&&o(17,d=e.handleSelect)},e.$$.update=()=>{8&e.$$.dirty[0]&&o(4,r=i.find((e=>"undefined"===e.value))),917520&e.$$.dirty[0]&&(r&&v?.value!==r?.value&&(o(19,v=r),d({selectedOption:r})),_&&(Math.abs(p.getBoundingClientRect().top),Math.abs(window.innerHeight-p.getBoundingClientRect().bottom))),16&e.$$.dirty[0]&&r&&o(6,m=`${r.selectedOptionLabel}`)},o(3,i=[{value:"formal",label:chrome.i18n.getMessage("ui_formality_formal"),selectedOptionLabel:chrome.i18n.getMessage("ui_formality_formal")},{value:"informal",label:chrome.i18n.getMessage("ui_formality_informal"),selectedOptionLabel:chrome.i18n.getMessage("ui_formality_informal")},{value:"undefined",label:chrome.i18n.getMessage("ui_formality_automatic"),selectedOptionLabel:chrome.i18n.getMessage("ui_formality_automatic")}]),[a,l,c,i,r,p,m,g,y,f,w,u,{},function(){o(0,a=!a),function(){let e=p.getRootNode().querySelector("ul li[aria-selected=true]");setTimeout((()=>{e?.scrollIntoView({block:"nearest"})}),0)}()},function(e){if(!a)return;if("ArrowUp"===e.key&&y>0)o(8,y-=1);else if("ArrowDown"===e.key&&y<i.length-1)o(8,y+=1);else if("Enter"===e.key&&-1!==y){const t=i[y];o(0,a=!1),o(4,r=t),o(8,y=-1),e.preventDefault(),e.stopPropagation()}else{if("Escape"!==e.key)return;o(0,a=!1),o(8,y=-1)}const t=i[y];var n=f.querySelector(`[data-option-value="${t.value}"]`).offsetTop-f.offsetTop;f.scrollTo({top:n,behavior:"smooth"})},function(){return Ke(s,ye.TRANSLATOR)},function(){const e=av;t({action:"dlTrackUILocationClicked",payload:U.inlineTranslationTriggerIcon}),t({action:"dlExternalURLRedirect",payload:{destination:e,utmContent:"inline_translator"}})},d,_,v,function(t){wh.call(this,e,t)},function(t){wh.call(this,e,t)},function(e){Eh[e?"unshift":"push"]((()=>{p=e,o(5,p)}))},e=>{o(0,a=!1),o(4,r=e),o(8,y=-1)},function(e){Eh[e?"unshift":"push"]((()=>{f=e,o(9,f)}))},()=>{o(0,a=!1)},function(e){Eh[e?"unshift":"push"]((()=>{g=e,o(7,g)}))}]}class cR extends Qh{constructor(e){super(),Jh(this,e,lR,aR,yg,{isOpen:0,dataQaButton:1,dataQaList:2,handleSelect:17},null,[-1,-1])}}function dR(e){let t,n,o,i,r;return n=new cR({props:{dataQaButton:"deepl-formality-selection-button",dataQaList:"deepl-formality-selection-list",handleSelect:e[0]}}),{c(){t=Wg("div"),Zh(n.$$.fragment),Xg(t,"role","button"),Xg(t,"tabindex","-1")},m(s,a){zg(s,t,a),Kh(n,t,null),o=!0,i||(r=Yg(t,"mousedown",Kg(Zg(e[2]))),i=!0)},p:mg,i(e){o||(Hh(n.$$.fragment,e),o=!0)},o(e){Fh(n.$$.fragment,e),o=!1},d(e){e&&Hg(t),Xh(n),i=!1,r()}}}function uR(e,t,n){let{websiteSettings:o}=t;return e.$$set=e=>{"websiteSettings"in e&&n(1,o=e.websiteSettings)},[function({selectedOption:e}){nf.set({formality:e.value}),jM({type:$M.ITA_UPDATE_FORMALITY,payload:{formality:e.value}})},o,function(t){wh.call(this,e,t)}]}class pR extends Qh{constructor(e){super(),Jh(this,e,uR,dR,yg,{websiteSettings:1})}}function mR(e){let t,n,o,i,r,s,a,l,c,d,u,p,m,g,h,f,_,v=Jx(e[5].translatedSnippet)+"";n=new XM({props:{websiteSettings:e[0],settings:e[1]}});let y=e[4]&&hR(e);s=new tR({}),p=new u$({props:{sourceLang:e[5].websiteLanguage,targetLang:e[3].selectedTargetLanguage,sourceText:e[5].originalSnippet,targetText:e[5].translatedSnippet,platformBehaviour:e[2]}}),g=new n$({props:{targetLang:e[3].selectedTargetLanguage,text:e[5].translatedSnippet,platformBehaviour:e[2]}});let w=e[5].itaRateLimitWarning&&fR(e);return{c(){t=Wg("div"),Zh(n.$$.fragment),o=Gg(),i=Wg("div"),y&&y.c(),r=Gg(),Zh(s.$$.fragment),a=Gg(),l=Wg("div"),d=Gg(),u=Wg("div"),Zh(p.$$.fragment),m=Gg(),Zh(g.$$.fragment),h=Gg(),w&&w.c(),f=Vg(),Xg(i,"class","translate-toolbar-buttons svelte-4u250i"),Xg(t,"class","translate-toolbar-container svelte-4u250i"),Xg(l,"class","result-frame svelte-4u250i"),Xg(l,"dir",c=Bt(e[3].selectedTargetLanguage)),Xg(u,"class","dl-btn-group svelte-4u250i")},m(e,c){zg(e,t,c),Kh(n,t,null),Pg(t,o),Pg(t,i),y&&y.m(i,null),Pg(i,r),Kh(s,i,null),zg(e,a,c),zg(e,l,c),l.innerHTML=v,zg(e,d,c),zg(e,u,c),Kh(p,u,null),Pg(u,m),Kh(g,u,null),zg(e,h,c),w&&w.m(e,c),zg(e,f,c),_=!0},p(e,t){const o={};1&t&&(o.websiteSettings=e[0]),2&t&&(o.settings=e[1]),n.$set(o),e[4]?y?(y.p(e,t),16&t&&Hh(y,1)):(y=hR(e),y.c(),Hh(y,1),y.m(i,r)):y&&(Uh(),Fh(y,1,1,(()=>{y=null})),zh()),(!_||32&t)&&v!==(v=Jx(e[5].translatedSnippet)+"")&&(l.innerHTML=v),(!_||8&t&&c!==(c=Bt(e[3].selectedTargetLanguage)))&&Xg(l,"dir",c);const s={};32&t&&(s.sourceLang=e[5].websiteLanguage),8&t&&(s.targetLang=e[3].selectedTargetLanguage),32&t&&(s.sourceText=e[5].originalSnippet),32&t&&(s.targetText=e[5].translatedSnippet),4&t&&(s.platformBehaviour=e[2]),p.$set(s);const a={};8&t&&(a.targetLang=e[3].selectedTargetLanguage),32&t&&(a.text=e[5].translatedSnippet),4&t&&(a.platformBehaviour=e[2]),g.$set(a),e[5].itaRateLimitWarning?w?(w.p(e,t),32&t&&Hh(w,1)):(w=fR(e),w.c(),Hh(w,1),w.m(f.parentNode,f)):w&&(Uh(),Fh(w,1,1,(()=>{w=null})),zh())},i(e){_||(Hh(n.$$.fragment,e),Hh(y),Hh(s.$$.fragment,e),Hh(p.$$.fragment,e),Hh(g.$$.fragment,e),Hh(w),_=!0)},o(e){Fh(n.$$.fragment,e),Fh(y),Fh(s.$$.fragment,e),Fh(p.$$.fragment,e),Fh(g.$$.fragment,e),Fh(w),_=!1},d(e){e&&(Hg(t),Hg(a),Hg(l),Hg(d),Hg(u),Hg(h),Hg(f)),Xh(n),y&&y.d(),Xh(s),Xh(p),Xh(g),w&&w.d(e)}}}function gR(e){let t,n,o;return n=new eS({}),{c(){t=Wg("div"),Zh(n.$$.fragment),Xg(t,"class","loading-spinner-container svelte-4u250i")},m(e,i){zg(e,t,i),Kh(n,t,null),o=!0},p:mg,i(e){o||(Hh(n.$$.fragment,e),o=!0)},o(e){Fh(n.$$.fragment,e),o=!1},d(e){e&&Hg(t),Xh(n)}}}function hR(e){let t,n;return t=new pR({props:{websiteSettings:e[0]}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.websiteSettings=e[0]),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function fR(e){let t,n;return t=new Cy({props:{error:e[5].itaRateLimitWarning}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};32&n&&(o.error=e[5].itaRateLimitWarning),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function _R(e){let t,n,o,i;const r=[gR,mR],s=[];function a(e,t){return null==e[5]||e[5].translationState===d.ongoingTranslation?0:e[5].translatedSnippet?1:-1}return~(n=a(e))&&(o=s[n]=r[n](e)),{c(){t=Wg("div"),o&&o.c()},m(e,o){zg(e,t,o),~n&&s[n].m(t,null),i=!0},p(e,[i]){let l=n;n=a(e),n===l?~n&&s[n].p(e,i):(o&&(Uh(),Fh(s[l],1,1,(()=>{s[l]=null})),zh()),~n?(o=s[n],o?o.p(e,i):(o=s[n]=r[n](e),o.c()),Hh(o,1),o.m(t,null)):o=null)},i(e){i||(Hh(o),i=!0)},o(e){Fh(o),i=!1},d(e){e&&Hg(t),~n&&s[n].d()}}}function vR(e,t,n){let o,i,r,s=mg,a=()=>(s(),s=wg(u,(e=>n(3,i=e))),u),l=mg,c=()=>(l(),l=wg(d,(e=>n(5,r=e))),d);e.$$.on_destroy.push((()=>s())),e.$$.on_destroy.push((()=>l()));let{websiteSettings:d}=t;c();let{settings:u}=t;a();let{platformBehaviour:p}=t;return e.$$set=e=>{"websiteSettings"in e&&c(n(0,d=e.websiteSettings)),"settings"in e&&a(n(1,u=e.settings)),"platformBehaviour"in e&&n(2,p=e.platformBehaviour)},e.$$.update=()=>{8&e.$$.dirty&&n(4,o=Pt(i.selectedTargetLanguage))},[d,u,p,i,o,r]}class yR extends Qh{constructor(e){super(),Jh(this,e,vR,_R,yg,{websiteSettings:0,settings:1,platformBehaviour:2})}}function wR(e){let t,n,o;return n=new Mw({props:{value:e[2].selectedTargetLanguage,websiteSettings:e[0],customClass:"dropdown__wrapper--header",fontSize:"sm",autoHeight:!1}}),n.$on("selection",e[3]),{c(){t=Wg("div"),Zh(n.$$.fragment),Xg(t,"class","language-selector-container svelte-gpr70l")},m(e,i){zg(e,t,i),Kh(n,t,null),o=!0},p(e,[t]){const o={};4&t&&(o.value=e[2].selectedTargetLanguage),1&t&&(o.websiteSettings=e[0]),n.$set(o)},i(e){o||(Hh(n.$$.fragment,e),o=!0)},o(e){Fh(n.$$.fragment,e),o=!1},d(e){e&&Hg(t),Xh(n)}}}function bR(e,t,n){let o,i=mg,r=()=>(i(),i=wg(a,(e=>n(2,o=e))),a);e.$$.on_destroy.push((()=>i()));let{websiteSettings:s}=t,{settings:a}=t;return r(),e.$$set=e=>{"websiteSettings"in e&&n(0,s=e.websiteSettings),"settings"in e&&r(n(1,a=e.settings))},[s,a,o,async function(e){const t=e.detail.selectedOption;await a.set({selectedTargetLanguage:t.value,isTargetLanguageConfirmed:!0,regionalVariant:t.regionalVariant||""}),s.update({writeState:p}),jM({type:$M.ITA_UPDATE_TARGET_LANGUAGE,payload:{language:t.value}})}]}class ER extends Qh{constructor(e){super(),Jh(this,e,bR,wR,yg,{websiteSettings:0,settings:1})}}function SR(e){let t,n,o,i,r,s,a,l,c;return{c(){t=Wg("div"),n=Wg("button"),n.textContent=`${chrome.i18n.getMessage("ui_inline_translation_listen_to_new")}`,o=Gg(),i=Wg("button"),i.textContent=`${chrome.i18n.getMessage("ui_inline_translation_listen_to_original")}`,Xg(n,"class","list-entry svelte-o3etn3"),Xg(n,"data-qa","dl-toolbar-listener-button-target-lang"),ih(n,"dl-entry-notAvailable",!e[0]),Xg(i,"class","list-entry svelte-o3etn3"),Xg(i,"data-qa","dl-toolbar-listener-button-source-lang"),ih(i,"dl-entry-notAvailable",!e[0]),Xg(t,"class","listen-list svelte-o3etn3"),Xg(t,"data-qa","dl-toolbar-listener-element-langs")},m(r,s){zg(r,t,s),Pg(t,n),Pg(t,o),Pg(t,i),a=!0,l||(c=[Yg(n,"click",e[5]),Yg(i,"click",e[6])],l=!0)},p(e,[t]){(!a||1&t)&&ih(n,"dl-entry-notAvailable",!e[0]),(!a||1&t)&&ih(i,"dl-entry-notAvailable",!e[0])},i(e){a||(kh((()=>{a&&(s&&s.end(1),r=jh(t,Of,{y:-5,duration:500}),r.start())})),a=!0)},o(e){r&&r.invalidate(),s=qh(t,Of,{y:-5,duration:500}),a=!1},d(e){e&&Hg(t),e&&s&&s.end(),l=!1,_g(c)}}}function TR(e,t,n){let{isRequestedLanguageAvailable:o}=t,{requestedLang:i}=t,{sourceText:r}=t,{improvedText:s}=t,{listen:a=((e,t)=>null)}=t;return e.$$set=e=>{"isRequestedLanguageAvailable"in e&&n(0,o=e.isRequestedLanguageAvailable),"requestedLang"in e&&n(1,i=e.requestedLang),"sourceText"in e&&n(2,r=e.sourceText),"improvedText"in e&&n(3,s=e.improvedText),"listen"in e&&n(4,a=e.listen)},[o,i,r,s,a,()=>{a(s,i)},()=>{a(r,i)}]}class xR extends Qh{constructor(e){super(),Jh(this,e,TR,SR,yg,{isRequestedLanguageAvailable:0,requestedLang:1,sourceText:2,improvedText:3,listen:4})}}function $R(e){let t,n,o,i,r;return n=new h_({props:{tooltip:e[6],zIndex:300,$$slots:{default:[kR]},$$scope:{ctx:e}}}),{c(){t=Wg("fragment"),Zh(n.$$.fragment),Xg(t,"role","navigation")},m(s,a){zg(s,t,a),Kh(n,t,null),o=!0,i||(r=[Yg(t,"mouseover",e[9]),Yg(t,"focus",e[9]),Yg(t,"mouseleave",e[11])],i=!0)},p(e,t){const o={};64&t&&(o.tooltip=e[6]),16447&t&&(o.$$scope={dirty:t,ctx:e}),n.$set(o)},i(e){o||(Hh(n.$$.fragment,e),o=!0)},o(e){Fh(n.$$.fragment,e),o=!1},d(e){e&&Hg(t),Xh(n),i=!1,_g(r)}}}function CR(e){let t,n;return t=new xR({props:{isRequestedLanguageAvailable:e[5],requestedLang:e[0],sourceText:e[1],improvedText:e[2],listen:e[7]}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};32&n&&(o.isRequestedLanguageAvailable=e[5]),1&n&&(o.requestedLang=e[0]),2&n&&(o.sourceText=e[1]),4&n&&(o.improvedText=e[2]),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function kR(e){let t,n,o,i,r,s,a=e[4]&&CR(e);return{c(){t=Wg("button"),t.innerHTML='<span class="dl-icon dl-icon-listen svelte-17suwwx"></span>',n=Gg(),a&&a.c(),o=Vg(),Xg(t,"type","button"),Xg(t,"class","dl-btn svelte-17suwwx"),Xg(t,"data-qa","dl-toolbar-listener-button"),ih(t,"dl-btn-active",e[3]),ih(t,"dl-btn-hovered",e[4])},m(l,c){zg(l,t,c),zg(l,n,c),a&&a.m(l,c),zg(l,o,c),i=!0,r||(s=Yg(t,"click",e[8]),r=!0)},p(e,n){(!i||8&n)&&ih(t,"dl-btn-active",e[3]),(!i||16&n)&&ih(t,"dl-btn-hovered",e[4]),e[4]?a?(a.p(e,n),16&n&&Hh(a,1)):(a=CR(e),a.c(),Hh(a,1),a.m(o.parentNode,o)):a&&(Uh(),Fh(a,1,1,(()=>{a=null})),zh())},i(e){i||(Hh(a),i=!0)},o(e){Fh(a),i=!1},d(e){e&&(Hg(t),Hg(n),Hg(o)),a&&a.d(e),r=!1,s()}}}function LR(e){let t,n,o=e[5]&&$R(e);return{c(){o&&o.c(),t=Vg()},m(e,i){o&&o.m(e,i),zg(e,t,i),n=!0},p(e,[n]){e[5]?o?(o.p(e,n),32&n&&Hh(o,1)):(o=$R(e),o.c(),Hh(o,1),o.m(t.parentNode,t)):o&&(Uh(),Fh(o,1,1,(()=>{o=null})),zh())},i(e){n||(Hh(o),n=!0)},o(e){Fh(o),n=!1},d(e){e&&Hg(t),o&&o.d(e)}}}function IR(e,n,o){let{platformBehaviour:i=ie.default}=n,{requestedLang:r=""}=n,{sourceText:s=""}=n,{improvedText:a=""}=n,l=!1,c=!1,d=!1,u=!1;function p(){t({action:"dlStopSpeech"}),o(3,c=!1)}async function m(e,t,n){if("dlVoiceOverStopped"===e.action)o(3,c=!1),n();return!0}chrome.runtime.onMessage.addListener(m),fh((()=>{p(),chrome.runtime.onMessage.removeListener(m)}));return e.$$set=e=>{"platformBehaviour"in e&&o(10,i=e.platformBehaviour),"requestedLang"in e&&o(0,r=e.requestedLang),"sourceText"in e&&o(1,s=e.sourceText),"improvedText"in e&&o(2,a=e.improvedText)},e.$$.update=()=>{25&e.$$.dirty&&(r&&t({action:"dlGetSupportedVoices"}).then((e=>{o(5,l=e.includes(["EN-US","EN-GB"].includes(r)?"EN":["PT-PT","PT-BR"].includes(r)?"PT":["ZH-CN","ZH-HANT"].includes(r)?"ZH":r))})),!d&&c?setTimeout((()=>{o(6,u=chrome.i18n.getMessage("ui_inline_translation_listen_stop"))}),1e3):o(6,u=!1))},[r,s,a,c,d,l,u,async function(e,n){c||(t({action:"dlTextToSpeech",payload:{text:e,lang:n}}),o(3,c=!0),o(4,d=!1))},function(){c?(p(),o(3,c=!1)):o(4,d=!0)},function(){c||o(4,d=!0)},i,()=>o(4,d=!1)]}class AR extends Qh{constructor(e){super(),Jh(this,e,IR,LR,yg,{platformBehaviour:10,requestedLang:0,sourceText:1,improvedText:2})}}function MR(e){let t,n,o,i,r,s,a,l,c,d,u,p=Jx(e[3].improvedSnippet)+"";return n=new ER({props:{websiteSettings:e[0],settings:e[1]}}),l=new AR({props:{requestedLang:e[3].websiteLanguage,sourceText:e[3].originalSnippet,improvedText:e[3].improvedSnippet,platformBehaviour:e[2]}}),d=new n$({props:{targetLang:e[4].selectedTargetLanguage,text:e[3].improvedSnippet,platformBehaviour:e[2]}}),{c(){t=Wg("div"),Zh(n.$$.fragment),o=Gg(),i=Wg("div"),s=Gg(),a=Wg("div"),Zh(l.$$.fragment),c=Gg(),Zh(d.$$.fragment),Xg(t,"class","write-toolbar-container svelte-3lq15y"),Xg(i,"class","result-frame svelte-3lq15y"),Xg(i,"dir",r=Bt(e[4].selectedTargetLanguage)),Xg(a,"class","dl-btn-group svelte-3lq15y")},m(e,r){zg(e,t,r),Kh(n,t,null),zg(e,o,r),zg(e,i,r),i.innerHTML=p,zg(e,s,r),zg(e,a,r),Kh(l,a,null),Pg(a,c),Kh(d,a,null),u=!0},p(e,t){const o={};1&t&&(o.websiteSettings=e[0]),2&t&&(o.settings=e[1]),n.$set(o),(!u||8&t)&&p!==(p=Jx(e[3].improvedSnippet)+"")&&(i.innerHTML=p),(!u||16&t&&r!==(r=Bt(e[4].selectedTargetLanguage)))&&Xg(i,"dir",r);const s={};8&t&&(s.requestedLang=e[3].websiteLanguage),8&t&&(s.sourceText=e[3].originalSnippet),8&t&&(s.improvedText=e[3].improvedSnippet),4&t&&(s.platformBehaviour=e[2]),l.$set(s);const a={};16&t&&(a.targetLang=e[4].selectedTargetLanguage),8&t&&(a.text=e[3].improvedSnippet),4&t&&(a.platformBehaviour=e[2]),d.$set(a)},i(e){u||(Hh(n.$$.fragment,e),Hh(l.$$.fragment,e),Hh(d.$$.fragment,e),u=!0)},o(e){Fh(n.$$.fragment,e),Fh(l.$$.fragment,e),Fh(d.$$.fragment,e),u=!1},d(e){e&&(Hg(t),Hg(o),Hg(i),Hg(s),Hg(a)),Xh(n),Xh(l),Xh(d)}}}function RR(e){let t,n,o;return n=new eS({}),{c(){t=Wg("div"),Zh(n.$$.fragment),Xg(t,"class","loading-spinner-container svelte-3lq15y")},m(e,i){zg(e,t,i),Kh(n,t,null),o=!0},p:mg,i(e){o||(Hh(n.$$.fragment,e),o=!0)},o(e){Fh(n.$$.fragment,e),o=!1},d(e){e&&Hg(t),Xh(n)}}}function OR(e){let t,n,o,i;const r=[RR,MR],s=[];function a(e,t){return null==e[3]||e[3].writeState===p?0:e[3].improvedSnippet?1:-1}return~(n=a(e))&&(o=s[n]=r[n](e)),{c(){t=Wg("div"),o&&o.c()},m(e,o){zg(e,t,o),~n&&s[n].m(t,null),i=!0},p(e,[i]){let l=n;n=a(e),n===l?~n&&s[n].p(e,i):(o&&(Uh(),Fh(s[l],1,1,(()=>{s[l]=null})),zh()),~n?(o=s[n],o?o.p(e,i):(o=s[n]=r[n](e),o.c()),Hh(o,1),o.m(t,null)):o=null)},i(e){i||(Hh(o),i=!0)},o(e){Fh(o),i=!1},d(e){e&&Hg(t),~n&&s[n].d()}}}function NR(e,t,n){let o,i,r=mg,s=()=>(r(),r=wg(c,(e=>n(3,o=e))),c),a=mg,l=()=>(a(),a=wg(d,(e=>n(4,i=e))),d);e.$$.on_destroy.push((()=>r())),e.$$.on_destroy.push((()=>a()));let{websiteSettings:c}=t;s();let{settings:d}=t;l();let{platformBehaviour:u}=t;return e.$$set=e=>{"websiteSettings"in e&&s(n(0,c=e.websiteSettings)),"settings"in e&&l(n(1,d=e.settings)),"platformBehaviour"in e&&n(2,u=e.platformBehaviour)},[c,d,u,o,i]}class DR extends Qh{constructor(e){super(),Jh(this,e,NR,OR,yg,{websiteSettings:0,settings:1,platformBehaviour:2})}}function PR(e){let t,n;return t=new DR({props:{websiteSettings:e[1],settings:nf}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};2&n&&(o.websiteSettings=e[1]),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function BR(e){let t,n;return t=new yR({props:{websiteSettings:e[1],settings:nf}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};2&n&&(o.websiteSettings=e[1]),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function UR(e){let t,n;return t=new Cy({props:{error:e[2].error}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.error=e[2].error),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function zR(e){let t,n,o,i;const r=[UR,BR,PR],s=[];function a(e,t){return e[2].error?0:e[0]===re.translate?1:e[0]===re.write?2:-1}return~(n=a(e))&&(o=s[n]=r[n](e)),{c(){t=Wg("div"),o&&o.c(),Xg(t,"class","review-translate-write-container svelte-jxaaz5"),Xg(t,"data-qa","deepl-review-translate-write-container"),ih(t,"error",e[2].error)},m(e,o){zg(e,t,o),~n&&s[n].m(t,null),i=!0},p(e,l){let c=n;n=a(e),n===c?~n&&s[n].p(e,l):(o&&(Uh(),Fh(s[c],1,1,(()=>{s[c]=null})),zh()),~n?(o=s[n],o?o.p(e,l):(o=s[n]=r[n](e),o.c()),Hh(o,1),o.m(t,null)):o=null),(!i||4&l)&&ih(t,"error",e[2].error)},i(e){i||(Hh(o),i=!0)},o(e){Fh(o),i=!1},d(e){e&&Hg(t),~n&&s[n].d()}}}function HR(e){let t,n,o;return n=new xM({props:{closeWindow:e[6],extensionContext:e[5],textProcessingMode:e[0],showProTranslateStatus:e[3],showProWriteStatus:e[4],onChangeTextProcessingMode:e[7],websiteSettings:e[1],settings:nf,error:e[2].error,$$slots:{default:[zR]},$$scope:{ctx:e}}}),{c(){t=Wg("div"),Zh(n.$$.fragment)},m(e,i){zg(e,t,i),Kh(n,t,null),o=!0},p(e,[t]){const o={};1&t&&(o.textProcessingMode=e[0]),8&t&&(o.showProTranslateStatus=e[3]),16&t&&(o.showProWriteStatus=e[4]),2&t&&(o.websiteSettings=e[1]),4&t&&(o.error=e[2].error),16391&t&&(o.$$scope={dirty:t,ctx:e}),n.$set(o)},i(e){o||(Hh(n.$$.fragment,e),o=!0)},o(e){Fh(n.$$.fragment,e),o=!1},d(e){e&&Hg(t),Xh(n)}}}function FR(e,n,o){let i,r,s,a=mg,l=()=>(a(),a=wg(d,(e=>o(2,s=e))),d);bg(e,yw,(e=>o(12,i=e))),bg(e,nf,(e=>o(13,r=e))),e.$$.on_destroy.push((()=>a()));let{closeTooltip:c}=n,{websiteSettings:d}=n;l();let u,m,{platformBehaviour:g=ie.default}=n,{textProcessingMode:h=re.translate}=n,{setPositioningStatus:f}=n,_=$;let v=!1;return e.$$set=e=>{"closeTooltip"in e&&o(8,c=e.closeTooltip),"websiteSettings"in e&&l(o(1,d=e.websiteSettings)),"platformBehaviour"in e&&o(9,g=e.platformBehaviour),"textProcessingMode"in e&&o(0,h=e.textProcessingMode),"setPositioningStatus"in e&&o(10,f=e.setPositioningStatus)},e.$$.update=()=>{1540&e.$$.dirty&&!s.translationState&&g===ie.default&&f&&(f(!0),setTimeout((()=>{f(!1)}),600)),8192&e.$$.dirty&&o(3,u=Ke(r,ye.TRANSLATOR)),8192&e.$$.dirty&&o(4,m=Ke(r,ye.WRITE)),6145&e.$$.dirty&&(h!==re.write||v||(async(e="")=>(yw.update({improvedSnippet:"",writeState:p}),jM({type:$M.ITA_REQUEST_WRITE,payload:{sourceText:e,domainName:window.location.hostname}})))(i.originalSnippet).then((()=>{o(11,v=!0)})))},[h,d,s,u,m,_,function(){t({action:"dlTrackUiAction",payload:{uiAction:q,nicheIntegration:g}}),c()},e=>{switch(e){case re.translate:o(0,h=re.translate);break;case re.write:o(0,h=re.write);break;default:return}},c,g,f,v,i,r]}class WR extends Qh{constructor(e){super(),Jh(this,e,FR,HR,yg,{closeTooltip:8,websiteSettings:1,platformBehaviour:9,textProcessingMode:0,setPositioningStatus:10})}}function jR(e){let t,n,o,i,r,s,a,l;return r=new WR({props:{closeTooltip:e[0],websiteSettings:e[1],platformBehaviour:e[2],textProcessingMode:e[3],setPositioningStatus:e[7]}}),{c(){t=Wg("div"),n=Wg("div"),o=Gg(),i=Wg("div"),Zh(r.$$.fragment),Xg(n,"class","review-window-drag-handle svelte-xlxdq7"),Xg(i,"class","review-window-body svelte-xlxdq7"),Xg(t,"data-qa","review-translate-write-window"),Xg(t,"class","review-window-wrapper svelte-xlxdq7"),Xg(t,"role","dialog"),Xg(t,"style",e[6]),Xg(t,"draggable",e[5]),Xg(t,"dir",Bt())},m(c,d){zg(c,t,d),Pg(t,n),Pg(t,o),Pg(t,i),Kh(r,i,null),e[19](t),s=!0,a||(l=[Yg(n,"mouseover",e[8]),Yg(n,"mouseout",e[9]),Lg(c_.call(null,t,{isShadow:!0})),Yg(t,"click_outside",e[18]),Yg(t,"dragstart",e[10])],a=!0)},p(e,[n]){const o={};1&n&&(o.closeTooltip=e[0]),2&n&&(o.websiteSettings=e[1]),4&n&&(o.platformBehaviour=e[2]),8&n&&(o.textProcessingMode=e[3]),r.$set(o),(!s||64&n)&&Xg(t,"style",e[6]),(!s||32&n)&&Xg(t,"draggable",e[5])},i(e){s||(Hh(r.$$.fragment,e),s=!0)},o(e){Fh(r.$$.fragment,e),s=!1},d(n){n&&Hg(t),Xh(r),e[19](null),a=!1,_g(l)}}}function qR(e,t,n){let o,i,r=mg,s=()=>(r(),r=wg(l,(e=>n(17,i=e))),l);bg(e,nf,(e=>n(16,o=e))),e.$$.on_destroy.push((()=>r())),vh("deepl_settings",nf),vh("text_direction",Bt());let{closeWindow:a}=t,{websiteSettings:l}=t;s();let c,u,p,m,g,{replaceElement:h}=t,{actualPosition:f}=t,{dragContainerTo:_}=t,{platformBehaviour:v=ie.default}=t,{textProcessingMode:y=re.translate}=t,w=!1,b=!1,E="visibility: hidden; opacity:0; height:0;";let S={x:0,y:0};function T(e){let t=Xx({dropEvent:e,document:document,dragConfig:{dragOffset:S,dragElementRect:m,dragBarWidth:16}});t&&_(t)}hh((()=>{n(15,g=o.isLoggedIn),setTimeout((()=>{n(6,E="")}),100),document.addEventListener("dragover",Zx),document.addEventListener("drop",T),p=f_(c,(({clientHeight:e})=>{n(14,u=e)}))})),fh((()=>{document.removeEventListener("dragover",Zx),document.removeEventListener("drop",T),p&&p()}));return e.$$set=e=>{"closeWindow"in e&&n(0,a=e.closeWindow),"websiteSettings"in e&&s(n(1,l=e.websiteSettings)),"replaceElement"in e&&n(12,h=e.replaceElement),"actualPosition"in e&&n(11,f=e.actualPosition),"dragContainerTo"in e&&n(13,_=e.dragContainerTo),"platformBehaviour"in e&&n(2,v=e.platformBehaviour),"textProcessingMode"in e&&n(3,y=e.textProcessingMode)},e.$$.update=()=>{var t,r;98305&e.$$.dirty&&!1===g&&!0===o.isLoggedIn&&a(),131073&e.$$.dirty&&i&&(!i.isReviewTranslateWriteWindowInjected||i.translationState!==d.none||i.translatedSnippet||i.error||a()),65536&e.$$.dirty&&n(11,(t=o.inlineTranslateTooltipPosition,f=h(u,t))),16384&e.$$.dirty&&n(11,(r=u,f=b||v===ie.gdocs?h(r,o.inlineTranslateTooltipPosition):f))},[a,l,v,y,c,w,E,e=>{b=e},function(){n(5,w=!0)},function(){n(5,w=!1)},function(e){const t=Kx(e,v);S=t.dragOffset,m=t.dragElementRect},f,h,_,u,g,o,i,()=>a(),function(e){Eh[e?"unshift":"push"]((()=>{c=e,n(4,c)}))}]}class GR extends Qh{constructor(e){super(),Jh(this,e,qR,jR,yg,{closeWindow:0,websiteSettings:1,replaceElement:12,actualPosition:11,dragContainerTo:13,platformBehaviour:2,textProcessingMode:3})}}class VR{static HTML_TAG_NAME="deepl-review-translate-write-window";static createElement=(e=document)=>{const t=e.createElement(VR.HTML_TAG_NAME),n=new VR(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t.dragContainerTo=n.dragContainerTo,t};#e=void 0;constructor(e){this.domElement=e,this.domElement.platformBehaviour=ie.default,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.container=document.createElement("div"),this.domElement.mainComponent,this.domElement.selectionRange;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer)}createDOM=(e,t,n)=>{const{deepl_inline_ui:o}=D;this.domElement.shadowContainer&&this.domElement.shadowContainer.childElementCount>0&&this.cleanupDOM(),this.domElement.platformBehaviour===ie.default&&(this.domElement.selectionRange=window.getSelection().getRangeAt(0));let i=e(this.domElement.selectionRange);this.domElement.shadowContainer.appendChild(this.domElement.container);let r="visibility: initial !important; position: absolute; top: 0px; left: 0px; width: 100%; z-index: "+(o.z_index-100),s=`position: absolute; top: ${i.y}px; left: ${i.x-200}px; z-index: ${o.z_index-100};`;switch(this.domElement.platformBehaviour){case ie.gdocs:s+="top: 600px; left: 10px;";break;case ie.default:default:s+=""}this.domElement.shadowContainer.style.cssText=r,this.domElement.container.style.cssText=s,this.domElement.mainComponent=new GR({target:this.domElement.container,props:{closeWindow:t,websiteSettings:n,replaceElement:(t,n)=>{i=e(this.domElement.selectionRange);const o={coords:i,clientHeight:t,TOOLTIP_WIDTH:550,TRIGGER_MENU_ICON_HEIGHT:30,style:this.domElement.container.style};let r=n;const s=Vx(o),[a,l]=Yx(n),c=this.#e??{x:0,y:0};if(this.domElement.platformBehaviour===ie.gdocs){for(const e of l)if(Gx(e,o)){qx(e,o,c);break}}else for(const e of a)if(Gx(e,o)){r="middle"!==e?e:void 0,jx(e,o,c);break}return{...s,current:r}},platformBehaviour:this.domElement.platformBehaviour,textProcessingMode:this.domElement.textProcessingMode,dragContainerTo:this.dragContainerTo}})};dragContainerTo=e=>{this.#e={y:parseInt(this.domElement.container.style.top)-e.y+(this.#e?.y??0),x:parseInt(this.domElement.container.style.left)-e.x+(this.#e?.x??0)},this.domElement.container.style.top=`${e.y}px`,this.domElement.container.style.left=`${e.x}px`};cleanupDOM=()=>{this.domElement.container.remove(),this.domElement.shadowContainer.remove(),this.domElement.shadowContainer=document.createElement("div"),this.domElement.container=document.createElement("div"),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}const YR="deepl-writing-ui-added",ZR=5e3;function KR(e){let t,n,o,i,r,s,a,l;return{c(){t=jg("svg"),n=jg("g"),o=jg("path"),i=jg("path"),r=jg("path"),s=jg("defs"),a=jg("clipPath"),l=jg("rect"),Xg(o,"d","M1.85295 4.86015V12.4035C1.85295 12.7953 2.05334 13.1545 2.38029 13.3504L8.70832 17.1167C8.72427 17.1262 8.7404 17.1353 8.75668 17.1439L11.8727 19L11.8621 17.3672L11.8685 16.4605L11.8717 16.4747V16.1699C11.8717 15.9893 11.9613 15.8272 12.0993 15.7262L12.3015 15.6059L12.3991 15.5494L12.394 15.5508L16.091 13.3504C16.418 13.1545 16.6184 12.7953 16.6184 12.4035V4.86015C16.6184 4.46829 16.418 4.10909 16.091 3.91316L9.76299 0.146947C9.43604 -0.0489825 9.03527 -0.0489825 8.70832 0.146947L2.38029 3.92404C2.05334 4.11997 1.85295 4.47918 1.85295 4.86015Z"),Xg(o,"fill","#0F2B46"),Xg(i,"d","M6.68257 5.19787C7.10444 4.77336 7.77943 4.77336 8.2013 5.19787C8.50446 5.49621 8.60497 5.92588 8.50281 6.3113L11.4143 8.05411C11.4193 8.04902 11.4243 8.04396 11.4294 8.03894C11.8513 7.61442 12.5263 7.61442 12.9481 8.03894C13.4017 8.48522 13.4017 9.2254 12.9481 9.67168C12.5263 10.0962 11.8513 10.0962 11.4294 9.67168C11.111 9.35838 11.0162 8.90024 11.1448 8.50062L11.1341 8.50683L8.24372 6.78659C8.23005 6.80156 8.21591 6.81624 8.2013 6.83062C7.77943 7.25514 7.10444 7.25514 6.68257 6.83062C6.22906 6.38434 6.22906 5.64416 6.68257 5.19787Z"),Xg(i,"fill","white"),Xg(r,"d","M8.50819 11.5811L11.3455 9.88917L10.8182 9.58439L8.2574 11.1016C8.23971 11.0816 8.2212 11.062 8.20187 11.043C7.78 10.6185 7.10501 10.6185 6.68314 11.043C6.22963 11.4893 6.22963 12.2295 6.68314 12.6757C7.10501 13.1003 7.78 13.1003 8.20187 12.6757C8.50012 12.3822 8.60222 11.9616 8.50819 11.5811Z"),Xg(r,"fill","white"),Xg(n,"clip-path","url(#clip0)"),Xg(l,"width","18.5294"),Xg(l,"height","19"),Xg(l,"fill","white"),Xg(l,"transform","matrix(-1 0 0 1 18.5294 0)"),Xg(a,"id","clip0"),Xg(t,"width",e[1]),Xg(t,"height",e[0]),Xg(t,"class","deepl-logo-icon"),Xg(t,"viewBox","0 0 19 19"),Xg(t,"fill","none"),Xg(t,"xmlns","http://www.w3.org/2000/svg")},m(e,c){zg(e,t,c),Pg(t,n),Pg(n,o),Pg(n,i),Pg(n,r),Pg(t,s),Pg(s,a),Pg(a,l)},p(e,[n]){2&n&&Xg(t,"width",e[1]),1&n&&Xg(t,"height",e[0])},i:mg,o:mg,d(e){e&&Hg(t)}}}function XR(e,t,n){let{height:o="16px"}=t,{width:i="16px"}=t;return e.$$set=e=>{"height"in e&&n(0,o=e.height),"width"in e&&n(1,i=e.width)},[o,i]}class JR extends Qh{constructor(e){super(),Jh(this,e,XR,KR,yg,{height:0,width:1})}}function QR(e){let t,n,o,i,r,s,a,l,c,d,u,p,m=chrome.i18n.getMessage("gmail_char_limit_logged_in_body")+"";return{c(){t=Wg("div"),n=Gg(),o=Wg("div"),o.textContent=`${chrome.i18n.getMessage("gmail_char_limit_anon_title")}`,i=Gg(),r=Wg("div"),s=Gg(),a=Wg("div"),l=Wg("button"),l.textContent=`${chrome.i18n.getMessage("gmail_char_limit_anon_login_button")}`,c=Gg(),d=Wg("button"),d.textContent=`${chrome.i18n.getMessage("gmail_char_limit_anon_sign_up_button")}`,Xg(t,"class","close-icon svelte-1pm9ytz"),Xg(o,"class","title svelte-1pm9ytz"),Xg(r,"class","body svelte-1pm9ytz"),Xg(l,"class","secondary svelte-1pm9ytz"),Xg(d,"class","primary svelte-1pm9ytz"),Xg(a,"class","footer svelte-1pm9ytz")},m(g,h){zg(g,t,h),zg(g,n,h),zg(g,o,h),zg(g,i,h),zg(g,r,h),r.innerHTML=m,zg(g,s,h),zg(g,a,h),Pg(a,l),Pg(a,c),Pg(a,d),u||(p=[Yg(t,"click",e[3]),Yg(l,"click",e[4]),Yg(d,"click",e[5])],u=!0)},p:mg,i:mg,o:mg,d(e){e&&(Hg(t),Hg(n),Hg(o),Hg(i),Hg(r),Hg(s),Hg(a)),u=!1,_g(p)}}}function eO(e){let t,n,o,i,r,s,a,l,c,d,u=chrome.i18n.getMessage("gmail_char_limit_logged_in_body")+"";return{c(){t=Wg("div"),n=Gg(),o=Wg("div"),o.textContent=`${chrome.i18n.getMessage("gmail_char_limit_logged_in_title")}`,i=Gg(),r=Wg("div"),s=Gg(),a=Wg("div"),l=Wg("button"),l.textContent=`${chrome.i18n.getMessage("gmail_char_limit_logged_in_cta_button")}`,Xg(t,"class","close-icon svelte-1pm9ytz"),Xg(o,"class","title svelte-1pm9ytz"),Xg(r,"class","body svelte-1pm9ytz"),Xg(l,"class","primary svelte-1pm9ytz"),Xg(a,"class","footer svelte-1pm9ytz")},m(p,m){zg(p,t,m),zg(p,n,m),zg(p,o,m),zg(p,i,m),zg(p,r,m),r.innerHTML=u,zg(p,s,m),zg(p,a,m),Pg(a,l),c||(d=[Yg(t,"click",e[3]),Yg(l,"click",e[5])],c=!0)},p:mg,i:mg,o:mg,d(e){e&&(Hg(t),Hg(n),Hg(o),Hg(i),Hg(r),Hg(s),Hg(a)),c=!1,_g(d)}}}function tO(e){let t,n;return t=new Cy({props:{error:{error:e[0]},close:e[3],config:{nicheIntegration:ie.gmail}}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.error={error:e[0]}),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function nO(e){let t,n,o,i,r,s;const a=[tO,eO,QR],l=[];function c(e,t){return e[2]?0:e[1]?1:2}return n=c(e),o=l[n]=a[n](e),{c(){t=Wg("div"),o.c(),Xg(t,"class","dl-gmail-character-limit-popup svelte-1pm9ytz"),Xg(t,"dir",Bt()),ih(t,"is-translator-limit",!e[2])},m(o,a){zg(o,t,a),l[n].m(t,null),i=!0,r||(s=[Lg(c_.call(null,t,{isShadow:!0,exceptions:[".deepl-gmail-message-container",".deepl-gmail-write-toolbar"]})),Yg(t,"click_outside",e[9])],r=!0)},p(e,[r]){let s=n;n=c(e),n===s?l[n].p(e,r):(Uh(),Fh(l[s],1,1,(()=>{l[s]=null})),zh(),o=l[n],o?o.p(e,r):(o=l[n]=a[n](e),o.c()),Hh(o,1),o.m(t,null)),(!i||4&r)&&ih(t,"is-translator-limit",!e[2])},i(e){i||(Hh(o),i=!0)},o(e){Fh(o),i=!1},d(e){e&&Hg(t),l[n].d(),r=!1,_g(s)}}}function oO(e,n,o){let i,r;bg(e,nf,(e=>o(8,r=e))),vh("text_direction",Bt());let{onCloseCharLimitPopup:s}=n,{cleanUpDOM:a}=n,{limitType:l}=n,c=!1,d=!1;const u=()=>{s&&s(),a&&a()};return e.$$set=e=>{"onCloseCharLimitPopup"in e&&o(6,s=e.onCloseCharLimitPopup),"cleanUpDOM"in e&&o(7,a=e.cleanUpDOM),"limitType"in e&&o(0,l=e.limitType)},e.$$.update=()=>{1&e.$$.dirty&&o(2,i=l===Ef||l===Sf),256&e.$$.dirty&&o(1,d=!0===r.isLoggedIn)},[l,d,i,u,()=>{c||(t({action:"dlTrackUILocationClicked",payload:U.gmailCharLimitLogin}),c=!0,t({action:"dlRequestLogin"}).then((()=>{c=!1,u()})).catch((()=>{c=!1})))},()=>{t({action:"dlExternalURLRedirect",payload:{destination:av,utmContent:"gmail_customization"}}),u()},s,a,r,()=>{u()}]}class iO extends Qh{constructor(e){super(),Jh(this,e,oO,nO,yg,{onCloseCharLimitPopup:6,cleanUpDOM:7,limitType:0})}}class rO{static HTML_TAG_NAME="deepl-gmail-character-limit-popup";static createElement=(e=document)=>{const t=e.createElement(rO.HTML_TAG_NAME),n=new rO(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.container=document.createElement("div"),this.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowRoot.addEventListener("mouseup",(e=>{e.stopPropagation(),e.stopImmediatePropagation()})),this.domElement.shadowRoot.addEventListener("mousedown",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=({onCloseCharLimitPopup:e,limitType:t})=>{this.mainComponent=new iO({target:this.domElement.shadowContainer,props:{cleanUpDOM:this.domElement.cleanupDOM,onCloseCharLimitPopup:e,limitType:t}})};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}function sO(e){let t,n,o,i;const r=[cO,lO],s=[];function a(e,t){return e[8]?0:1}return n=a(e),o=s[n]=r[n](e),{c(){t=Wg("div"),o.c(),Xg(t,"class","dl-gmail-translate-toolbar svelte-eo75ae"),ih(t,"hasLoaded",e[3]),ih(t,"isExpanded",e[4])},m(e,o){zg(e,t,o),s[n].m(t,null),i=!0},p(e,l){let c=n;n=a(e),n===c?s[n].p(e,l):(Uh(),Fh(s[c],1,1,(()=>{s[c]=null})),zh(),o=s[n],o?o.p(e,l):(o=s[n]=r[n](e),o.c()),Hh(o,1),o.m(t,null)),(!i||8&l[0])&&ih(t,"hasLoaded",e[3]),(!i||16&l[0])&&ih(t,"isExpanded",e[4])},i(e){i||(Hh(o),i=!0)},o(e){Fh(o),i=!1},d(e){e&&Hg(t),s[n].d()}}}function aO(e){let t,n,o,i,r,s,a,l,c;return o=new h_({props:{tooltip:chrome.i18n.getMessage("gmail_compose_undo_icon"),zIndex:e[14].z_index,$$slots:{default:[mO]},$$scope:{ctx:e}}}),s=new h_({props:{tooltip:chrome.i18n.getMessage("gmail_compose_accept_icon"),zIndex:e[14].z_index,$$slots:{default:[gO]},$$scope:{ctx:e}}}),{c(){t=Wg("div"),n=Wg("div"),Zh(o.$$.fragment),i=Gg(),r=Wg("div"),Zh(s.$$.fragment),Xg(n,"class","wrapper undo-wrapper svelte-eo75ae"),Xg(r,"class","wrapper accept-wrapper svelte-eo75ae"),Xg(t,"class","accept-changes svelte-eo75ae")},m(d,u){zg(d,t,u),Pg(t,n),Kh(o,n,null),Pg(t,i),Pg(t,r),Kh(s,r,null),a=!0,l||(c=[Lg(c_.call(null,t,{isShadow:!0,exceptions:[".deepl-gmail-message-container"]})),Yg(t,"click_outside",e[17])],l=!0)},p(e,t){const n={};16777216&t[1]&&(n.$$scope={dirty:t,ctx:e}),o.$set(n);const i={};16777216&t[1]&&(i.$$scope={dirty:t,ctx:e}),s.$set(i)},i(e){a||(Hh(o.$$.fragment,e),Hh(s.$$.fragment,e),a=!0)},o(e){Fh(o.$$.fragment,e),Fh(s.$$.fragment,e),a=!1},d(e){e&&Hg(t),Xh(o),Xh(s),l=!1,_g(c)}}}function lO(e){let t,n,o,i,r,s,a,l,c,d,u,p,m,g,h,f,_,v,y,w,b,E,S,T,x,$,C=chrome.i18n.getMessage("gmail_compose_translate_button")+"",k=Ke(e[13],ye.TRANSLATOR);r=new T_({props:{selectedOption:e[1],items:e[7],placeholder:"...",allowLabelHtml:!0}}),r.$on("valueselected",e[21]),p=new Mw({props:{value:e[12]||e[13].targetLanguageUserInput,disabled:!1,fontSize:"sm"}}),p.$on("selection",e[22]);let L=k&&dO();return S=new h_({props:{isEnabled:!0,tooltip:Je(e[13],ye.WRITE)?chrome.i18n.getMessage("input_translation_tooltip_improve_disabled_by_admin"):chrome.i18n.getMessage("input_translation_tooltip_improve_supported_lang"),zIndex:e[14].z_index,multiline:!0,$$slots:{default:[pO]},$$scope:{ctx:e}}}),{c(){t=Wg("div"),n=Wg("div"),n.textContent=`${chrome.i18n.getMessage("gmail_compose_translate_from")}`,o=Gg(),i=Wg("div"),Zh(r.$$.fragment),s=Gg(),a=Wg("div"),l=Wg("div"),l.textContent=`${chrome.i18n.getMessage("gmail_compose_translate_into")}`,c=Gg(),d=Wg("div"),u=Wg("div"),Zh(p.$$.fragment),m=Gg(),g=Wg("div"),h=Wg("button"),f=qg(C),_=Gg(),L&&L.c(),y=Gg(),w=Wg("div"),b=Gg(),E=Wg("div"),Zh(S.$$.fragment),Xg(n,"class","translation-label svelte-eo75ae"),Xg(i,"class","wrapper shortcode-wrapper svelte-eo75ae"),Xg(t,"class","translation-selection-wrapper svelte-eo75ae"),Xg(l,"class","translation-label svelte-eo75ae"),Xg(u,"class","dropdown"),Xg(d,"class","wrapper language-wrapper svelte-eo75ae"),Xg(a,"class","translation-selection-wrapper svelte-eo75ae"),h.disabled=v=e[5]||!e[12],Xg(h,"class","svelte-eo75ae"),ih(h,"isTranslating",e[5]),Xg(g,"class","wrapper button-wrapper"),Xg(w,"class","divider svelte-eo75ae"),Xg(E,"class","wrapper button-wrapper")},m(v,C){zg(v,t,C),Pg(t,n),Pg(t,o),Pg(t,i),Kh(r,i,null),zg(v,s,C),zg(v,a,C),Pg(a,l),Pg(a,c),Pg(a,d),Pg(d,u),Kh(p,u,null),zg(v,m,C),zg(v,g,C),Pg(g,h),Pg(h,f),Pg(h,_),L&&L.m(h,null),zg(v,y,C),zg(v,w,C),zg(v,b,C),zg(v,E,C),Kh(S,E,null),T=!0,x||($=Yg(h,"mousedown",Kg(Zg(e[15]))),x=!0)},p(e,t){const n={};2&t[0]&&(n.selectedOption=e[1]),128&t[0]&&(n.items=e[7]),r.$set(n);const o={};12288&t[0]&&(o.value=e[12]||e[13].targetLanguageUserInput),p.$set(o),8192&t[0]&&(k=Ke(e[13],ye.TRANSLATOR)),k?L?8192&t[0]&&Hh(L,1):(L=dO(),L.c(),Hh(L,1),L.m(h,null)):L&&(Uh(),Fh(L,1,1,(()=>{L=null})),zh()),(!T||4128&t[0]&&v!==(v=e[5]||!e[12]))&&(h.disabled=v),(!T||32&t[0])&&ih(h,"isTranslating",e[5]);const i={};8192&t[0]&&(i.tooltip=Je(e[13],ye.WRITE)?chrome.i18n.getMessage("input_translation_tooltip_improve_disabled_by_admin"):chrome.i18n.getMessage("input_translation_tooltip_improve_supported_lang")),8288&t[0]|16777216&t[1]&&(i.$$scope={dirty:t,ctx:e}),S.$set(i)},i(e){T||(Hh(r.$$.fragment,e),Hh(p.$$.fragment,e),Hh(L),Hh(S.$$.fragment,e),T=!0)},o(e){Fh(r.$$.fragment,e),Fh(p.$$.fragment,e),Fh(L),Fh(S.$$.fragment,e),T=!1},d(e){e&&(Hg(t),Hg(s),Hg(a),Hg(m),Hg(g),Hg(y),Hg(w),Hg(b),Hg(E)),Xh(r),Xh(p),L&&L.d(),Xh(S),x=!1,$()}}}function cO(e){let t,n;return t=new eS({}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p:mg,i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function dO(e){let t,n;return t=new gx({props:{size:16,marginStart:8,alternateColor:"white"}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function uO(e){let t,n;return t=new gx({props:{size:16,marginStart:8,alternateColor:"white"}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function pO(e){let t,n,o,i,r,s,a,l=chrome.i18n.getMessage("gmail_compose_improve_button")+"",c=Ke(e[13],ye.WRITE),d=c&&uO();return{c(){t=Wg("button"),n=qg(l),o=Gg(),d&&d.c(),t.disabled=i=Je(e[13],ye.WRITE)||e[5]||!e[6],Xg(t,"class","svelte-eo75ae"),ih(t,"isTranslating",e[5])},m(i,l){zg(i,t,l),Pg(t,n),Pg(t,o),d&&d.m(t,null),r=!0,s||(a=Yg(t,"mousedown",Kg(Zg(e[16]))),s=!0)},p(e,n){8192&n[0]&&(c=Ke(e[13],ye.WRITE)),c?d?8192&n[0]&&Hh(d,1):(d=uO(),d.c(),Hh(d,1),d.m(t,null)):d&&(Uh(),Fh(d,1,1,(()=>{d=null})),zh()),(!r||8288&n[0]&&i!==(i=Je(e[13],ye.WRITE)||e[5]||!e[6]))&&(t.disabled=i),(!r||32&n[0])&&ih(t,"isTranslating",e[5])},i(e){r||(Hh(d),r=!0)},o(e){Fh(d),r=!1},d(e){e&&Hg(t),d&&d.d(),s=!1,a()}}}function mO(e){let t,n,o;return{c(){t=Wg("button"),t.innerHTML='<svg height="32px" width="32px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 8.33398H10.8333C14.5152 8.33398 17.5 11.3188 17.5 15.0007V16.6673M2.5 8.33398L7.5 13.334M2.5 8.33398L7.5 3.33398" stroke="#727A83" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-eo75ae"></path></svg>',Xg(t,"class","confirm-button svelte-eo75ae")},m(i,r){zg(i,t,r),n||(o=Yg(t,"click",Kg(Zg(e[18]))),n=!0)},p:mg,d(e){e&&Hg(t),n=!1,o()}}}function gO(e){let t,n,o;return{c(){t=Wg("button"),t.innerHTML='<svg width="24px" height="24px" class="checkmark" viewBox="0 0 16 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 7L5 11L15 1" stroke="#727A83" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-eo75ae"></path></svg>',Xg(t,"class","confirm-button right svelte-eo75ae")},m(i,r){zg(i,t,r),n||(o=Yg(t,"click",Kg(Zg(e[17]))),n=!0)},p:mg,d(e){e&&Hg(t),n=!1,o()}}}function hO(e){let t,n,o,i,r,s,a,l,c,d,u,p;const m=[aO,sO],g=[];function h(e,t){return e[2]?0:1}return o=h(e),i=g[o]=m[o](e),l=new JR({props:{height:"20px",width:"20px"}}),{c(){t=Wg("div"),n=Wg("div"),i.c(),r=Gg(),s=Wg("div"),a=Wg("div"),Zh(l.$$.fragment),Xg(a,"class","wrapper icon-wrapper svelte-eo75ae"),Xg(s,"class","dl-toolbar-closed svelte-eo75ae"),Xg(n,"class","dl-toolbar-positioner svelte-eo75ae"),Xg(t,"class","deepl-gmail-write-toolbar svelte-eo75ae"),Xg(t,"style",c=`top: ${e[9]}px; left: ${e[10]}px`),Xg(t,"dir",Bt())},m(i,c){zg(i,t,c),Pg(t,n),g[o].m(n,null),Pg(n,r),Pg(n,s),Pg(s,a),Kh(l,a,null),d=!0,u||(p=[Yg(a,"click",e[23]),Yg(t,"click",Kg(Zg(e[24]))),Lg(c_.call(null,t,{isShadow:!0,exceptions:[".deepl-gmail-message-container"]})),Yg(t,"click_outside",e[25])],u=!0)},p(e,s){let a=o;o=h(e),o===a?g[o].p(e,s):(Uh(),Fh(g[a],1,1,(()=>{g[a]=null})),zh(),i=g[o],i?i.p(e,s):(i=g[o]=m[o](e),i.c()),Hh(i,1),i.m(n,r)),(!d||1536&s[0]&&c!==(c=`top: ${e[9]}px; left: ${e[10]}px`))&&Xg(t,"style",c)},i(e){d||(Hh(i),Hh(l.$$.fragment,e),d=!0)},o(e){Fh(i),Fh(l.$$.fragment,e),d=!1},d(e){e&&Hg(t),g[o].d(),Xh(l),u=!1,_g(p)}}}function fO(e,n,o){let i;bg(e,nf,(e=>o(13,i=e))),vh("text_direction",Bt());const{deepl_inline_ui:r}=D;let{messageContainer:s}=n,{updateLockStatus:a}=n,{subjectInput:l}=n;const c="WRITE",d="TRANSLATE";let u,p,m,g,h,f,_,v,y,w,b,E,S,T,x=null,$=!1,C=!1,k=!1,L=!1;vh("deepl_settings",nf),hh((async()=>{s&&(s.addEventListener("input",A),s.addEventListener("paste",A),s.classList.add("deepl-gmail-message-container"),I(),l&&l.value&&(f=l.value)),o(7,g=ZO()),o(12,T=i.targetLanguageUserInput),H(),j(),window.addEventListener("popstate",O)})),fh((()=>{window.removeEventListener("popstate",O),s.removeEventListener("input",A),s.removeEventListener("paste",A),s.classList.remove("deepl-gmail-message-container"),F()}));const I=async()=>{const e=dt(s.innerHTML),t=e.replace(/<[^>]+>/g,"");const n=await Mt(t);n.length&&(e=>{const t=g.find((t=>t.value===e));t&&o(1,x=t)})(n)},A=()=>{$&&R(!1),M()},M=()=>{I()},R=(e,t)=>{if(!e)return o(2,$=!1),p=null,void(u=null);o(2,$=!0),p=t},O=()=>{document.querySelectorAll(rO.HTML_TAG_NAME).forEach((e=>{e.cleanupDOM,e.remove()}))},N=(e,t=!0)=>{for(;null!==e;){const n=e.getAttribute("role");if("TABLE"===e.tagName&&("dialog"===n||"presentation"===n))return t?e.parentElement:e;e=e.parentElement}return null},P=e=>{const t=N(s);t&&(_=rO.createElement(),_.createDOM({onCloseCharLimitPopup:O,limitType:e}),t.appendChild(_))},B=()=>{o(8,v=!0)},U=()=>{o(8,v=!1)},z=e=>{yw.update({error:e.message?e.message:e})},H=()=>{y=setInterval(W,800)},F=()=>{clearInterval(y)},W=()=>{const e=JSON.stringify(s.getBoundingClientRect());e!==w&&(w=e,j())},j=()=>{const e=Bt(),t=N(s),n=t.getBoundingClientRect();if(!t||!n)return;const i=(()=>{const e=N(s),t=e.getBoundingClientRect();if(!e||!t)return;return e.querySelector("[role=toolbar]")})(),r=(()=>{const e=N(s),t=e.getBoundingClientRect();if(!e||!t)return;const n=e.querySelector("[role='group']"),o=n.querySelectorAll("[role='button']");if(!n||!o)return;const i=Array.from(o);return i[i.length-1]})();if(i&&0!==i.getBoundingClientRect().top){const t=i.getBoundingClientRect();return r&&r.getBoundingClientRect()?(o(9,b=t.top-10),void o(10,E="ltr"===e?r.getBoundingClientRect().right-30:r.getBoundingClientRect().right+30)):(o(9,b=t.top-10),void o(10,E="ltr"===e?n.right-45:n.left+45))}if(!r||!r.getBoundingClientRect())return;const a=r.getBoundingClientRect();o(9,b=a.top-18),o(10,E="ltr"===e?a.right-30:a.right+30)},q=({lang:e,sourceLength:t,targetLang:n,targetLength:o})=>{u={lang:e,sourceLength:t,targetLang:n,targetLength:o,nicheIntegration:ie.gmail}},G=({sourceLang:e,sourceLength:t,targetLang:n,targetLength:o})=>{u={sourceLang:e,sourceLength:t,targetLang:n,targetLength:o,nicheIntegration:ie.gmail}},V=e=>{t({action:"dlTrackTranslateAcceptOrRevertEvent",payload:{eventType:e?ke:Le,acceptOrRevertMetadata:u}})},Y=e=>{t({action:"dlTrackGmailCharLimitReached",payload:{gmailActionType:UT(e)}})};return e.$$set=e=>{"messageContainer"in e&&o(19,s=e.messageContainer),"updateLockStatus"in e&&o(0,a=e.updateLockStatus),"subjectInput"in e&&o(20,l=e.subjectInput)},e.$$.update=()=>{2&e.$$.dirty[0]&&o(7,g=ZO(x)),2&e.$$.dirty[0]&&x&&x.value&&o(6,L=Dt(x.value))},[a,x,$,C,k,m,L,g,v,b,E,S,T,i,r,async()=>{if(!s)return;h=dt(s.innerHTML);const e=l&&l.value;e&&(f=l.value);const n=s.innerText,r=n.length>ZR;if(!Ke(i,ye.TRANSLATOR)&&r)return P(),void Y(Ne.COMPOSE_VIEW_TRANSLATE);B();const a=S?S.value:x.value;try{if(await uk(s,{targetLang:T,nicheIntegration:ie.gmail,isHtml:!0,clearInnerHTML:!0}),e){const e=await t({action:"dlRequestInputTranslation",payload:{requests:[{text:l.value}],domainName:window.location.hostname,websiteLanguage:a,targetLang:T,skipDapReporting:!0}});if(e[0]?.text){const t=e[0]?.text;o(20,l.value=t,l)}}o(5,m=!1),R(!0,d),U(),G({sourceLang:a,targetLang:T,sourceLength:n.length,targetLength:s.innerText.length})}catch(e){z(e),U(),o(5,m=!1),R(!1)}},async()=>{if(!s)return;const e=l&&l.value;h=dt(s.innerHTML),e&&(f=l.value);const n=s.innerText;o(5,m=!0),B();const i=x.value,r="FR"===i||"ES"===i;try{if(await uk(s,{isWriteRequest:!0,sourceLang:i,nicheIntegration:ie.gmail,isHtml:!0,clearInnerHTML:!0,removeFormatting:r}),e){const e=await t({action:"dlRequestImproveWriting",payload:{requests:[{text:l.value}],domainName:window.location.hostname,websiteLanguage:i,sourceLang:i,skipDapReporting:!0}});if(e[0]?.text){const t=e[0]?.text;o(20,l.value=t,l)}}q({lang:i,sourceLength:n.length,targetLength:s.innerText.length}),o(5,m=!1),R(!0,c),U()}catch(e){switch(e.error){case Ef:case Sf:P(e.error),Y(Ne.COMPOSE_VIEW_IMPROVE);break;default:z(e)}o(5,m=!1),R(!1),U()}},()=>{p===d?V(!0):HP({eventType:xe,...u}),h=null,f=null,R(!1),I(),o(4,k=!1)},()=>{p===d?V(!1):HP({eventType:$e,...u}),o(19,s.innerHTML=dt(h),s),l&&f&&o(20,l.value=f,l),I(),R(!1)},s,l,e=>{o(11,S=e.detail.selectedOption)},async e=>{o(12,T=e.detail.selectedOption.value)},()=>{a(!0),o(4,k=!k),o(3,C=!0)},()=>{a(!0)},()=>{a(!1),o(4,k=!1)}]}class _O extends Qh{constructor(e){super(),Jh(this,e,fO,hO,yg,{messageContainer:19,updateLockStatus:0,subjectInput:20},null,[-1,-1])}}class vO{static HTML_TAG_NAME="deepl-gmail-message-write-ui";static createElement=(e=document)=>{const t=e.createElement(vO.HTML_TAG_NAME),n=new vO(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowRoot.addEventListener("mouseup",(e=>{e.stopPropagation(),e.stopImmediatePropagation()})),this.domElement.shadowRoot.addEventListener("mousedown",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=({container:e,subjectInput:t,updateLockStatus:n})=>{this.mainComponent=new _O({target:this.domElement.shadowContainer,props:{messageContainer:e,updateLockStatus:n,subjectInput:t}})};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}function yO(e){let t,n,o,i,r,s,a,l,c,d,u,p,m,g,h,f,_,v,y,w,b=e[3]&&wO(),E=null!=e[5]&&bO(e);return c=new Mw({props:{disabled:e[0],websiteSettings:yw,value:e[1].selectedTargetLanguage,extraPadding:!0}}),c.$on("selection",e[16]),p=new h_({props:{tooltip:chrome.i18n.getMessage("gmail_reading_translate_button"),multiline:!1,zIndex:3,isEnabled:e[8]<$O,$$slots:{default:[EO]},$$scope:{ctx:e}}}),h=new h_({props:{tooltip:chrome.i18n.getMessage("gmail_reading_view_original_button"),multiline:!1,zIndex:3,$$slots:{default:[SO]},$$scope:{ctx:e}}}),v=new h_({props:{tooltip:chrome.i18n.getMessage("gmail_reading_forward_button"),multiline:!1,zIndex:2,isEnabled:e[8]<$O,$$slots:{default:[TO]},$$scope:{ctx:e}}}),{c(){t=Wg("div"),n=Wg("div"),o=Wg("span"),i=Gg(),b&&b.c(),r=Gg(),s=Wg("div"),E&&E.c(),a=Gg(),l=Wg("div"),Zh(c.$$.fragment),d=Gg(),u=Wg("div"),Zh(p.$$.fragment),m=Gg(),g=Wg("div"),Zh(h.$$.fragment),f=Gg(),_=Wg("div"),Zh(v.$$.fragment),Xg(o,"class","deepl-logo svelte-1lme20r"),Xg(s,"class","language-selection-wrapper svelte-1lme20r"),Xg(l,"class","language-selection-wrapper svelte-1lme20r"),Xg(n,"class","left-side svelte-1lme20r"),Xg(_,"class","right-side svelte-1lme20r"),Xg(t,"class","dl-gmail-email-toolbar svelte-1lme20r"),Xg(t,"dir",Bt()),kh((()=>e[17].call(t))),ih(t,"smallMode",e[8]<$O)},m(S,T){zg(S,t,T),Pg(t,n),Pg(n,o),Pg(n,i),b&&b.m(n,null),Pg(n,r),Pg(n,s),E&&E.m(s,null),Pg(n,a),Pg(n,l),Kh(c,l,null),Pg(n,d),Pg(n,u),Kh(p,u,null),Pg(n,m),Pg(n,g),Kh(h,g,null),Pg(t,f),Pg(t,_),Kh(v,_,null),y=function(e,t){"static"===getComputedStyle(e).position&&(e.style.position="relative");const n=Wg("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const o=oh();let i;return o?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=Yg(window,"message",(e=>{e.source===n.contentWindow&&t()}))):(n.src="about:blank",n.onload=()=>{i=Yg(n.contentWindow,"resize",t),t()}),Pg(e,n),()=>{(o||i&&n.contentWindow)&&i(),Hg(n)}}(t,e[17].bind(t)),w=!0},p(e,o){e[3]?b?8&o[0]&&Hh(b,1):(b=wO(),b.c(),Hh(b,1),b.m(n,r)):b&&(Uh(),Fh(b,1,1,(()=>{b=null})),zh()),null!=e[5]?E?(E.p(e,o),32&o[0]&&Hh(E,1)):(E=bO(e),E.c(),Hh(E,1),E.m(s,null)):E&&(Uh(),Fh(E,1,1,(()=>{E=null})),zh());const i={};1&o[0]&&(i.disabled=e[0]),2&o[0]&&(i.value=e[1].selectedTargetLanguage),c.$set(i);const a={};256&o[0]&&(a.isEnabled=e[8]<$O),1&o[0]|8&o[1]&&(a.$$scope={dirty:o,ctx:e}),p.$set(a);const l={};4&o[0]|8&o[1]&&(l.$$scope={dirty:o,ctx:e}),h.$set(l);const d={};256&o[0]&&(d.isEnabled=e[8]<$O),4&o[0]|8&o[1]&&(d.$$scope={dirty:o,ctx:e}),v.$set(d),(!w||256&o[0])&&ih(t,"smallMode",e[8]<$O)},i(e){w||(Hh(b),Hh(E),Hh(c.$$.fragment,e),Hh(p.$$.fragment,e),Hh(h.$$.fragment,e),Hh(v.$$.fragment,e),w=!0)},o(e){Fh(b),Fh(E),Fh(c.$$.fragment,e),Fh(p.$$.fragment,e),Fh(h.$$.fragment,e),Fh(v.$$.fragment,e),w=!1},d(e){e&&Hg(t),b&&b.d(),E&&E.d(),Xh(c),Xh(p),Xh(h),Xh(v),y()}}}function wO(e){let t,n;return t=new gx({props:{size:24,translator:!0}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function bO(e){let t,n;return t=new Mw({props:{disabled:e[0],value:e[5],websiteSettings:yw,customClass:"borderless",fontSize:"sm",extraPadding:!0}}),t.$on("selection",e[15]),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};1&n[0]&&(o.disabled=e[0]),32&n[0]&&(o.value=e[5]),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function EO(e){let t,n,o,i,r,s;return{c(){t=Wg("button"),n=Wg("div"),n.innerHTML='<svg width="20px" height="20px" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path id="Icon" d="M1.5 3.16667H11.5M6.5 1.5V3.16667M7.37349 11.0833C6.10069 9.76482 5.06727 8.21371 4.34322 6.5M9.41667 14H15.25M8.16667 16.5L12.3333 8.16667L16.5 16.5M9.62594 3.16667C8.81922 7.97518 5.72474 12.0079 1.5 14.1075" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',o=Gg(),i=Wg("span"),i.textContent=`${chrome.i18n.getMessage("gmail_reading_translate_button")}`,Xg(n,"class","icon svelte-1lme20r"),Xg(i,"class","svelte-1lme20r"),Xg(t,"class","translate-button svelte-1lme20r"),t.disabled=e[0],Xg(t,"paddingx","none")},m(a,l){zg(a,t,l),Pg(t,n),Pg(t,o),Pg(t,i),r||(s=Yg(t,"click",Kg(Zg(e[10]))),r=!0)},p(e,n){1&n[0]&&(t.disabled=e[0])},d(e){e&&Hg(t),r=!1,s()}}}function SO(e){let t,n,o,i,r,s;return{c(){t=Wg("button"),n=jg("svg"),o=jg("path"),Xg(o,"d","M7 16L3 12M3 12L7 8M3 12L21 12"),Xg(o,"stroke",i=e[2]?"#000":"#848F9B"),Xg(o,"stroke-width","1.5"),Xg(o,"stroke-linecap","round"),Xg(o,"stroke-linejoin","round"),Xg(n,"width","24"),Xg(n,"height","24"),Xg(n,"viewBox","0 0 24 24"),Xg(n,"fill","none"),Xg(n,"xmlns","http://www.w3.org/2000/svg"),Xg(n,"class","svelte-1lme20r"),Xg(t,"class","show-original-button svelte-1lme20r"),Xg(t,"paddingx","none"),ih(t,"enabled",e[2])},m(i,a){zg(i,t,a),Pg(t,n),Pg(n,o),r||(s=Yg(t,"click",Kg(Zg(e[9]))),r=!0)},p(e,n){4&n[0]&&i!==(i=e[2]?"#000":"#848F9B")&&Xg(o,"stroke",i),4&n[0]&&ih(t,"enabled",e[2])},d(e){e&&Hg(t),r=!1,s()}}}function TO(e){let t,n,o,i,r,s,a,l,c;return{c(){t=Wg("button"),n=jg("svg"),o=jg("path"),r=Gg(),s=Wg("span"),s.textContent=`${chrome.i18n.getMessage("gmail_reading_forward_button")}`,Xg(o,"d","M17 8L21 12M21 12L17 16M21 12L3 12"),Xg(o,"stroke",i=e[2]?"#000":"#848F9B"),Xg(o,"stroke-width","1.5"),Xg(o,"stroke-linecap","round"),Xg(o,"stroke-linejoin","round"),Xg(n,"width","24"),Xg(n,"height","24"),Xg(n,"viewBox","0 0 24 24"),Xg(n,"fill","none"),Xg(n,"xmlns","http://www.w3.org/2000/svg"),Xg(n,"class","svelte-1lme20r"),Xg(s,"class","svelte-1lme20r"),t.disabled=a=!e[2],Xg(t,"class","forward-button svelte-1lme20r"),Xg(t,"paddingx","none")},m(i,a){zg(i,t,a),Pg(t,n),Pg(n,o),Pg(t,r),Pg(t,s),l||(c=Yg(t,"click",e[11]),l=!0)},p(e,n){4&n[0]&&i!==(i=e[2]?"#000":"#848F9B")&&Xg(o,"stroke",i),4&n[0]&&a!==(a=!e[2])&&(t.disabled=a)},d(e){e&&Hg(t),l=!1,c()}}}function xO(e){let t,n,o=e[6]&&e[7]&&yO(e);return{c(){o&&o.c(),t=Vg()},m(e,i){o&&o.m(e,i),zg(e,t,i),n=!0},p(e,n){e[6]&&e[7]?o?(o.p(e,n),192&n[0]&&Hh(o,1)):(o=yO(e),o.c(),Hh(o,1),o.m(t.parentNode,t)):o&&(Uh(),Fh(o,1,1,(()=>{o=null})),zh())},i(e){n||(Hh(o),n=!0)},o(e){Fh(o),n=!1},d(e){e&&Hg(t),o&&o.d(e)}}}const $O=900;function CO(e,n,o){let i,r,s,a,l,c,d,u,p;bg(e,nf,(e=>o(1,i=e))),vh("text_direction",Bt());let m,g,h,f,_,v=!1,y=!1,w=!1,b=!1,E=!1,{container:S}=n;hh((async()=>{L(),I(),await C(),o(4,m=i.selectedTargetLanguage),setTimeout((()=>{o(7,E=!0)}),200),window.addEventListener("popstate",$)})),fh((()=>{window.removeEventListener("popstate",$)}));const T=()=>{r.innerText=s.innerText,r.innerHTML=dt(s.innerHTML),d.innerText=c,o(13,y=!1)},x=e=>{d&&(e?d.classList.add("deepl-gmail-loading-skeleton"):d.classList.remove("deepl-gmail-loading-skeleton"))},$=()=>{document.querySelectorAll(rO.HTML_TAG_NAME).forEach((e=>{e.cleanupDOM,e.remove()}))},C=async()=>{if(!a)return;if(u=await Mt(a),o(6,f=It(u)),!f)return;const e=Ot(At(u));o(5,h=e)},k=async()=>{const e=`<a href="https://www.deepl.com/pro" target="_blank">${chrome.i18n.getMessage("gmail_forwarding_link")}</a>`;let t;const n=dt(r.innerHTML);if(v)t=n;else{t=`${n}<br>${`<p style="text-align: center;">${chrome.i18n.getMessage("gmail_forwarding_title")} ${e}</p>`}`}const i=(new DOMParser).parseFromString(t,"text/html"),s={html:t,text:Ff(i.body)},a=document.querySelector("[contenteditable='true']");a.focus(),setTimeout((()=>{a.focus(),i_(a,s,!1),o(14,b=!1)}),500)},L=()=>{const e=Array.from(S.children).filter((e=>"div"===e.tagName.toLowerCase()));if(3!==e.length)return;const t=e[1];if(!t)return;const n=Array.from(t.children).filter((e=>"div"===e.tagName.toLowerCase()));if(!n||!n.length)return;const o=n[2];o&&(s=o.cloneNode(!0),r=o,a=o.innerText)},I=()=>{const e=document.querySelector("[data-thread-perm-id]");e&&(d=e,l=e.innerText,c=e.innerText)};return e.$$set=e=>{"container"in e&&o(12,S=e.container)},e.$$.update=()=>{24577&e.$$.dirty[0]&&o(2,p=y&&!w&&!b),2&e.$$.dirty[0]&&o(3,v=Ke(i,ye.TRANSLATOR))},[w,i,p,v,m,h,f,E,_,T,async()=>{if(!r)return;const{domElements:e,strings:n,cloneContainer:i}=nk(r),s=n.reduce(((e,t)=>e+t.length),0);if(!v&&s>ZR)return t({action:"dlTrackGmailCharLimitReached",payload:{gmailActionType:UT(Ne.READING_VIEW_TRANSLATE)}}),g=rO.createElement(),g.createDOM({onCloseCharLimitPopup:$}),void document.body.appendChild(g);o(0,w=!0);const a=n.map((e=>({text:e}))),c=[{text:l}],u=rk(a.map((e=>e.text)));(e=>{if(!e)return;const{height:t}=e.getBoundingClientRect(),n=Math.floor(t/20),o=[];for(let e=0;e<n;e++)o.push(`<div style="width: ${i=35,r=99,Math.floor(Math.random()*(r-i+1))+i}%" class="deepl-gmail-loading-skeleton">line</div>`);var i,r;e.innerHTML=dt(o.join(""))})(r),x(!0);try{let[n,s]=await Promise.all([t({action:"dlRequestGmailReceivedEmailTranslation",payload:{targetLang:m,sourceLang:h,requests:u.simplifiedHtml.map((e=>({text:e}))),domainName:window.location.hostname}}),t({action:"dlRequestGmailReceivedEmailTranslation",payload:{targetLang:m,sourceLang:h,requests:c,domainName:window.location.hostname}})]);if(n=n.map((e=>({...e,text:sk(u.map,e.text),texts:e.texts.map((e=>sk(u.map,e)))}))),FE({strings:n[0]?.texts,domElements:e}),r.innerText=i.innerText,r.innerHTML=dt(i.innerHTML),x(!1),s[0]?.text){const e=s[0]?.text;l=e,d.innerText=e}o(0,w=!1),o(13,y=!0)}catch(e){(e=>{yw.update({error:e.message?e.message:e})})(e),o(0,w=!1),T()}},()=>{o(14,b=!0);if(!eN())return void o(14,b=!1);const e=tN();e?(e.scrollIntoView(),setTimeout((()=>{JO(e),QO("[contenteditable='true']",k)}),300)):o(14,b=!1)},S,y,b,e=>{o(5,h=e.detail.selectedOption.value)},e=>{o(4,m=e.detail.selectedOption.value)},function(){_=this.offsetWidth,o(8,_)}]}class kO extends Qh{constructor(e){super(),Jh(this,e,CO,xO,yg,{container:12},null,[-1,-1])}}class LO{static HTML_TAG_NAME="deepl-gmail-translate-email-toolbar";static createElement=(e=document)=>{const t=e.createElement(LO.HTML_TAG_NAME),n=new LO(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.container=document.createElement("div"),this.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowRoot.addEventListener("mouseup",(e=>{e.stopPropagation(),e.stopImmediatePropagation()})),this.domElement.shadowRoot.addEventListener("mousedown",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=({container:e})=>{this.mainComponent=new kO({target:this.domElement.shadowContainer,props:{container:e}})};cleanupDOM(){this.shadowContainer.remove(),this.mainComponent&&this.mainComponent.$destroy()}}function IO(e){let t;return{c(){t=Wg("div"),Xg(t,"class","dot svelte-o9amr0")},m(e,n){zg(e,t,n)},d(e){e&&Hg(t)}}}function AO(e){let t,n,o,i,r,s,a,l,c,d,u,p,m=!e[0].wasGmailOnboardingShown&&MO();return c=new nA({props:{checked:e[0].isGmailEnabled}}),c.$on("change",e[6]),{c(){t=Wg("div"),n=Wg("div"),m&&m.c(),o=Gg(),i=Wg("div"),r=Wg("div"),s=Wg("div"),s.textContent=`${chrome.i18n.getMessage("gmail_onboarding_toggle")}`,a=Gg(),l=Wg("div"),Zh(c.$$.fragment),Xg(n,"class","svelte-o9amr0"),ih(n,"content",!e[0].wasGmailOnboardingShown),Xg(s,"class","switch-content svelte-o9amr0"),Xg(l,"class","switch"),Xg(r,"class","switch-container svelte-o9amr0"),ih(r,"topBorder",!e[0].wasGmailOnboardingShown),Xg(i,"class","footer"),Xg(t,"class","onboarding-popup svelte-o9amr0")},m(g,h){zg(g,t,h),Pg(t,n),m&&m.m(n,null),Pg(t,o),Pg(t,i),Pg(i,r),Pg(r,s),Pg(r,a),Pg(r,l),Kh(c,l,null),d=!0,u||(p=[Lg(c_.call(null,t,{isShadow:!0,exceptions:["#dl-gmail-settings-icon"]})),Yg(t,"click_outside",e[7])],u=!0)},p(e,t){e[0].wasGmailOnboardingShown?m&&(Uh(),Fh(m,1,1,(()=>{m=null})),zh()):m?(m.p(e,t),1&t&&Hh(m,1)):(m=MO(),m.c(),Hh(m,1),m.m(n,null)),(!d||1&t)&&ih(n,"content",!e[0].wasGmailOnboardingShown);const o={};1&t&&(o.checked=e[0].isGmailEnabled),c.$set(o),(!d||1&t)&&ih(r,"topBorder",!e[0].wasGmailOnboardingShown)},i(e){d||(Hh(m),Hh(c.$$.fragment,e),d=!0)},o(e){Fh(m),Fh(c.$$.fragment,e),d=!1},d(e){e&&Hg(t),m&&m.d(),Xh(c),u=!1,_g(p)}}}function MO(e){let t,n,o,i,r,s,a,l,c,d,u,p,m,g,h,f,_,v,y;return s=new Nw({props:{width:"16px",height:"16px",padding:"3px 0 0 0"}}),u=new Nw({props:{width:"16px",height:"16px",padding:"3px 0 0 0"}}),f=new Nw({props:{width:"16px",height:"16px",padding:"3px 0 0 0"}}),{c(){t=Wg("div"),n=Wg("p"),n.textContent=`${chrome.i18n.getMessage("gmail_onboarding_title")}`,o=Gg(),i=Wg("div"),r=Wg("div"),Zh(s.$$.fragment),a=Gg(),l=Wg("div"),l.textContent=`${chrome.i18n.getMessage("gmail_onboarding_body_1")}`,c=Gg(),d=Wg("div"),Zh(u.$$.fragment),p=Gg(),m=Wg("div"),m.textContent=`${chrome.i18n.getMessage("gmail_onboarding_body_2")}`,g=Gg(),h=Wg("div"),Zh(f.$$.fragment),_=Gg(),v=Wg("div"),v.textContent=`${chrome.i18n.getMessage("gmail_onboarding_body_3")}`,Xg(n,"class","svelte-o9amr0"),Xg(t,"class","title svelte-o9amr0"),Xg(l,"class","copy-text svelte-o9amr0"),Xg(r,"class","copy svelte-o9amr0"),Xg(m,"class","copy-text svelte-o9amr0"),Xg(d,"class","copy svelte-o9amr0"),Xg(v,"class","copy-text svelte-o9amr0"),Xg(h,"class","copy svelte-o9amr0"),Xg(i,"class","body svelte-o9amr0")},m(e,w){zg(e,t,w),Pg(t,n),zg(e,o,w),zg(e,i,w),Pg(i,r),Kh(s,r,null),Pg(r,a),Pg(r,l),Pg(i,c),Pg(i,d),Kh(u,d,null),Pg(d,p),Pg(d,m),Pg(i,g),Pg(i,h),Kh(f,h,null),Pg(h,_),Pg(h,v),y=!0},p:mg,i(e){y||(Hh(s.$$.fragment,e),Hh(u.$$.fragment,e),Hh(f.$$.fragment,e),y=!0)},o(e){Fh(s.$$.fragment,e),Fh(u.$$.fragment,e),Fh(f.$$.fragment,e),y=!1},d(e){e&&(Hg(t),Hg(o),Hg(i)),Xh(s),Xh(u),Xh(f)}}}function RO(e){let t,n,o,i,r,s,a,l=e[2]&&IO(),c=e[1]&&AO(e);return{c(){t=Wg("div"),n=Wg("div"),o=Gg(),l&&l.c(),i=Gg(),c&&c.c(),Xg(n,"class","icon svelte-o9amr0"),Xg(n,"id","dl-gmail-settings-icon"),ih(n,"notification",e[2]),ih(n,"isOnboardingPopupOpen",e[1]),ih(n,"enabled",e[0].isGmailEnabled),Xg(t,"class","deepl-gmail-header-toolbar svelte-o9amr0"),Xg(t,"dir",Bt())},m(d,u){zg(d,t,u),Pg(t,n),Pg(t,o),l&&l.m(t,null),Pg(t,i),c&&c.m(t,null),r=!0,s||(a=Yg(n,"click",Kg(Zg(e[5]))),s=!0)},p(e,[o]){(!r||4&o)&&ih(n,"notification",e[2]),(!r||2&o)&&ih(n,"isOnboardingPopupOpen",e[1]),(!r||1&o)&&ih(n,"enabled",e[0].isGmailEnabled),e[2]?l||(l=IO(),l.c(),l.m(t,i)):l&&(l.d(1),l=null),e[1]?c?(c.p(e,o),2&o&&Hh(c,1)):(c=AO(e),c.c(),Hh(c,1),c.m(t,null)):c&&(Uh(),Fh(c,1,1,(()=>{c=null})),zh())},i(e){r||(Hh(c),r=!0)},o(e){Fh(c),r=!1},d(e){e&&Hg(t),l&&l.d(),c&&c.d(),s=!1,a()}}}function OO(e,n,o){let i;bg(e,nf,(e=>o(0,i=e))),vh("text_direction",Bt());let r=!1,s=!1;const a=async e=>{o(1,r=e),e||i.wasGmailOnboardingShown||await nf.set({wasGmailOnboardingShown:!0}),t({action:"dlTrackUILocationClicked",payload:U.gmailOnboardingIcon}),e&&t({action:"dlTrackOnboardingModalShown",payload:{nicheIntegration:ie.gmail}})},l=async e=>{await nf.set({isGmailEnabled:e}),t({action:"dlTrackCustomizationEnabledEvent",payload:{nicheIntegration:ie.gmail,uiLocation:U.gmailOnboardingPopup,customizationEnabled:e}})};return e.$$.update=()=>{1&e.$$.dirty&&o(2,s=!i.wasGmailOnboardingShown)},[i,r,s,a,l,()=>{a(!r)},e=>l(e.detail.checked),()=>{a(!1)}]}class NO extends Qh{constructor(e){super(),Jh(this,e,OO,RO,yg,{})}}class DO{static HTML_TAG_NAME="deepl-gmail-header-toolbar";static createElement=(e=document)=>{const t=e.createElement(DO.HTML_TAG_NAME),n=new DO(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowRoot.addEventListener("mouseup",(e=>{e.stopPropagation(),e.stopImmediatePropagation()})),this.domElement.shadowRoot.addEventListener("mousedown",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=()=>{this.domElement.mainComponent=new NO({target:this.domElement.shadowContainer})};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}function PO(e){let t;return{c(){t=Wg("div"),Xg(t,"class","dl-gmail"),Xg(t,"dir",Bt())},m(e,n){zg(e,t,n)},p:mg,i:mg,o:mg,d(e){e&&Hg(t)}}}function BO(e,t,n){let o,i,r,s,a;bg(e,nf,(e=>n(5,o=e))),vh("text_direction",Bt());let l=!1;const c=()=>{p(),o.isGmailEnabled?d():u()},d=()=>{m(),g()},u=()=>{const e=[rO.HTML_TAG_NAME,LO.HTML_TAG_NAME,vO.HTML_TAG_NAME];WO(e)},p=()=>{const e="data-has-dl-icon",t=document.querySelector("header");if(!t||"banner"!==t.getAttribute("role")||t.hasAttribute(e))return;const n=t.querySelector("[role='search']");if(!n)return;const o=n.parentNode;if(!o)return;const i=DO.createElement();o.insertAdjacentElement("afterend",i),i.createDOM(),t.setAttribute(e,!0)},m=()=>{if(jO()){const e=qO();if(!e)return;e.forEach((e=>{const t=YO(e);if(!t||GO(e))return;const n=t.parentNode;if(!n)return;const o=LO.createElement();n.after(o),o.createDOM({container:e})}))}},g=()=>{const e=document.activeElement;if(!e)return;const t=e.hasAttribute("contenteditable"),n=VO(e),o=e.hasAttribute(YR),i=e!==s,r=!a&&(!t||n||i),c=t&&(!o||i)&&!n;!r||c||l?(l=!1,r&&f(),c&&(f(),h(e))):l=!0},h=e=>{const t=vO.createElement();r=t,s=e,e.setAttribute(YR,"true"),document.body.appendChild(t);const n=(e=>{const t=function(e){let t=e;for(;null!==t;){if("dialog"===t.getAttribute("role"))return t;t=t.parentElement}return null}(e);return t?t.querySelector('input[name="subjectbox"]'):null})(e);t.createDOM({container:e,subjectInput:n,updateLockStatus:_})},f=()=>{r&&r.cleanupDOM();const e=Array.from(document.querySelectorAll(vO.HTML_TAG_NAME));for(const t of e)t.remove();document.querySelectorAll(`[contenteditable][${YR}="true"]`).forEach((e=>e.removeAttribute(YR))),r=null},_=e=>{a=e},v=async e=>{if("dlChangeActiveTabStatus"===e.action)e.payload.isActive?y():w();return!0},y=()=>{i&&clearInterval(i),i=setInterval(c,800)},w=()=>{clearInterval(i)};return hh((()=>{y(),chrome.runtime.onMessage.addListener(v)})),fh((()=>{u(),i&&w(),chrome.runtime.onMessage.removeListener(v)})),[]}class UO extends Qh{constructor(e){super(),Jh(this,e,BO,PO,yg,{})}}class zO{static HTML_TAG_NAME="deepl-gmail-controller";static createElement=(e=document)=>{const t=e.createElement(zO.HTML_TAG_NAME),n=new zO(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t.showOnboarding=n.showOnboarding,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css")),this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer),this.domElement.shadowRoot.addEventListener("mouseup",(e=>{e.stopPropagation(),e.stopImmediatePropagation()})),this.domElement.shadowRoot.addEventListener("mousedown",(e=>{e.stopPropagation(),e.stopImmediatePropagation()}))}createDOM=()=>{this.domElement.mainComponent=new UO({target:this.domElement.shadowContainer,props:{onClose:this.domElement.cleanupDOM,controller:this}})};cleanupDOM=()=>{this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()};showOnboarding=()=>{this.domElement.mainComponent.showOnboarding()}}const{scope:HO}=Fb(),FO=()=>document.querySelector(zO.HTML_TAG_NAME),WO=e=>{try{for(const t of e)if(t){const e=Array.from(document.getElementsByTagName(t));for(const t of e)t.cleanupDOM&&t.cleanupDOM(),t.remove()}}catch(e){rn()&&console.error(e),af(e,HO)}},jO=()=>document.querySelectorAll("[data-message-id]").length>0,qO=()=>document.querySelectorAll("[data-message-id]"),GO=e=>!!e&&!!e.querySelector(LO.HTML_TAG_NAME),VO=e=>{const{bottom:t,right:n}=e.getBoundingClientRect(),o=t-30,i=n-30;let r=!1;return document.querySelectorAll('[role="dialog"]').forEach((t=>{const n=(s=i,a=o,l=t.getBoundingClientRect(),s>=l.left&&s<=l.right&&a>=l.top&&a<=l.bottom);var s,a,l;const c=t.contains(e);n&&!c&&(r=!0)})),r},YO=e=>{if(e)return e.querySelector("table")},ZO=e=>{const t=Rt(),n=t.filter((e=>void 0===e.regionalVariant)).map((e=>({value:e.value,label:`<strong>${e.value}</strong> - ${e.label}`,selectedOptionLabel:e.value}))),o=t.find((e=>"EN-GB"===e.value)),i=t.find((e=>"PT-PT"===e.value));return[...[...n,...[{...o,value:"EN",selectedOptionLabel:"EN",label:`<strong>EN</strong> - ${chrome.i18n.getMessage("supported_languages_EN")}`},{...i,value:"PT",selectedOptionLabel:"PT",label:`<strong>PT</strong> - ${chrome.i18n.getMessage("supported_languages_PT")}`}]].map((t=>e&&t.value===e.value?{...t,label:`${t.label} ${chrome.i18n.getMessage("gmail_language_detected")}`}:t))].sort(((e,t)=>e.value.localeCompare(t.value)))},KO=e=>{const t=e.getBoundingClientRect();return{x:t.left+t.width/2,y:t.top+t.height/2}},XO=(e,t)=>{const n=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0,clientX:e,clientY:t});document.elementFromPoint(e,t)?.dispatchEvent(n)},JO=e=>{const{x:t,y:n}=KO(e);XO(t,n)},QO=(e,t)=>{const n=document.body;new MutationObserver(((o,i)=>{for(const r of o)if("childList"===r.type&&n.querySelector(e)){i.disconnect(),t(n.querySelector(e));break}})).observe(n,{childList:!0,subtree:!0})},eN=()=>{const e=document.querySelectorAll("[data-message-id]");for(const t of e){const e=t.nextElementSibling;if(e&&"DIV"===e.tagName)return e}return null},tN=()=>{const e=document.querySelectorAll('span[role="link"]');let t;for(let n=0;n<e.length;n++){const o=e[n],i=o.previousElementSibling;if(i&&"SPAN"===i.tagName&&"link"===i.getAttribute("role")){const e=o.parentElement,n=e.querySelectorAll('span[role="link"]'),i=Array.from(e.children).filter((e=>e.matches("span")));2!==(2===n.length&&i.length)&&3!==(3===n.length&&i.length)||(t=o)}}return t};let nN,oN,iN,rN,sN,aN,lN,cN,dN,uN,pN,mN;const{scope:gN}=Fb(),{deepl_inline_ui:hN}=D;function fN({websiteData:e,platformBehaviour:t=ie.default,textProcessingMode:n=re.translate,onRemove:o=(()=>{})}){try{let i;switch(_N(),mN=VR.createElement(),mN.platformBehaviour=t,mN.textProcessingMode=n,mN.style.zIndex=hN.z_index,document.documentElement.appendChild(mN),t){case ie.gdocs:i=ht;break;case ie.default:default:i=NE}mN.createDOM(i,(()=>_N(o)),e),yw.update({isReviewTranslateWriteWindowInjected:!0})}catch(e){rn()&&console.error(e),af(e,gN)}}function _N(e){try{mN&&(mN.cleanupDOM(),Array.from(document.getElementsByTagName(VR.HTML_TAG_NAME),(e=>e.remove())),yw.update({isReviewTranslateWriteWindowInjected:!1}),oN=void 0,e())}catch(e){rn()&&console.error(e),af(e,gN)}}function vN({websiteData:e,platformBehaviour:t=ie.default,textProcessingMode:n=re.translate}){try{let o;switch(yN(),oN=UC.createElement(),oN.platformBehaviour=t,oN.textProcessingMode=n,oN.style.zIndex=hN.z_index,document.documentElement.appendChild(oN),t){case ie.gdocs:o=ht;break;case ie.default:default:o=NE}oN.createDOM(o,yN,e),yw.update({isTranslationTooltipInjected:!0})}catch(e){rn()&&console.error(e),af(e,gN)}}function yN(){try{oN&&(oN.cleanupDOM(),Array.from(document.getElementsByTagName(UC.HTML_TAG_NAME),(e=>e.remove())),yw.update({isTranslationTooltipInjected:!1}),oN=void 0)}catch(e){rn()&&console.error(e),af(e,gN)}}function wN(e=ie.default){try{if(iN)return;let t;switch(iN=zx.createElement(),iN.style.zIndex=hN.z_index,document.documentElement.appendChild(iN),e){case ie.gdocs:t="deepl-gdocs-icon";break;case ie.default:default:t=JC.HTML_TAG_NAME}const n=function(e){if(!e)return;const t=e.getBoundingClientRect(),n=document.body.parentNode.getBoundingClientRect(),{top:o,left:i,right:r,bottom:s,height:a,width:l}=t;return{x:i-n.left,y:s-n.top,top:o,bottom:s,right:n.width-r,left:i+window.pageXOffset,width:l,height:a}}(document.querySelector(t).shadowRoot.querySelector('[data-qa="deepl-inline-translate-menu-icon"]'));iN.createDOM(n,bN),yw.update({isInlineTranslateSettingsTooltipInjected:!0}),d_((()=>{bN()}))}catch(e){rn()&&console.error(e),af(e,gN)}}function bN(){try{if(!iN)return;iN.cleanupDOM(),Array.from(document.getElementsByTagName("deepl-inline-translate-settings-tooltip"),(e=>e.remove())),yw.update({isInlineTranslateSettingsTooltipInjected:!1}),iN=void 0}catch(e){rn()&&console.error(e),af(e,gN)}}function EN(){try{if(document.querySelector(QI.HTML_TAG_NAME))return;nN=QI.createElement(),document.documentElement.appendChild(nN),nN.createDOM(),document.addEventListener("click",SN),d_((()=>{SN()}))}catch(e){rn()&&console.error(e),af(e,gN)}}function SN(){try{nN&&(nN.cleanupDOM(),Array.from(document.getElementsByTagName(QI.HTML_TAG_NAME),(e=>e.remove())),nN=void 0,document.removeEventListener("click",SN))}catch(e){rn()&&console.error(e),af(e,gN)}}function TN(){try{if(document.querySelector(fA.HTML_TAG_NAME))return;cN=fA.createElement(),document.documentElement.appendChild(cN),cN.createDOM(),d_((()=>{$N()}))}catch(e){rn()&&console.error(e),af(e,gN)}}function xN(){try{if(document.querySelector(YA.HTML_TAG_NAME))return;dN=YA.createElement(),document.documentElement.appendChild(dN),dN.createDOM(),d_((()=>{CN()}))}catch(e){rn()&&console.error(e),af(e,gN)}}function $N(){try{cN&&(cN.cleanupDOM(),Array.from(document.getElementsByTagName(fA.HTML_TAG_NAME),(e=>e.remove())),cN=void 0,document.removeEventListener("click",$N))}catch(e){rn()&&console.error(e),af(e,gN)}}function CN(){try{dN&&(dN.cleanupDOM(),Array.from(document.getElementsByTagName(YA.HTML_TAG_NAME),(e=>e.remove())),dN=void 0,document.removeEventListener("click",CN))}catch(e){rn()&&console.error(e),af(e,gN)}}function kN(){try{if(qb())return;uN=Gb(),document.documentElement.appendChild(uN),uN.createDOM(),d_((()=>{LN()}))}catch(e){rn()&&console.error(e),af(e,gN)}}function LN(){try{uN&&(uN.cleanupDOM(),Array.from(document.getElementsByTagName("deepl-zendesk-controller"),(e=>e.remove())),uN=void 0,document.removeEventListener("click",LN))}catch(e){rn()&&console.error(e),af(e,gN)}}function IN(){try{if(document.querySelector(jD.HTML_TAG_NAME))return;aN=jD.createElement(),document.body.appendChild(aN),aN.createDOM(),d_((()=>{RN()}))}catch(e){rn()&&console.error(e),af(e,gN)}}function AN(){try{if(FO())return;pN=zO.createElement(),document.documentElement.appendChild(pN),pN.createDOM(),d_((()=>{MN()}))}catch(e){rn()&&console.error(e),af(e,gN)}}function MN(){try{pN&&(pN.cleanupDOM(),Array.from(document.getElementsByTagName(zO.HTML_TAG_NAME),(e=>e.remove())),pN=void 0,document.removeEventListener("click",MN))}catch(e){rn()&&console.error(e),af(e,gN)}}function RN(){try{if(aN){aN.cleanupDOM();const e=Array.from(document.querySelectorAll(jD.HTML_TAG_NAME));for(const t of e)t.remove();aN=void 0,document.removeEventListener("click",RN)}}catch(e){rn()&&console.error(e),af(e,gN)}}async function ON(e){try{if(!rN)return;rN.cleanupDOM(),Array.from(document.getElementsByTagName("deepl-inline-trigger"),(e=>e.remove())),rN=void 0;if(!(await JT(["isInlineHighlighterShown"])).isInlineHighlighterShown&&!e.target.contains(rN)){try{t({action:"dltrackCloseInlineHighlighter",payload:{trigger:oe.outside_click}})}catch(e){console.error(e)}nf.set({isInlineHighlighterShown:!0})}}catch(e){rn()&&console.error(e),af(e,gN)}}async function NN(){try{if(!sN)return;sN.cleanupDOM(),Array.from(document.getElementsByTagName("deepl-input-selection-trigger"),(e=>e.remove())),sN=void 0}catch(e){rn()&&console.error(e),af(e.message)}}function DN(e,t){ON();try{rN=JC.createElement(),rN.style.zIndex=hN.z_index,document.documentElement.appendChild(rN),rN.createDOM(e,t),d_((()=>{ON()}))}catch(e){rn()&&console.error(e),af(e,gN)}}function PN(e,t){NN();try{if((()=>{const e=window.getSelection()?.toString();return e?.length})()>1500||(e=>{let t=e.value?.substring(e.selectionStart,e.selectionEnd);return t?.length})(e)>1500)return;sN=mL.createElement(),sN.style.zIndex=hN.z_index,document.documentElement.appendChild(sN),sN.createDOM(e,t),e.addEventListener("input",NN),d_((()=>{NN(),e.removeEventListener("input",NN)}))}catch(e){rn()&&console.error(e),af(e.message)}}function BN(e){const t=t=>{requestAnimationFrame((()=>{if(!t||!t.target)return;const n=window.getSelection();if(!n.toString().trim())return;if(2===t.button)return;const o="TEXTAREA"===t.target.tagName,i=e=>{if(!e)return!1;const t=e.childNodes;for(let e=0;e<t.length;e++)if(t[e].isContentEditable||"TEXTAREA"===t[e].tagName)return t[e];return!1};if(n.isCollapsed||n.anchorNode?.parentNode?.isContentEditable){if(n.anchorNode?.parentNode?.isContentEditable||o||i(n.anchorNode)){let e={clientX:t.clientX||0,pageY:t.pageY||0,detail:t?.detail||0,isOutsideOfView:HN(t)};if(n.anchorNode?.parentNode?.isContentEditable)PN(n.anchorNode.parentNode,e);else if(o)PN(t.target,e);else{PN(i(n.anchorNode),e)}}}else{const o=n.getRangeAt(0)?.commonAncestorContainer;if(!o.contains(t.target)&&!t.target.contains(o))return;let i={clientX:t.clientX||0,pageY:t.pageY||0,detail:t?.detail||0,isOutsideOfView:HN(t)};DN(e,i)}}))},n=()=>{const e=window.getSelection();e.isCollapsed||!e.toString().trim()?(ON(),NN()):t()},o=e=>{"Escape"===e.key&&NN()};document.addEventListener("mouseup",t),document.addEventListener("mousedown",ON),document.addEventListener("mousedown",NN),document.addEventListener("selectionchange",n),document.addEventListener("keydown",o),d_((()=>{document.removeEventListener("mouseup",t),document.removeEventListener("mousedown",ON),document.removeEventListener("mousedown",NN),document.removeEventListener("selectionchange",n),document.removeEventListener("keydown",o)}))}function UN(e,t){try{lN=zL.createElement(),lN.style.zIndex=hN.z_index,document.documentElement.appendChild(lN),lN.createDOM(e,t),d_((()=>{lN.cleanupDOM()}))}catch(e){rn()&&console.error(e),af(e,gN)}}const zN=(e=ne.initial)=>{const t=uM.createElement();document.documentElement.appendChild(t),t.createDOM({reviewStage:e}),d_((()=>{t.cleanupDOM()}))};function HN({clientX:e=0,pageY:t=0}={}){const n=window.innerWidth||document.documentElement.innerWidth,o=window.scrollHeight||document.documentElement.scrollHeight;return e<0||e>=n||(t<0||t>=o)}function FN(e){switch(e){case"web.whatsapp.com":MS();break;case"twitter.com":case"tweetdeck.twitter.com":case"x.com":JS();break;case"www.linkedin.com":_T();break;case"www.youtube.com":OT()}}async function WN(e){const t=e.split("."),n=t.filter(((e,n)=>n===t.length-1||n===t.length-2)).join(".");"deepl.com"===n&&(document.body.dataset.dlBrowserExtensionPresent="true")}async function jN(e){const t=await JT(["shouldDisplayFeedbackPopup"]);if("https://deepl.typeform.com/to/MkMfP2Y6"===e)t.shouldDisplayFeedbackPopup&&(nf.set({shouldDisplayFeedbackPopup:!1}),zN(ne.feedback))}function qN(e,t){if("web.whatsapp.com"===t){const t=document.documentElement.querySelector("#side");return!t||!t.contains(e)}return!0}function GN(e,t){if("web.whatsapp.com"===t){const t=document.documentElement.querySelector("#side");if(t&&t.contains(e))return!1}return!0}const VN=()=>{const e=new URL(window.location.href);return"https:"===e.protocol&&"chatgpt.com"===e.hostname},YN=[];window.onerror=function(e){/ResizeObserver/gm.test(e)&&YN.forEach((e=>e.resize.disconnect()))};const{scope:ZN}=Fb();const KN=e=>"true"===e.contentEditable||"TEXTAREA"===e.nodeName&&(e.rows>1||VN());const XN=({inputArea:e})=>{const t=tD(e);return{position:"absolute",top:t.top,left:t.left,right:t.right,width:t.width,height:t.height,isLanguageToolsPresent:!!document.querySelector("lt-toolbar"),isGrammarlyPresent:!!document.querySelector("grammarly-extension"),isChatGPTPresent:VN()}},JN=({inputArea:e})=>{const t=[];if(e)for(let n=e.parentElement;null!==n;n=n.parentElement)QN(n)&&t.push(n);return t},QN=e=>{const t=window.getComputedStyle(e),n=t.getPropertyValue("overflow-y"),o=t.getPropertyValue("overflow-x"),i=["hidden","scroll","auto"];return i.includes(n)||i.includes(o)},eD=(e,t)=>{let n={left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom)};return n.left>=n.right||n.top>=n.bottom?null:n},tD=e=>{let t=e.getBoundingClientRect(),n={left:t.left,right:t.right,bottom:t.bottom,top:t.top};const o={top:0,left:0,right:0,bottom:0,width:0,height:0},i={top:0,left:0,right:window.innerWidth,bottom:window.innerHeight};for(let t=e.parentElement;null!==t&&t!==e.ownerDocument.body;t=t.parentElement){let e=t.getBoundingClientRect();const i=eD(n,e);if(i)n=i;else if(QN(t))return o}return n=eD(n,i),n?{top:n.top,bottom:n.bottom,left:n.left,right:n.right,width:n.right-n.left,height:n.bottom-n.top}:o},nD=[{domain:"zendesk.com",selectors:['div[data-test-id="ticket-rich-text-editor"] [contenteditable="true"]'],uniqueDataAttributes:[{key:"testId",value:"ticket-rich-text-editor"}]}];const oD={generalSettings:"GENERAL_SETTINGS",inputSettings:"INPUT_SETTINGS"};function iD(e){let t;return{c(){t=Wg("span"),Xg(t,"class","svelte-xa2hux")},m(e,n){zg(e,t,n)},p:mg,d(e){e&&Hg(t)}}}function rD(e){let t;return{c(){t=Wg("span"),Xg(t,"class","svelte-xa2hux")},m(e,n){zg(e,t,n)},p:mg,d(e){e&&Hg(t)}}}function sD(e){let t;return{c(){t=Wg("span"),Xg(t,"class","svelte-xa2hux")},m(e,n){zg(e,t,n)},p:mg,d(e){e&&Hg(t)}}}function aD(e){let t;return{c(){t=Wg("span"),Xg(t,"class","svelte-xa2hux")},m(e,n){zg(e,t,n)},p:mg,d(e){e&&Hg(t)}}}function lD(e){let t,n,o,i,r,s,a,l,c,d,u,p,m,g,h,f,_,v,y;return o=new h_({props:{tooltip:chrome.i18n.getMessage("input_translation_tooltip_turnoff"),parentIsRTL:e[1],ignoreTextDirection:!0,$$slots:{default:[iD]},$$scope:{ctx:e}}}),s=new h_({props:{tooltip:e[8],showProShield:Ke(e[2],ye.WRITE),parentIsRTL:e[1],ignoreTextDirection:!0,$$slots:{default:[rD]},$$scope:{ctx:e}}}),u=new h_({props:{tooltip:chrome.i18n.getMessage("input_translation_tooltip_select_target_lang"),parentIsRTL:e[1],ignoreTextDirection:!0,$$slots:{default:[sD]},$$scope:{ctx:e}}}),g=new h_({props:{showProShield:Ke(e[2],ye.TRANSLATOR),tooltip:e[6],parentIsRTL:e[1],ignoreTextDirection:!0,$$slots:{default:[aD]},$$scope:{ctx:e}}}),{c(){t=Wg("div"),n=Wg("div"),Zh(o.$$.fragment),i=Gg(),r=Wg("div"),Zh(s.$$.fragment),a=Gg(),l=Wg("div"),c=Gg(),d=Wg("div"),Zh(u.$$.fragment),p=Gg(),m=Wg("div"),Zh(g.$$.fragment),h=Gg(),f=Wg("div"),Xg(n,"class","dl-icon-circle dl-on-off svelte-xa2hux"),Xg(r,"class","dl-icon-circle dl-improve svelte-xa2hux"),ih(r,"disabled",!e[7]),Xg(l,"class","spacer svelte-xa2hux"),Xg(d,"class","dl-icon-circle dl-settings svelte-xa2hux"),Xg(m,"class","dl-icon-circle dl-icon svelte-xa2hux"),Xg(m,"data-qa","input-translation-icon"),Xg(f,"class","dl-icon-circle dl-loading svelte-xa2hux"),Xg(t,"class","dl-input-icon svelte-xa2hux"),ih(t,"is-input-translation-disabled",e[9]),ih(t,"is-loading",e[5]),ih(t,"is-minimized",e[4])},m(w,b){zg(w,t,b),Pg(t,n),Kh(o,n,null),Pg(t,i),Pg(t,r),Kh(s,r,null),Pg(t,a),Pg(t,l),Pg(t,c),Pg(t,d),Kh(u,d,null),Pg(t,p),Pg(t,m),Kh(g,m,null),e[36](m),Pg(t,h),Pg(t,f),_=!0,v||(y=[Yg(n,"mousedown",Kg(Zg(e[28]))),Yg(n,"mouseenter",e[29]),Yg(n,"click",e[30]),Yg(r,"mousedown",Kg(Zg(e[27]))),Yg(r,"mouseenter",e[31]),Yg(r,"click",e[32]),Yg(d,"mousedown",Kg(Zg(e[26]))),Yg(d,"mouseenter",e[33]),Yg(d,"click",e[34]),Yg(m,"mousedown",Kg(Zg(e[25]))),Yg(m,"click",e[13]),Yg(m,"mouseenter",e[35])],v=!0)},p(e,n){const i={};2&n[0]&&(i.parentIsRTL=e[1]),2048&n[1]&&(i.$$scope={dirty:n,ctx:e}),o.$set(i);const a={};256&n[0]&&(a.tooltip=e[8]),4&n[0]&&(a.showProShield=Ke(e[2],ye.WRITE)),2&n[0]&&(a.parentIsRTL=e[1]),2048&n[1]&&(a.$$scope={dirty:n,ctx:e}),s.$set(a),(!_||128&n[0])&&ih(r,"disabled",!e[7]);const l={};2&n[0]&&(l.parentIsRTL=e[1]),2048&n[1]&&(l.$$scope={dirty:n,ctx:e}),u.$set(l);const c={};4&n[0]&&(c.showProShield=Ke(e[2],ye.TRANSLATOR)),64&n[0]&&(c.tooltip=e[6]),2&n[0]&&(c.parentIsRTL=e[1]),2048&n[1]&&(c.$$scope={dirty:n,ctx:e}),g.$set(c),(!_||512&n[0])&&ih(t,"is-input-translation-disabled",e[9]),(!_||32&n[0])&&ih(t,"is-loading",e[5]),(!_||16&n[0])&&ih(t,"is-minimized",e[4])},i(e){_||(Hh(o.$$.fragment,e),Hh(s.$$.fragment,e),Hh(u.$$.fragment,e),Hh(g.$$.fragment,e),_=!0)},o(e){Fh(o.$$.fragment,e),Fh(s.$$.fragment,e),Fh(u.$$.fragment,e),Fh(g.$$.fragment,e),_=!1},d(n){n&&Hg(t),Xh(o),Xh(s),Xh(u),Xh(g),e[36](null),v=!1,_g(y)}}}function cD(e,o,i){let r,s;const a=yh("deepl_settings");bg(e,a,(e=>i(2,s=e)));let l,c,d,{inputArea:u}=o,{lockActiveElement:p}=o,{openSettings:m}=o,{closeSettings:g}=o,{hideOnboardingHighlighter:h}=o,{registerIconCallbacks:f}=o,{unregisterIconCallbacks:_}=o,{getActiveElement:y}=o,{setErrorMessage:w}=o,{isInputAreaRTL:b}=o,E=!1,S=!1,T="",x={},$=chrome.i18n.getMessage("input_translation_tooltip_improve_lang_not_supported");const C=()=>{k()},k=()=>{i(4,E=CE(u,l))};async function L(e){await a.set({targetLanguageUserInput:e.value,regionalVariant:e.regionalVariant}),A()}const I=async(e,n,o)=>{const r=y();switch(e.action){case"dlTriggerTranslationShortcut":if(w(void 0),r!==u)return;try{t({action:"dlTrackUseOfShortcut",payload:{shortcutType:z,location:U.inputTranslationTriggerIcon}})}catch(e){console.error(e)}if(s&&s.targetLanguageUserInput){i(5,S=!0);try{await uk(u)}catch(e){w(e)}i(5,S=!1)}else m({fromShortcut:!0});o();break;case"dlChangeLanguageShortcut":if(r!==u)return;i(5,S=!0);try{m({fromShortcut:!0})}catch(e){w(e)}i(5,S=!1),o()}return!0};async function A(e){if(w(void 0),h(),s.targetLanguageUserInput&&"undefined"!=s.targetLanguageUserInput||e?.isWriteRequest){g(),i(5,S=!0);try{await uk(u,e),c||n(P.hintKeyboardShortcut)}catch(e){w(e)}i(5,S=!1)}else m()}function M(e){t({action:"dlTrackIconHover",payload:{uiLocation:e,domainName:window.location.host}})}async function R(){let e;e=TE(u)?u.value:u.innerText,i(24,x=await Mt(e,!0)),x.isReliable;try{e&&function(e){try{return e.replace(/[^\p{L}]/gu,"").length}catch(t){return e.replace(/[^a-zA-Z]/g,"").length}}(e)>0&&t({action:"dlTrackLanguageDetectionForTextProcessing",payload:{lang:x.langCode,isReliable:x.isReliable,trigger:v,textLength:e.length,domainName:window.location.hostname}})}catch(e){console.error(e)}}hh((()=>{chrome.runtime.onMessage.addListener(I),f({processRefreshCycle:C,languageChanged:L,triggerTranslation:A})})),fh((()=>{chrome.runtime.onMessage.removeListener(I),_()}));return e.$$set=e=>{"inputArea"in e&&i(15,u=e.inputArea),"lockActiveElement"in e&&i(16,p=e.lockActiveElement),"openSettings"in e&&i(0,m=e.openSettings),"closeSettings"in e&&i(17,g=e.closeSettings),"hideOnboardingHighlighter"in e&&i(18,h=e.hideOnboardingHighlighter),"registerIconCallbacks"in e&&i(19,f=e.registerIconCallbacks),"unregisterIconCallbacks"in e&&i(20,_=e.unregisterIconCallbacks),"getActiveElement"in e&&i(21,y=e.getActiveElement),"setErrorMessage"in e&&i(22,w=e.setErrorMessage),"isInputAreaRTL"in e&&i(1,b=e.isInputAreaRTL)},e.$$.update=()=>{if(16777220&e.$$.dirty[0]&&(Je(s,ye.WRITE)?i(8,$=chrome.i18n.getMessage("input_translation_tooltip_improve_disabled_by_admin")):Dt(x.langCode)?i(8,$=chrome.i18n.getMessage("input_translation_tooltip_improve_supported_lang")):i(8,$=chrome.i18n.getMessage("write_language_not_supported")),i(7,d=!x.langCode||Dt(x.langCode)&&!Je(s,ye.WRITE))),4&e.$$.dirty[0])if(s.targetLanguageUserInput&&"undefined"!=s.targetLanguageUserInput){let e;t({action:"dlCheckCommandShortcuts"}).then((t=>{e=t?t.filter((e=>e.name==z))[0].shortcut:"",e?(e=`(${e})`,c=!0):c=!1,i(6,T=`${chrome.i18n.getMessage("input_translation_tooltip_translate")} ${e}`)}))}else i(6,T=chrome.i18n.getMessage("input_translation_tooltip_translate_text"));4&e.$$.dirty[0]&&i(9,r=!s.enableInputTranslation||IE(window.location.host,window.location.href)||s.blacklistDomainsForWriting.includes(window.location.host)||s.isGmailEnabled&&SE())},[m,b,s,l,E,S,T,d,$,r,a,A,M,()=>{p(),s.targetLanguageUserInput?A():m()},R,u,p,g,h,f,_,y,w,L,x,function(t){wh.call(this,e,t)},function(t){wh.call(this,e,t)},function(t){wh.call(this,e,t)},function(t){wh.call(this,e,t)},()=>M(U.inputTranslationSettingsIcon),()=>m({page:oD.inputSettings}),()=>{M(U.inputImproveTriggerIcon)},()=>{d&&A({isWriteRequest:!0})},()=>M(U.inputTranslationSettingsIcon),()=>m({page:oD.generalSettings}),()=>{R(),M(U.inputTranslationTriggerIcon)},function(e){Eh[e?"unshift":"push"]((()=>{l=e,i(3,l)}))}]}class dD extends Qh{constructor(e){super(),Jh(this,e,cD,lD,yg,{inputArea:15,lockActiveElement:16,openSettings:0,closeSettings:17,hideOnboardingHighlighter:18,registerIconCallbacks:19,unregisterIconCallbacks:20,getActiveElement:21,setErrorMessage:22,isInputAreaRTL:1,onLanguageChanged:23},null,[-1,-1])}get onLanguageChanged(){return this.$$.ctx[23]}}function uD(e){let t,n,o,i,r,s,a,l,c,d,u,p,m,g,h,f;return{c(){t=Wg("div"),n=Wg("div"),o=Wg("div"),i=Wg("div"),r=Wg("div"),r.textContent=`${chrome.i18n.getMessage("input_translation_highlighter_tooltip_headline")}`,s=Gg(),a=Wg("div"),a.textContent=`${chrome.i18n.getMessage("input_translation_highlighter_tooltip_text")}`,l=Gg(),c=Wg("button"),Xg(r,"class","headline svelte-1vokldc"),Xg(i,"class","text-wrapper svelte-1vokldc"),Xg(o,"class","content svelte-1vokldc"),Xg(c,"class","close-icon svelte-1vokldc"),Xg(n,"class",d=Cg(`body body__${e[0]}`)+" svelte-1vokldc"),Xg(t,"class",u="container container__"+e[0]+" svelte-1vokldc")},m(d,u){zg(d,t,u),Pg(t,n),Pg(n,o),Pg(o,i),Pg(i,r),Pg(i,s),Pg(i,a),Pg(n,l),Pg(n,c),e[13](t),g=!0,h||(f=Yg(c,"click",e[12]),h=!0)},p(e,o){(!g||1&o&&d!==(d=Cg(`body body__${e[0]}`)+" svelte-1vokldc"))&&Xg(n,"class",d),(!g||1&o&&u!==(u="container container__"+e[0]+" svelte-1vokldc"))&&Xg(t,"class",u)},i(e){g||(kh((()=>{g&&(m&&m.end(1),p=jh(t,Of,{x:100,duration:1e3}),p.start())})),g=!0)},o(e){p&&p.invalidate(),m=qh(t,Of,{x:100,duration:1e3}),g=!1},d(n){n&&Hg(t),e[13](null),n&&m&&m.end(),h=!1,f()}}}function pD(e){let t,n,o=e[1]&&uD(e);return{c(){o&&o.c(),t=Vg()},m(e,i){o&&o.m(e,i),zg(e,t,i),n=!0},p(e,[n]){e[1]?o?(o.p(e,n),2&n&&Hh(o,1)):(o=uD(e),o.c(),Hh(o,1),o.m(t.parentNode,t)):o&&(Uh(),Fh(o,1,1,(()=>{o=null})),zh())},i(e){n||(Hh(o),n=!0)},o(e){Fh(o),n=!1},d(e){e&&Hg(t),o&&o.d(e)}}}function mD(n,o,i){let r,s,{onClose:a}=o,{icon:l}=o,{position:c="top"}=o,{registerHighlighterCallbacks:d}=o,{unregisterHighlighterCallbacks:u}=o,{textDirection:p}=o,m={top:0,bottom:0,left:0,right:0},g={height:0,width:0},h=190,f=305;const _=()=>{if(l){const e=l.getBoundingClientRect();let t={};for(const n of["top","bottom","left","right"])e[n]!==m[n]&&(t[n]=e[n]);Object.keys(t).length&&i(8,m={...m,...t});let n={};window.innerHeight!==g.height&&(n.height=window.innerHeight),window.innerWidth!==g.width&&(n.width=window.innerWidth),Object.keys(n).length&&i(9,g={...g,...n})}else i(8,m={top:0,bottom:0,left:0,right:0})};function v(){a(oe.close_icon)}hh((async()=>{d({recalculateHighlighterCoords:_});try{t({action:"dltrackOpenInputHighlighter",payload:{domainName:e.websiteData.hostname}}),_()}catch(e){console.error(e)}s=f_(r,(({clientHeight:e,clientWidth:t})=>{i(10,h=e),i(11,f=t)}))})),fh((()=>{u(),s&&s()}));return n.$$set=e=>{"onClose"in e&&i(4,a=e.onClose),"icon"in e&&i(1,l=e.icon),"position"in e&&i(0,c=e.position),"registerHighlighterCallbacks"in e&&i(5,d=e.registerHighlighterCallbacks),"unregisterHighlighterCallbacks"in e&&i(6,u=e.unregisterHighlighterCallbacks),"textDirection"in e&&i(7,p=e.textDirection)},n.$$.update=()=>{3840&n.$$.dirty&&i(0,c=(({iconCoordinates:e,viewportSize:t,highlighterHeight:n,highlighterWidth:o})=>{if(!l)return"top";const i={top:e.top>n,bottom:t.height-e.bottom>n,right:t.width-e.right>o,left:e.left>o};for(const[e,t]of Object.entries(i))if(t)return e;return"top"})({iconCoordinates:m,viewportSize:g,highlighterHeight:h,highlighterWidth:f}))},[c,l,r,v,a,d,u,p,m,g,h,f,()=>v(),function(e){Eh[e?"unshift":"push"]((()=>{r=e,i(2,r)}))}]}class gD extends Qh{constructor(e){super(),Jh(this,e,mD,pD,yg,{onClose:4,icon:1,position:0,registerHighlighterCallbacks:5,unregisterHighlighterCallbacks:6,textDirection:7})}}function hD(e){let t,n,o,i,r;return i=new Mw({props:{value:e[2].targetLanguageUserInput,showChooseLanguageOption:!0,fontSize:"sm"}}),i.$on("selection",e[5]),{c(){t=Wg("p"),n=qg(e[0]),o=Gg(),Zh(i.$$.fragment),Xg(t,"class","font-bold svelte-1bwyi2r")},m(e,s){zg(e,t,s),Pg(t,n),zg(e,o,s),Kh(i,e,s),r=!0},p(e,t){(!r||1&t)&&Jg(n,e[0]);const o={};4&t&&(o.value=e[2].targetLanguageUserInput),i.$set(o)},i(e){r||(Hh(i.$$.fragment,e),r=!0)},o(e){Fh(i.$$.fragment,e),r=!1},d(e){e&&(Hg(t),Hg(o)),Xh(i,e)}}}function fD(e){let t,n,o=(e[2].enableInputTranslation||e[1])&&hD(e);return{c(){t=Wg("div"),o&&o.c()},m(e,i){zg(e,t,i),o&&o.m(t,null),n=!0},p(e,[n]){e[2].enableInputTranslation||e[1]?o?(o.p(e,n),6&n&&Hh(o,1)):(o=hD(e),o.c(),Hh(o,1),o.m(t,null)):o&&(Uh(),Fh(o,1,1,(()=>{o=null})),zh())},i(e){n||(Hh(o),n=!0)},o(e){Fh(o),n=!1},d(e){e&&Hg(t),o&&o.d()}}}function _D(e,t,n){let o;const i=yh("deepl_settings");bg(e,i,(e=>n(2,o=e)));const r=_h();let{subHeaderText:s=chrome.i18n.getMessage("input_translation_settings_target_language")}=t,{fromShortcut:a}=t;function l(e){r("languageChanged",{lang:e})}return e.$$set=e=>{"subHeaderText"in e&&n(0,s=e.subHeaderText),"fromShortcut"in e&&n(1,a=e.fromShortcut)},[s,a,o,i,l,e=>l(e.detail.selectedOption)]}class vD extends Qh{constructor(e){super(),Jh(this,e,_D,fD,yg,{subHeaderText:0,fromShortcut:1})}}function yD(e){let t,n,o,i,r,s,a,l;const c=e[3].default,d=Eg(c,e,e[2],null);return{c(){t=Wg("div"),n=Wg("div"),o=Wg("button"),i=Gg(),r=Wg("div"),d&&d.c(),Xg(o,"type","button"),Xg(o,"class","close-icon svelte-1l51lop"),Xg(n,"class","header svelte-1l51lop"),Xg(r,"class","content"),Xg(t,"class","container svelte-1l51lop")},m(c,u){zg(c,t,u),Pg(t,n),Pg(n,o),Pg(t,i),Pg(t,r),d&&d.m(r,null),e[5](t),s=!0,a||(l=Yg(o,"click",e[4]),a=!0)},p(e,[t]){d&&d.p&&(!s||4&t)&&xg(d,c,e,e[2],s?Tg(c,e[2],t,null):$g(e[2]),null)},i(e){s||(Hh(d,e),s=!0)},o(e){Fh(d,e),s=!1},d(n){n&&Hg(t),d&&d.d(n),e[5](null),a=!1,l()}}}function wD(e,t,n){let{$$slots:o={},$$scope:i}=t;const r=_h();let s,a,l,c;hh((()=>{c=f_(l,(e=>{e.offsetHeight=s,e.offsetWidth=a}))})),fh((()=>{c&&c()}));return e.$$set=e=>{"$$scope"in e&&n(2,i=e.$$scope)},r("resize",{offsetHeight:s,offsetWidth:a}),[l,r,i,o,()=>r("close"),function(e){Eh[e?"unshift":"push"]((()=>{l=e,n(0,l)}))}]}class bD extends Qh{constructor(e){super(),Jh(this,e,wD,yD,yg,{})}}function ED(e){let t,n,o,i,r,s,a,l,c,d,u,p,m,g,h,f,_,v=chrome.i18n.getMessage("input_translation_setting_button_ok")+"";return r=new Ox({props:{name:"disable_input_translation",id:G.disablePerSite,value:G.disablePerSite,cssClassName:"radio--with-border",checked:e[5]===G.disablePerSite,label:chrome.i18n.getMessage("input_translation_setting_radio_disable_per_site"),dataQa:"input-translation_hide-icon_disable-per-site"}}),r.$on("change",e[12]),a=new Ox({props:{name:"disable_input_translation",id:G.disableEverywhere,value:G.disableEverywhere,cssClassName:"radio--with-border",checked:e[5]===G.disableEverywhere,label:chrome.i18n.getMessage("input_translation_setting_radio_disable_everywhere"),dataQa:"input-translation_hide-icon_disable-always"}}),a.$on("change",e[12]),{c(){t=Wg("div"),n=Wg("p"),n.textContent=`${chrome.i18n.getMessage("input_translation_setting_label_title_v2")}`,o=Gg(),i=Wg("div"),Zh(r.$$.fragment),s=Gg(),Zh(a.$$.fragment),l=Gg(),c=Wg("div"),d=Wg("span"),d.textContent=`${chrome.i18n.getMessage("input_translation_setting_link_cancel")}`,u=Gg(),p=Wg("button"),m=qg(v),Xg(n,"class","font-bold svelte-1wmfpok"),Xg(i,"class","option-container svelte-1wmfpok"),Xg(d,"class","link svelte-1wmfpok"),Xg(p,"class",g=Cg("btn btn-primary "+(e[5]?"":"disabled"))+" svelte-1wmfpok"),Xg(p,"data-qa","input-translation_hide-icon_accept"),Xg(c,"class","action-container svelte-1wmfpok"),Xg(t,"class","dl-widget svelte-1wmfpok"),Xg(t,"data-qa","dl-input-translate-turnoff-settings")},m(g,v){zg(g,t,v),Pg(t,n),Pg(t,o),Pg(t,i),Kh(r,i,null),Pg(i,s),Kh(a,i,null),Pg(t,l),Pg(t,c),Pg(c,d),Pg(c,u),Pg(c,p),Pg(p,m),h=!0,f||(_=[Yg(d,"click",(function(){vg(e[1]===oD.inputSettings?e[8]:e[9])&&(e[1]===oD.inputSettings?e[8]:e[9]).apply(this,arguments)})),Yg(p,"click",e[11])],f=!0)},p(t,n){e=t;const o={};32&n[0]&&(o.checked=e[5]===G.disablePerSite),r.$set(o);const i={};32&n[0]&&(i.checked=e[5]===G.disableEverywhere),a.$set(i),(!h||32&n[0]&&g!==(g=Cg("btn btn-primary "+(e[5]?"":"disabled"))+" svelte-1wmfpok"))&&Xg(p,"class",g)},i(e){h||(Hh(r.$$.fragment,e),Hh(a.$$.fragment,e),h=!0)},o(e){Fh(r.$$.fragment,e),Fh(a.$$.fragment,e),h=!1},d(e){e&&Hg(t),Xh(r),Xh(a),f=!1,_g(_)}}}function SD(e){let t,n,o,i,r;n=new vD({props:{fromShortcut:e[2]}}),n.$on("languageChanged",e[22]);let s=e[6]&&e[6].targetLanguageUserInput&&TD(e);return{c(){t=Wg("div"),Zh(n.$$.fragment),o=Gg(),s&&s.c(),i=Vg(),Xg(t,"class","dl-widget svelte-1wmfpok")},m(e,a){zg(e,t,a),Kh(n,t,null),zg(e,o,a),s&&s.m(e,a),zg(e,i,a),r=!0},p(e,t){const o={};4&t[0]&&(o.fromShortcut=e[2]),n.$set(o),e[6]&&e[6].targetLanguageUserInput?s?s.p(e,t):(s=TD(e),s.c(),s.m(i.parentNode,i)):s&&(s.d(1),s=null)},i(e){r||(Hh(n.$$.fragment,e),r=!0)},o(e){Fh(n.$$.fragment,e),r=!1},d(e){e&&(Hg(t),Hg(o),Hg(i)),Xh(n),s&&s.d(e)}}}function TD(e){let t,n,o,i,r,s,a,l;return{c(){t=Wg("div"),n=Wg("div"),o=Wg("div"),i=Wg("span"),i.textContent=`${chrome.i18n.getMessage("input_translation_link_more_settings")}`,r=Gg(),s=Wg("span"),Xg(s,"class","icon icon-external-link svelte-1wmfpok"),Xg(o,"class","link link-settings svelte-1wmfpok"),Xg(o,"data-qa","dl-input-translate-open-settings-page"),Xg(n,"class","action-container svelte-1wmfpok"),Xg(t,"class","dl-widget svelte-1wmfpok")},m(c,d){zg(c,t,d),Pg(t,n),Pg(n,o),Pg(o,i),Pg(o,r),Pg(o,s),a||(l=Yg(o,"click",e[10]),a=!0)},p:mg,d(e){e&&Hg(t),a=!1,l()}}}function xD(e){let t,n,o,i;const r=[SD,ED],s=[];function a(e,t){return e[3]===oD.generalSettings?0:e[3]===oD.inputSettings?1:-1}return~(t=a(e))&&(n=s[t]=r[t](e)),{c(){n&&n.c(),o=Vg()},m(e,n){~t&&s[t].m(e,n),zg(e,o,n),i=!0},p(e,i){let l=t;t=a(e),t===l?~t&&s[t].p(e,i):(n&&(Uh(),Fh(s[l],1,1,(()=>{s[l]=null})),zh()),~t?(n=s[t],n?n.p(e,i):(n=s[t]=r[t](e),n.c()),Hh(n,1),n.m(o.parentNode,o)):n=null)},i(e){i||(Hh(n),i=!0)},o(e){Fh(n),i=!1},d(e){e&&Hg(o),~t&&s[t].d(e)}}}function $D(e){let t,n,o,i;return n=new bD({props:{$$slots:{default:[xD]},$$scope:{ctx:e}}}),n.$on("close",e[23]),{c(){t=Wg("div"),Zh(n.$$.fragment),Xg(t,"class",o="settings-container settings-container__"+e[0]+" svelte-1wmfpok")},m(o,r){zg(o,t,r),Kh(n,t,null),e[24](t),i=!0},p(e,r){const s={};110&r[0]|1&r[1]&&(s.$$scope={dirty:r,ctx:e}),n.$set(s),(!i||1&r[0]&&o!==(o="settings-container settings-container__"+e[0]+" svelte-1wmfpok"))&&Xg(t,"class",o)},i(e){i||(Hh(n.$$.fragment,e),i=!0)},o(e){Fh(n.$$.fragment,e),i=!1},d(o){o&&Hg(t),Xh(n),e[24](null)}}}function CD(e,n,o){let i;const r=_h();let s=oD.generalSettings;const a=yh("deepl_settings");bg(e,a,(e=>o(6,i=e)));let l,c,{startPage:d}=n,{fromShortcut:u=!1}=n,{icon:p}=n,{position:m="top"}=n,{registerSettingsCallbacks:g}=n,{unregisterSettingsCallbacks:h}=n,{closeSettings:f}=n,_={top:0,bottom:0,left:0,right:0},v={height:0,width:0},y=140,w=387,b="";const E=()=>{if(p){const e=p.getBoundingClientRect();let t={};for(const n of["top","bottom","left","right"])e[n]!==_[n]&&(t[n]=e[n]);Object.keys(t).length&&o(18,_={..._,...t});let n={};window.innerHeight!==v.height&&(n.height=window.innerHeight),window.innerWidth!==v.width&&(n.width=window.innerWidth),Object.keys(n).length&&o(19,v={...v,...n})}else o(18,_={top:0,bottom:0,left:0,right:0})};return hh((()=>{E(),g({recalculateSettingsCoords:E}),c=f_(l,(({clientHeight:e,clientWidth:t})=>{o(20,y=e),o(21,w=t)}))})),fh((()=>{h(),c&&c()})),e.$$set=e=>{"startPage"in e&&o(1,d=e.startPage),"fromShortcut"in e&&o(2,u=e.fromShortcut),"icon"in e&&o(13,p=e.icon),"position"in e&&o(0,m=e.position),"registerSettingsCallbacks"in e&&o(14,g=e.registerSettingsCallbacks),"unregisterSettingsCallbacks"in e&&o(15,h=e.unregisterSettingsCallbacks),"closeSettings"in e&&o(16,f=e.closeSettings)},e.$$.update=()=>{3932160&e.$$.dirty[0]&&o(0,m=(({iconCoordinates:e,viewportSize:t,popupHeight:n,popupWidth:o})=>{if(!p)return"top";const i={top:e.top>n,bottom:t.height-e.bottom>n,right:t.width-e.right>o,left:e.left>o};for(const[e,t]of Object.entries(i))if(t)return e;return"top"})({iconCoordinates:_,viewportSize:v,popupHeight:y,popupWidth:w})),2&e.$$.dirty[0]&&d&&o(3,s=d)},[m,d,u,s,l,b,i,a,function(){r("close")},function(){var e;o(5,b=""),e=oD.generalSettings,o(3,s=e)},function(){t({action:"dlOpenInternalPage",payload:{destination:tS.settings_writing}})},function(){if(!b)return;switch(b){case G.disableEverywhere:a.set({enableInputTranslation:!1}),t({action:"dlTrackSettingChanged",payload:{settingType:G.disableEverywhere,domainName:window.location.hostname,uiFunction:V,uiLocation:U.inputTranslationSettingPopup}}),f();break;case G.disablePerSite:!function(){let e=i.blacklistDomainsForWriting;e&&!e.includes(window.location.hostname)&&(e.push(window.location.hostname),a.set({blacklistDomainsForWriting:e}),t({action:"dlTrackSettingChanged",payload:{settingType:G.disablePerSite,domainName:window.location.hostname,uiFunction:V,uiLocation:U.inputTranslationSettingPopup}}));f()}()}let e=ME(window.location.hostname,["www."]);t({action:"dlSendNotification",payload:{type:P.inputTranslation,options:{theme:B.green_theme,currentDomain:e,saveAction:b,settingsPageURL:tS.settings_writing}}})},function(e){o(5,b=e.currentTarget.value)},p,g,h,f,E,_,v,y,w,function(t){wh.call(this,e,t)},function(t){wh.call(this,e,t)},function(e){Eh[e?"unshift":"push"]((()=>{l=e,o(4,l)}))}]}class kD extends Qh{constructor(e){super(),Jh(this,e,CD,$D,yg,{startPage:1,fromShortcut:2,icon:13,position:0,registerSettingsCallbacks:14,unregisterSettingsCallbacks:15,closeSettings:16,recalculateSettingsCoords:17},null,[-1,-1])}get recalculateSettingsCoords(){return this.$$.ctx[17]}}function LD(e){let t,n,o,i,r,s;return n=new Cy({props:{error:e[1],config:{small:!0},close:e[2]}}),{c(){t=Wg("div"),Zh(n.$$.fragment),Xg(t,"class",o="error-container error-container__"+e[0]+" svelte-16e3fjt")},m(o,a){zg(o,t,a),Kh(n,t,null),e[12](t),i=!0,r||(s=[Lg(c_.call(null,t,{isShadow:!0})),Yg(t,"click_outside",e[13])],r=!0)},p(e,[r]){const s={};2&r&&(s.error=e[1]),4&r&&(s.close=e[2]),n.$set(s),(!i||1&r&&o!==(o="error-container error-container__"+e[0]+" svelte-16e3fjt"))&&Xg(t,"class",o)},i(e){i||(Hh(n.$$.fragment,e),i=!0)},o(e){Fh(n.$$.fragment,e),i=!1},d(o){o&&Hg(t),Xh(n),e[12](null),r=!1,_g(s)}}}function ID(e,t,n){let o,i,{errorMessage:r}=t,{icon:s}=t,{position:a="top"}=t,{registerErrorCallbacks:l}=t,{unregisterErrorCallbacks:c}=t,{close:d}=t,u=140,p=387,m={top:0,bottom:0,left:0,right:0},g={height:0,width:0};const h=()=>{if(s){const e=s.getBoundingClientRect();let t={};for(const n of["top","bottom","left","right"])e[n]!==m[n]&&(t[n]=e[n]);Object.keys(t).length&&n(10,m={...m,...t});let o={};window.innerHeight!==g.height&&(o.height=window.innerHeight),window.innerWidth!==g.width&&(o.width=window.innerWidth),Object.keys(o).length&&n(11,g={...g,...o})}else n(10,m={top:0,bottom:0,left:0,right:0})};hh((()=>{h(),l({recalculateErrorCoords:h}),i=f_(o,(({clientHeight:e,clientWidth:t})=>{n(8,u=e),n(9,p=t)}))})),fh((()=>{c(),i&&i()}));return e.$$set=e=>{"errorMessage"in e&&n(1,r=e.errorMessage),"icon"in e&&n(4,s=e.icon),"position"in e&&n(0,a=e.position),"registerErrorCallbacks"in e&&n(5,l=e.registerErrorCallbacks),"unregisterErrorCallbacks"in e&&n(6,c=e.unregisterErrorCallbacks),"close"in e&&n(2,d=e.close)},e.$$.update=()=>{3840&e.$$.dirty&&n(0,a=(({iconCoordinates:e,viewportSize:t,highlighterHeight:n,highlighterWidth:o})=>{if(!s)return"top";const i={top:e.top>n,bottom:t.height-e.bottom>n,right:t.width-e.right>o,left:e.left>o};for(const[e,t]of Object.entries(i))if(t)return e;return"top"})({iconCoordinates:m,viewportSize:g,popupHeight:u,popupWidth:p}))},[a,r,d,o,s,l,c,h,u,p,m,g,function(e){Eh[e?"unshift":"push"]((()=>{o=e,n(3,o)}))},()=>d()]}class AD extends Qh{constructor(e){super(),Jh(this,e,ID,LD,yg,{errorMessage:1,icon:4,position:0,registerErrorCallbacks:5,unregisterErrorCallbacks:6,close:2,recalculateErrorCoords:7})}get recalculateErrorCoords(){return this.$$.ctx[7]}}function MD(e){let t,n,o;return{c(){t=Wg("div")},m(i,r){zg(i,t,r),n||(o=[Yg(t,"click_outside",e[16]),Lg(c_.call(null,t,{isShadow:!0}))],n=!0)},p:mg,i:mg,o:mg,d(e){e&&Hg(t),n=!1,_g(o)}}}function RD(e){let t,n,o,i,r,s,a,l,c,d,u,p,m;o=new dD({props:{inputArea:e[1],lockActiveElement:e[17],openSettings:e[20],closeSettings:e[21],hideOnboardingHighlighter:e[18],registerIconCallbacks:e[22],unregisterIconCallbacks:e[23],getActiveElement:e[19],isInputAreaRTL:e[9],setErrorMessage:e[34]}});let g=e[3]&&OD(e),h=e[4]&&ND(e),f=e[7]&&DD(e);return{c(){t=Wg("div"),n=Wg("div"),Zh(o.$$.fragment),i=Gg(),g&&g.c(),r=Gg(),h&&h.c(),s=Gg(),f&&f.c(),Xg(n,"class","dl-input-placeholder svelte-d7i1bp"),ih(n,"disabled",e[12]),ih(n,"reduced-space",!e[13]),ih(n,"other-extension-present",e[11]),ih(n,"chat-gpt-present",e[0].isChatGPTPresent),Xg(t,"class","dl-input-positioner svelte-d7i1bp"),Xg(t,"dir",c=e[9]?"rtl":"ltr"),Xg(t,"style",d=[`top: ${e[0].top}px;`,`left: ${e[0].left}px;`,`height: ${e[0].height}px;`,`width: ${e[0].width}px;`,`position: ${e[0].position};`].join(" ")),ih(t,"debug-mode",BD)},m(a,l){zg(a,t,l),Pg(t,n),Kh(o,n,null),Pg(n,i),g&&g.m(n,null),Pg(n,r),h&&h.m(n,null),Pg(n,s),f&&f.m(n,null),e[38](n),u=!0,p||(m=[Lg(c_.call(null,n,{isShadow:!0})),Yg(n,"click_outside",e[37]),Yg(n,"click",e[17])],p=!0)},p(e,i){const a={};2&i[0]&&(a.inputArea=e[1]),512&i[0]&&(a.isInputAreaRTL=e[9]),128&i[0]&&(a.setErrorMessage=e[34]),o.$set(a),e[3]?g?(g.p(e,i),8&i[0]&&Hh(g,1)):(g=OD(e),g.c(),Hh(g,1),g.m(n,r)):g&&(Uh(),Fh(g,1,1,(()=>{g=null})),zh()),e[4]?h?(h.p(e,i),16&i[0]&&Hh(h,1)):(h=ND(e),h.c(),Hh(h,1),h.m(n,s)):h&&(Uh(),Fh(h,1,1,(()=>{h=null})),zh()),e[7]?f?(f.p(e,i),128&i[0]&&Hh(f,1)):(f=DD(e),f.c(),Hh(f,1),f.m(n,null)):f&&(Uh(),Fh(f,1,1,(()=>{f=null})),zh()),(!u||4096&i[0])&&ih(n,"disabled",e[12]),(!u||8192&i[0])&&ih(n,"reduced-space",!e[13]),(!u||2048&i[0])&&ih(n,"other-extension-present",e[11]),(!u||1&i[0])&&ih(n,"chat-gpt-present",e[0].isChatGPTPresent),(!u||512&i[0]&&c!==(c=e[9]?"rtl":"ltr"))&&Xg(t,"dir",c),(!u||1&i[0]&&d!==(d=[`top: ${e[0].top}px;`,`left: ${e[0].left}px;`,`height: ${e[0].height}px;`,`width: ${e[0].width}px;`,`position: ${e[0].position};`].join(" ")))&&Xg(t,"style",d)},i(e){u||(Hh(o.$$.fragment,e),Hh(g),Hh(h),Hh(f),kh((()=>{u&&(l&&l.end(1),a=jh(n,Rf,{duration:100}),a.start())})),u=!0)},o(e){Fh(o.$$.fragment,e),Fh(g),Fh(h),Fh(f),a&&a.invalidate(),l=qh(n,Rf,{duration:150}),u=!1},d(n){n&&Hg(t),Xh(o),g&&g.d(),h&&h.d(),f&&f.d(),e[38](null),n&&l&&l.end(),p=!1,_g(m)}}}function OD(e){let t,n,o,i;return n=new gD({props:{onClose:e[18],position:"top",registerHighlighterCallbacks:e[28],unregisterHighlighterCallbacks:e[29],icon:e[2]}}),{c(){t=Wg("div"),Zh(n.$$.fragment),Xg(t,"class","dl-onboarding-highlighter svelte-d7i1bp"),Xg(t,"dir",o=e[9]?"rtl":"ltr")},m(e,o){zg(e,t,o),Kh(n,t,null),i=!0},p(e,r){const s={};4&r[0]&&(s.icon=e[2]),n.$set(s),(!i||512&r[0]&&o!==(o=e[9]?"rtl":"ltr"))&&Xg(t,"dir",o)},i(e){i||(Hh(n.$$.fragment,e),i=!0)},o(e){Fh(n.$$.fragment,e),i=!1},d(e){e&&Hg(t),Xh(n)}}}function ND(e){let t,n;return t=new kD({props:{icon:e[2],startPage:e[5],fromShortcut:e[6],position:"top",registerSettingsCallbacks:e[24],unregisterSettingsCallbacks:e[25],closeSettings:e[21]}}),t.$on("languageChanged",e[35]),t.$on("close",e[21]),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};4&n[0]&&(o.icon=e[2]),32&n[0]&&(o.startPage=e[5]),64&n[0]&&(o.fromShortcut=e[6]),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function DD(e){let t,n;return t=new AD({props:{errorMessage:e[7],icon:e[2],position:"top",registerErrorCallbacks:e[26],unregisterErrorCallbacks:e[27],close:e[36]}}),{c(){Zh(t.$$.fragment)},m(e,o){Kh(t,e,o),n=!0},p(e,n){const o={};128&n[0]&&(o.errorMessage=e[7]),4&n[0]&&(o.icon=e[2]),128&n[0]&&(o.close=e[36]),t.$set(o)},i(e){n||(Hh(t.$$.fragment,e),n=!0)},o(e){Fh(t.$$.fragment,e),n=!1},d(e){Xh(t,e)}}}function PD(e){let t,n,o,i;const r=[RD,MD],s=[];function a(e,t){return e[10]&&e[0]&&e[14]?0:1}return t=a(e),n=s[t]=r[t](e),{c(){n.c(),o=Vg()},m(e,n){s[t].m(e,n),zg(e,o,n),i=!0},p(e,i){let l=t;t=a(e),t===l?s[t].p(e,i):(Uh(),Fh(s[l],1,1,(()=>{s[l]=null})),zh(),n=s[t],n?n.p(e,i):(n=s[t]=r[t](e),n.c()),Hh(n,1),n.m(o.parentNode,o))},i(e){i||(Hh(n),i=!0)},o(e){Fh(n),i=!1},d(e){e&&Hg(o),s[t].d(e)}}}const BD=!1;function UD(n,o,i){let r,s,a,l,c;const d=yh("deepl_settings");bg(n,d,(e=>i(33,c=e)));const u=20,p=40;let m,g,h,f,_,v,y,w,b,E,S=!1,T=!1,x=!1,$=!1,C=!1,{trackInputInjectionIfNecessary:k}=o,{registerPositionerCallbacks:L}=o,{unregisterPositionerCallbacks:I}=o,A=!1,M=[],R={top:0,left:0,height:0,width:0,position:"absolute",isLanguageToolsPresent:!1,isGrammarlyPresent:!1,isChatGPTPresent:VN()},O=!1;const N=()=>{i(1,m=document.activeElement);const e=function(e){const t=nD.find((({domain:t})=>{const n=t.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&");return new RegExp(n).test(e)}));return t||null}(window.location.href);if(e?.uniqueDataAttributes&&e.uniqueDataAttributes.length>0)for(let t of e.uniqueDataAttributes)if(m.dataset[t.key]===t.value)return;if(e?.selectors&&e.selectors.length>0)for(let t of e.selectors){const e=document.querySelector(t),n=XE(e),o=XE(m),i=n.toString()===o.toString();if(e===m||e.isSameNode(m)||i)return}M=JN({inputArea:m}),q(),k(),P()},D=()=>{S=!1},P=()=>{if(!c.isInputHighlighterShown&&!SE()){kg(d,c.isInputHighlighterShown=!0,c),i(3,T=!0);try{t({action:"dltrackOpenInputHighlighter",payload:{domainName:e.websiteData.hostname}})}catch(e){console.error(e)}}},B=(e=oe.outside_click)=>{i(3,T=!1);try{t({action:"dltrackCloseInputHighlighter",payload:{event:e}})}catch(e){console.error(e)}},z=()=>{F(),O&&(i(9,A=Ut(m)),W(),E&&E(),T&&v&&v(),x&&y&&y(),w&&w())},H=(e=document.activeElement)=>{const t=e.contentDocument;return t&&t.activeElement?H(t.activeElement):e},F=()=>{const e=H(),t=O&&!S&&e!==m,n=!O&&e&&KN(e),o=m&&!m.isConnected;!t||n||C?(C=!1,(t||o)&&(B(),i(7,f=void 0),G(),M=[],i(1,m=void 0)),n&&N()):C=!0},W=()=>{i(0,R=XN({inputArea:m}))},j=()=>{W()},q=()=>{i(10,O=!0),W();for(const e of M)e.addEventListener("scroll",j);window.addEventListener("scroll",j)},G=()=>{i(10,O=!1);for(const e of M)e.removeEventListener("scroll",j);window.removeEventListener("scroll",j),K()},Y=()=>{_&&_()},Z=({page:e,fromShortcut:n=!1}={})=>{i(5,h=e),i(6,$=n),x||(i(4,x=!0),t({action:"dlTrackInlineSettingOpened",payload:{uiFunction:V,uiLocation:U.inputTranslationTriggerIcon}}))},K=()=>{x&&i(4,x=!1)};hh((()=>{M=JN({inputArea:m}),L({processRefreshCycle:z,triggerTranslation:Y,openSettings:Z})})),fh((()=>{for(const e of M)e.removeEventListener("scroll",j);I()}));return n.$$set=e=>{"trackInputInjectionIfNecessary"in e&&i(30,k=e.trackInputInjectionIfNecessary),"registerPositionerCallbacks"in e&&i(31,L=e.registerPositionerCallbacks),"unregisterPositionerCallbacks"in e&&i(32,I=e.unregisterPositionerCallbacks)},n.$$.update=()=>{1&n.$$.dirty[0]&&i(14,r=R.height>=u),1&n.$$.dirty[0]&&i(13,s=R.height>=p),4&n.$$.dirty[1]&&i(12,a=!c.enableInputTranslation||IE(window.location.host,window.location.href)||c.blacklistDomainsForWriting.includes(window.location.host)||c.isGmailEnabled&&SE()),1&n.$$.dirty[0]&&i(11,l=R.isLanguageToolsPresent||R.isGrammarlyPresent)},[R,m,g,T,x,h,$,f,b,A,O,l,a,s,r,d,D,()=>{S=!0},B,H,Z,K,({processRefreshCycle:e,languageChanged:t,triggerTranslation:n})=>{E=e,i(8,b=t),_=n},()=>{E=void 0,i(8,b=void 0),_=void 0},({recalculateSettingsCoords:e})=>{y=e},()=>{y=void 0},({recalculateErrorCoords:e})=>{w=e},()=>{w=void 0},({recalculateHighlighterCoords:e})=>{v=e},()=>{v=void 0},k,L,I,c,e=>{i(7,f=e)},e=>b&&b(e.detail.lang),()=>{i(7,f=void 0)},()=>{D(),K()},function(e){Eh[e?"unshift":"push"]((()=>{g=e,i(2,g)}))}]}class zD extends Qh{constructor(e){super(),Jh(this,e,UD,PD,yg,{trackInputInjectionIfNecessary:30,registerPositionerCallbacks:31,unregisterPositionerCallbacks:32},null,[-1,-1])}}function HD(e){let t,n,o;return n=new zD({props:{trackInputInjectionIfNecessary:e[0],registerPositionerCallbacks:e[1],unregisterPositionerCallbacks:e[2]}}),{c(){t=Wg("div"),Zh(n.$$.fragment),Xg(t,"class","dl-input-translation-container svelte-95aucy")},m(e,i){zg(e,t,i),Kh(n,t,null),o=!0},p:mg,i(e){o||(Hh(n.$$.fragment,e),o=!0)},o(e){Fh(n.$$.fragment,e),o=!1},d(e){e&&Hg(t),Xh(n)}}}function FD(e,n,o){let i,r,s,a;vh("deepl_settings",nf),vh("deepl_website_settings",yw),vh("text_direction",Bt());let l=!0,c=!1;const d=()=>{i&&i()},u=async(e,t,n)=>{if("dlChangeActiveTabStatus"===e.action)o(5,l=e.payload.isActive),n();return!0},p=()=>{a&&clearInterval(a),a=setInterval(d,300)},m=()=>{clearInterval(a)};return hh((()=>{p(),chrome.runtime.onMessage.addListener(u)})),fh((()=>{a&&m(),chrome.runtime.onMessage.removeListener(u)})),e.$$.update=()=>{32&e.$$.dirty&&(l?p():m())},[()=>{c||(c=!0,t({action:"dlTrackInputTranslationInjection",payload:window.location.host}))},({processRefreshCycle:e,triggerTranslation:t,openSettings:n})=>{i=e,r=t,s=n},()=>{i=void 0,r=void 0,s=void 0},()=>{r&&r()},()=>{s&&s({fromShortcut:!1})},l]}class WD extends Qh{constructor(e){super(),Jh(this,e,FD,HD,yg,{triggerTranslation:3,openSettingsFromShortcut:4})}get triggerTranslation(){return this.$$.ctx[3]}get openSettingsFromShortcut(){return this.$$.ctx[4]}}class jD{static HTML_TAG_NAME="deepl-input-controller";static createElement=(e=document)=>{const t=e.createElement(jD.HTML_TAG_NAME),n=new jD(t);return t.createDOM=n.createDOM,t.cleanupDOM=n.cleanupDOM,t.triggerTranslation=n.triggerTranslation,t.openSettingsFromShortcut=n.openSettingsFromShortcut,t};constructor(e){this.domElement=e,this.domElement.shadow=this.domElement.attachShadow({mode:"open"}),this.domElement.shadowContainer=document.createElement("div"),this.domElement.shadowContainer.dir="ltr",this.domElement.mainComponent;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.runtime.getURL("build/content.css"));this.domElement.shadowContainer.style.cssText="visibility: initial !important;",this.domElement.shadow.appendChild(t),this.domElement.shadow.appendChild(this.domElement.shadowContainer)}createDOM=()=>{this.domElement.mainComponent=new WD({target:this.domElement.shadowContainer,props:{onClose:this.domElement.cleanupDOM,controller:this.domElement}})};triggerTranslation=()=>{this.domElement.mainComponent.triggerTranslation()};openSettingsFromShortcut=()=>{this.domElement.mainComponent.openSettingsFromShortcut()};cleanupDOM(){this.domElement.shadowContainer.remove(),this.domElement.mainComponent&&this.domElement.mainComponent.$destroy()}}let qD,GD,VD,YD,ZD,KD,XD,JD=0,QD=[];const eP=yw.subscribe((e=>{qD=e.translationState,e.translatedDOM&&(QD=e.translatedDOM.map((e=>e))),e.translationState!==ZD&&(ZD=e.translationState,qD===d.showOriginal&&nP())})),tP=nf.subscribe((e=>{if(0!==Object.keys(e).length){if(KD=e.isLoggedIn,XD=e.translatorServiceType,YD&&YD!==e.selectedTargetLanguage){const e=qD!==d.none;e&&nP(),yw.update({translatedDOM:[]}),QD=[],e&&yw.update({translationState:d.none})}YD=e.selectedTargetLanguage}}));function nP(){QD.forEach((e=>{uP(e.original,e.clone),cP(e.original,e.clone),oP(e.original,!1)})),VD&&(VD.disconnect(),VD=void 0),GD&&(document.removeEventListener("scroll",GD),GD=void 0),qD=d.none}function oP(e,t){if("#text"!=e.nodeName&&"#comment"!=e.nodeName&&e.dataset){e.dataset.dlTranslated=t;for(var n=0;n<e.childNodes.length;++n)oP(e.childNodes[n],t)}}async function iP(e,n,o){try{const i=e.contentDocument||e.contentWindow.document;if(!e||!function(e){return!!e.contentDocument&&gP(e,.3)}(e))return;const r=[];if(hP(r,i.documentElement),0===r.length)return;await fP(r,n.sourceLang,n.noTranslationLanguages,n.trigger,o,window.location.hostname),e.translatedDOM=[...e.translatedDOM||[],...r];try{t({action:"dlTrackIframeTranslationSuccessful"})}catch(e){console.error(e)}}catch(e){console.error("error",e),t({action:"dlTrackIframeTranslationFailed",payload:{errorCode:e.name,errorMessage:e.message}})}}function rP(e){if(void 0!==e.dataset){void 0===e.dataset.dlUid&&(e.dataset.dlUid=JD++),void 0===e.dataset.dlOriginal&&(e.dataset.dlOriginal=!0);for(var t=0;t<e.childNodes.length;++t)rP(e.childNodes[t])}}function sP(e){if(function(e){if(!e||!e.attributes)return!1;const t=e.attributes,n=t instanceof NamedNodeMap,o=t.constructor===NamedNodeMap,i=Object.getPrototypeOf(t)===NamedNodeMap.prototype;return n&&o&&i}(e)){if(void 0!==e.attributes){var t=null;for(void 0!==e.dataset&&void 0!==e.dataset.dlUid&&(t=e.dataset.dlUid);e.attributes.length>0;)e.removeAttribute(e.attributes[0].name);null!==t&&(e.dataset.dlUid=t)}for(var n=0;n<e.childNodes.length;++n)sP(e.childNodes[n])}}function aP(e,t){rP(t);var n=t.cloneNode(!0);sP(n),e.push({original:t,clone:n}),oP(t,!0)}function lP(e,t){if(void 0===t.dataset)return null;if(e.dataset&&e.dataset.dlUid&&t.dataset.dlUid&&e.dataset.dlUid===t.dataset.dlUid)return e;for(var n=0;n<e.childNodes.length;++n){var o=lP(e.childNodes[n],t);if(null!==o)return o}return null}function cP(e,t){for(var n=[];e.childNodes.length>0;)n.push(e.removeChild(e.childNodes[0]));for(;t.childNodes.length>0;)e.appendChild(t.childNodes[0]);for(var o=0;o<n.length;++o)t.appendChild(n[o])}function dP(e,t){if(null!==e.parentNode&&null!==t.parentNode){var n=document.createElement("div");e.parentNode.replaceChild(n,e),t.parentNode.replaceChild(e,t),n.parentNode.replaceChild(t,n),cP(e,t)}}function uP(e,t){for(var n=0;n<t.childNodes.length;++n){var o,i=t.childNodes[n],r=lP(e,i);if(r)dP(o=r.dataset&&"true"===r.dataset.dlOriginal?r:r.cloneNode(!1),i),uP(e,o);else uP(e,i)}}function pP(t,n=!0){if("#text"==t.nodeName||"#comment"==t.nodeName)return!1;if(!GN(t,e.websiteData.hostname))return!1;if(t.isContentEditable&&n)return!1;if(function(e){switch(e.tagName.toLowerCase()){case"input":return"submit"!==e.getAttribute("type");case"textarea":return!0;default:return!1}}(t))return!1;if(KE(t))return!1;for(var o=0;o<t.childNodes.length;++o){if("#text"==(i=t.childNodes[o]).nodeName&&""!=i.wholeText.trim()||"font"==i.nodeName)return!0}for(o=0;o<t.childNodes.length;++o){var i;if("#text"!=(i=t.childNodes[o]).nodeName&&"#comment"!=i.nodeName&&(!ZE(i)||KE(i)||"inline"!=window.getComputedStyle(i).display||HE(t)))return!1}return void 0!==t.innerText&&""!=t.innerText.trim()}function mP(e){if(void 0!==e.dataset&&(void 0===e.dataset.dlTranslated||"false"===e.dataset.dlTranslated))return!1;for(var t=0;t<e.childNodes.length;++t){var n=e.childNodes[t];if("#text"!=n.nodeName&&"#comment"!=n.nodeName&&!mP(n))return!1}return!0}function gP(e,t){var n=e.getBoundingClientRect(),o=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight;if(n.bottom<0-i*t||n.right<0-o*t)return!1;if(n.top>i*(1+t))return!1;if(n.left>o*(1+t))return!1;var r=window.getComputedStyle(e).position;return"absolute"===r||"fixed"===r||null!==e.offsetParent}function hP(e,t){if("#text"!=t.nodeName&&"#comment"!=t.nodeName&&!function(e){if("no"==e.getAttribute("translate"))return!0;var t=e.className;return!(null==t||null==t.split||!t.split(" ").includes("notranslate"))}(t))if(pP(t))gP(t,.3)&&!mP(t)&&aP(e,t);else for(var n=0;n<t.childNodes.length;++n)hP(e,t.childNodes[n])}async function fP(e,n,o,i,r,s){if(e.length>0)return t({action:"dlRequestHtmlTranslation",payload:{sourceLang:n,trigger:i,texts:e.map((e=>dt(e.clone.innerHTML))),isFirstTime:r,domainName:s}}).then((t=>{for(var n=0;n<e.length;++n)e[n].clone.innerHTML=dt(t[n]),uP(e[n].original,e[n].clone),cP(e[n].original,e[n].clone),oP(e[n].original,!0)}))}async function _P(e,t){if(!Ke({isLoggedIn:KD,translatorServiceType:XD},ye.TRANSLATOR))return;const n=[];try{hP(n,document.documentElement);try{document.querySelectorAll("iframe").forEach((n=>iP(n,e,t)))}catch(e){console.error}if(0===n.length)return;yw.update({translationState:d.ongoingTranslation}),await fP(n,e.sourceLang,e.noTranslationLanguages,e.trigger,t,window.location.hostname)}catch(e){console.error("error",e);for(var o=0;o<n.length;++o)oP(n[o].original,!1);return yw.update({translationState:d.none,error:e.name?e.name:e}),VD&&VD.disconnect,void(GD&&document.removeEventListener("scroll",GD))}yw.update({translationState:d.isTranslationComplete}),n.length>0&&yw.update({translatedDOM:[...QD,...n]})}async function vP(e){VD&&(VD.disconnect(),VD=void 0),GD&&(document.removeEventListener("scroll",GD),GD=void 0);let t,n,o=!1;QD.length>0?(yw.update({translationState:d.ongoingTranslation}),nP(),QD.forEach((e=>{cP(e.original,e.clone),cP(e.original,e.clone),oP(e.original,!0)})),yw.update({translationState:d.isTranslationComplete})):o=!0,await _P(e,o),GD=async()=>{n=!0,window.clearTimeout(t),t=setTimeout((function(){qD===d.isTranslationComplete&&window.requestAnimationFrame((async()=>{await _P(e,!1),n=!1}))}),100)},document.addEventListener("scroll",GD),VD=new MutationObserver((t=>{if(n)return;if(qD!==d.isTranslationComplete)return;t.filter((e=>e.addedNodes&&e.addedNodes.length>0)).length>0&&window.requestAnimationFrame((async()=>{await _P(e,!1)}))})),VD.observe(document.body,{childList:!0,subtree:!0}),d_((()=>{eP(),tP(),VD&&VD.disconnect(),GD&&document.removeEventListener("scroll",GD)}))}const yP=n=>{if(n.targetLang&&window.getSelection()&&window.getSelection().toString()){var o=window.getSelection().toString();document.getElementsByTagName("deepl-inline-translate-tooltip").length||vN({websiteData:yw}),yw.update({translationState:d.ongoingTranslation,translatedSnippet:"",snippetDetectedSourceLang:"",translatedDOMSnippet:"",originalSnippet:""}),t({action:"dlRequestInlineTranslation",payload:{requests:[{text:o}],domainName:window.location.hostname,trigger:h,sourceLang:"auto",websiteLanguage:e.websiteData.websiteLanguage}}).then((e=>{yw.update({translationState:d.none,translatedSnippet:e[0].text,snippetDetectedSourceLang:e[0].detected_source_language,originalSnippet:o,websiteLanguage:e[0].detected_source_language})})).catch((e=>{yw.update({translationState:d.none,originalSnippet:o,error:e.message?e.message:e})}))}},wP=async e=>{const n=await t({action:"dlGetAppSettings"});let o=window.getSelection().anchorNode;"#text"===o.nodeName.toLowerCase()&&(o=o.parentNode);const i="textarea"===o.nodeName.toLowerCase(),r=o.closest('[contenteditable="true"]'),s=o.closest("textarea"),a=o.querySelector("textarea"),l=a&&a.selectionStart!==a.selectionEnd,c=i&&o||r||s||l&&a;c?((e,t,n)=>{const o=document.querySelector(jD.HTML_TAG_NAME);o&&(t?o.openSettingsFromShortcut():n?o.triggerTranslation():o.openSettingsFromShortcut())})(0,e,n.targetLanguageUserInput):yP({targetLang:n.selectedTargetLanguage}),t({action:"dlTrackRightClick",payload:{translationType:c?g:m,domainName:window.location.host}})},bP=async(e,n)=>{yN(),_N();const o=await t({action:"dlGetAppSettings"});var i;vP({sourceLang:e,trigger:n,isFirstTime:!0,noTranslationLanguages:(i=o.languagesForTranslation,Object.keys(i).filter((e=>{i[e]})))}).catch((e=>{yw.update({translationState:d.none,error:e.message?e.message:e})}))},EP=async(e,t)=>{let n=5e3;if(t===ye.WRITE&&(n=2e3),e.length<=n)return!1;const o=await RP();return!Ke(o,t)},SP=async(e,t)=>{const n=e.length,o=await RP(),i=Ke(o,ye.TRANSLATOR),r=Ke(o,ye.WRITE);if(t===re.write){const e=o.isLoggedIn?S:E;if(i&&!r&&n>e)throw new Cf(e,"Char limit exceeded (Translator Pro, Write Free)");if(!r&&n>e)throw new $f(e,"Char limit exceeded (Write Free Or Anonymous)")}if(!o.isLoggedIn&&n>w)throw new xf(w,"Limit exceeded (anonymous user). Please upgrade");if(o.isLoggedIn&&!Ke(o,ye.TRANSLATOR)&&n>b)throw new Tf(b,"Limit exceeded (free account). Please upgrade")},TP=async e=>{const{event:n,targetLang:o}=e,i=document.querySelector("deepl-gdocs-icon");if(o&&i){const{originalText:e,textLines:r,entities:s,contentReference:a,originalObject:l}=vt(n);if(document.getElementsByTagName("deepl-inline-translate-tooltip").length||vN({websiteData:yw,platformBehaviour:ie.gdocs}),await EP(e,ye.TRANSLATOR))return void yw.update({translationState:d.anonymousUserMaxCharExceeded,translatedSnippet:"",originalSnippet:e});yw.update({translationState:d.ongoingTranslation,translatedSnippet:"",snippetDetectedSourceLang:"",translatedDOMSnippet:"",originalSnippet:""});try{const n=await t({action:"dlRequestGDocsSplitText",payload:{mode:QC.TRANSLATE,texts:r}}),c=n.result.lang.detected,u=[],p=[];for(const e of n.result.texts){const t=[];for(const n of e.chunks)for(const e of n.sentences)p.push(e),t.push(p.length-1);u.push(t)}const m=(await t({action:"dlRequestGDocsProcessContent",payload:{mode:QC.TRANSLATE,sentences:p,sourceLang:c,targetLang:o.substring(0,2),domain:window.location.host}})).result.translations.map(((e,t)=>({prefix:p[t].prefix,text:e.beams[0].sentences[0].text})));i.setContentProcessBuildingBlocks({detectedSourceLanguage:c,targetLang:o.substring(0,2),sentences:p,processedSentences:m,textLines:r,textLinesComponents:u,entities:s,contentReference:a,originalObject:l}),yw.update({translationState:d.none,translatedSnippet:"GDOCS_CONTENT",snippetDetectedSourceLang:c,originalSnippet:e,websiteLanguage:c})}catch(t){console.error(t),yw.update({translationState:d.none,originalSnippet:e,error:t.message?t.message:t})}}},xP=async({event:e,lang:n})=>{const{originalText:o,textLines:i,entities:r,contentReference:s,originalObject:a}=vt(e);document.getElementsByTagName("deepl-inline-translate-tooltip").length||vN({websiteData:yw,platformBehaviour:ie.gdocs,textProcessingMode:re.write});const l=document.querySelector("deepl-gdocs-icon"),c={lang:n,sourceLength:o.length,targetLength:0,nicheIntegration:ie.gdocs,error:""};if(await EP(o,ye.WRITE))return yw.update({translationState:d.anonymousUserMaxCharExceeded,translatedSnippet:"",originalSnippet:o}),void(l&&l.setDeeplWriteTrackingData(c));yw.update({translationState:d.ongoingTranslation,translatedSnippet:"",snippetDetectedSourceLang:"",translatedDOMSnippet:"",originalSnippet:""});try{const e=await t({action:"dlRequestGDocsSplitText",payload:{mode:QC.WRITE,texts:i}}),n=e.result.lang.detected,u=[],p=[];for(const t of e.result.texts){const e=[];for(const n of t.chunks)for(const t of n.sentences)p.push(t),e.push(p.length-1);u.push(e)}const m=(await t({action:"dlRequestGDocsProcessContent",payload:{mode:QC.WRITE,sentences:p,sourceLang:n,targetLang:n,domain:window.location.host}})).result.translations.map(((e,t)=>({prefix:p[t].prefix,text:e.beams[0].sentences[0].text})));l.setContentProcessBuildingBlocks({detectedSourceLanguage:n,targetLang:n,sentences:p,processedSentences:m,textLines:i,textLinesComponents:u,entities:r,contentReference:s,originalObject:a}),l.setDeeplWriteTrackingData(c),yw.update({translationState:d.none,translatedSnippet:"GDOCS_CONTENT",snippetDetectedSourceLang:n,originalSnippet:o,websiteLanguage:n}),HP({eventType:be,...c})}catch(e){const t=e.message?e.message:e;yw.update({translationState:d.none,originalSnippet:o,error:t}),HP({eventType:Ce,...c,error:t})}},$P=async e=>{const{sentences:n,targetLang:o,sourceLang:i,mode:r}=e;if(o){await SP(n.join(""),r);try{const e=await t({action:"dlRequestInputTranslation",payload:{requests:n.map((e=>({text:e}))),domainName:window.location.hostname,websiteLanguage:o,targetLang:o,sourceLang:i,platformBehavior:ie.gslides,isHtml:!0,isWriteRequest:r===re.write}}),s=e[0]?.texts;return s}catch(e){throw console.error(e),Error(e)}}},CP=async({event:e,targetLang:n,sourceLang:o,mode:i})=>{if(n){const{textLines:n,entities:r,contentReference:s,originalObject:a}=vt(e);await SP(n.join(""),i);try{const e=await t({action:"dlRequestInlineTranslation",payload:{requests:n.map((e=>({text:e}))),domainName:window.location.hostname,trigger:h,sourceLang:o,nicheIntegration:ie.gslides,isWriteRequest:i===re.write}}),{processedText:l,processedEntities:c}=St({textLines:e.map((e=>e.text)),entities:r,contentReference:s});return kt({entities:c,text:l,originalObject:a})}catch(e){console.error(e)}}},kP=async e=>{const{element:n,targetLang:o}=e;let i,r="";if(o){const{domElements:s,strings:a,tmpElementMap:l}=(e=>{const t=[],n=[],o={};return jE({domElements:t,strings:n,element:e,tmpElementMap:o}),{domElements:t,strings:n,tmpElementMap:o}})(n);try{const i=await t({action:"dlRequestZendeskInputTranslation",payload:{texts:a,domainName:window.location.hostname,websiteLanguage:o,targetLang:o,...e.formality&&{formality:e.formality}}}),c=i[0]?.texts;c&&c.length>0&&(FE({strings:c,domElements:s}),(({element:e,tmpElementMap:t})=>{for(const n of Object.keys(t)){const o=e.getElementsByTagName(n);Array.from(o).forEach((e=>{const{originalTagName:o,originalAttributes:i}=t[n],r=document.createElement(o);for(const e in i)r.setAttribute(e,i[e]);r.innerHTML=dt(e.innerHTML),e.replaceWith(r)}))}})({element:n,tmpElementMap:l}),r=dt(n.innerHTML),n.innerHTML=""),t({action:"dlOnSuccessfulZendeskTranslation"})}catch(e){console.error(e),i=e}}return[r,i]},LP=async e=>{const{targetLang:n,sourceLang:o,text:i,trigger:r}=e;let s,a="";if(o&&n)try{a=await t({action:"dlRequestZendeskMessageTranslation",payload:{domainName:window.location.hostname,sourceLang:o,targetLang:n,text:i,trigger:r}})}catch(e){console.error(e),s=e}return[a,s]},IP=async()=>{let e,n=[];try{const[o,i]=await t({action:"dlRequestTermbases"});i?e=i:n=o}catch(t){console.error(t),e=t}return[n,e]},AP=async()=>{let e=document.body.innerText.substring(0,200);if(!e||1===e.length){const t=document.title;t.length>=e.length&&(e=t)}let n="";const o=await chrome.i18n.detectLanguage(e);o&&o.languages?.length>0&&(n=o.languages.sort(((e,t)=>t.percentage-e.percentage))[0].language.substr(0,2).toUpperCase());try{t({action:"dlTrackDetectLanguage",payload:{language:n,domainName:window.location.host}})}catch(e){console.error(e)}return n},MP=async()=>{let t=document.documentElement.lang;!t&&e.websiteData.websiteLanguage&&(t=e.websiteData.websiteLanguage),AE(window.location.href);{const t=async()=>{let t=document.documentElement.lang;if(!t&&e.websiteData.websiteLanguage&&(t=e.websiteData.websiteLanguage),t)return t.substr(0,2).toUpperCase();try{yw.update({translationState:d.ongoingAutoDetection});const e=await AP();return yw.update({translationState:d.none}),e}catch(e){yw.update({translationState:d.none,error:e.message?e.message:chrome.i18n.getMessage(e)})}},n=()=>{const e=document.documentElement.className;return/translated/g.test(e)},o=AE(window.location.href),i=await t();yw.update({websiteLanguage:i,hostname:window.location.hostname,isSupportedLanguage:It(i),isGoogleTranslatedActive:n(),isValidUrlForPopup:o});const r=new MutationObserver((async()=>{const e=await t();yw.update({websiteLanguage:e,isSupportedLanguage:It(e),isGoogleTranslatedActive:n(),isValidUrlForPopup:o})}));r.observe(document.documentElement,{attributes:!0,childList:!1,characterData:!1,subtree:!1,attributeFilter:["class"]}),d_((()=>{r.disconnect()}))}},RP=async()=>await t({action:"dlGetUserState"}),OP=async(n,o=!1)=>{if(n&&!n.isTrusted&&!o)return;const i=await t({action:"dlGetAppSettings"});PP(),await MP();const r=await RP();var s,a;Ke(r,ye.TRANSLATOR)&&(It(e.websiteData.websiteLanguage)&&(s=i.selectedTargetLanguage,a=e.websiteData.websiteLanguage,(At(s)!==a||e.websiteData.isGoogleTranslatedActive)&&(Nt(e.websiteData.websiteLanguage,i.languagesForTranslation,c)||i.blacklistDomains.includes(e.websiteData.hostname)||LE(window.location.host,N)||(Nt(e.websiteData.websiteLanguage,i.languagesForTranslation,l)&&bP(e.websiteData.websiteLanguage,f),i.enableFullPageTranslation&&window===window.parent&&EN()))))},NP=async()=>{await MP(),document.getElementsByTagName("deepl-input-controller").length||IN()},DP=async()=>{await MP(),BN(yw)},PP=()=>{ut()&&TN(),zt()&&xN(),jb()&&kN(),SE()&&AN()},BP=e=>{j_.set(e)},UP=async e=>{const n=()=>{for(const t of Object.keys(Q))if(Q[t]&&e.match(Q[t]))return t;if(document.querySelector("iframe#WebApplicationFrame")){const e=document.querySelector("form#frameForm, form#office_form"),t=e&&new URL(e.getAttribute("action"))?.hostname?.toLowerCase();if(t)for(const e of Object.keys(ee))if(ee[e]&&t.includes(ee[e]))return e}if("onedrive.live.com"===e)for(const e of Object.keys(te))if(te[e]&&document.querySelector(`#${te[e]}`))return e;return document.querySelector("body#jira")?"jira":document.querySelector("body#com-atlassian-confluence")?"confluence":void 0},o=n();o?t({action:"dlTrackLandingOnWebsite",payload:{website:o}}):setTimeout((()=>{const e=n();e&&t({action:"dlTrackLandingOnWebsite",payload:{website:e}})}),2e3)},zP=async({eventType:e,controller:n,sourceTextLength:o,targetTextLength:i,error:r,metaDataOverride:s={}})=>{const a=n?.getTicketLanguageInformation(),l={agentLanguage:(await t({action:"dlGetAppSettings"})).selectedTargetLanguage,ticketLanguage:a?.language,isTicketLanguageAutodetected:a?.isDetected,isTicketLanguageSupported:a?.isSupported,isAutoTranslateEnabled:n.getIsAutoTranslatedEnabled(),sourceTextLength:o,targetTextLength:i,inputHasSelection:n.getInputHasSelection(),error:r,...s};await t({action:"dlTrackZendeskCustomizationEvent",payload:{eventType:e,zendeskMetaData:l}})},HP=async({eventType:e,lang:n,sourceLength:o,targetLength:i,nicheIntegration:r=ie.default,error:s,metaDataOverride:a={}})=>{await t({action:"dlTrackDeeplWriteEvent",payload:{eventType:e,deeplWriteMetaData:{lang:n,sourceLength:o,targetLength:i,nicheIntegration:r,error:s,...a}}})};function FP(e){vw(e)}function WP(){const e=at();e&&n(P.showAdsForMSAddins,{theme:B.ads_theme,matchedWord:e})}const jP=()=>{const e=window.location.hostname.split(".");if(e.length<2)return!1;return"deepl.com"===`${e.at(-2)}.${e.at(-1)}`},qP=()=>VP()||GP(),GP=()=>{const e=new URL(window.location.href);return"https:"===e.protocol&&("service-now.com"===e.hostname||"servicenow.com"===e.hostname)},VP=()=>/\.service-now\.com$/.test(window.location.hostname),YP=()=>!jP()&&(!jb()&&!qP()),ZP=()=>!jP()&&(!jb()&&!qP());rn()||(window.addEventListener("error",(function(e){const t=e.message||e.error&&e.error.message||"";rf(t)&&e.preventDefault()})),window.addEventListener("unhandledrejection",(function(e){const t=e.reason&&e.reason.message||"";rf(t)&&e.preventDefault()})));const{client:KP,scope:XP}=Fb();if(KP.init(),rn()&&{IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.28.2",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.28.2",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.28.2",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.28.2",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.28.2",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.28.2",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.28.2",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.28.2",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.28.2",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365"},APP_VERSION:"1.28.2",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0,REVIEW_UI_WITH_ITA:!1,BATCH_TRANSLATE_HTML_REQUEST:!1}}.HOT_RELOAD.active&&!st()){new WebSocket(`ws://localhost:${{IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.28.2",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.28.2",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.28.2",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.28.2",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.28.2",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.28.2",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.28.2",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.28.2",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.28.2",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365"},APP_VERSION:"1.28.2",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0,REVIEW_UI_WITH_ITA:!1,BATCH_TRANSLATE_HTML_REQUEST:!1}}.HOT_RELOAD.webSocketServerPort}`).addEventListener("message",(e=>{"file-change"===e.data&&chrome.runtime.sendMessage("reload")}))}document.dispatchEvent(new CustomEvent("deepl-reset-event"));try{chrome.runtime.onMessage.addListener(HM),d_((()=>{yw.update({translationState:d.showOriginal}),ww(),chrome.runtime.onMessage.removeListener(HM)}))}catch(e){console.error(e),af(e,XP)}function JP(e){e.error&&rn()&&console.error(`SERVICE_WORKER_TEST: Port disconnected due to error: ${e.error.message}`),document.hasFocus()?setTimeout((()=>{QP()}),1e3):window.addEventListener("focus",QP)}async function QP(){window.removeEventListener("focus",QP);if(await zM()){const e=tn();rn()&&console.log("Connecting to background port",e);const t=chrome.runtime.connect({name:e});return WM(t),UM(t),t.onDisconnect.addListener(JP),t}}try{WN(window.location.host),UP(window.location.host),jN(window.location.href),"complete"===document.readyState?OP(null,!0):window.addEventListener("load",OP),YP()&&NP(),ZP()&&DP(),FN(window.location.host),QP(),WP()}catch(e){console.error(e),af(e,XP)}function eB(e,t,n){let o={block:"end",position:e.length};return t.forEach((t=>{const i=e.indexOf(`<${t}>`,n);i>-1&&i<o.position&&(o={block:t,position:i})})),[o.block,o.position]}function tB(e){return e.match(/[^\s.,:;'"]+|[.,:;'"]|\s+/g)||[]}function nB(e,t){const n=tB(e),o=tB(t),i=function(e,t,n){const o=n||((e,t)=>e===t),i=(()=>{let n=0;for(;o(e[n],t[n])&&n<e.length;)++n;return n})();if(i===e.length&&e.length===t.length)return[i];const r=(()=>{let n=e.length-1,r=t.length-1;for(;o(e[n],t[r])&&n>i&&r>i;)--n,--r;return e.length-n-1})(),s=e.length-i-r+1,a=t.length-i-r+1,l=s+a,c=new Map,d=new Map;c.set(1,0),d.set(1,null);for(let n=0;n<=l;++n)for(let l=-n;l<=n;l+=2){let u,p,m;for(l==-n||l!=n&&c.get(l-1)<c.get(l+1)?(u=c.get(l+1),m=[d.get(l+1),void 0,void 0]):(u=c.get(l-1)+1,m=[d.get(l-1),void 0,void 0]),p=u-l;u<s&&p<a&&o(e[u+i],t[p+i]);)++u,++p;if(u>=s&&p>=a){m[1]=s+r-1,m[2]=a+r-1;let e=-1,t=-1;const n=[];for(;m;)n.push([m[1],m[2]]),m=m[0];let o=[],l=null;for(;n.length;){const i=n.pop(),r=i[0],s=i[1],a=r-e,c=s-t,d=Math.min(a,c);a>d&&(l?l[0]+=a-d:(l=[a-d,0],o.push(l))),c>d&&(l?l[1]+=c-d:(l=[0,c-d],o.push(l))),d>0&&(o.push(d),l=null),e=r,t=s}return o[0]=o[0]-1+i,o}c.set(l,u),m[1]=u,m[2]=p,d.set(l,m)}throw new Error("[diff]","should not happen?")}(n,o),r=[];let s=0,a=0,l=0;for(;s<i.length;){const e=i[s];let t=0;for(let o=a+e-1;o>=a;o-=1)t+=n[o]?.match(/^\s/)?2:1;a+=e,l+=e;let c=0,d=0;if(a<n.length&&l<o.length&&n[a]?.match(/^\s/)&&o[l]?.match(/^\s/)&&(c-=1,d-=1,t+=1),r.push(t),s+=1,s<i.length){const[e,t]=i[s];for(let t=a+e-1;t>=a;t-=1)c+=n[t]?.match(/^\s/)?2:1;for(let e=l+t-1;e>=l;e-=1)d+=o[e]?.match(/^\s/)?2:1;r.push([Math.max(c,0),Math.max(d,0)]),s+=1,a+=e,l+=t}}return[r,n,o,i]}return e.GMAIL_CHAR_LIMIT_ANONYMOUS_USER=1500,e.GMAIL_CHAR_LIMIT_FREE_USER=ZR,e.GMAIL_INTERVAL=800,e.GMAIL_UI_ADDED_ATTRIBUTE=YR,e.autodetectLanguage=AP,e.backgroundPortListener=qM,e.buildGDocsPasteData=kt,e.calculateNewIconPosition=ft,e.canInjectInlineTranslation=ZP,e.canInjectInputTranslation=YP,e.canTranslateElementForDomain=GN,e.checkForIntersectionWithOpenDialogs=VO,e.checkIfInputHasSelection=wE,e.clearMessageControllers=vE,e.clickAtCoordinates=XO,e.clickOnElement=JO,e.createAlert=vw,e.createGmailController=AN,e.createGmailControllerUtil=()=>document.createElement(zO.HTML_TAG_NAME),e.createGoogleDocsIcon=TN,e.createGoogleSlidesController=xN,e.createHighlightsForSentence=function(e,t){const n=nB(t,e),o=[];let i=0,r=0,s=0,a=0;return n[3].forEach((e=>{if(Array.isArray(e)&&"number"==typeof e[0]&&"number"==typeof e[1]){if(0!==e[1]){const t=n[2].slice(r,r+e[1]).join(""),l=n[1].slice(i,i+e[0]).join(""),c={original:l,replace:t};c.changeLength=t.length,c.changeOffset=s,c.originalLength=l.length,c.originalOffset=a,s+=t.length,a+=l.length,o.push(c)}i+=e[0],r+=e[1]}else{let t=0;n[2].slice(r,r+e).forEach((e=>t+=e.length)),s+=t;let o=0;n[1].slice(i,i+e).forEach((e=>o+=e.length)),a+=o,i+=e,r+=e}})),o},e.createInlineTranslateSettingsTooltip=wN,e.createInlineTranslateTooltip=vN,e.createInlineTranslationTrigger=DN,e.createInlineTranslationTriggerListener=BN,e.createInputTextProcessorTrigger=PN,e.createInputTranslationController=IN,e.createNotification=UN,e.createPageLoadPopup=EN,e.createReviewTranslateWriteWindow=fN,e.createSubmitButtonTooltip=bE,e.createTicketController=Kb,e.createZendeskController=kN,e.createZendeskControllerElement=Gb,e.customizePage=FN,e.detectTicketLanguageInLiveChat=dE,e.detectTicketLanguageInTicket=cE,e.detectTicketType=iE,e.disableExtension=Qb,e.displayAds=WP,e.elementHasTranslateToolbar=GO,e.extractSentencesAndEntitiesFromData=Wt,e.findEditableContent=async function t(n,o){try{if(o.dataset&&"true"===o.dataset.dlInputTranslation||o.dataset&&"true"===o.dataset.dlNoInputTranslation)return;if("true"===o.contentEditable||"TEXTAREA"===o.nodeName&&o.rows>1){if("none"===window.getComputedStyle(o).display)return;if(!function(e){return e.getBoundingClientRect().width>0&&e.getBoundingClientRect().height>0}(o))return;if(!qN(o,e.websiteData.hostname))return;o.dataset.dlInputTranslation="true",n.push(o)}for(const e of o.childNodes)t(n,e)}catch(e){rn()&&console.error(e),af(e,ZN)}},e.findEmailToAndFromAddressTable=YO,e.findForwardButtonInDocument=tN,e.findSiblingDivWithAnyMessageId=eN,e.generateLanguagesWithShortcodeForDropdown=ZO,e.getActivePane=Yb,e.getActiveTermbases=()=>{const e=qb();return e?e.getActiveTermbases():[]},e.getBlocksFromString=function(e,t=[]){const n=[];let o=0,i=!1;for(;!i;){const[r,s]=eB(e,t,o);if("end"===r&&(i=!0),o<s&&n.push({block:"main",text:e.substring(o,s)}),i)break;const a=e.indexOf(`</${r}>`,s);-1===a?(n.push({block:r,text:e.substring(s+`<${r}>`.length)}),i=!0):(n.push({block:r,text:e.substring(s+`<${r}>`.length,a)}),o=a+`</${r}>`.length)}return n},e.getContextMessages=e=>{const t=[],n=rE(e).map(lE).map((e=>e.innerText)),o=[],i=[];for(let e=0;e<n.length;e++){const r=e%2==0?"start":"end";let s=Math.floor(e/2);if("end"===r&&(s=n.length-1-s),t.includes(s))break;if([...o,...i].reduce(((e,t)=>e+t.length),0)+n[s].length>3e3)break;"end"===r?i.unshift(n[s]):o.push(n[s]),t.push(s)}return[...o,...i]},e.getControllerFromMessage=fE,e.getCoordsOfWord=(e,t,n,o,i)=>{const r=document.createRange();if("#text"===e.nodeName)r.setStart(e,t),r.setEnd(e,t+n);else{if(!e.firstChild||"#text"!==e.firstChild.nodeName)return console.error("Invalid textNode with no child text node."),null;{const o=e.firstChild;r.setStart(o,t),r.setEnd(o,t+n)}}const s=r.getBoundingClientRect();return{top:s.top,left:s.left,right:s.right,bottom:s.bottom,original:o,replace:i,textNode:e,changeIndex:t,changeLength:n}},e.getElementCenterCoordinates=KO,e.getGDocsisEditMode=_t,e.getGmailControllerUtil=FO,e.getIFrameAndEditable=pt,e.getIconCoordinates=ht,e.getItaTranslateEnabled=zM,e.getMessageContent=lE,e.getMessageViewContainers=qO,e.getMessageWriteContainers=()=>{const e=Array.from(document.querySelectorAll('[role="textbox"]')).filter((e=>"true"===e.getAttribute("contenteditable")));return e},e.getMessagesFromTicket=rE,e.getScrollableElements=JN,e.getSelectionContent=gt,e.getSentryClient=Fb,e.getSourceLangFromSlide=Ht,e.getTermbases=IP,e.getTicketController=Zb,e.getTicketId=Vb,e.getTicketStartingMessage=sE,e.getTicketStartingMessages=aE,e.getUserState=RP,e.getWebsiteSettings=MP,e.getWordsFromSentence=xt,e.getZendeskController=qb,e.improveGDocsSelectionContent=xP,e.injectAskAReviewPopup=zN,e.injectControllerInMessage=_E,e.injectInlineTranslation=DP,e.injectInputTranslation=NP,e.injectMissingMessageControllers=hE,e.injectMissingUIElements=Xb,e.isChatGPT=VN,e.isDeepLCom=jP,e.isGDocs=ut,e.isGSlides=zt,e.isGmail=SE,e.isIncludedInTheText=function(e,t){if(!e||!t)return!1;const n=/[\n\r\s]+/gm,o=e.replace(n,""),i=t.replace(n,"");return o.includes(i)},e.isInputArea=KN,e.isOnMessageViewScreen=jO,e.isServiceNow=qP,e.isZendesk=jb,e.onOpenPage=OP,e.pageListener=HM,e.processEntityAfterTranslation=jt,e.processGDocsCopyEvent=vt,e.reassembleGDocsTranslatedResult=St,e.reconnectItaSessionIfPresent=UM,e.removeAllDeeplElements=function(){!function(e){const t=document.getElementsByTagName(e);if(!t.length)return;for(let e=t.length-1;e>=0;--e)t[e].cleanupDOM(),t[e].remove()}("deepl-input-controller")},e.removeGDocsEntities=Tt,e.removeGmailController=MN,e.removeGoogleDocsIcon=$N,e.removeGoogleSlidesController=CN,e.removeInlineTranslateSettingsTooltip=bN,e.removeInlineTranslateTooltip=yN,e.removeInlineTranslateTrigger=ON,e.removeInputTextProcessorTrigger=NN,e.removeInputTranslationController=RN,e.removePageLoadPopup=SN,e.removeRateLimitTimeout=LM,e.removeReviewTranslateWriteWindow=_N,e.removeUIElementsFromList=WO,e.removeZendeskController=LN,e.removeZendeskToolbar=EE,e.removeZendeskUIElements=Jb,e.replaceTranslatedGDocsContent=$t,e.runCustomScriptsForDomain=WN,e.runCustomScriptsForSpecificUrl=jN,e.scanForTranslatables=vP,e.sendMessageToBackgroundPort=jM,e.setBackgroundPort=WM,e.setErrorVisibility=BP,e.shouldBeTranslated=pP,e.shouldInjectInputIcon=qN,e.showAlert=FP,e.simulateGSLidesSelectAll=Ft,e.trackDeeplWriteEvent=HP,e.trackPageLandingIfNeeded=UP,e.trackZendeskCustomizationEvent=zP,e.translateGDocsSelectionContent=TP,e.translateGSlidesInbloxkSelectionContent=CP,e.translateGSlidesSelectionContent=$P,e.translateInlineText=yP,e.translateInlineTextWithITA=MM,e.translateSelectionRightClick=wP,e.translateWebsite=bP,e.translateZendeskMessage=LP,e.translateZendeskSelectionContent=kP,e.triggerCopyEvent=mt,e.twitterState=PS,e.unsubscribeToWebsiteState=ww,e.updateInputIconLanguageInformation=gE,e.updateInputPositionerCoords=XN,e.updateIntegrationPanelIfExists=yE,e.updateToolbarAutoTranslateStatus=pE,e.updateToolbarLanguageInformation=uE,e.updateTopIconLanguageInformation=mE,e.updateWebsiteStateWithError=CM,e.updateWebsiteStateWithITADocumentState=PM,e.updateWebsiteStateWithITAFormality=e=>{yw.update({formality:e})},e.updateWebsiteStateWithITASourceLanguage=NM,e.updateWebsiteStateWithITASourceLanguageAutoDetected=DM,e.updateWebsiteStateWithITATargetText=RM,e.updateWebsiteStateWithITAWriteDocumentState=BM,e.updateWebsiteStateWithITAWriteTargetText=OM,e.updateWebsiteStateWithRateLimitInfo=IM,e.waitForElement=QO,e.websiteState=yw,e.whatsAppState=pS,e.youTubeState=yT,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=content.js.map
